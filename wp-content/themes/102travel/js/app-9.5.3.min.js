
if(window.FormValidation={AddOn:{},Framework:{},I18n:{},Validator:{}},"undefined"==typeof jQuery)throw new Error("FormValidation requires jQuery");!function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(+b[0]<2&&+b[1]<9||1===+b[0]&&9===+b[1]&&+b[2]<1)throw new Error("FormValidation requires jQuery version 1.9.1 or higher")}(jQuery),function(a){FormValidation.Base=function(b,c,d){this.$form=a(b),this.options=a.extend({},a.fn.formValidation.DEFAULT_OPTIONS,c),this._namespace=d||"fv",this.$invalidFields=a([]),this.$submitButton=null,this.$hiddenButton=null,this.STATUS_NOT_VALIDATED="NOT_VALIDATED",this.STATUS_VALIDATING="VALIDATING",this.STATUS_INVALID="INVALID",this.STATUS_VALID="VALID",this.STATUS_IGNORED="IGNORED",this.DEFAULT_MESSAGE=a.fn.formValidation.DEFAULT_MESSAGE,this._ieVersion=function(){for(var a=3,b=document.createElement("div"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><br><![endif]-->",c[0];);return a>4?a:document.documentMode}();var e=document.createElement("div");this._changeEvent=9!==this._ieVersion&&"oninput"in e?"input":"keyup",this._submitIfValid=null,this._cacheFields={},this._init()},FormValidation.Base.prototype={constructor:FormValidation.Base,_exceedThreshold:function(b){var c=this._namespace,d=b.attr("data-"+c+"-field"),e=this.options.fields[d].threshold||this.options.threshold;if(!e)return!0;var f=-1!==a.inArray(b.attr("type"),["button","checkbox","file","hidden","image","radio","reset","submit"]);return f||b.val().length>=e},_init:function(){var b=this,c=this._namespace,d={addOns:{},autoFocus:this.$form.attr("data-"+c+"-autofocus"),button:{selector:this.$form.attr("data-"+c+"-button-selector")||this.$form.attr("data-"+c+"-submitbuttons"),disabled:this.$form.attr("data-"+c+"-button-disabled")},control:{valid:this.$form.attr("data-"+c+"-control-valid"),invalid:this.$form.attr("data-"+c+"-control-invalid")},err:{clazz:this.$form.attr("data-"+c+"-err-clazz"),container:this.$form.attr("data-"+c+"-err-container")||this.$form.attr("data-"+c+"-container"),parent:this.$form.attr("data-"+c+"-err-parent")},events:{formInit:this.$form.attr("data-"+c+"-events-form-init"),formPreValidate:this.$form.attr("data-"+c+"-events-form-prevalidate"),formError:this.$form.attr("data-"+c+"-events-form-error"),formSuccess:this.$form.attr("data-"+c+"-events-form-success"),fieldAdded:this.$form.attr("data-"+c+"-events-field-added"),fieldRemoved:this.$form.attr("data-"+c+"-events-field-removed"),fieldInit:this.$form.attr("data-"+c+"-events-field-init"),fieldError:this.$form.attr("data-"+c+"-events-field-error"),fieldSuccess:this.$form.attr("data-"+c+"-events-field-success"),fieldStatus:this.$form.attr("data-"+c+"-events-field-status"),localeChanged:this.$form.attr("data-"+c+"-events-locale-changed"),validatorError:this.$form.attr("data-"+c+"-events-validator-error"),validatorSuccess:this.$form.attr("data-"+c+"-events-validator-success"),validatorIgnored:this.$form.attr("data-"+c+"-events-validator-ignored")},excluded:this.$form.attr("data-"+c+"-excluded"),icon:{valid:this.$form.attr("data-"+c+"-icon-valid")||this.$form.attr("data-"+c+"-feedbackicons-valid"),invalid:this.$form.attr("data-"+c+"-icon-invalid")||this.$form.attr("data-"+c+"-feedbackicons-invalid"),validating:this.$form.attr("data-"+c+"-icon-validating")||this.$form.attr("data-"+c+"-feedbackicons-validating"),feedback:this.$form.attr("data-"+c+"-icon-feedback")},live:this.$form.attr("data-"+c+"-live"),locale:this.$form.attr("data-"+c+"-locale"),message:this.$form.attr("data-"+c+"-message"),onPreValidate:this.$form.attr("data-"+c+"-onprevalidate"),onError:this.$form.attr("data-"+c+"-onerror"),onSuccess:this.$form.attr("data-"+c+"-onsuccess"),row:{selector:this.$form.attr("data-"+c+"-row-selector")||this.$form.attr("data-"+c+"-group"),valid:this.$form.attr("data-"+c+"-row-valid"),invalid:this.$form.attr("data-"+c+"-row-invalid"),feedback:this.$form.attr("data-"+c+"-row-feedback")},threshold:this.$form.attr("data-"+c+"-threshold"),trigger:this.$form.attr("data-"+c+"-trigger"),verbose:this.$form.attr("data-"+c+"-verbose"),fields:{}};this.$form.attr("novalidate","novalidate").addClass(this.options.elementClass).on("submit."+c,function(a){a.preventDefault(),b.validate()}).on("click."+c,this.options.button.selector,function(){b.$submitButton=a(this),b._submitIfValid=!0}),(this.options.declarative===!0||"true"===this.options.declarative)&&this.$form.find("[name], [data-"+c+"-field]").each(function(){var e=a(this),f=e.attr("name")||e.attr("data-"+c+"-field"),g=b._parseOptions(e);g&&(e.attr("data-"+c+"-field",f),d.fields[f]=a.extend({},g,d.fields[f]))}),this.options=a.extend(!0,this.options,d),"string"==typeof this.options.err.parent&&(this.options.err.parent=new RegExp(this.options.err.parent)),this.options.container&&(this.options.err.container=this.options.container,delete this.options.container),this.options.feedbackIcons&&(this.options.icon=a.extend(!0,this.options.icon,this.options.feedbackIcons),delete this.options.feedbackIcons),this.options.group&&(this.options.row.selector=this.options.group,delete this.options.group),this.options.submitButtons&&(this.options.button.selector=this.options.submitButtons,delete this.options.submitButtons),FormValidation.I18n[this.options.locale]||(this.options.locale=a.fn.formValidation.DEFAULT_OPTIONS.locale),(this.options.declarative===!0||"true"===this.options.declarative)&&(this.options=a.extend(!0,this.options,{addOns:this._parseAddOnOptions()})),this.$hiddenButton=a("<button/>").attr("type","submit").prependTo(this.$form).addClass("fv-hidden-submit").css({display:"none",width:0,height:0}),this.$form.on("click."+this._namespace,'[type="submit"]',function(c){if(!c.isDefaultPrevented()){var d=a(c.target),e=d.is('[type="submit"]')?d.eq(0):d.parent('[type="submit"]').eq(0);!b.options.button.selector||e.is(b.options.button.selector)||e.is(b.$hiddenButton)||b.$form.off("submit."+b._namespace).submit()}});for(var e in this.options.fields)this._initField(e);for(var f in this.options.addOns)"function"==typeof FormValidation.AddOn[f].init&&FormValidation.AddOn[f].init(this,this.options.addOns[f]);this.$form.trigger(a.Event(this.options.events.formInit),{bv:this,fv:this,options:this.options}),this.options.onPreValidate&&this.$form.on(this.options.events.formPreValidate,function(a){FormValidation.Helper.call(b.options.onPreValidate,[a])}),this.options.onSuccess&&this.$form.on(this.options.events.formSuccess,function(a){FormValidation.Helper.call(b.options.onSuccess,[a])}),this.options.onError&&this.$form.on(this.options.events.formError,function(a){FormValidation.Helper.call(b.options.onError,[a])})},_initField:function(b){var c=this._namespace,d=a([]);switch(typeof b){case"object":d=b,b=b.attr("data-"+c+"-field");break;case"string":d=this.getFieldElements(b),d.attr("data-"+c+"-field",b)}if(0!==d.length&&null!==this.options.fields[b]&&null!==this.options.fields[b].validators){var e,f,g=this.options.fields[b].validators;for(e in g)f=g[e].alias||e,FormValidation.Validator[f]||delete this.options.fields[b].validators[e];null===this.options.fields[b].enabled&&(this.options.fields[b].enabled=!0);for(var h=this,i=d.length,j=d.attr("type"),k=1===i||"radio"===j||"checkbox"===j,l=this._getFieldTrigger(d.eq(0)),m=a.map(l,function(a){return a+".update."+c}).join(" "),n=0;i>n;n++){var o=d.eq(n),p=this.options.fields[b].row||this.options.row.selector,q=o.closest(p),r="function"==typeof(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container)?(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container).call(this,o,this):this.options.fields[b].container||this.options.fields[b].err||this.options.err.container,s=r&&"tooltip"!==r&&"popover"!==r?a(r):this._getMessageContainer(o,p);r&&"tooltip"!==r&&"popover"!==r&&s.addClass(this.options.err.clazz),s.find("."+this.options.err.clazz.split(" ").join(".")+"[data-"+c+"-validator][data-"+c+'-for="'+b+'"]').remove(),q.find("i[data-"+c+'-icon-for="'+b+'"]').remove(),o.off(m).on(m,function(){h.updateStatus(a(this),h.STATUS_NOT_VALIDATED)}),o.data(c+".messages",s);for(e in g)o.data(c+".result."+e,this.STATUS_NOT_VALIDATED),k&&n!==i-1||a("<small/>").css("display","none").addClass(this.options.err.clazz).attr("data-"+c+"-validator",e).attr("data-"+c+"-for",b).attr("data-"+c+"-result",this.STATUS_NOT_VALIDATED).html(this._getMessage(b,e)).appendTo(s),f=g[e].alias||e,"function"==typeof FormValidation.Validator[f].init&&FormValidation.Validator[f].init(this,o,this.options.fields[b].validators[e],e);if(this.options.fields[b].icon!==!1&&"false"!==this.options.fields[b].icon&&this.options.icon&&this.options.icon.valid&&this.options.icon.invalid&&this.options.icon.validating&&(!k||n===i-1)){q.addClass(this.options.row.feedback);var t=a("<i/>").css("display","none").addClass(this.options.icon.feedback).attr("data-"+c+"-icon-for",b).insertAfter(o);(k?d:o).data(c+".icon",t),("tooltip"===r||"popover"===r)&&((k?d:o).on(this.options.events.fieldError,function(){q.addClass("fv-has-tooltip")}).on(this.options.events.fieldSuccess,function(){q.removeClass("fv-has-tooltip")}),o.off("focus.container."+c).on("focus.container."+c,function(){h._showTooltip(a(this),r)}).off("blur.container."+c).on("blur.container."+c,function(){h._hideTooltip(a(this),r)})),"string"==typeof this.options.fields[b].icon&&"true"!==this.options.fields[b].icon?t.appendTo(a(this.options.fields[b].icon)):this._fixIcon(o,t)}}d.on(this.options.events.fieldSuccess,function(a,b){var c=h.getOptions(b.field,null,"onSuccess");c&&FormValidation.Helper.call(c,[a,b])}).on(this.options.events.fieldError,function(a,b){var c=h.getOptions(b.field,null,"onError");c&&FormValidation.Helper.call(c,[a,b])}).on(this.options.events.fieldStatus,function(a,b){var c=h.getOptions(b.field,null,"onStatus");c&&FormValidation.Helper.call(c,[a,b])}).on(this.options.events.validatorError,function(a,b){var c=h.getOptions(b.field,b.validator,"onError");c&&FormValidation.Helper.call(c,[a,b])}).on(this.options.events.validatorIgnored,function(a,b){var c=h.getOptions(b.field,b.validator,"onIgnored");c&&FormValidation.Helper.call(c,[a,b])}).on(this.options.events.validatorSuccess,function(a,b){var c=h.getOptions(b.field,b.validator,"onSuccess");c&&FormValidation.Helper.call(c,[a,b])}),this.onLiveChange(d,"live",function(){h._exceedThreshold(a(this))&&h.validateField(a(this))}),d.trigger(a.Event(this.options.events.fieldInit),{bv:this,fv:this,field:b,element:d})}},_isExcluded:function(b){var c=this._namespace,d=b.attr("data-"+c+"-excluded"),e=b.attr("data-"+c+"-field")||b.attr("name");switch(!0){case!!e&&this.options.fields&&this.options.fields[e]&&("true"===this.options.fields[e].excluded||this.options.fields[e].excluded===!0):case"true"===d:case""===d:return!0;case!!e&&this.options.fields&&this.options.fields[e]&&("false"===this.options.fields[e].excluded||this.options.fields[e].excluded===!1):case"false"===d:return!1;case!!e&&this.options.fields&&this.options.fields[e]&&"function"==typeof this.options.fields[e].excluded:return this.options.fields[e].excluded.call(this,b,this);case!!e&&this.options.fields&&this.options.fields[e]&&"string"==typeof this.options.fields[e].excluded:case d:return FormValidation.Helper.call(this.options.fields[e].excluded,[b,this]);default:if(this.options.excluded){"string"==typeof this.options.excluded&&(this.options.excluded=a.map(this.options.excluded.split(","),function(b){return a.trim(b)}));for(var f=this.options.excluded.length,g=0;f>g;g++)if("string"==typeof this.options.excluded[g]&&b.is(this.options.excluded[g])||"function"==typeof this.options.excluded[g]&&this.options.excluded[g].call(this,b,this)===!0)return!0}return!1}},_getFieldTrigger:function(a){var b=this._namespace,c=a.data(b+".trigger");if(c)return c;var d=a.attr("type"),e=a.attr("data-"+b+"-field"),f="radio"===d||"checkbox"===d||"file"===d||"SELECT"===a.get(0).tagName?"change":this._ieVersion>=10&&a.attr("placeholder")?"keyup":this._changeEvent;return c=((this.options.fields[e]?this.options.fields[e].trigger:null)||this.options.trigger||f).split(" "),a.data(b+".trigger",c),c},_getMessage:function(a,b){if(!this.options.fields[a]||!this.options.fields[a].validators)return"";var c=this.options.fields[a].validators,d=c[b]&&c[b].alias?c[b].alias:b;if(!FormValidation.Validator[d])return"";switch(!0){case!!c[b].message:return c[b].message;case!!this.options.fields[a].message:return this.options.fields[a].message;case!!this.options.message:return this.options.message;case!!FormValidation.I18n[this.options.locale]&&!!FormValidation.I18n[this.options.locale][d]&&!!FormValidation.I18n[this.options.locale][d]["default"]:return FormValidation.I18n[this.options.locale][d]["default"];default:return this.DEFAULT_MESSAGE}},_getMessageContainer:function(a,b){if(!this.options.err.parent)throw new Error("The err.parent option is not defined");var c=a.parent();if(c.is(b))return c;var d=c.attr("class");return d&&this.options.err.parent.test(d)?c:this._getMessageContainer(c,b)},_parseAddOnOptions:function(){var a=this._namespace,b=this.$form.attr("data-"+a+"-addons"),c=this.options.addOns||{};if(b){b=b.replace(/\s/g,"").split(",");for(var d=0;d<b.length;d++)c[b[d]]||(c[b[d]]={})}var e,f,g,h;for(e in c)if(FormValidation.AddOn[e]){if(f=FormValidation.AddOn[e].html5Attributes)for(g in f)h=this.$form.attr("data-"+a+"-addons-"+e.toLowerCase()+"-"+g.toLowerCase()),h&&(c[e][f[g]]=h)}else delete c[e];return c},_parseOptions:function(b){var c,d,e,f,g,h,i,j,k,l=this._namespace,m=b.attr("name")||b.attr("data-"+l+"-field"),n={},o=new RegExp("^data-"+l+"-([a-z]+)-alias$"),p=a.extend({},FormValidation.Validator);a.each(b.get(0).attributes,function(a,b){b.value&&o.test(b.name)&&(d=b.name.split("-")[2],p[b.value]&&(p[d]=p[b.value],p[d].alias=b.value))});for(d in p)if(c=p[d],e="data-"+l+"-"+d.toLowerCase(),f=b.attr(e)+"",k="function"==typeof c.enableByHtml5?c.enableByHtml5(b):null,k&&"false"!==f||k!==!0&&(""===f||"true"===f||e===f.toLowerCase())){c.html5Attributes=a.extend({},{message:"message",onerror:"onError",onsuccess:"onSuccess",transformer:"transformer"},c.html5Attributes),n[d]=a.extend({},k===!0?{}:k,n[d]),c.alias&&(n[d].alias=c.alias);for(j in c.html5Attributes)g=c.html5Attributes[j],h="data-"+l+"-"+d.toLowerCase()+"-"+j,i=b.attr(h),i&&("true"===i||h===i.toLowerCase()?i=!0:"false"===i&&(i=!1),n[d][g]=i)}var q={autoFocus:b.attr("data-"+l+"-autofocus"),err:b.attr("data-"+l+"-err-container")||b.attr("data-"+l+"-container"),enabled:b.attr("data-"+l+"-enabled"),excluded:b.attr("data-"+l+"-excluded"),icon:b.attr("data-"+l+"-icon")||b.attr("data-"+l+"-feedbackicons")||(this.options.fields&&this.options.fields[m]?this.options.fields[m].feedbackIcons:null),message:b.attr("data-"+l+"-message"),onError:b.attr("data-"+l+"-onerror"),onStatus:b.attr("data-"+l+"-onstatus"),onSuccess:b.attr("data-"+l+"-onsuccess"),row:b.attr("data-"+l+"-row")||b.attr("data-"+l+"-group")||(this.options.fields&&this.options.fields[m]?this.options.fields[m].group:null),selector:b.attr("data-"+l+"-selector"),threshold:b.attr("data-"+l+"-threshold"),transformer:b.attr("data-"+l+"-transformer"),trigger:b.attr("data-"+l+"-trigger"),verbose:b.attr("data-"+l+"-verbose"),validators:n},r=a.isEmptyObject(q),s=a.isEmptyObject(n);return!s||!r&&this.options.fields&&this.options.fields[m]?q:null},_submit:function(){var b=this.isValid();if(null!==b){var c=b?this.options.events.formSuccess:this.options.events.formError,d=a.Event(c);this.$form.trigger(d),this.$submitButton&&(b?this._onSuccess(d):this._onError(d))}},_onError:function(b){if(!b.isDefaultPrevented()){if("submitted"===this.options.live){this.options.live="enabled";var c=this;for(var d in this.options.fields)!function(b){var d=c.getFieldElements(b);d.length&&c.onLiveChange(d,"live",function(){c._exceedThreshold(a(this))&&c.validateField(a(this))})}(d)}for(var e=this._namespace,f=0;f<this.$invalidFields.length;f++){var g=this.$invalidFields.eq(f),h=this.isOptionEnabled(g.attr("data-"+e+"-field"),"autoFocus");if(h){g.focus();break}}}},_onFieldValidated:function(b,c){var d=this._namespace,e=b.attr("data-"+d+"-field"),f=this.options.fields[e].validators,g={},h=0,i={bv:this,fv:this,field:e,element:b,validator:c,result:b.data(d+".response."+c)};if(c)switch(b.data(d+".result."+c)){case this.STATUS_INVALID:b.trigger(a.Event(this.options.events.validatorError),i);break;case this.STATUS_VALID:b.trigger(a.Event(this.options.events.validatorSuccess),i);break;case this.STATUS_IGNORED:b.trigger(a.Event(this.options.events.validatorIgnored),i)}g[this.STATUS_NOT_VALIDATED]=0,g[this.STATUS_VALIDATING]=0,g[this.STATUS_INVALID]=0,g[this.STATUS_VALID]=0,g[this.STATUS_IGNORED]=0;for(var j in f)if(f[j].enabled!==!1){h++;var k=b.data(d+".result."+j);k&&g[k]++}g[this.STATUS_VALID]+g[this.STATUS_IGNORED]===h?(this.$invalidFields=this.$invalidFields.not(b),b.trigger(a.Event(this.options.events.fieldSuccess),i)):(0===g[this.STATUS_NOT_VALIDATED]||!this.isOptionEnabled(e,"verbose"))&&0===g[this.STATUS_VALIDATING]&&g[this.STATUS_INVALID]>0&&(this.$invalidFields=this.$invalidFields.add(b),b.trigger(a.Event(this.options.events.fieldError),i))},_onSuccess:function(a){a.isDefaultPrevented()||this.disableSubmitButtons(!0).defaultSubmit()},_fixIcon:function(a,b){},_createTooltip:function(a,b,c){},_destroyTooltip:function(a,b){},_hideTooltip:function(a,b){},_showTooltip:function(a,b){},defaultSubmit:function(){var b=this._namespace;this.$submitButton&&a("<input/>").attr({type:"hidden",name:this.$submitButton.attr("name")}).attr("data-"+b+"-submit-hidden","").val(this.$submitButton.val()).appendTo(this.$form),this.$form.off("submit."+b).submit()},disableSubmitButtons:function(a){return a?"disabled"!==this.options.live&&this.$form.find(this.options.button.selector).attr("disabled","disabled").addClass(this.options.button.disabled):this.$form.find(this.options.button.selector).removeAttr("disabled").removeClass(this.options.button.disabled),this},getFieldElements:function(b){if(!this._cacheFields[b])if(this.options.fields[b]&&this.options.fields[b].selector){var c=this.$form.find(this.options.fields[b].selector);this._cacheFields[b]=c.length?c:a(this.options.fields[b].selector)}else this._cacheFields[b]=this.$form.find('[name="'+b+'"]');return this._cacheFields[b]},getFieldValue:function(a,b){var c,d=this._namespace;if("string"==typeof a){if(c=this.getFieldElements(a),0===c.length)return null}else c=a,a=c.attr("data-"+d+"-field");if(!a||!this.options.fields[a])return c.val();var e=(this.options.fields[a].validators&&this.options.fields[a].validators[b]?this.options.fields[a].validators[b].transformer:null)||this.options.fields[a].transformer;return e?FormValidation.Helper.call(e,[c,b,this]):c.val()},getNamespace:function(){return this._namespace},getOptions:function(a,b,c){var d=this._namespace;if(!a)return c?this.options[c]:this.options;if("object"==typeof a&&(a=a.attr("data-"+d+"-field")),!this.options.fields[a])return null;var e=this.options.fields[a];return b?e.validators&&e.validators[b]?c?e.validators[b][c]:e.validators[b]:null:c?e[c]:e},getStatus:function(a,b){var c=this._namespace;switch(typeof a){case"object":return a.data(c+".result."+b);case"string":default:return this.getFieldElements(a).eq(0).data(c+".result."+b)}},isOptionEnabled:function(a,b){return!this.options.fields[a]||"true"!==this.options.fields[a][b]&&this.options.fields[a][b]!==!0?!this.options.fields[a]||"false"!==this.options.fields[a][b]&&this.options.fields[a][b]!==!1?"true"===this.options[b]||this.options[b]===!0:!1:!0},isValid:function(){for(var a in this.options.fields){var b=this.isValidField(a);if(null===b)return null;if(b===!1)return!1}return!0},isValidContainer:function(b){var c=this,d=this._namespace,e=[],f="string"==typeof b?a(b):b;if(0===f.length)return!0;f.find("[data-"+d+"-field]").each(function(){var b=a(this);c._isExcluded(b)||e.push(b)});for(var g=e.length,h=0;g>h;h++){var i=e[h],j=i.attr("data-"+d+"-field"),k=i.data(d+".messages").find("."+this.options.err.clazz.split(" ").join(".")+"[data-"+d+"-validator][data-"+d+'-for="'+j+'"]');if(!this.options.fields||!this.options.fields[j]||"false"!==this.options.fields[j].enabled&&this.options.fields[j].enabled!==!1){if(k.filter("[data-"+d+'-result="'+this.STATUS_INVALID+'"]').length>0)return!1;if(k.filter("[data-"+d+'-result="'+this.STATUS_NOT_VALIDATED+'"]').length>0||k.filter("[data-"+d+'-result="'+this.STATUS_VALIDATING+'"]').length>0)return null}}return!0},isValidField:function(b){var c=this._namespace,d=a([]);switch(typeof b){case"object":d=b,b=b.attr("data-"+c+"-field");break;case"string":d=this.getFieldElements(b)}if(0===d.length||!this.options.fields[b]||"false"===this.options.fields[b].enabled||this.options.fields[b].enabled===!1)return!0;for(var e,f,g,h=d.attr("type"),i="radio"===h||"checkbox"===h?1:d.length,j=0;i>j;j++)if(e=d.eq(j),!this._isExcluded(e))for(f in this.options.fields[b].validators)if(this.options.fields[b].validators[f].enabled!==!1){if(g=e.data(c+".result."+f),g===this.STATUS_VALIDATING||g===this.STATUS_NOT_VALIDATED)return null;if(g===this.STATUS_INVALID)return!1}return!0},offLiveChange:function(b,c){if(null===b||0===b.length)return this;var d=this._namespace,e=this._getFieldTrigger(b.eq(0)),f=a.map(e,function(a){return a+"."+c+"."+d}).join(" ");return b.off(f),this},onLiveChange:function(b,c,d){if(null===b||0===b.length)return this;var e=this._namespace,f=this._getFieldTrigger(b.eq(0)),g=a.map(f,function(a){return a+"."+c+"."+e}).join(" ");switch(this.options.live){case"submitted":break;case"disabled":b.off(g);break;case"enabled":default:b.off(g).on(g,function(a){d.apply(this,arguments)})}return this},updateMessage:function(b,c,d){var e=this,f=this._namespace,g=a([]);switch(typeof b){case"object":g=b,b=b.attr("data-"+f+"-field");break;case"string":g=this.getFieldElements(b)}return g.each(function(){a(this).data(f+".messages").find("."+e.options.err.clazz+"[data-"+f+'-validator="'+c+'"][data-'+f+'-for="'+b+'"]').html(d)}),this},updateStatus:function(b,c,d){var e=this._namespace,f=a([]);switch(typeof b){case"object":f=b,b=b.attr("data-"+e+"-field");break;case"string":f=this.getFieldElements(b)}if(!b||!this.options.fields[b])return this;c===this.STATUS_NOT_VALIDATED&&(this._submitIfValid=!1);for(var g=this,h=f.attr("type"),i=this.options.fields[b].row||this.options.row.selector,j="radio"===h||"checkbox"===h?1:f.length,k=0;j>k;k++){var l=f.eq(k);if(!this._isExcluded(l)){var m,n,o=l.closest(i),p=l.data(e+".messages"),q=p.find("."+this.options.err.clazz.split(" ").join(".")+"[data-"+e+"-validator][data-"+e+'-for="'+b+'"]'),r=d?q.filter("[data-"+e+'-validator="'+d+'"]'):q,s=l.data(e+".icon"),t="function"==typeof(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container)?(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container).call(this,l,this):this.options.fields[b].container||this.options.fields[b].err||this.options.err.container,u=null;if(d)l.data(e+".result."+d,c);else for(var v in this.options.fields[b].validators)l.data(e+".result."+v,c);switch(r.attr("data-"+e+"-result",c),c){case this.STATUS_VALIDATING:u=null,this.disableSubmitButtons(!0),l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid),o.removeClass(this.options.row.valid).removeClass(this.options.row.invalid),s&&s.removeClass(this.options.icon.valid).removeClass(this.options.icon.invalid).addClass(this.options.icon.validating).show();break;case this.STATUS_INVALID:u=!1,this.disableSubmitButtons(!0),l.removeClass(this.options.control.valid).addClass(this.options.control.invalid),o.removeClass(this.options.row.valid).addClass(this.options.row.invalid),s&&s.removeClass(this.options.icon.valid).removeClass(this.options.icon.validating).addClass(this.options.icon.invalid).show();break;case this.STATUS_IGNORED:case this.STATUS_VALID:m=q.filter("[data-"+e+'-result="'+this.STATUS_VALIDATING+'"]').length>0,n=q.filter("[data-"+e+'-result="'+this.STATUS_NOT_VALIDATED+'"]').length>0;var w=q.filter("[data-"+e+'-result="'+this.STATUS_IGNORED+'"]').length;u=m||n?null:q.filter("[data-"+e+'-result="'+this.STATUS_VALID+'"]').length+w===q.length,l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid),u===!0?(this.disableSubmitButtons(this.isValid()===!1),c===this.STATUS_VALID&&l.addClass(this.options.control.valid)):u===!1&&(this.disableSubmitButtons(!0),c===this.STATUS_VALID&&l.addClass(this.options.control.invalid)),s&&(s.removeClass(this.options.icon.invalid).removeClass(this.options.icon.validating).removeClass(this.options.icon.valid),(c===this.STATUS_VALID||w!==q.length)&&s.addClass(m?this.options.icon.validating:null===u?"":u?this.options.icon.valid:this.options.icon.invalid).show());var x=this.isValidContainer(o);null!==x&&(o.removeClass(this.options.row.valid).removeClass(this.options.row.invalid),(c===this.STATUS_VALID||w!==q.length)&&o.addClass(x?this.options.row.valid:this.options.row.invalid));break;case this.STATUS_NOT_VALIDATED:default:u=null,this.disableSubmitButtons(!1),l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid),o.removeClass(this.options.row.valid).removeClass(this.options.row.invalid),s&&s.removeClass(this.options.icon.valid).removeClass(this.options.icon.invalid).removeClass(this.options.icon.validating).hide()}!s||"tooltip"!==t&&"popover"!==t?c===this.STATUS_INVALID?r.show():r.hide():u===!1?this._createTooltip(l,q.filter("[data-"+e+'-result="'+g.STATUS_INVALID+'"]').eq(0).html(),t):this._destroyTooltip(l,t),l.trigger(a.Event(this.options.events.fieldStatus),{bv:this,fv:this,field:b,element:l,status:c}),this._onFieldValidated(l,d)}}return this},validate:function(){if(a.isEmptyObject(this.options.fields))return this._submit(),this;this.$form.trigger(a.Event(this.options.events.formPreValidate)),this.disableSubmitButtons(!0),this._submitIfValid=!1;for(var b in this.options.fields)this.validateField(b);return this._submit(),this._submitIfValid=!0,this},validateField:function(b){var c=this._namespace,d=a([]);switch(typeof b){case"object":d=b,b=b.attr("data-"+c+"-field");break;case"string":d=this.getFieldElements(b)}if(0===d.length||!this.options.fields[b]||"false"===this.options.fields[b].enabled||this.options.fields[b].enabled===!1)return this;for(var e,f,g,h=this,i=d.attr("type"),j="radio"===i||"checkbox"===i?1:d.length,k="radio"===i||"checkbox"===i,l=this.options.fields[b].validators,m=this.isOptionEnabled(b,"verbose"),n=0;j>n;n++){var o=d.eq(n);if(!this._isExcluded(o)){var p=!1;for(e in l){if(o.data(c+".dfs."+e)&&o.data(c+".dfs."+e).reject(),p)break;var q=o.data(c+".result."+e);if(q!==this.STATUS_VALID&&q!==this.STATUS_INVALID)if(l[e].enabled!==!1)if(o.data(c+".result."+e,this.STATUS_VALIDATING),f=l[e].alias||e,g=FormValidation.Validator[f].validate(this,o,l[e],e),"object"==typeof g&&g.resolve)this.updateStatus(k?b:o,this.STATUS_VALIDATING,e),o.data(c+".dfs."+e,g),g.done(function(a,b,d){a.removeData(c+".dfs."+b).data(c+".response."+b,d),d.message&&h.updateMessage(a,b,d.message),h.updateStatus(k?a.attr("data-"+c+"-field"):a,d.valid===!0?h.STATUS_VALID:d.valid===!1?h.STATUS_INVALID:h.STATUS_IGNORED,b),d.valid&&h._submitIfValid===!0?h._submit():d.valid!==!1||m||(p=!0)});else if("object"==typeof g&&void 0!==g.valid){if(o.data(c+".response."+e,g),g.message&&this.updateMessage(k?b:o,e,g.message),this.updateStatus(k?b:o,g.valid===!0?this.STATUS_VALID:g.valid===!1?this.STATUS_INVALID:this.STATUS_IGNORED,e),g.valid===!1&&!m)break}else if("boolean"==typeof g){if(o.data(c+".response."+e,g),this.updateStatus(k?b:o,g?this.STATUS_VALID:this.STATUS_INVALID,e),!g&&!m)break}else null===g&&(o.data(c+".response."+e,g),this.updateStatus(k?b:o,this.STATUS_IGNORED,e));else this.updateStatus(k?b:o,this.STATUS_IGNORED,e);else this._onFieldValidated(o,e)}}}return this},addField:function(b,c){var d=this._namespace,e=a([]);switch(typeof b){case"object":e=b,b=b.attr("data-"+d+"-field")||b.attr("name");break;case"string":delete this._cacheFields[b],e=this.getFieldElements(b)}e.attr("data-"+d+"-field",b);for(var f=e.attr("type"),g="radio"===f||"checkbox"===f?1:e.length,h=0;g>h;h++){var i=e.eq(h),j=this._parseOptions(i);j=null===j?c:a.extend(!0,j,c),this.options.fields[b]=a.extend(!0,this.options.fields[b],j),this._cacheFields[b]=this._cacheFields[b]?this._cacheFields[b].add(i):i,this._initField("checkbox"===f||"radio"===f?b:i)}return this.disableSubmitButtons(!1),this.$form.trigger(a.Event(this.options.events.fieldAdded),{field:b,element:e,options:this.options.fields[b]}),this},destroy:function(){var a,b,c,d,e,f,g,h,i=this._namespace;for(b in this.options.fields)for(c=this.getFieldElements(b),a=0;a<c.length;a++){d=c.eq(a);for(e in this.options.fields[b].validators)d.data(i+".dfs."+e)&&d.data(i+".dfs."+e).reject(),d.removeData(i+".result."+e).removeData(i+".response."+e).removeData(i+".dfs."+e),h=this.options.fields[b].validators[e].alias||e,"function"==typeof FormValidation.Validator[h].destroy&&FormValidation.Validator[h].destroy(this,d,this.options.fields[b].validators[e],e)}for(b in this.options.fields)for(c=this.getFieldElements(b),g=this.options.fields[b].row||this.options.row.selector,a=0;a<c.length;a++){d=c.eq(a),d.data(i+".messages").find("."+this.options.err.clazz.split(" ").join(".")+"[data-"+i+"-validator][data-"+i+'-for="'+b+'"]').remove().end().end().removeData(i+".messages").closest(g).removeClass(this.options.row.valid).removeClass(this.options.row.invalid).removeClass(this.options.row.feedback).end().off("."+i).removeAttr("data-"+i+"-field");var j="function"==typeof(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container)?(this.options.fields[b].container||this.options.fields[b].err||this.options.err.container).call(this,d,this):this.options.fields[b].container||this.options.fields[b].err||this.options.err.container;("tooltip"===j||"popover"===j)&&this._destroyTooltip(d,j),f=d.data(i+".icon"),f&&f.remove(),d.removeData(i+".icon").removeData(i+".trigger")}for(var k in this.options.addOns)"function"==typeof FormValidation.AddOn[k].destroy&&FormValidation.AddOn[k].destroy(this,this.options.addOns[k]);this.disableSubmitButtons(!1),this.$hiddenButton.remove(),this.$form.removeClass(this.options.elementClass).off("."+i).removeData("bootstrapValidator").removeData("formValidation").find("[data-"+i+"-submit-hidden]").remove().end().find('[type="submit"]').off("click."+i)},enableFieldValidators:function(a,b,c){var d=this.options.fields[a].validators;if(c&&d&&d[c]&&d[c].enabled!==b)this.options.fields[a].validators[c].enabled=b,this.updateStatus(a,this.STATUS_NOT_VALIDATED,c);else if(!c&&this.options.fields[a].enabled!==b){this.options.fields[a].enabled=b;for(var e in d)this.enableFieldValidators(a,b,e)}return this},getDynamicOption:function(a,b){var c="string"==typeof a?this.getFieldElements(a):a,d=c.val();if("function"==typeof b)return FormValidation.Helper.call(b,[d,this,c]);if("string"==typeof b){var e=this.getFieldElements(b);return e.length?e.val():FormValidation.Helper.call(b,[d,this,c])||b}return null},getForm:function(){return this.$form},getInvalidFields:function(){return this.$invalidFields},getLocale:function(){return this.options.locale},getMessages:function(b,c){var d=this,e=this._namespace,f=[],g=a([]);switch(!0){case b&&"object"==typeof b:g=b;break;case b&&"string"==typeof b:var h=this.getFieldElements(b);if(h.length>0){var i=h.attr("type");g="radio"===i||"checkbox"===i?h.eq(0):h}break;default:g=this.$invalidFields}var j=c?"[data-"+e+'-validator="'+c+'"]':"";return g.each(function(){f=f.concat(a(this).data(e+".messages").find("."+d.options.err.clazz+"[data-"+e+'-for="'+a(this).attr("data-"+e+"-field")+'"][data-'+e+'-result="'+d.STATUS_INVALID+'"]'+j).map(function(){var b=a(this).attr("data-"+e+"-validator"),c=a(this).attr("data-"+e+"-for");return d.options.fields[c].validators[b].enabled===!1?"":a(this).html()}).get())}),f},getSubmitButton:function(){return this.$submitButton},removeField:function(b){var c=this._namespace,d=a([]);switch(typeof b){case"object":d=b,b=b.attr("data-"+c+"-field")||b.attr("name"),d.attr("data-"+c+"-field",b);break;case"string":d=this.getFieldElements(b)}if(0===d.length)return this;for(var e=d.attr("type"),f="radio"===e||"checkbox"===e?1:d.length,g=0;f>g;g++){var h=d.eq(g);this.$invalidFields=this.$invalidFields.not(h),this._cacheFields[b]=this._cacheFields[b].not(h)}return this._cacheFields[b]&&0!==this._cacheFields[b].length||delete this.options.fields[b],("checkbox"===e||"radio"===e)&&this._initField(b),this.disableSubmitButtons(!1),this.$form.trigger(a.Event(this.options.events.fieldRemoved),{field:b,element:d}),this},resetField:function(b,c){var d=this._namespace,e=a([]);switch(typeof b){case"object":e=b,b=b.attr("data-"+d+"-field");break;case"string":e=this.getFieldElements(b)}var f=e.length;if(this.options.fields[b])for(var g=0;f>g;g++)for(var h in this.options.fields[b].validators)e.eq(g).removeData(d+".dfs."+h);if(c){var i=e.attr("type");"radio"===i||"checkbox"===i?e.prop("checked",!1).removeAttr("selected"):e.val("")}return this.updateStatus(b,this.STATUS_NOT_VALIDATED),this},resetForm:function(b){for(var c in this.options.fields)this.resetField(c,b);return this.$invalidFields=a([]),this.$submitButton=null,this.disableSubmitButtons(!1),this},revalidateField:function(a){return this.updateStatus(a,this.STATUS_NOT_VALIDATED).validateField(a),this},setLocale:function(b){return this.options.locale=b,this.$form.trigger(a.Event(this.options.events.localeChanged),{locale:b,bv:this,fv:this}),this},updateOption:function(a,b,c,d){var e=this._namespace;return"object"==typeof a&&(a=a.attr("data-"+e+"-field")),this.options.fields[a]&&this.options.fields[a].validators[b]&&(this.options.fields[a].validators[b][c]=d,this.updateStatus(a,this.STATUS_NOT_VALIDATED,b)),this},validateContainer:function(b){var c=this,d=this._namespace,e=[],f="string"==typeof b?a(b):b;if(0===f.length)return this;f.find("[data-"+d+"-field]").each(function(){var b=a(this);c._isExcluded(b)||e.push(b)});for(var g=e.length,h=0;g>h;h++)this.validateField(e[h]);return this}},a.fn.formValidation=function(b){var c=arguments;return this.each(function(){var d=a(this),e=d.data("formValidation"),f="object"==typeof b&&b;if(!e){var g=(f.framework||d.attr("data-fv-framework")||"bootstrap").toLowerCase(),h=g.substr(0,1).toUpperCase()+g.substr(1);if("undefined"==typeof FormValidation.Framework[h])throw new Error("The class FormValidation.Framework."+h+" is not implemented");e=new FormValidation.Framework[h](this,f),d.addClass("fv-form-"+g).data("formValidation",e)}"string"==typeof b&&e[b].apply(e,Array.prototype.slice.call(c,1))})},a.fn.formValidation.Constructor=FormValidation.Base,a.fn.formValidation.DEFAULT_MESSAGE="This value is not valid",a.fn.formValidation.DEFAULT_OPTIONS={autoFocus:!0,declarative:!0,elementClass:"fv-form",events:{formInit:"init.form.fv",formPreValidate:"prevalidate.form.fv",formError:"err.form.fv",formSuccess:"success.form.fv",fieldAdded:"added.field.fv",fieldRemoved:"removed.field.fv",fieldInit:"init.field.fv",fieldError:"err.field.fv",fieldSuccess:"success.field.fv",fieldStatus:"status.field.fv",localeChanged:"changed.locale.fv",validatorError:"err.validator.fv",validatorSuccess:"success.validator.fv",validatorIgnored:"ignored.validator.fv"},excluded:[":disabled",":hidden",":not(:visible)"],fields:null,live:"enabled",locale:"en_US",message:null,threshold:null,verbose:!0,button:{selector:'[type="submit"]:not([formnovalidate])',disabled:""},control:{valid:"",invalid:""},err:{clazz:"",container:null,parent:null},icon:{valid:null,invalid:null,validating:null,feedback:""},row:{selector:null,valid:"",invalid:"",feedback:""}}}(jQuery),function(a){FormValidation.Helper={call:function(a,b){if("function"==typeof a)return a.apply(this,b);if("string"==typeof a){"()"===a.substring(a.length-2)&&(a=a.substring(0,a.length-2));for(var c=a.split("."),d=c.pop(),e=window,f=0;f<c.length;f++)e=e[c[f]];return"undefined"==typeof e[d]?null:e[d].apply(this,b)}},date:function(a,b,c,d){if(isNaN(a)||isNaN(b)||isNaN(c))return!1;if(c.length>2||b.length>2||a.length>4)return!1;if(c=parseInt(c,10),b=parseInt(b,10),a=parseInt(a,10),1e3>a||a>9999||0>=b||b>12)return!1;var e=[31,28,31,30,31,30,31,31,30,31,30,31];if((a%400===0||a%100!==0&&a%4===0)&&(e[1]=29),0>=c||c>e[b-1])return!1;if(d===!0){var f=new Date,g=f.getFullYear(),h=f.getMonth(),i=f.getDate();return g>a||a===g&&h>b-1||a===g&&b-1===h&&i>c}return!0},format:function(b,c){a.isArray(c)||(c=[c]);for(var d in c)b=b.replace("%s",c[d]);return b},luhn:function(a){for(var b=a.length,c=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],e=0;b--;)e+=d[c][parseInt(a.charAt(b),10)],c^=1;return e%10===0&&e>0},mod11And10:function(a){for(var b=5,c=a.length,d=0;c>d;d++)b=(2*(b||10)%11+parseInt(a.charAt(d),10))%10;return 1===b},mod37And36:function(a,b){b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var c=b.length,d=a.length,e=Math.floor(c/2),f=0;d>f;f++)e=(2*(e||c)%(c+1)+b.indexOf(a.charAt(f)))%c;return 1===e}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{base64:{"default":"Please enter a valid base 64 encoded"}}}),FormValidation.Validator.base64={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{between:{"default":"Please enter a value between %s and %s",notInclusive:"Please enter a value between %s and %s strictly"}}}),FormValidation.Validator.between={html5Attributes:{message:"message",min:"min",max:"max",inclusive:"inclusive"},enableByHtml5:function(a){return"range"===a.attr("type")?{min:a.attr("min"),max:a.attr("max")}:!1},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;f=this._format(f);var g=b.getLocale(),h=a.isNumeric(d.min)?d.min:b.getDynamicOption(c,d.min),i=a.isNumeric(d.max)?d.max:b.getDynamicOption(c,d.max),j=this._format(h),k=this._format(i);return d.inclusive===!0||void 0===d.inclusive?{valid:a.isNumeric(f)&&parseFloat(f)>=j&&parseFloat(f)<=k,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].between["default"],[h,i])}:{valid:a.isNumeric(f)&&parseFloat(f)>j&&parseFloat(f)<k,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].between.notInclusive,[h,i])}},_format:function(a){return(a+"").replace(",",".")}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{bic:{"default":"Please enter a valid BIC number"}}}),FormValidation.Validator.bic={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^[a-zA-Z]{6}[a-zA-Z0-9]{2}([a-zA-Z0-9]{3})?$/.test(e)}}}(jQuery),function(a){FormValidation.Validator.blank={validate:function(a,b,c,d){return!0}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{callback:{"default":"Please enter a valid value"}}}),FormValidation.Validator.callback={html5Attributes:{message:"message",callback:"callback"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e),g=new a.Deferred,h={valid:!0};if(d.callback){var i=FormValidation.Helper.call(d.callback,[f,b,c]);h="boolean"==typeof i||null===i?{valid:i}:i}return g.resolve(c,e,h),g}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{choice:{"default":"Please enter a valid value",less:"Please choose %s options at minimum",more:"Please choose %s options at maximum",between:"Please choose %s - %s options"}}}),FormValidation.Validator.choice={html5Attributes:{message:"message",min:"min",max:"max"},validate:function(b,c,d,e){var f=b.getLocale(),g=b.getNamespace(),h=c.is("select")?b.getFieldElements(c.attr("data-"+g+"-field")).find("option").filter(":selected").length:b.getFieldElements(c.attr("data-"+g+"-field")).filter(":checked").length,i=d.min?a.isNumeric(d.min)?d.min:b.getDynamicOption(c,d.min):null,j=d.max?a.isNumeric(d.max)?d.max:b.getDynamicOption(c,d.max):null,k=!0,l=d.message||FormValidation.I18n[f].choice["default"];switch((i&&h<parseInt(i,10)||j&&h>parseInt(j,10))&&(k=!1),!0){case!!i&&!!j:l=FormValidation.Helper.format(d.message||FormValidation.I18n[f].choice.between,[parseInt(i,10),parseInt(j,10)]);break;case!!i:l=FormValidation.Helper.format(d.message||FormValidation.I18n[f].choice.less,parseInt(i,10));break;case!!j:l=FormValidation.Helper.format(d.message||FormValidation.I18n[f].choice.more,parseInt(j,10))}return{valid:k,message:l}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{color:{"default":"Please enter a valid color"}}}),FormValidation.Validator.color={html5Attributes:{message:"message",type:"type"},enableByHtml5:function(a){return"color"===a.attr("type")},SUPPORTED_TYPES:["hex","rgb","rgba","hsl","hsla","keyword"],KEYWORD_COLORS:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(this.enableByHtml5(c))return/^#[0-9A-F]{6}$/i.test(f);var g=d.type||this.SUPPORTED_TYPES;a.isArray(g)||(g=g.replace(/s/g,"").split(","));for(var h,i,j=!1,k=0;k<g.length;k++)if(i=g[k],h="_"+i.toLowerCase(),j=j||this[h](f))return!0;return!1},_hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},_hsl:function(a){return/^hsl\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/.test(a)},_hsla:function(a){return/^hsla\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/.test(a)},_keyword:function(b){return a.inArray(b,this.KEYWORD_COLORS)>=0},_rgb:function(a){var b=/^rgb\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){2}(\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*)\)$/,c=/^rgb\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/;return b.test(a)||c.test(a)},_rgba:function(a){var b=/^rgba\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/,c=/^rgba\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/;return b.test(a)||c.test(a)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{creditCard:{"default":"Please enter a valid credit card number"}}}),FormValidation.Validator.creditCard={validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(/[^0-9-\s]+/.test(f))return!1;if(f=f.replace(/\D/g,""),!FormValidation.Helper.luhn(f))return!1;var g,h,i={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}};for(g in i)for(h in i[g].prefix)if(f.substr(0,i[g].prefix[h].length)===i[g].prefix[h]&&-1!==a.inArray(f.length,i[g].length))return{valid:!0,type:g};return!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{cusip:{"default":"Please enter a valid CUSIP number"}}}),FormValidation.Validator.cusip={validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(f=f.toUpperCase(),!/^[0-9A-Z]{9}$/.test(f))return!1;for(var g=a.map(f.split(""),function(a){var b=a.charCodeAt(0);return b>="A".charCodeAt(0)&&b<="Z".charCodeAt(0)?b-"A".charCodeAt(0)+10:a}),h=g.length,i=0,j=0;h-1>j;j++){var k=parseInt(g[j],10);j%2!==0&&(k*=2),k>9&&(k-=9),i+=k}return i=(10-i%10)%10,i===parseInt(g[h-1],10)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{cvv:{"default":"Please enter a valid CVV number"}}}),FormValidation.Validator.cvv={html5Attributes:{message:"message",ccfield:"creditCardField"},init:function(a,b,c,d){if(c.creditCardField){var e=a.getFieldElements(c.creditCardField);a.onLiveChange(e,"live_"+d,function(){var c=a.getStatus(b,d);c!==a.STATUS_NOT_VALIDATED&&a.revalidateField(b)})}},destroy:function(a,b,c,d){if(c.creditCardField){var e=a.getFieldElements(c.creditCardField);a.offLiveChange(e,"live_"+d)}},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(!/^[0-9]{3,4}$/.test(f))return!1;if(!d.creditCardField)return!0;var g=b.getFieldElements(d.creditCardField).val();if(""===g)return!0;g=g.replace(/\D/g,"");var h,i,j={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}},k=null;for(h in j)for(i in j[h].prefix)if(g.substr(0,j[h].prefix[i].length)===j[h].prefix[i]&&-1!==a.inArray(g.length,j[h].length)){k=h;break}return null===k?!1:"AMERICAN_EXPRESS"===k?4===f.length:3===f.length}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{date:{"default":"Please enter a valid date",min:"Please enter a date after %s",max:"Please enter a date before %s",range:"Please enter a date in the range %s - %s"}}}),FormValidation.Validator.date={html5Attributes:{message:"message",format:"format",min:"min",max:"max",separator:"separator"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;d.format=d.format||"MM/DD/YYYY","date"===c.attr("type")&&(d.format="YYYY-MM-DD");var g=b.getLocale(),h=d.message||FormValidation.I18n[g].date["default"],i=d.format.split(" "),j=i[0],k=i.length>1?i[1]:null,l=i.length>2?i[2]:null,m=f.split(" "),n=m[0],o=m.length>1?m[1]:null;if(i.length!==m.length)return{valid:!1,message:h};var p=d.separator;if(p||(p=-1!==n.indexOf("/")?"/":-1!==n.indexOf("-")?"-":-1!==n.indexOf(".")?".":null),null===p||-1===n.indexOf(p))return{valid:!1,message:h};if(n=n.split(p),j=j.split(p),n.length!==j.length)return{valid:!1,message:h};var q=n[a.inArray("YYYY",j)],r=n[a.inArray("MM",j)],s=n[a.inArray("DD",j)];if(!q||!r||!s||4!==q.length)return{valid:!1,message:h};var t=null,u=null,v=null;if(k){if(k=k.split(":"),o=o.split(":"),k.length!==o.length)return{valid:!1,message:h};if(u=o.length>0?o[0]:null,t=o.length>1?o[1]:null,v=o.length>2?o[2]:null,""===u||""===t||""===v)return{valid:!1,message:h};if(v){if(isNaN(v)||v.length>2)return{valid:!1,message:h};if(v=parseInt(v,10),0>v||v>60)return{valid:!1,message:h}}if(u){if(isNaN(u)||u.length>2)return{valid:!1,message:h};if(u=parseInt(u,10),0>u||u>=24||l&&u>12)return{valid:!1,message:h}}if(t){if(isNaN(t)||t.length>2)return{valid:!1,message:h};if(t=parseInt(t,10),0>t||t>59)return{valid:!1,message:h}}}var w=FormValidation.Helper.date(q,r,s),x=null,y=null,z=d.min,A=d.max;switch(z&&(isNaN(Date.parse(z))&&(z=b.getDynamicOption(c,z)),x=z instanceof Date?z:this._parseDate(z,j,p),z=z instanceof Date?this._formatDate(z,d.format):z),A&&(isNaN(Date.parse(A))&&(A=b.getDynamicOption(c,A)),y=A instanceof Date?A:this._parseDate(A,j,p),A=A instanceof Date?this._formatDate(A,d.format):A),n=new Date(q,r-1,s,u,t,v),!0){case z&&!A&&w:w=n.getTime()>=x.getTime(),h=d.message||FormValidation.Helper.format(FormValidation.I18n[g].date.min,z);break;case A&&!z&&w:w=n.getTime()<=y.getTime(),h=d.message||FormValidation.Helper.format(FormValidation.I18n[g].date.max,A);break;case A&&z&&w:w=n.getTime()<=y.getTime()&&n.getTime()>=x.getTime(),h=d.message||FormValidation.Helper.format(FormValidation.I18n[g].date.range,[z,A])}return{valid:w,date:n,message:h}},_parseDate:function(b,c,d){var e=0,f=0,g=0,h=b.split(" "),i=h[0],j=h.length>1?h[1]:null;i=i.split(d);var k=i[a.inArray("YYYY",c)],l=i[a.inArray("MM",c)],m=i[a.inArray("DD",c)];return j&&(j=j.split(":"),f=j.length>0?j[0]:null,e=j.length>1?j[1]:null,g=j.length>2?j[2]:null),new Date(k,l-1,m,f,e,g)},_formatDate:function(a,b){b=b.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss");var c={d:function(a){return a.getDate()},dd:function(a){var b=a.getDate();return 10>b?"0"+b:b},m:function(a){return a.getMonth()+1},mm:function(a){var b=a.getMonth()+1;return 10>b?"0"+b:b},yy:function(a){return(""+a.getFullYear()).substr(2)},yyyy:function(a){return a.getFullYear()},h:function(a){return a.getHours()%12||12},hh:function(a){var b=a.getHours()%12||12;return 10>b?"0"+b:b},H:function(a){return a.getHours()},HH:function(a){var b=a.getHours();return 10>b?"0"+b:b},M:function(a){return a.getMinutes()},MM:function(a){var b=a.getMinutes();return 10>b?"0"+b:b},s:function(a){return a.getSeconds()},ss:function(a){var b=a.getSeconds();return 10>b?"0"+b:b}};return b.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,function(b){return c[b]?c[b](a):b.slice(1,b.length-1)})}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{different:{"default":"Please enter a different value"}}}),FormValidation.Validator.different={html5Attributes:{message:"message",field:"field"},init:function(a,b,c,d){for(var e=c.field.split(","),f=0;f<e.length;f++){var g=a.getFieldElements(e[f]);a.onLiveChange(g,"live_"+d,function(){var c=a.getStatus(b,d);c!==a.STATUS_NOT_VALIDATED&&a.revalidateField(b)})}},destroy:function(a,b,c,d){for(var e=c.field.split(","),f=0;f<e.length;f++){var g=a.getFieldElements(e[f]);a.offLiveChange(g,"live_"+d)}},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;for(var f=c.field.split(","),g=!0,h=0;h<f.length;h++){var i=a.getFieldElements(f[h]);if(null!=i&&0!==i.length){var j=a.getFieldValue(i,d);e===j?g=!1:""!==j&&a.updateStatus(i,a.STATUS_VALID,d)}}return g}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{digits:{"default":"Please enter only digits"}}}),FormValidation.Validator.digits={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^\d+$/.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{ean:{"default":"Please enter a valid EAN number"}}}),FormValidation.Validator.ean={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(!/^(\d{8}|\d{12}|\d{13})$/.test(e))return!1;for(var f=e.length,g=0,h=8===f?[3,1]:[1,3],i=0;f-1>i;i++)g+=parseInt(e.charAt(i),10)*h[i%2];return g=(10-g%10)%10,g+""===e.charAt(f-1)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{ein:{"default":"Please enter a valid EIN number"}}}),FormValidation.Validator.ein={CAMPUS:{ANDOVER:["10","12"],ATLANTA:["60","67"],AUSTIN:["50","53"],BROOKHAVEN:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],CINCINNATI:["30","32","35","36","37","38","61"],FRESNO:["15","24"],KANSAS_CITY:["40","44"],MEMPHIS:["94","95"],OGDEN:["80","90"],PHILADELPHIA:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],INTERNET:["20","26","27","45","46"],SMALL_BUSINESS_ADMINISTRATION:["31"]},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(!/^[0-9]{2}-?[0-9]{7}$/.test(f))return!1;var g=f.substr(0,2)+"";for(var h in this.CAMPUS)if(-1!==a.inArray(g,this.CAMPUS[h]))return{valid:!0,campus:h};return!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{emailAddress:{"default":"Please enter a valid email address"}}}),FormValidation.Validator.emailAddress={html5Attributes:{message:"message",multiple:"multiple",separator:"separator"},enableByHtml5:function(a){return"email"===a.attr("type")},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,g=c.multiple===!0||"true"===c.multiple;if(g){for(var h=c.separator||/[,;]/,i=this._splitEmailAddresses(e,h),j=0;j<i.length;j++)if(!f.test(i[j]))return!1;return!0}return f.test(e)},_splitEmailAddresses:function(a,b){for(var c=a.split(/"/),d=c.length,e=[],f="",g=0;d>g;g++)if(g%2===0){var h=c[g].split(b),i=h.length;if(1===i)f+=h[0];else{e.push(f+h[0]);for(var j=1;i-1>j;j++)e.push(h[j]);f=h[i-1]}}else f+='"'+c[g],d-1>g&&(f+='"');return e.push(f),e}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{file:{"default":"Please choose a valid file"}}}),FormValidation.Validator.file={html5Attributes:{extension:"extension",maxfiles:"maxFiles",minfiles:"minFiles",maxsize:"maxSize",minsize:"minSize",maxtotalsize:"maxTotalSize",mintotalsize:"minTotalSize",message:"message",type:"type"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;var g,h=d.extension?d.extension.toLowerCase().split(","):null,i=d.type?d.type.toLowerCase().split(","):null,j=window.File&&window.FileList&&window.FileReader;if(j){var k=c.get(0).files,l=k.length,m=0;if(d.maxFiles&&l>parseInt(d.maxFiles,10)||d.minFiles&&l<parseInt(d.minFiles,10))return!1;for(var n=0;l>n;n++)if(m+=k[n].size,g=k[n].name.substr(k[n].name.lastIndexOf(".")+1),d.minSize&&k[n].size<parseInt(d.minSize,10)||d.maxSize&&k[n].size>parseInt(d.maxSize,10)||h&&-1===a.inArray(g.toLowerCase(),h)||k[n].type&&i&&-1===a.inArray(k[n].type.toLowerCase(),i))return!1;if(d.maxTotalSize&&m>parseInt(d.maxTotalSize,10)||d.minTotalSize&&m<parseInt(d.minTotalSize,10))return!1}else if(g=f.substr(f.lastIndexOf(".")+1),h&&-1===a.inArray(g.toLowerCase(),h))return!1;return!0}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{greaterThan:{"default":"Please enter a value greater than or equal to %s",notInclusive:"Please enter a value greater than %s"}}}),FormValidation.Validator.greaterThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(a){var b=a.attr("type"),c=a.attr("min");return c&&"date"!==b?{value:c}:!1},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;f=this._format(f);var g=b.getLocale(),h=a.isNumeric(d.value)?d.value:b.getDynamicOption(c,d.value),i=this._format(h);return d.inclusive===!0||void 0===d.inclusive?{valid:a.isNumeric(f)&&parseFloat(f)>=i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].greaterThan["default"],h)}:{valid:a.isNumeric(f)&&parseFloat(f)>i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].greaterThan.notInclusive,h)}},_format:function(a){return(a+"").replace(",",".")}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{grid:{"default":"Please enter a valid GRId number"}}}),FormValidation.Validator.grid={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:(e=e.toUpperCase(),/^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g.test(e)?(e=e.replace(/\s/g,"").replace(/-/g,""),"GRID:"===e.substr(0,5)&&(e=e.substr(5)),FormValidation.Helper.mod37And36(e)):!1)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{hex:{"default":"Please enter a valid hexadecimal number"}}}),FormValidation.Validator.hex={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^[0-9a-fA-F]+$/.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{iban:{"default":"Please enter a valid IBAN number",country:"Please enter a valid IBAN number in %s",countries:{AD:"Andorra",AE:"United Arab Emirates",AL:"Albania",AO:"Angola",AT:"Austria",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BR:"Brazil",CH:"Switzerland",CI:"Ivory Coast",CM:"Cameroon",CR:"Costa Rica",CV:"Cape Verde",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",DO:"Dominican Republic",DZ:"Algeria",EE:"Estonia",ES:"Spain",FI:"Finland",FO:"Faroe Islands",FR:"France",GB:"United Kingdom",GE:"Georgia",GI:"Gibraltar",GL:"Greenland",GR:"Greece",GT:"Guatemala",HR:"Croatia",HU:"Hungary",IE:"Ireland",IL:"Israel",IR:"Iran",IS:"Iceland",IT:"Italy",JO:"Jordan",KW:"Kuwait",KZ:"Kazakhstan",LB:"Lebanon",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MG:"Madagascar",MK:"Macedonia",ML:"Mali",MR:"Mauritania",MT:"Malta",MU:"Mauritius",MZ:"Mozambique",NL:"Netherlands",NO:"Norway",PK:"Pakistan",PL:"Poland",PS:"Palestine",PT:"Portugal",QA:"Qatar",RO:"Romania",RS:"Serbia",SA:"Saudi Arabia",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",SM:"San Marino",SN:"Senegal",TL:"East Timor",TN:"Tunisia",TR:"Turkey",VG:"Virgin Islands, British",XK:"Republic of Kosovo"}}}}),FormValidation.Validator.iban={html5Attributes:{message:"message",country:"country",sepa:"sepa"},REGEX:{AD:"AD[0-9]{2}[0-9]{4}[0-9]{4}[A-Z0-9]{12}",AE:"AE[0-9]{2}[0-9]{3}[0-9]{16}",AL:"AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}",AO:"AO[0-9]{2}[0-9]{21}",AT:"AT[0-9]{2}[0-9]{5}[0-9]{11}",AZ:"AZ[0-9]{2}[A-Z]{4}[A-Z0-9]{20}",BA:"BA[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{8}[0-9]{2}",BE:"BE[0-9]{2}[0-9]{3}[0-9]{7}[0-9]{2}",BF:"BF[0-9]{2}[0-9]{23}",BG:"BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}",BH:"BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}",BI:"BI[0-9]{2}[0-9]{12}",BJ:"BJ[0-9]{2}[A-Z]{1}[0-9]{23}",BR:"BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z][A-Z0-9]",CH:"CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}",CI:"CI[0-9]{2}[A-Z]{1}[0-9]{23}",CM:"CM[0-9]{2}[0-9]{23}",CR:"CR[0-9]{2}[0-9]{3}[0-9]{14}",CV:"CV[0-9]{2}[0-9]{21}",CY:"CY[0-9]{2}[0-9]{3}[0-9]{5}[A-Z0-9]{16}",CZ:"CZ[0-9]{2}[0-9]{20}",DE:"DE[0-9]{2}[0-9]{8}[0-9]{10}",DK:"DK[0-9]{2}[0-9]{14}",DO:"DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}",DZ:"DZ[0-9]{2}[0-9]{20}",EE:"EE[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{11}[0-9]{1}",ES:"ES[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{1}[0-9]{1}[0-9]{10}",FI:"FI[0-9]{2}[0-9]{6}[0-9]{7}[0-9]{1}",FO:"FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",FR:"FR[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",GB:"GB[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",GE:"GE[0-9]{2}[A-Z]{2}[0-9]{16}",GI:"GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}",GL:"GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",GR:"GR[0-9]{2}[0-9]{3}[0-9]{4}[A-Z0-9]{16}",GT:"GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}",HR:"HR[0-9]{2}[0-9]{7}[0-9]{10}",HU:"HU[0-9]{2}[0-9]{3}[0-9]{4}[0-9]{1}[0-9]{15}[0-9]{1}",IE:"IE[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",IL:"IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}",IR:"IR[0-9]{2}[0-9]{22}",IS:"IS[0-9]{2}[0-9]{4}[0-9]{2}[0-9]{6}[0-9]{10}",IT:"IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",JO:"JO[0-9]{2}[A-Z]{4}[0-9]{4}[0]{8}[A-Z0-9]{10}",KW:"KW[0-9]{2}[A-Z]{4}[0-9]{22}",KZ:"KZ[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LB:"LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}",LI:"LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}",LT:"LT[0-9]{2}[0-9]{5}[0-9]{11}",LU:"LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LV:"LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}",MC:"MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",MD:"MD[0-9]{2}[A-Z0-9]{20}",ME:"ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",MG:"MG[0-9]{2}[0-9]{23}",MK:"MK[0-9]{2}[0-9]{3}[A-Z0-9]{10}[0-9]{2}",ML:"ML[0-9]{2}[A-Z]{1}[0-9]{23}",MR:"MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}",MT:"MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}",MU:"MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{3}",MZ:"MZ[0-9]{2}[0-9]{21}",NL:"NL[0-9]{2}[A-Z]{4}[0-9]{10}",NO:"NO[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{1}",PK:"PK[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",PL:"PL[0-9]{2}[0-9]{8}[0-9]{16}",PS:"PS[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",PT:"PT[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{11}[0-9]{2}",QA:"QA[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",RO:"RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",RS:"RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",SA:"SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}",SE:"SE[0-9]{2}[0-9]{3}[0-9]{16}[0-9]{1}",SI:"SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}",SK:"SK[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{10}",SM:"SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",SN:"SN[0-9]{2}[A-Z]{1}[0-9]{23}",TL:"TL38[0-9]{3}[0-9]{14}[0-9]{2}",TN:"TN59[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",TR:"TR[0-9]{2}[0-9]{5}[A-Z0-9]{1}[A-Z0-9]{16}",VG:"VG[0-9]{2}[A-Z]{4}[0-9]{16}",XK:"XK[0-9]{2}[0-9]{4}[0-9]{10}[0-9]{2}"},SEPA_COUNTRIES:["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GI","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MT","NL","NO","PL","PT","RO","SE","SI","SK","SM"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;f=f.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();var g=d.country;g?"string"==typeof g&&this.REGEX[g]||(g=b.getDynamicOption(c,g)):g=f.substr(0,2);var h=b.getLocale();if(!this.REGEX[g])return!1;if(void 0!==typeof d.sepa){var i=-1!==a.inArray(g,this.SEPA_COUNTRIES);if(("true"===d.sepa||d.sepa===!0)&&!i||("false"===d.sepa||d.sepa===!1)&&i)return!1}if(!new RegExp("^"+this.REGEX[g]+"$").test(f))return{valid:!1,message:FormValidation.Helper.format(d.message||FormValidation.I18n[h].iban.country,FormValidation.I18n[h].iban.countries[g])};f=f.substr(4)+f.substr(0,4),f=a.map(f.split(""),function(a){var b=a.charCodeAt(0);return b>="A".charCodeAt(0)&&b<="Z".charCodeAt(0)?b-"A".charCodeAt(0)+10:a}),f=f.join("");for(var j=parseInt(f.substr(0,1),10),k=f.length,l=1;k>l;++l)j=(10*j+parseInt(f.substr(l,1),10))%97;return{valid:1===j,message:FormValidation.Helper.format(d.message||FormValidation.I18n[h].iban.country,FormValidation.I18n[h].iban.countries[g])}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{id:{"default":"Please enter a valid identification number",country:"Please enter a valid identification number in %s",countries:{BA:"Bosnia and Herzegovina",BG:"Bulgaria",BR:"Brazil",CH:"Switzerland",CL:"Chile",CN:"China",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",ES:"Spain",FI:"Finland",HR:"Croatia",IE:"Ireland",IS:"Iceland",LT:"Lithuania",LV:"Latvia",ME:"Montenegro",MK:"Macedonia",NL:"Netherlands",PL:"Poland",RO:"Romania",RS:"Serbia",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",SM:"San Marino",TH:"Thailand",ZA:"South Africa"}}}}),FormValidation.Validator.id={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["BA","BG","BR","CH","CL","CN","CZ","DK","EE","ES","FI","HR","IE","IS","LT","LV","ME","MK","NL","PL","RO","RS","SE","SI","SK","SM","TH","ZA"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;var g=b.getLocale(),h=d.country;if(h?("string"!=typeof h||-1===a.inArray(h.toUpperCase(),this.COUNTRY_CODES))&&(h=b.getDynamicOption(c,h)):h=f.substr(0,2),-1===a.inArray(h,this.COUNTRY_CODES))return!0;var i=["_",h.toLowerCase()].join(""),j=this[i](f);return j=j===!0||j===!1?{valid:j}:j,j.message=FormValidation.Helper.format(d.message||FormValidation.I18n[g].id.country,FormValidation.I18n[g].id.countries[h.toUpperCase()]),j},_validateJMBG:function(a,b){if(!/^\d{13}$/.test(a))return!1;var c=parseInt(a.substr(0,2),10),d=parseInt(a.substr(2,2),10),e=(parseInt(a.substr(4,3),10),parseInt(a.substr(7,2),10)),f=parseInt(a.substr(12,1),10);if(c>31||d>12)return!1;for(var g=0,h=0;6>h;h++)g+=(7-h)*(parseInt(a.charAt(h),10)+parseInt(a.charAt(h+6),10));if(g=11-g%11,(10===g||11===g)&&(g=0),g!==f)return!1;switch(b.toUpperCase()){case"BA":return e>=10&&19>=e;case"MK":return e>=41&&49>=e;case"ME":return e>=20&&29>=e;case"RS":return e>=70&&99>=e;case"SI":return e>=50&&59>=e;default:return!0}},_ba:function(a){return this._validateJMBG(a,"BA")},_mk:function(a){return this._validateJMBG(a,"MK")},_me:function(a){return this._validateJMBG(a,"ME")},_rs:function(a){return this._validateJMBG(a,"RS")},_si:function(a){return this._validateJMBG(a,"SI")},_bg:function(a){if(!/^\d{10}$/.test(a)&&!/^\d{6}\s\d{3}\s\d{1}$/.test(a))return!1;a=a.replace(/\s/g,"");var b=parseInt(a.substr(0,2),10)+1900,c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10);if(c>40?(b+=100,c-=40):c>20&&(b-=100,c-=20),!FormValidation.Helper.date(b,c,d))return!1;for(var e=0,f=[2,4,8,5,10,9,7,3,6],g=0;9>g;g++)e+=parseInt(a.charAt(g),10)*f[g];return e=e%11%10,e+""===a.substr(9,1)},_br:function(a){if(a=a.replace(/\D/g,""),!/^\d{11}$/.test(a)||/^1{11}|2{11}|3{11}|4{11}|5{11}|6{11}|7{11}|8{11}|9{11}|0{11}$/.test(a))return!1;for(var b=0,c=0;9>c;c++)b+=(10-c)*parseInt(a.charAt(c),10);if(b=11-b%11,(10===b||11===b)&&(b=0),b+""!==a.charAt(9))return!1;var d=0;for(c=0;10>c;c++)d+=(11-c)*parseInt(a.charAt(c),10);return d=11-d%11,(10===d||11===d)&&(d=0),d+""===a.charAt(10)},_ch:function(a){if(!/^756[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{2}$/.test(a))return!1;a=a.replace(/\D/g,"").substr(3);for(var b=a.length,c=0,d=8===b?[3,1]:[1,3],e=0;b-1>e;e++)c+=parseInt(a.charAt(e),10)*d[e%2];return c=10-c%10,c+""===a.charAt(b-1)},_cl:function(a){if(!/^\d{7,8}[-]{0,1}[0-9K]$/i.test(a))return!1;for(a=a.replace(/\-/g,"");a.length<9;)a="0"+a;for(var b=0,c=[3,2,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,11===b?b=0:10===b&&(b="K"),b+""===a.charAt(8).toUpperCase()},_cn:function(b){if(b=b.trim(),!/^\d{15}$/.test(b)&&!/^\d{17}[\dXx]{1}$/.test(b))return!1;var c={11:{0:[0],1:[[0,9],[11,17]],2:[0,28,29]},12:{0:[0],1:[[0,16]],2:[0,21,23,25]},13:{0:[0],1:[[0,5],7,8,21,[23,33],[81,85]],2:[[0,5],[7,9],[23,25],27,29,30,81,83],3:[[0,4],[21,24]],4:[[0,4],6,21,[23,35],81],5:[[0,3],[21,35],81,82],6:[[0,4],[21,38],[81,84]],7:[[0,3],5,6,[21,33]],8:[[0,4],[21,28]],9:[[0,3],[21,30],[81,84]],10:[[0,3],[22,26],28,81,82],11:[[0,2],[21,28],81,82]},14:{0:[0],1:[0,1,[5,10],[21,23],81],2:[[0,3],11,12,[21,27]],3:[[0,3],11,21,22],4:[[0,2],11,21,[23,31],81],5:[[0,2],21,22,24,25,81],6:[[0,3],[21,24]],7:[[0,2],[21,29],81],8:[[0,2],[21,30],81,82],9:[[0,2],[21,32],81],10:[[0,2],[21,34],81,82],11:[[0,2],[21,30],81,82],23:[[0,3],22,23,[25,30],32,33]},15:{0:[0],1:[[0,5],[21,25]],2:[[0,7],[21,23]],3:[[0,4]],4:[[0,4],[21,26],[28,30]],5:[[0,2],[21,26],81],6:[[0,2],[21,27]],7:[[0,3],[21,27],[81,85]],8:[[0,2],[21,26]],9:[[0,2],[21,29],81],22:[[0,2],[21,24]],25:[[0,2],[22,31]],26:[[0,2],[24,27],[29,32],34],28:[0,1,[22,27]],29:[0,[21,23]]},21:{0:[0],1:[[0,6],[11,14],[22,24],81],2:[[0,4],[11,13],24,[81,83]],3:[[0,4],11,21,23,81],4:[[0,4],11,[21,23]],5:[[0,5],21,22],6:[[0,4],24,81,82],7:[[0,3],11,26,27,81,82],8:[[0,4],11,81,82],9:[[0,5],11,21,22],10:[[0,5],11,21,81],11:[[0,3],21,22],12:[[0,2],4,21,23,24,81,82],13:[[0,3],21,22,24,81,82],14:[[0,4],21,22,81]},22:{0:[0],1:[[0,6],12,22,[81,83]],2:[[0,4],11,21,[81,84]],3:[[0,3],22,23,81,82],4:[[0,3],21,22],5:[[0,3],21,23,24,81,82],6:[[0,2],4,5,[21,23],25,81],7:[[0,2],[21,24],81],8:[[0,2],21,22,81,82],24:[[0,6],24,26]},23:{0:[0],1:[[0,12],21,[23,29],[81,84]],2:[[0,8],21,[23,25],27,[29,31],81],3:[[0,7],21,81,82],4:[[0,7],21,22],5:[[0,3],5,6,[21,24]],6:[[0,6],[21,24]],7:[[0,16],22,81],8:[[0,5],11,22,26,28,33,81,82],9:[[0,4],21],10:[[0,5],24,25,81,[83,85]],11:[[0,2],21,23,24,81,82],12:[[0,2],[21,26],[81,83]],27:[[0,4],[21,23]]},31:{0:[0],1:[0,1,[3,10],[12,20]],2:[0,30]},32:{0:[0],1:[[0,7],11,[13,18],24,25],2:[[0,6],11,81,82],3:[[0,5],11,12,[21,24],81,82],4:[[0,2],4,5,11,12,81,82],5:[[0,9],[81,85]],6:[[0,2],11,12,21,23,[81,84]],7:[0,1,3,5,6,[21,24]],8:[[0,4],11,26,[29,31]],9:[[0,3],[21,25],28,81,82],10:[[0,3],11,12,23,81,84,88],11:[[0,2],11,12,[81,83]],12:[[0,4],[81,84]],13:[[0,2],11,[21,24]]},33:{0:[0],1:[[0,6],[8,10],22,27,82,83,85],2:[0,1,[3,6],11,12,25,26,[81,83]],3:[[0,4],22,24,[26,29],81,82],4:[[0,2],11,21,24,[81,83]],5:[[0,3],[21,23]],6:[[0,2],21,24,[81,83]],7:[[0,3],23,26,27,[81,84]],8:[[0,3],22,24,25,81],9:[[0,3],21,22],10:[[0,4],[21,24],81,82],11:[[0,2],[21,27],81]},34:{0:[0],1:[[0,4],11,[21,24],81],2:[[0,4],7,8,[21,23],25],3:[[0,4],11,[21,23]],4:[[0,6],21],5:[[0,4],6,[21,23]],6:[[0,4],21],7:[[0,3],11,21],8:[[0,3],11,[22,28],81],10:[[0,4],[21,24]],11:[[0,3],22,[24,26],81,82],12:[[0,4],21,22,25,26,82],13:[[0,2],[21,24]],14:[[0,2],[21,24]],15:[[0,3],[21,25]],16:[[0,2],[21,23]],17:[[0,2],[21,23]],18:[[0,2],[21,25],81]},35:{0:[0],1:[[0,5],11,[21,25],28,81,82],2:[[0,6],[11,13]],3:[[0,5],22],4:[[0,3],21,[23,30],81],5:[[0,5],21,[24,27],[81,83]],6:[[0,3],[22,29],81],7:[[0,2],[21,25],[81,84]],8:[[0,2],[21,25],81],9:[[0,2],[21,26],81,82]},36:{0:[0],1:[[0,5],11,[21,24]],2:[[0,3],22,81],3:[[0,2],13,[21,23]],4:[[0,3],21,[23,30],81,82],5:[[0,2],21],6:[[0,2],22,81],7:[[0,2],[21,35],81,82],8:[[0,3],[21,30],81],9:[[0,2],[21,26],[81,83]],10:[[0,2],[21,30]],11:[[0,2],[21,30],81]},37:{0:[0],1:[[0,5],12,13,[24,26],81],2:[[0,3],5,[11,14],[81,85]],3:[[0,6],[21,23]],4:[[0,6],81],5:[[0,3],[21,23]],6:[[0,2],[11,13],34,[81,87]],7:[[0,5],24,25,[81,86]],8:[[0,2],11,[26,32],[81,83]],9:[[0,3],11,21,23,82,83],10:[[0,2],[81,83]],11:[[0,3],21,22],12:[[0,3]],13:[[0,2],11,12,[21,29]],14:[[0,2],[21,28],81,82],15:[[0,2],[21,26],81],16:[[0,2],[21,26]],17:[[0,2],[21,28]]},41:{0:[0],1:[[0,6],8,22,[81,85]],2:[[0,5],11,[21,25]],3:[[0,7],11,[22,29],81],4:[[0,4],11,[21,23],25,81,82],5:[[0,3],5,6,22,23,26,27,81],6:[[0,3],11,21,22],7:[[0,4],11,21,[24,28],81,82],8:[[0,4],11,[21,23],25,[81,83]],9:[[0,2],22,23,[26,28]],10:[[0,2],[23,25],81,82],11:[[0,4],[21,23]],12:[[0,2],21,22,24,81,82],13:[[0,3],[21,30],81],14:[[0,3],[21,26],81],15:[[0,3],[21,28]],16:[[0,2],[21,28],81],17:[[0,2],[21,29]],90:[0,1]},42:{0:[0],1:[[0,7],[11,17]],2:[[0,5],22,81],3:[[0,3],[21,25],81],5:[[0,6],[25,29],[81,83]],6:[[0,2],6,7,[24,26],[82,84]],7:[[0,4]],8:[[0,2],4,21,22,81],9:[[0,2],[21,23],81,82,84],10:[[0,3],[22,24],81,83,87],11:[[0,2],[21,27],81,82],12:[[0,2],[21,24],81],13:[[0,3],21,81],28:[[0,2],22,23,[25,28]],90:[0,[4,6],21]},43:{0:[0],1:[[0,5],11,12,21,22,24,81],2:[[0,4],11,21,[23,25],81],3:[[0,2],4,21,81,82],4:[0,1,[5,8],12,[21,24],26,81,82],5:[[0,3],11,[21,25],[27,29],81],6:[[0,3],11,21,23,24,26,81,82],7:[[0,3],[21,26],81],8:[[0,2],11,21,22],9:[[0,3],[21,23],81],10:[[0,3],[21,28],81],11:[[0,3],[21,29]],12:[[0,2],[21,30],81],13:[[0,2],21,22,81,82],31:[0,1,[22,27],30]},44:{0:[0],1:[[0,7],[11,16],83,84],2:[[0,5],21,22,24,29,32,33,81,82],3:[0,1,[3,8]],4:[[0,4]],5:[0,1,[6,15],23,82,83],6:[0,1,[4,8]],7:[0,1,[3,5],81,[83,85]],8:[[0,4],11,23,25,[81,83]],9:[[0,3],23,[81,83]],12:[[0,3],[23,26],83,84],13:[[0,3],[22,24],81],14:[[0,2],[21,24],26,27,81],15:[[0,2],21,23,81],16:[[0,2],[21,25]],17:[[0,2],21,23,81],18:[[0,3],21,23,[25,27],81,82],19:[0],20:[0],51:[[0,3],21,22],52:[[0,3],21,22,24,81],53:[[0,2],[21,23],81]},45:{0:[0],1:[[0,9],[21,27]],2:[[0,5],[21,26]],3:[[0,5],11,12,[21,32]],4:[0,1,[3,6],11,[21,23],81],5:[[0,3],12,21],6:[[0,3],21,81],7:[[0,3],21,22],8:[[0,4],21,81],9:[[0,3],[21,24],81],10:[[0,2],[21,31]],11:[[0,2],[21,23]],12:[[0,2],[21,29],81],13:[[0,2],[21,24],81],14:[[0,2],[21,25],81]},46:{0:[0],1:[0,1,[5,8]],2:[0,1],3:[0,[21,23]],90:[[0,3],[5,7],[21,39]]},50:{0:[0],1:[[0,19]],2:[0,[22,38],[40,43]],3:[0,[81,84]]},51:{0:[0],1:[0,1,[4,8],[12,15],[21,24],29,31,32,[81,84]],3:[[0,4],11,21,22],4:[[0,3],11,21,22],5:[[0,4],21,22,24,25],6:[0,1,3,23,26,[81,83]],7:[0,1,3,4,[22,27],81],8:[[0,2],11,12,[21,24]],9:[[0,4],[21,23]],10:[[0,2],11,24,25,28],11:[[0,2],[11,13],23,24,26,29,32,33,81],13:[[0,4],[21,25],81],14:[[0,2],[21,25]],15:[[0,3],[21,29]],16:[[0,3],[21,23],81],17:[[0,3],[21,25],81],18:[[0,3],[21,27]],19:[[0,3],[21,23]],20:[[0,2],21,22,81],32:[0,[21,33]],33:[0,[21,38]],34:[0,1,[22,37]]},52:{0:[0],1:[[0,3],[11,15],[21,23],81],2:[0,1,3,21,22],3:[[0,3],[21,30],81,82],4:[[0,2],[21,25]],5:[[0,2],[21,27]],6:[[0,3],[21,28]],22:[0,1,[22,30]],23:[0,1,[22,28]],24:[0,1,[22,28]],26:[0,1,[22,36]],27:[[0,2],22,23,[25,32]]},53:{0:[0],1:[[0,3],[11,14],21,22,[24,29],81],3:[[0,2],[21,26],28,81],4:[[0,2],[21,28]],5:[[0,2],[21,24]],6:[[0,2],[21,30]],7:[[0,2],[21,24]],8:[[0,2],[21,29]],9:[[0,2],[21,27]],23:[0,1,[22,29],31],25:[[0,4],[22,32]],26:[0,1,[21,28]],27:[0,1,[22,30]],28:[0,1,22,23],29:[0,1,[22,32]],31:[0,2,3,[22,24]],34:[0,[21,23]],33:[0,21,[23,25]],35:[0,[21,28]]},54:{0:[0],1:[[0,2],[21,27]],21:[0,[21,29],32,33],22:[0,[21,29],[31,33]],23:[0,1,[22,38]],24:[0,[21,31]],25:[0,[21,27]],26:[0,[21,27]]},61:{0:[0],1:[[0,4],[11,16],22,[24,26]],2:[[0,4],22],3:[[0,4],[21,24],[26,31]],4:[[0,4],[22,31],81],5:[[0,2],[21,28],81,82],6:[[0,2],[21,32]],7:[[0,2],[21,30]],8:[[0,2],[21,31]],9:[[0,2],[21,29]],10:[[0,2],[21,26]]},62:{0:[0],1:[[0,5],11,[21,23]],2:[0,1],3:[[0,2],21],4:[[0,3],[21,23]],5:[[0,3],[21,25]],6:[[0,2],[21,23]],7:[[0,2],[21,25]],8:[[0,2],[21,26]],9:[[0,2],[21,24],81,82],10:[[0,2],[21,27]],11:[[0,2],[21,26]],12:[[0,2],[21,28]],24:[0,21,[24,29]],26:[0,21,[23,30]],29:[0,1,[21,27]],30:[0,1,[21,27]]},63:{0:[0],1:[[0,5],[21,23]],2:[0,2,[21,25]],21:[0,[21,23],[26,28]],22:[0,[21,24]],23:[0,[21,24]],25:[0,[21,25]],26:[0,[21,26]],27:[0,1,[21,26]],28:[[0,2],[21,23]]},64:{0:[0],1:[0,1,[4,6],21,22,81],2:[[0,3],5,[21,23]],3:[[0,3],[21,24],81],4:[[0,2],[21,25]],5:[[0,2],21,22]},65:{0:[0],1:[[0,9],21],2:[[0,5]],21:[0,1,22,23],22:[0,1,22,23],23:[[0,3],[23,25],27,28],28:[0,1,[22,29]],29:[0,1,[22,29]],30:[0,1,[22,24]],31:[0,1,[21,31]],32:[0,1,[21,27]],40:[0,2,3,[21,28]],42:[[0,2],21,[23,26]],43:[0,1,[21,26]],90:[[0,4]],27:[[0,2],22,23]},71:{0:[0]},81:{0:[0]},82:{0:[0]}},d=parseInt(b.substr(0,2),10),e=parseInt(b.substr(2,2),10),f=parseInt(b.substr(4,2),10);if(!c[d]||!c[d][e])return!1;for(var g=!1,h=c[d][e],i=0;i<h.length;i++)if(a.isArray(h[i])&&h[i][0]<=f&&f<=h[i][1]||!a.isArray(h[i])&&f===h[i]){g=!0;break}if(!g)return!1;var j;j=18===b.length?b.substr(6,8):"19"+b.substr(6,6);var k=parseInt(j.substr(0,4),10),l=parseInt(j.substr(4,2),10),m=parseInt(j.substr(6,2),10);if(!FormValidation.Helper.date(k,l,m))return!1;if(18===b.length){var n=0,o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];for(i=0;17>i;i++)n+=parseInt(b.charAt(i),10)*o[i];n=(12-n%11)%11;var p="X"!==b.charAt(17).toUpperCase()?parseInt(b.charAt(17),10):10;return p===n}return!0},_cz:function(a){if(!/^\d{9,10}$/.test(a))return!1;var b=1900+parseInt(a.substr(0,2),10),c=parseInt(a.substr(2,2),10)%50%20,d=parseInt(a.substr(4,2),10);if(9===a.length){if(b>=1980&&(b-=100),b>1953)return!1}else 1954>b&&(b+=100);if(!FormValidation.Helper.date(b,c,d))return!1;if(10===a.length){var e=parseInt(a.substr(0,9),10)%11;return 1985>b&&(e%=10),e+""===a.substr(9,1)}return!0},_dk:function(a){if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(a))return!1;a=a.replace(/-/g,"");var b=parseInt(a.substr(0,2),10),c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10);switch(!0){case-1!=="5678".indexOf(a.charAt(6))&&d>=58:d+=1800;break;case-1!=="0123".indexOf(a.charAt(6)):case-1!=="49".indexOf(a.charAt(6))&&d>=37:d+=1900;break;default:d+=2e3}return FormValidation.Helper.date(d,c,b)},_ee:function(a){return this._lt(a)},_es:function(a){var b=/^[0-9]{8}[-]{0,1}[A-HJ-NP-TV-Z]$/.test(a),c=/^[XYZ][-]{0,1}[0-9]{7}[-]{0,1}[A-HJ-NP-TV-Z]$/.test(a),d=/^[A-HNPQS][-]{0,1}[0-9]{7}[-]{0,1}[0-9A-J]$/.test(a);if(!b&&!c&&!d)return!1;a=a.replace(/-/g,"");var e,f,g=!0;if(b||c){f="DNI";var h="XYZ".indexOf(a.charAt(0));return-1!==h&&(a=h+a.substr(1)+"",f="NIE"),e=parseInt(a.substr(0,8),10),e="TRWAGMYFPDXBNJZSQVHLCKE"[e%23],{valid:e===a.substr(8,1),type:f}}e=a.substr(1,7),f="CIF";for(var i=a[0],j=a.substr(-1),k=0,l=0;l<e.length;l++)if(l%2!==0)k+=parseInt(e[l],10);else{var m=""+2*parseInt(e[l],10);k+=parseInt(m[0],10),2===m.length&&(k+=parseInt(m[1],10))}var n=k-10*Math.floor(k/10);return 0!==n&&(n=10-n),g=-1!=="KQS".indexOf(i)?j==="JABCDEFGHI"[n]:-1!=="ABEH".indexOf(i)?j===""+n:j===""+n||j==="JABCDEFGHI"[n],{valid:g,type:f}},_fi:function(a){if(!/^[0-9]{6}[-+A][0-9]{3}[0-9ABCDEFHJKLMNPRSTUVWXY]$/.test(a))return!1;var b=parseInt(a.substr(0,2),10),c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10),e={"+":1800,"-":1900,A:2e3};if(d=e[a.charAt(6)]+d,!FormValidation.Helper.date(d,c,b))return!1;var f=parseInt(a.substr(7,3),10);if(2>f)return!1;var g=a.substr(0,6)+a.substr(7,3)+"";return g=parseInt(g,10),"0123456789ABCDEFHJKLMNPRSTUVWXY".charAt(g%31)===a.charAt(10)},_hr:function(a){return/^[0-9]{11}$/.test(a)?FormValidation.Helper.mod11And10(a):!1},_ie:function(a){if(!/^\d{7}[A-W][AHWTX]?$/.test(a))return!1;var b=function(a){for(;a.length<7;)a="0"+a;for(var b="WABCDEFGHIJKLMNOPQRSTUV",c=0,d=0;7>d;d++)c+=parseInt(a.charAt(d),10)*(8-d);return c+=9*b.indexOf(a.substr(7)),b[c%23]};return 9!==a.length||"A"!==a.charAt(8)&&"H"!==a.charAt(8)?a.charAt(7)===b(a.substr(0,7)):a.charAt(7)===b(a.substr(0,7)+a.substr(8)+"")},_is:function(a){if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(a))return!1;a=a.replace(/-/g,"");var b=parseInt(a.substr(0,2),10),c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10),e=parseInt(a.charAt(9),10);if(d=9===e?1900+d:100*(20+e)+d,!FormValidation.Helper.date(d,c,b,!0))return!1;for(var f=0,g=[3,2,7,6,5,4,3,2],h=0;8>h;h++)f+=parseInt(a.charAt(h),10)*g[h];return f=11-f%11,f+""===a.charAt(8)},_lt:function(a){if(!/^[0-9]{11}$/.test(a))return!1;var b=parseInt(a.charAt(0),10),c=parseInt(a.substr(1,2),10),d=parseInt(a.substr(3,2),10),e=parseInt(a.substr(5,2),10),f=b%2===0?17+b/2:17+(b+1)/2;if(c=100*f+c,!FormValidation.Helper.date(c,d,e,!0))return!1;for(var g=0,h=[1,2,3,4,5,6,7,8,9,1],i=0;10>i;i++)g+=parseInt(a.charAt(i),10)*h[i];if(g%=11,10!==g)return g+""===a.charAt(10);for(g=0,h=[3,4,5,6,7,8,9,1,2,3],i=0;10>i;i++)g+=parseInt(a.charAt(i),10)*h[i];return g%=11,10===g&&(g=0),g+""===a.charAt(10)},_lv:function(a){if(!/^[0-9]{6}[-]{0,1}[0-9]{5}$/.test(a))return!1;a=a.replace(/\D/g,"");var b=parseInt(a.substr(0,2),10),c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10);if(d=d+1800+100*parseInt(a.charAt(6),10),!FormValidation.Helper.date(d,c,b,!0))return!1;for(var e=0,f=[10,5,8,4,2,1,6,3,7,9],g=0;10>g;g++)e+=parseInt(a.charAt(g),10)*f[g];return e=(e+1)%11%10,e+""===a.charAt(10)},_nl:function(a){if(a.length<8)return!1;if(8===a.length&&(a="0"+a),!/^[0-9]{4}[.]{0,1}[0-9]{2}[.]{0,1}[0-9]{3}$/.test(a))return!1;if(a=a.replace(/\./g,""),0===parseInt(a,10))return!1;for(var b=0,c=a.length,d=0;c-1>d;d++)b+=(9-d)*parseInt(a.charAt(d),10);return b%=11,10===b&&(b=0),b+""===a.charAt(c-1)},_pl:function(a){if(!/^[0-9]{11}$/.test(a))return!1;for(var b=0,c=a.length,d=[1,3,7,9,1,3,7,9,1,3,7],e=0;c-1>e;e++)b+=d[e]*parseInt(a.charAt(e),10);return b%=10,0===b&&(b=10),b=10-b,b+""===a.charAt(c-1)},_ro:function(a){if(!/^[0-9]{13}$/.test(a))return!1;var b=parseInt(a.charAt(0),10);if(0===b||7===b||8===b)return!1;var c=parseInt(a.substr(1,2),10),d=parseInt(a.substr(3,2),10),e=parseInt(a.substr(5,2),10),f={1:1900,2:1900,3:1800,4:1800,5:2e3,6:2e3};if(e>31&&d>12)return!1;if(9!==b&&(c=f[b+""]+c,!FormValidation.Helper.date(c,d,e)))return!1;for(var g=0,h=[2,7,9,1,4,6,3,5,8,2,7,9],i=a.length,j=0;i-1>j;j++)g+=parseInt(a.charAt(j),10)*h[j];return g%=11,10===g&&(g=1),g+""===a.charAt(i-1)},_se:function(a){if(!/^[0-9]{10}$/.test(a)&&!/^[0-9]{6}[-|+][0-9]{4}$/.test(a))return!1;a=a.replace(/[^0-9]/g,"");var b=parseInt(a.substr(0,2),10)+1900,c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10);return FormValidation.Helper.date(b,c,d)?FormValidation.Helper.luhn(a):!1},_sk:function(a){return this._cz(a)},_sm:function(a){return/^\d{5}$/.test(a)},_th:function(a){if(13!==a.length)return!1;for(var b=0,c=0;12>c;c++)b+=parseInt(a.charAt(c),10)*(13-c);return(11-b%11)%10===parseInt(a.charAt(12),10)},_za:function(a){if(!/^[0-9]{10}[0|1][8|9][0-9]$/.test(a))return!1;var b=parseInt(a.substr(0,2),10),c=(new Date).getFullYear()%100,d=parseInt(a.substr(2,2),10),e=parseInt(a.substr(4,2),10);return b=b>=c?b+1900:b+2e3,FormValidation.Helper.date(b,d,e)?FormValidation.Helper.luhn(a):!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{identical:{"default":"Please enter the same value"}}}),FormValidation.Validator.identical={html5Attributes:{message:"message",field:"field"},init:function(a,b,c,d){var e=a.getFieldElements(c.field);a.onLiveChange(e,"live_"+d,function(){var c=a.getStatus(b,d);c!==a.STATUS_NOT_VALIDATED&&a.revalidateField(b)})},destroy:function(a,b,c,d){var e=a.getFieldElements(c.field);a.offLiveChange(e,"live_"+d)},validate:function(a,b,c,d){var e=a.getFieldValue(b,d),f=a.getFieldElements(c.field);if(null===f||0===f.length)return!0;var g=a.getFieldValue(f,d);return e===g?(a.updateStatus(f,a.STATUS_VALID,d),!0):!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{imei:{"default":"Please enter a valid IMEI number"}}}),FormValidation.Validator.imei={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;switch(!0){case/^\d{15}$/.test(e):case/^\d{2}-\d{6}-\d{6}-\d{1}$/.test(e):case/^\d{2}\s\d{6}\s\d{6}\s\d{1}$/.test(e):return e=e.replace(/[^0-9]/g,""),FormValidation.Helper.luhn(e);case/^\d{14}$/.test(e):case/^\d{16}$/.test(e):case/^\d{2}-\d{6}-\d{6}(|-\d{2})$/.test(e):case/^\d{2}\s\d{6}\s\d{6}(|\s\d{2})$/.test(e):return!0;default:return!1}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{imo:{"default":"Please enter a valid IMO number"}}}),FormValidation.Validator.imo={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(!/^IMO \d{7}$/i.test(e))return!1;for(var f=0,g=e.replace(/^.*(\d{7})$/,"$1"),h=6;h>=1;h--)f+=g.slice(6-h,-h)*(h+1);return f%10===parseInt(g.charAt(6),10)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{integer:{"default":"Please enter a valid number"}}}),FormValidation.Validator.integer={html5Attributes:{message:"message",thousandsseparator:"thousandsSeparator",decimalseparator:"decimalSeparator"},enableByHtml5:function(a){return"number"===a.attr("type")&&(void 0===a.attr("step")||a.attr("step")%1===0)},validate:function(a,b,c,d){if(this.enableByHtml5(b)&&b.get(0).validity&&b.get(0).validity.badInput===!0)return!1;var e=a.getFieldValue(b,d);if(""===e)return!0;var f=c.decimalSeparator||".",g=c.thousandsSeparator||"";f="."===f?"\\.":f,g="."===g?"\\.":g;var h=new RegExp("^-?[0-9]{1,3}("+g+"[0-9]{3})*("+f+"[0-9]+)?$"),i=new RegExp(g,"g");return h.test(e)?(g&&(e=e.replace(i,"")),f&&(e=e.replace(f,".")),isNaN(e)||!isFinite(e)?!1:(e=parseFloat(e),Math.floor(e)===e)):!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{ip:{"default":"Please enter a valid IP address",ipv4:"Please enter a valid IPv4 address",ipv6:"Please enter a valid IPv6 address"}}}),FormValidation.Validator.ip={html5Attributes:{message:"message",ipv4:"ipv4",ipv6:"ipv6"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;d=a.extend({},{ipv4:!0,ipv6:!0},d);var g,h=b.getLocale(),i=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,j=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,k=!1;switch(!0){case d.ipv4&&!d.ipv6:k=i.test(f),g=d.message||FormValidation.I18n[h].ip.ipv4;break;case!d.ipv4&&d.ipv6:k=j.test(f),g=d.message||FormValidation.I18n[h].ip.ipv6;break;case d.ipv4&&d.ipv6:default:k=i.test(f)||j.test(f),g=d.message||FormValidation.I18n[h].ip["default"]}return{valid:k,message:g}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{isbn:{"default":"Please enter a valid ISBN number"}}}),FormValidation.Validator.isbn={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f;switch(!0){case/^\d{9}[\dX]$/.test(e):case 13===e.length&&/^(\d+)-(\d+)-(\d+)-([\dX])$/.test(e):case 13===e.length&&/^(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(e):f="ISBN10";break;case/^(978|979)\d{9}[\dX]$/.test(e):case 17===e.length&&/^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/.test(e):case 17===e.length&&/^(978|979)\s(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(e):f="ISBN13";break;default:return!1}e=e.replace(/[^0-9X]/gi,"");var g,h,i=e.split(""),j=i.length,k=0;switch(f){case"ISBN10":for(k=0,g=0;j-1>g;g++)k+=parseInt(i[g],10)*(10-g);return h=11-k%11,11===h?h=0:10===h&&(h="X"),{type:f,valid:h+""===i[j-1]};case"ISBN13":for(k=0,g=0;j-1>g;g++)k+=g%2===0?parseInt(i[g],10):3*parseInt(i[g],10);return h=10-k%10,10===h&&(h="0"),{type:f,valid:h+""===i[j-1]};default:return!1}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{isin:{"default":"Please enter a valid ISIN number"}}}),FormValidation.Validator.isin={COUNTRY_CODES:"AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW",validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;e=e.toUpperCase();var f=new RegExp("^("+this.COUNTRY_CODES+")[0-9A-Z]{10}$");if(!f.test(e))return!1;for(var g="",h=e.length,i=0;h-1>i;i++){var j=e.charCodeAt(i);g+=j>57?(j-55).toString():e.charAt(i)}var k="",l=g.length,m=l%2!==0?0:1;for(i=0;l>i;i++)k+=parseInt(g[i],10)*(i%2===m?2:1)+"";var n=0;for(i=0;i<k.length;i++)n+=parseInt(k.charAt(i),10);return n=(10-n%10)%10,n+""===e.charAt(h-1)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{ismn:{"default":"Please enter a valid ISMN number"}}}),FormValidation.Validator.ismn={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f;switch(!0){case/^M\d{9}$/.test(e):case/^M-\d{4}-\d{4}-\d{1}$/.test(e):case/^M\s\d{4}\s\d{4}\s\d{1}$/.test(e):f="ISMN10";break;case/^9790\d{9}$/.test(e):case/^979-0-\d{4}-\d{4}-\d{1}$/.test(e):case/^979\s0\s\d{4}\s\d{4}\s\d{1}$/.test(e):f="ISMN13";break;default:return!1}"ISMN10"===f&&(e="9790"+e.substr(1)),e=e.replace(/[^0-9]/gi,"");for(var g=e.length,h=0,i=[1,3],j=0;g-1>j;j++)h+=parseInt(e.charAt(j),10)*i[j%2];return h=10-h%10,{type:f,valid:h+""===e.charAt(g-1)}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{issn:{"default":"Please enter a valid ISSN number"}}}),FormValidation.Validator.issn={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(!/^\d{4}\-\d{3}[\dX]$/.test(e))return!1;e=e.replace(/[^0-9X]/gi,"");var f=e.split(""),g=f.length,h=0;"X"===f[7]&&(f[7]=10);for(var i=0;g>i;i++)h+=parseInt(f[i],10)*(8-i);return h%11===0}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{lessThan:{"default":"Please enter a value less than or equal to %s",notInclusive:"Please enter a value less than %s"}}}),FormValidation.Validator.lessThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(a){var b=a.attr("type"),c=a.attr("max");return c&&"date"!==b?{value:c}:!1},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;f=this._format(f);var g=b.getLocale(),h=a.isNumeric(d.value)?d.value:b.getDynamicOption(c,d.value),i=this._format(h);return d.inclusive===!0||void 0===d.inclusive?{valid:a.isNumeric(f)&&parseFloat(f)<=i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].lessThan["default"],h)}:{valid:a.isNumeric(f)&&parseFloat(f)<i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].lessThan.notInclusive,h)}},_format:function(a){return(a+"").replace(",",".")}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{mac:{"default":"Please enter a valid MAC address"}}}),FormValidation.Validator.mac={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{meid:{"default":"Please enter a valid MEID number"}}}),FormValidation.Validator.meid={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;switch(!0){case/^[0-9A-F]{15}$/i.test(e):case/^[0-9A-F]{2}[-][0-9A-F]{6}[-][0-9A-F]{6}[-][0-9A-F]$/i.test(e):case/^\d{19}$/.test(e):case/^\d{5}[-]\d{5}[-]\d{4}[-]\d{4}[-]\d$/.test(e):var f=e.charAt(e.length-1);if(e=e.replace(/[- ]/g,""),e.match(/^\d*$/i))return FormValidation.Helper.luhn(e);e=e.slice(0,-1);for(var g="",h=1;13>=h;h+=2)g+=(2*parseInt(e.charAt(h),16)).toString(16);var i=0;for(h=0;h<g.length;h++)i+=parseInt(g.charAt(h),16);return i%10===0?"0"===f:f===(2*(10*Math.floor((i+10)/10)-i)).toString(16);case/^[0-9A-F]{14}$/i.test(e):case/^[0-9A-F]{2}[-][0-9A-F]{6}[-][0-9A-F]{6}$/i.test(e):case/^\d{18}$/.test(e):case/^\d{5}[-]\d{5}[-]\d{4}[-]\d{4}$/.test(e):return!0;default:return!1}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{notEmpty:{"default":"Please enter a value"}}}),FormValidation.Validator.notEmpty={enableByHtml5:function(a){var b=a.attr("required")+"";return"required"===b||"true"===b},validate:function(b,c,d,e){var f=c.attr("type");if("radio"===f||"checkbox"===f){var g=b.getNamespace();return b.getFieldElements(c.attr("data-"+g+"-field")).filter(":checked").length>0}if("number"===f&&c.get(0).validity&&c.get(0).validity.badInput===!0)return!0;var h=b.getFieldValue(c,e);return""!==a.trim(h)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{numeric:{"default":"Please enter a valid float number"}}}),FormValidation.Validator.numeric={html5Attributes:{message:"message",separator:"separator",thousandsseparator:"thousandsSeparator",decimalseparator:"decimalSeparator"},enableByHtml5:function(a){return"number"===a.attr("type")&&void 0!==a.attr("step")&&a.attr("step")%1!==0},validate:function(a,b,c,d){if(this.enableByHtml5(b)&&b.get(0).validity&&b.get(0).validity.badInput===!0)return!1;var e=a.getFieldValue(b,d);if(""===e)return!0;var f=c.separator||c.decimalSeparator||".",g=c.thousandsSeparator||"";f="."===f?"\\.":f,g="."===g?"\\.":g;var h=new RegExp("^-?[0-9]{1,3}("+g+"[0-9]{3})*("+f+"[0-9]+)?$"),i=new RegExp(g,"g");return h.test(e)?(g&&(e=e.replace(i,"")),f&&(e=e.replace(f,".")),!isNaN(parseFloat(e))&&isFinite(e)):!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{phone:{"default":"Please enter a valid phone number",country:"Please enter a valid phone number in %s",countries:{AE:"United Arab Emirates",BG:"Bulgaria",BR:"Brazil",CN:"China",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",ES:"Spain",FR:"France",GB:"United Kingdom",IN:"India",MA:"Morocco",NL:"Netherlands",PK:"Pakistan",RO:"Romania",RU:"Russia",SK:"Slovakia",TH:"Thailand",US:"USA",VE:"Venezuela"}}}}),FormValidation.Validator.phone={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["AE","BG","BR","CN","CZ","DE","DK","ES","FR","GB","IN","MA","NL","PK","RO","RU","SK","TH","US","VE"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;var g=b.getLocale(),h=d.country;if(("string"!=typeof h||-1===a.inArray(h,this.COUNTRY_CODES))&&(h=b.getDynamicOption(c,h)),!h||-1===a.inArray(h.toUpperCase(),this.COUNTRY_CODES))return!0;var i=!0;switch(h.toUpperCase()){case"AE":f=a.trim(f),i=/^(((\+|00)?971[\s\.-]?(\(0\)[\s\.-]?)?|0)(\(5(0|2|5|6)\)|5(0|2|5|6)|2|3|4|6|7|9)|60)([\s\.-]?[0-9]){7}$/.test(f);break;case"BG":f=f.replace(/\+|\s|-|\/|\(|\)/gi,""),i=/^(0|359|00)(((700|900)[0-9]{5}|((800)[0-9]{5}|(800)[0-9]{4}))|(87|88|89)([0-9]{7})|((2[0-9]{7})|(([3-9][0-9])(([0-9]{6})|([0-9]{5})))))$/.test(f);break;case"BR":f=a.trim(f),i=/^(([\d]{4}[-.\s]{1}[\d]{2,3}[-.\s]{1}[\d]{2}[-.\s]{1}[\d]{2})|([\d]{4}[-.\s]{1}[\d]{3}[-.\s]{1}[\d]{4})|((\(?\+?[0-9]{2}\)?\s?)?(\(?\d{2}\)?\s?)?\d{4,5}[-.\s]?\d{4}))$/.test(f);break;case"CN":f=a.trim(f),i=/^((00|\+)?(86(?:-| )))?((\d{11})|(\d{3}[- ]{1}\d{4}[- ]{1}\d{4})|((\d{2,4}[- ]){1}(\d{7,8}|(\d{3,4}[- ]{1}\d{4}))([- ]{1}\d{1,4})?))$/.test(f);break;case"CZ":i=/^(((00)([- ]?)|\+)(420)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(f);break;case"DE":f=a.trim(f),i=/^(((((((00|\+)49[ \-/]?)|0)[1-9][0-9]{1,4})[ \-/]?)|((((00|\+)49\()|\(0)[1-9][0-9]{1,4}\)[ \-/]?))[0-9]{1,7}([ \-/]?[0-9]{1,5})?)$/.test(f);break;case"DK":f=a.trim(f),i=/^(\+45|0045|\(45\))?\s?[2-9](\s?\d){7}$/.test(f);break;case"ES":f=a.trim(f),i=/^(?:(?:(?:\+|00)34\D?))?(?:5|6|7|8|9)(?:\d\D?){8}$/.test(f);break;case"FR":f=a.trim(f),i=/^(?:(?:(?:\+|00)33[ ]?(?:\(0\)[ ]?)?)|0){1}[1-9]{1}([ .-]?)(?:\d{2}\1?){3}\d{2}$/.test(f);break;case"GB":f=a.trim(f),i=/^\(?(?:(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?\(?(?:0\)?[\s-]?\(?)?|0)(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}|\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4}|\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3})|\d{5}\)?[\s-]?\d{4,5}|8(?:00[\s-]?11[\s-]?11|45[\s-]?46[\s-]?4\d))(?:(?:[\s-]?(?:x|ext\.?\s?|\#)\d+)?)$/.test(f);break;case"IN":f=a.trim(f),i=/((\+?)((0[ -]+)*|(91 )*)(\d{12}|\d{10}))|\d{5}([- ]*)\d{6}/.test(f);break;case"MA":f=a.trim(f),i=/^(?:(?:(?:\+|00)212[\s]?(?:[\s]?\(0\)[\s]?)?)|0){1}(?:5[\s.-]?[2-3]|6[\s.-]?[13-9]){1}[0-9]{1}(?:[\s.-]?\d{2}){3}$/.test(f);break;case"NL":f=a.trim(f),i=/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9])((\s|\s?-\s?)?[0-9])((\s|\s?-\s?)?[0-9])\s?[0-9]\s?[0-9]\s?[0-9]\s?[0-9]\s?[0-9]$/gm.test(f);break;case"PK":f=a.trim(f),i=/^0?3[0-9]{2}[0-9]{7}$/.test(f);break;case"RO":i=/^(\+4|)?(07[0-8]{1}[0-9]{1}|02[0-9]{2}|03[0-9]{2}){1}?(\s|\.|\-)?([0-9]{3}(\s|\.|\-|)){2}$/g.test(f);break;case"RU":i=/^((8|\+7|007)[\-\.\/ ]?)?([\(\/\.]?\d{3}[\)\/\.]?[\-\.\/ ]?)?[\d\-\.\/ ]{7,10}$/g.test(f);break;case"SK":i=/^(((00)([- ]?)|\+)(421)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(f);break;case"TH":i=/^0\(?([6|8-9]{2})*-([0-9]{3})*-([0-9]{4})$/.test(f);break;case"VE":f=a.trim(f),i=/^0(?:2(?:12|4[0-9]|5[1-9]|6[0-9]|7[0-8]|8[1-35-8]|9[1-5]|3[45789])|4(?:1[246]|2[46]))\d{7}$/.test(f);break;case"US":default:i=/^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(f)}return{valid:i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].phone.country,FormValidation.I18n[g].phone.countries[h])}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{promise:{"default":"Please enter a valid value"}}}),FormValidation.Validator.promise={html5Attributes:{message:"message",promise:"promise"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e),g=new a.Deferred,h=FormValidation.Helper.call(d.promise,[f,b,c]);return h.done(function(a){g.resolve(c,e,a)}).fail(function(a){a=a||{},a.valid=!1,g.resolve(c,e,a)}),g}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{regexp:{"default":"Please enter a value matching the pattern"}}}),FormValidation.Validator.regexp={html5Attributes:{message:"message",regexp:"regexp"},enableByHtml5:function(a){var b=a.attr("pattern");return b?{regexp:b}:!1},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f="string"==typeof c.regexp?new RegExp(c.regexp):c.regexp;return f.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{remote:{"default":"Please enter a valid value"}}}),FormValidation.Validator.remote={html5Attributes:{crossdomain:"crossDomain",data:"data",datatype:"dataType",delay:"delay",message:"message",name:"name",type:"type",url:"url",validkey:"validKey"},destroy:function(a,b,c,d){var e=a.getNamespace(),f=b.data(e+"."+d+".timer");f&&(clearTimeout(f),b.removeData(e+"."+d+".timer"))},validate:function(b,c,d,e){function f(){var b=a.ajax(n);return b.success(function(a){a.valid=a[m]===!0||"true"===a[m]?!0:a[m]===!1||"false"===a[m]?!1:null,i.resolve(c,e,a)}).error(function(a){i.resolve(c,e,{valid:!1})}),i.fail(function(){b.abort()}),i}var g=b.getNamespace(),h=b.getFieldValue(c,e),i=new a.Deferred;if(""===h)return i.resolve(c,e,{valid:!0}),i;var j=c.attr("data-"+g+"-field"),k=d.data||{},l=d.url,m=d.validKey||"valid";"function"==typeof k&&(k=k.call(this,b,c,h)),"string"==typeof k&&(k=JSON.parse(k)),"function"==typeof l&&(l=l.call(this,b,c,h)),k[d.name||j]=h;var n={data:k,dataType:d.dataType||"json",headers:d.headers||{},type:d.type||"GET",url:l};return null!==d.crossDomain&&(n.crossDomain=d.crossDomain===!0||"true"===d.crossDomain),d.delay?(c.data(g+"."+e+".timer")&&clearTimeout(c.data(g+"."+e+".timer")),c.data(g+"."+e+".timer",setTimeout(f,d.delay)),i):f()}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{rtn:{"default":"Please enter a valid RTN number"}}}),FormValidation.Validator.rtn={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(!/^\d{9}$/.test(e))return!1;for(var f=0,g=0;g<e.length;g+=3)f+=3*parseInt(e.charAt(g),10)+7*parseInt(e.charAt(g+1),10)+parseInt(e.charAt(g+2),10);return 0!==f&&f%10===0}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{sedol:{"default":"Please enter a valid SEDOL number"}}}),FormValidation.Validator.sedol={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(e=e.toUpperCase(),!/^[0-9A-Z]{7}$/.test(e))return!1;for(var f=0,g=[1,3,1,7,3,9,1],h=e.length,i=0;h-1>i;i++)f+=g[i]*parseInt(e.charAt(i),36);return f=(10-f%10)%10,f+""===e.charAt(h-1)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{siren:{"default":"Please enter a valid SIREN number"}}}),FormValidation.Validator.siren={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);return""===e?!0:/^\d{9}$/.test(e)?FormValidation.Helper.luhn(e):!1}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{siret:{"default":"Please enter a valid SIRET number"}}}),FormValidation.Validator.siret={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;for(var f,g=0,h=e.length,i=0;h>i;i++)f=parseInt(e.charAt(i),10),i%2===0&&(f=2*f,f>9&&(f-=9)),g+=f;return g%10===0}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{step:{"default":"Please enter a valid step of %s"}}}),FormValidation.Validator.step={html5Attributes:{message:"message",base:"baseValue",step:"step"},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;if(d=a.extend({},{baseValue:0,step:1},d),f=parseFloat(f),!a.isNumeric(f))return!1;var g=function(a,b){var c=Math.pow(10,b);a*=c;var d=a>0|-(0>a),e=a%1===.5*d;return e?(Math.floor(a)+(d>0))/c:Math.round(a)/c},h=function(a,b){if(0===b)return 1;var c=(a+"").split("."),d=(b+"").split("."),e=(1===c.length?0:c[1].length)+(1===d.length?0:d[1].length);return g(a-b*Math.floor(a/b),e)},i=b.getLocale(),j=h(f-d.baseValue,d.step);return{valid:0===j||j===d.step,message:FormValidation.Helper.format(d.message||FormValidation.I18n[i].step["default"],[d.step])}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{stringCase:{"default":"Please enter only lowercase characters",upper:"Please enter only uppercase characters"}}}),FormValidation.Validator.stringCase={html5Attributes:{message:"message","case":"case"},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f=a.getLocale(),g=(c["case"]||"lower").toLowerCase();return{valid:"upper"===g?e===e.toUpperCase():e===e.toLowerCase(),message:c.message||("upper"===g?FormValidation.I18n[f].stringCase.upper:FormValidation.I18n[f].stringCase["default"])}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{stringLength:{"default":"Please enter a value with valid length",less:"Please enter less than %s characters",more:"Please enter more than %s characters",between:"Please enter value between %s and %s characters long"}}}),FormValidation.Validator.stringLength={html5Attributes:{message:"message",min:"min",max:"max",trim:"trim",utf8bytes:"utf8Bytes"},enableByHtml5:function(b){var c={},d=b.attr("maxlength"),e=b.attr("minlength");return d&&(c.max=parseInt(d,10)),e&&(c.min=parseInt(e,10)),a.isEmptyObject(c)?!1:c},validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if((d.trim===!0||"true"===d.trim)&&(f=a.trim(f)),""===f)return!0;var g=b.getLocale(),h=a.isNumeric(d.min)?d.min:b.getDynamicOption(c,d.min),i=a.isNumeric(d.max)?d.max:b.getDynamicOption(c,d.max),j=function(a){for(var b=a.length,c=a.length-1;c>=0;c--){var d=a.charCodeAt(c);d>127&&2047>=d?b++:d>2047&&65535>=d&&(b+=2),d>=56320&&57343>=d&&c--}return b},k=d.utf8Bytes?j(f):f.length,l=!0,m=d.message||FormValidation.I18n[g].stringLength["default"];switch((h&&k<parseInt(h,10)||i&&k>parseInt(i,10))&&(l=!1),!0){case!!h&&!!i:m=FormValidation.Helper.format(d.message||FormValidation.I18n[g].stringLength.between,[parseInt(h,10),parseInt(i,10)]);break;case!!h:m=FormValidation.Helper.format(d.message||FormValidation.I18n[g].stringLength.more,parseInt(h,10)-1);break;case!!i:m=FormValidation.Helper.format(d.message||FormValidation.I18n[g].stringLength.less,parseInt(i,10)+1)}return{valid:l,message:m}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{uri:{"default":"Please enter a valid URI"}}}),FormValidation.Validator.uri={html5Attributes:{message:"message",allowlocal:"allowLocal",allowemptyprotocol:"allowEmptyProtocol",protocol:"protocol"},enableByHtml5:function(a){return"url"===a.attr("type")},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f=c.allowLocal===!0||"true"===c.allowLocal,g=c.allowEmptyProtocol===!0||"true"===c.allowEmptyProtocol,h=(c.protocol||"http, https, ftp").split(",").join("|").replace(/\s/g,""),i=new RegExp("^(?:(?:"+h+")://)"+(g?"?":"")+"(?:\\S+(?::\\S*)?@)?(?:"+(f?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(f?"?":"")+")(?::\\d{2,5})?(?:/[^\\s]*)?$","i");return i.test(e)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{uuid:{"default":"Please enter a valid UUID number",version:"Please enter a valid UUID version %s number"}}}),FormValidation.Validator.uuid={html5Attributes:{message:"message",version:"version"},validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;var f=a.getLocale(),g={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},h=c.version?c.version+"":"all";return{valid:null===g[h]?!0:g[h].test(e),message:c.version?FormValidation.Helper.format(c.message||FormValidation.I18n[f].uuid.version,c.version):c.message||FormValidation.I18n[f].uuid["default"]}}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{vat:{"default":"Please enter a valid VAT number",country:"Please enter a valid VAT number in %s",countries:{AT:"Austria",BE:"Belgium",BG:"Bulgaria",BR:"Brazil",CH:"Switzerland",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",EE:"Estonia",ES:"Spain",FI:"Finland",FR:"France",GB:"United Kingdom",GR:"Greek",EL:"Greek",HU:"Hungary",HR:"Croatia",IE:"Ireland",IS:"Iceland",IT:"Italy",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MT:"Malta",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",RS:"Serbia",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",VE:"Venezuela",ZA:"South Africa"}}}}),FormValidation.Validator.vat={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["AT","BE","BG","BR","CH","CY","CZ","DE","DK","EE","EL","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LT","LU","LV","MT","NL","NO","PL","PT","RO","RU","RS","SE","SK","SI","VE","ZA"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f)return!0;var g=b.getLocale(),h=d.country;if(h?("string"!=typeof h||-1===a.inArray(h.toUpperCase(),this.COUNTRY_CODES))&&(h=b.getDynamicOption(c,h)):h=f.substr(0,2),-1===a.inArray(h,this.COUNTRY_CODES))return!0;var i=["_",h.toLowerCase()].join(""),j=this[i](f);return j=j===!0||j===!1?{valid:j}:j,j.message=FormValidation.Helper.format(d.message||FormValidation.I18n[g].vat.country,FormValidation.I18n[g].vat.countries[h.toUpperCase()]),j},_at:function(a){if(/^ATU[0-9]{8}$/.test(a)&&(a=a.substr(2)),!/^U[0-9]{8}$/.test(a))return!1;a=a.substr(1);for(var b=0,c=[1,2,1,2,1,2,1],d=0,e=0;7>e;e++)d=parseInt(a.charAt(e),10)*c[e],d>9&&(d=Math.floor(d/10)+d%10),b+=d;return b=10-(b+4)%10,10===b&&(b=0),b+""===a.substr(7,1)},_be:function(a){if(/^BE[0]{0,1}[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0]{0,1}[0-9]{9}$/.test(a))return!1;if(9===a.length&&(a="0"+a),"0"===a.substr(1,1))return!1;var b=parseInt(a.substr(0,8),10)+parseInt(a.substr(8,2),10);return b%97===0},_bg:function(a){if(/^BG[0-9]{9,10}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9,10}$/.test(a))return!1;var b=0,c=0;if(9===a.length){for(c=0;8>c;c++)b+=parseInt(a.charAt(c),10)*(c+1);if(b%=11,10===b)for(b=0,c=0;8>c;c++)b+=parseInt(a.charAt(c),10)*(c+3);return b%=10,b+""===a.substr(8)}if(10===a.length){var d=function(a){var b=parseInt(a.substr(0,2),10)+1900,c=parseInt(a.substr(2,2),10),d=parseInt(a.substr(4,2),10);if(c>40?(b+=100,c-=40):c>20&&(b-=100,c-=20),!FormValidation.Helper.date(b,c,d))return!1;for(var e=0,f=[2,4,8,5,10,9,7,3,6],g=0;9>g;g++)e+=parseInt(a.charAt(g),10)*f[g];return e=e%11%10,e+""===a.substr(9,1)},e=function(a){for(var b=0,c=[21,19,17,13,11,9,7,3,1],d=0;9>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%=10,b+""===a.substr(9,1)},f=function(a){for(var b=0,c=[4,3,2,7,6,5,4,3,2],d=0;9>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,10===b?!1:(11===b&&(b=0),b+""===a.substr(9,1))};return d(a)||e(a)||f(a)}return!1},_br:function(a){if(""===a)return!0;var b=a.replace(/[^\d]+/g,"");if(""===b||14!==b.length)return!1;if("00000000000000"===b||"11111111111111"===b||"22222222222222"===b||"33333333333333"===b||"44444444444444"===b||"55555555555555"===b||"66666666666666"===b||"77777777777777"===b||"88888888888888"===b||"99999999999999"===b)return!1;for(var c=b.length-2,d=b.substring(0,c),e=b.substring(c),f=0,g=c-7,h=c;h>=1;h--)f+=parseInt(d.charAt(c-h),10)*g--,2>g&&(g=9);var i=2>f%11?0:11-f%11;if(i!==parseInt(e.charAt(0),10))return!1;for(c+=1,d=b.substring(0,c),f=0,g=c-7,h=c;h>=1;h--)f+=parseInt(d.charAt(c-h),10)*g--,2>g&&(g=9);return i=2>f%11?0:11-f%11,i===parseInt(e.charAt(1),10)},_ch:function(a){if(/^CHE[0-9]{9}(MWST)?$/.test(a)&&(a=a.substr(2)),!/^E[0-9]{9}(MWST)?$/.test(a))return!1;a=a.substr(1);for(var b=0,c=[5,4,3,2,7,6,5,4],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,10===b?!1:(11===b&&(b=0),b+""===a.substr(8,1))},_cy:function(a){if(/^CY[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(a)&&(a=a.substr(2)),!/^[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(a))return!1;if("12"===a.substr(0,2))return!1;for(var b=0,c={0:1,1:0,2:5,3:7,4:9,5:13,6:15,7:17,8:19,9:21},d=0;8>d;d++){var e=parseInt(a.charAt(d),10);d%2===0&&(e=c[e+""]),b+=e}return b="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[b%26],b+""===a.substr(8,1)},_cz:function(a){if(/^CZ[0-9]{8,10}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{8,10}$/.test(a))return!1;var b=0,c=0;if(8===a.length){if(a.charAt(0)+""=="9")return!1;for(b=0,c=0;7>c;c++)b+=parseInt(a.charAt(c),10)*(8-c);return b=11-b%11,10===b&&(b=0),11===b&&(b=1),b+""===a.substr(7,1)}if(9===a.length&&a.charAt(0)+""=="6"){for(b=0,c=0;7>c;c++)b+=parseInt(a.charAt(c+1),10)*(8-c);return b=11-b%11,10===b&&(b=0),11===b&&(b=1),b=[8,7,6,5,4,3,2,1,0,9,10][b-1],b+""===a.substr(8,1)}if(9===a.length||10===a.length){var d=1900+parseInt(a.substr(0,2),10),e=parseInt(a.substr(2,2),10)%50%20,f=parseInt(a.substr(4,2),10);if(9===a.length){if(d>=1980&&(d-=100),d>1953)return!1}else 1954>d&&(d+=100);if(!FormValidation.Helper.date(d,e,f))return!1;if(10===a.length){var g=parseInt(a.substr(0,9),10)%11;return 1985>d&&(g%=10),g+""===a.substr(9,1)}return!0}return!1},_de:function(a){return/^DE[0-9]{9}$/.test(a)&&(a=a.substr(2)),/^[0-9]{9}$/.test(a)?FormValidation.Helper.mod11And10(a):!1},_dk:function(a){if(/^DK[0-9]{8}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{8}$/.test(a))return!1;for(var b=0,c=[2,7,6,5,4,3,2,1],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%11===0},_ee:function(a){if(/^EE[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}$/.test(a))return!1;for(var b=0,c=[3,7,1,3,7,1,3,7,1],d=0;9>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%10===0},_es:function(a){if(/^ES[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(a)&&(a=a.substr(2)),!/^[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(a))return!1;var b=function(a){var b=parseInt(a.substr(0,8),10);return b="TRWAGMYFPDXBNJZSQVHLCKE"[b%23],b+""===a.substr(8,1)},c=function(a){var b=["XYZ".indexOf(a.charAt(0)),a.substr(1)].join("");return b=parseInt(b,10),b="TRWAGMYFPDXBNJZSQVHLCKE"[b%23],b+""===a.substr(8,1)},d=function(a){var b,c=a.charAt(0);if(-1!=="KLM".indexOf(c))return b=parseInt(a.substr(1,8),10),b="TRWAGMYFPDXBNJZSQVHLCKE"[b%23],b+""===a.substr(8,1);if(-1!=="ABCDEFGHJNPQRSUVW".indexOf(c)){for(var d=0,e=[2,1,2,1,2,1,2],f=0,g=0;7>g;g++)f=parseInt(a.charAt(g+1),10)*e[g],f>9&&(f=Math.floor(f/10)+f%10),d+=f;return d=10-d%10,10===d&&(d=0),d+""===a.substr(8,1)||"JABCDEFGHI"[d]===a.substr(8,1)}return!1},e=a.charAt(0);return/^[0-9]$/.test(e)?{valid:b(a),type:"DNI"}:/^[XYZ]$/.test(e)?{valid:c(a),type:"NIE"}:{valid:d(a),type:"CIF"}},_fi:function(a){if(/^FI[0-9]{8}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{8}$/.test(a))return!1;for(var b=0,c=[7,9,10,5,8,4,2,1],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%11===0},_fr:function(a){if(/^FR[0-9A-Z]{2}[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9A-Z]{2}[0-9]{9}$/.test(a))return!1;if(!FormValidation.Helper.luhn(a.substr(2)))return!1;if(/^[0-9]{2}$/.test(a.substr(0,2)))return a.substr(0,2)===parseInt(a.substr(2)+"12",10)%97+"";var b,c="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";return b=/^[0-9]{1}$/.test(a.charAt(0))?24*c.indexOf(a.charAt(0))+c.indexOf(a.charAt(1))-10:34*c.indexOf(a.charAt(0))+c.indexOf(a.charAt(1))-100,(parseInt(a.substr(2),10)+1+Math.floor(b/11))%11===b%11},_gb:function(a){if((/^GB[0-9]{9}$/.test(a)||/^GB[0-9]{12}$/.test(a)||/^GBGD[0-9]{3}$/.test(a)||/^GBHA[0-9]{3}$/.test(a)||/^GB(GD|HA)8888[0-9]{5}$/.test(a))&&(a=a.substr(2)),!(/^[0-9]{9}$/.test(a)||/^[0-9]{12}$/.test(a)||/^GD[0-9]{3}$/.test(a)||/^HA[0-9]{3}$/.test(a)||/^(GD|HA)8888[0-9]{5}$/.test(a)))return!1;var b=a.length;if(5===b){var c=a.substr(0,2),d=parseInt(a.substr(2),10);return"GD"===c&&500>d||"HA"===c&&d>=500}if(11===b&&("GD8888"===a.substr(0,6)||"HA8888"===a.substr(0,6)))return"GD"===a.substr(0,2)&&parseInt(a.substr(6,3),10)>=500||"HA"===a.substr(0,2)&&parseInt(a.substr(6,3),10)<500?!1:parseInt(a.substr(6,3),10)%97===parseInt(a.substr(9,2),10);if(9===b||12===b){for(var e=0,f=[8,7,6,5,4,3,2,10,1],g=0;9>g;g++)e+=parseInt(a.charAt(g),10)*f[g];return e%=97,parseInt(a.substr(0,3),10)>=100?0===e||42===e||55===e:0===e}return!0},_gr:function(a){if(/^(GR|EL)[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}$/.test(a))return!1;8===a.length&&(a="0"+a);for(var b=0,c=[256,128,64,32,16,8,4,2],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=b%11%10,b+""===a.substr(8,1)},_el:function(a){return this._gr(a)},_hu:function(a){if(/^HU[0-9]{8}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{8}$/.test(a))return!1;for(var b=0,c=[9,7,3,1,9,7,3,1],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%10===0},_hr:function(a){return/^HR[0-9]{11}$/.test(a)&&(a=a.substr(2)),/^[0-9]{11}$/.test(a)?FormValidation.Helper.mod11And10(a):!1},_ie:function(a){if(/^IE[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(a))return!1;var b=function(a){for(;a.length<7;)a="0"+a;for(var b="WABCDEFGHIJKLMNOPQRSTUV",c=0,d=0;7>d;d++)c+=parseInt(a.charAt(d),10)*(8-d);return c+=9*b.indexOf(a.substr(7)),b[c%23]};return/^[0-9]+$/.test(a.substr(0,7))?a.charAt(7)===b(a.substr(0,7)+a.substr(8)+""):-1!=="ABCDEFGHIJKLMNOPQRSTUVWXYZ+*".indexOf(a.charAt(1))?a.charAt(7)===b(a.substr(2,5)+a.substr(0,1)+""):!0},_is:function(a){return/^IS[0-9]{5,6}$/.test(a)&&(a=a.substr(2)),/^[0-9]{5,6}$/.test(a)},_it:function(a){if(/^IT[0-9]{11}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{11}$/.test(a))return!1;if(0===parseInt(a.substr(0,7),10))return!1;var b=parseInt(a.substr(7,3),10);return 1>b||b>201&&999!==b&&888!==b?!1:FormValidation.Helper.luhn(a)},_lt:function(a){if(/^LT([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(a)&&(a=a.substr(2)),!/^([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(a))return!1;var b,c=a.length,d=0;for(b=0;c-1>b;b++)d+=parseInt(a.charAt(b),10)*(1+b%9);var e=d%11;if(10===e)for(d=0,b=0;c-1>b;b++)d+=parseInt(a.charAt(b),10)*(1+(b+2)%9);return e=e%11%10,e+""===a.charAt(c-1)},_lu:function(a){return/^LU[0-9]{8}$/.test(a)&&(a=a.substr(2)),/^[0-9]{8}$/.test(a)?parseInt(a.substr(0,6),10)%89+""===a.substr(6,2):!1},_lv:function(a){if(/^LV[0-9]{11}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{11}$/.test(a))return!1;var b,c=parseInt(a.charAt(0),10),d=0,e=[],f=a.length;if(c>3){for(d=0,e=[9,1,4,8,3,10,2,5,7,6,1],b=0;f>b;b++)d+=parseInt(a.charAt(b),10)*e[b];return d%=11,3===d}var g=parseInt(a.substr(0,2),10),h=parseInt(a.substr(2,2),10),i=parseInt(a.substr(4,2),10);if(i=i+1800+100*parseInt(a.charAt(6),10),!FormValidation.Helper.date(i,h,g))return!1;for(d=0,e=[10,5,8,4,2,1,6,3,7,9],b=0;f-1>b;b++)d+=parseInt(a.charAt(b),10)*e[b];return d=(d+1)%11%10,d+""===a.charAt(f-1)},_mt:function(a){if(/^MT[0-9]{8}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{8}$/.test(a))return!1;for(var b=0,c=[3,4,6,7,8,9,10,1],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%37===0},_nl:function(a){if(/^NL[0-9]{9}B[0-9]{2}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}B[0-9]{2}$/.test(a))return!1;for(var b=0,c=[9,8,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%=11,b>9&&(b=0),b+""===a.substr(8,1)},_no:function(a){if(/^NO[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}$/.test(a))return!1;for(var b=0,c=[3,2,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,11===b&&(b=0),b+""===a.substr(8,1)},_pl:function(a){if(/^PL[0-9]{10}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{10}$/.test(a))return!1;for(var b=0,c=[6,5,7,2,3,4,5,6,7,-1],d=0;10>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b%11===0},_pt:function(a){if(/^PT[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}$/.test(a))return!1;for(var b=0,c=[9,8,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,b>9&&(b=0),b+""===a.substr(8,1)},_ro:function(a){if(/^RO[1-9][0-9]{1,9}$/.test(a)&&(a=a.substr(2)),!/^[1-9][0-9]{1,9}$/.test(a))return!1;for(var b=a.length,c=[7,5,3,2,1,7,5,3,2].slice(10-b),d=0,e=0;b-1>e;e++)d+=parseInt(a.charAt(e),10)*c[e];return d=10*d%11%10,d+""===a.substr(b-1,1)},_ru:function(a){if(/^RU([0-9]{10}|[0-9]{12})$/.test(a)&&(a=a.substr(2)),!/^([0-9]{10}|[0-9]{12})$/.test(a))return!1;var b=0;if(10===a.length){var c=0,d=[2,4,10,3,5,9,4,6,8,0];for(b=0;10>b;b++)c+=parseInt(a.charAt(b),10)*d[b];return c%=11,c>9&&(c%=10),c+""===a.substr(9,1)}if(12===a.length){var e=0,f=[7,2,4,10,3,5,9,4,6,8,0],g=0,h=[3,7,2,4,10,3,5,9,4,6,8,0];for(b=0;11>b;b++)e+=parseInt(a.charAt(b),10)*f[b],g+=parseInt(a.charAt(b),10)*h[b];return e%=11,e>9&&(e%=10),g%=11,g>9&&(g%=10),e+""===a.substr(10,1)&&g+""===a.substr(11,1)}return!1},_rs:function(a){if(/^RS[0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[0-9]{9}$/.test(a))return!1;for(var b=10,c=0,d=0;8>d;d++)c=(parseInt(a.charAt(d),10)+b)%10,0===c&&(c=10),b=2*c%11;return(b+parseInt(a.substr(8,1),10))%10===1},_se:function(a){return/^SE[0-9]{10}01$/.test(a)&&(a=a.substr(2)),/^[0-9]{10}01$/.test(a)?(a=a.substr(0,10),FormValidation.Helper.luhn(a)):!1},_si:function(a){var b=a.match(/^(SI)?([1-9][0-9]{7})$/);if(!b)return!1;b[1]&&(a=a.substr(2));for(var c=0,d=[8,7,6,5,4,3,2],e=0;7>e;e++)c+=parseInt(a.charAt(e),10)*d[e];return c=11-c%11,10===c&&(c=0),c+""===a.substr(7,1)},_sk:function(a){return/^SK[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(a)&&(a=a.substr(2)),/^[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(a)?parseInt(a,10)%11===0:!1},_ve:function(a){if(/^VE[VEJPG][0-9]{9}$/.test(a)&&(a=a.substr(2)),!/^[VEJPG][0-9]{9}$/.test(a))return!1;for(var b={V:4,E:8,J:12,P:16,G:20},c=b[a.charAt(0)],d=[3,2,7,6,5,4,3,2],e=0;8>e;e++)c+=parseInt(a.charAt(e+1),10)*d[e];return c=11-c%11,(11===c||10===c)&&(c=0),c+""===a.substr(9,1)},_za:function(a){return/^ZA4[0-9]{9}$/.test(a)&&(a=a.substr(2)),/^4[0-9]{9}$/.test(a)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{vin:{"default":"Please enter a valid VIN number"}}}),FormValidation.Validator.vin={validate:function(a,b,c,d){var e=a.getFieldValue(b,d);if(""===e)return!0;if(!/^[a-hj-npr-z0-9]{8}[0-9xX][a-hj-npr-z0-9]{8}$/i.test(e))return!1;e=e.toUpperCase();for(var f={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0},g=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],h=0,i=e.length,j=0;i>j;j++)h+=f[e.charAt(j)+""]*g[j];var k=h%11;return 10===k&&(k="X"),k+""===e.charAt(8)}}}(jQuery),function(a){FormValidation.I18n=a.extend(!0,FormValidation.I18n||{},{en_US:{zipCode:{"default":"Please enter a valid postal code",country:"Please enter a valid postal code in %s",countries:{AT:"Austria",BG:"Bulgaria",BR:"Brazil",CA:"Canada",CH:"Switzerland",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",ES:"Spain",FR:"France",GB:"United Kingdom",IE:"Ireland",IN:"India",IT:"Italy",MA:"Morocco",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SE:"Sweden",SG:"Singapore",SK:"Slovakia",US:"USA"}}}}),FormValidation.Validator.zipCode={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["AT","BG","BR","CA","CH","CZ","DE","DK","ES","FR","GB","IE","IN","IT","MA","NL","PL","PT","RO","RU","SE","SG","SK","US"],validate:function(b,c,d,e){var f=b.getFieldValue(c,e);if(""===f||!d.country)return!0;var g=b.getLocale(),h=d.country;if(("string"!=typeof h||-1===a.inArray(h,this.COUNTRY_CODES))&&(h=b.getDynamicOption(c,h)),!h||-1===a.inArray(h.toUpperCase(),this.COUNTRY_CODES))return!0;var i=!1;switch(h=h.toUpperCase()){case"AT":i=/^([1-9]{1})(\d{3})$/.test(f);break;case"BG":i=/^([1-9]{1}[0-9]{3})$/.test(a.trim(f));break;case"BR":i=/^(\d{2})([\.]?)(\d{3})([\-]?)(\d{3})$/.test(f);break;case"CA":i=/^(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}\s?[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}[0-9]{1}$/i.test(f);break;case"CH":i=/^([1-9]{1})(\d{3})$/.test(f);break;case"CZ":i=/^(\d{3})([ ]?)(\d{2})$/.test(f);break;case"DE":i=/^(?!01000|99999)(0[1-9]\d{3}|[1-9]\d{4})$/.test(f);break;case"DK":i=/^(DK(-|\s)?)?\d{4}$/i.test(f);break;case"ES":i=/^(?:0[1-9]|[1-4][0-9]|5[0-2])\d{3}$/.test(f);break;case"FR":i=/^[0-9]{5}$/i.test(f);break;case"GB":i=this._gb(f);break;case"IN":i=/^\d{3}\s?\d{3}$/.test(f);break;case"IE":i=/^(D6W|[ACDEFHKNPRTVWXY]\d{2})\s[0-9ACDEFHKNPRTVWXY]{4}$/.test(f);break;case"IT":i=/^(I-|IT-)?\d{5}$/i.test(f);break;case"MA":i=/^[1-9][0-9]{4}$/i.test(f);break;case"NL":i=/^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(f);break;case"PL":i=/^[0-9]{2}\-[0-9]{3}$/.test(f);break;case"PT":i=/^[1-9]\d{3}-\d{3}$/.test(f);break;case"RO":i=/^(0[1-8]{1}|[1-9]{1}[0-5]{1})?[0-9]{4}$/i.test(f);break;case"RU":i=/^[0-9]{6}$/i.test(f);break;case"SE":i=/^(S-)?\d{3}\s?\d{2}$/i.test(f);break;case"SG":i=/^([0][1-9]|[1-6][0-9]|[7]([0-3]|[5-9])|[8][0-2])(\d{4})$/i.test(f);break;case"SK":i=/^(\d{3})([ ]?)(\d{2})$/.test(f);break;case"US":default:i=/^\d{4,5}([\-]?\d{4})?$/.test(f)}return{valid:i,message:FormValidation.Helper.format(d.message||FormValidation.I18n[g].zipCode.country,FormValidation.I18n[g].zipCode.countries[h])}},_gb:function(a){for(var b="[ABCDEFGHIJKLMNOPRSTUWYZ]",c="[ABCDEFGHKLMNOPQRSTUVWXY]",d="[ABCDEFGHJKPMNRSTUVWXY]",e="[ABEHMNPRVWXY]",f="[ABDEFGHJLNPQRSTUWXYZ]",g=[new RegExp("^("+b+"{1}"+c+"?[0-9]{1,2})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^("+b+"{1}[0-9]{1}"+d+"{1})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^("+b+"{1}"+c+"{1}?[0-9]{1}"+e+"{1})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^(BF1)(\\s*)([0-6]{1}[ABDEFGHJLNPQRST]{1}[ABDEFGHJLNPQRSTUWZYZ]{1})$","i"),/^(GIR)(\s*)(0AA)$/i,/^(BFPO)(\s*)([0-9]{1,4})$/i,/^(BFPO)(\s*)(c\/o\s*[0-9]{1,3})$/i,/^([A-Z]{4})(\s*)(1ZZ)$/i,/^(AI-2640)$/i],h=0;h<g.length;h++)if(g[h].test(a))return!0;return!1}}}(jQuery);!function(a){FormValidation.Framework.Bootstrap=function(b,c,d){c=a.extend(!0,{button:{selector:'[type="submit"]:not([formnovalidate])',disabled:"disabled"},err:{clazz:"help-block",parent:"^(.*)col-(xs|sm|md|lg)-(offset-){0,1}[0-9]+(.*)$"},icon:{valid:null,invalid:null,validating:null,feedback:"form-control-feedback"},row:{selector:".form-group",valid:"has-success",invalid:"has-error",feedback:"has-feedback"}},c),FormValidation.Base.apply(this,[b,c,d])},FormValidation.Framework.Bootstrap.prototype=a.extend({},FormValidation.Base.prototype,{_fixIcon:function(a,b){var c=this._namespace,d=a.attr("type"),e=a.attr("data-"+c+"-field"),f=this.options.fields[e].row||this.options.row.selector,g=a.closest(f);if("checkbox"===d||"radio"===d){var h=a.parent();h.hasClass(d)?b.insertAfter(h):h.parent().hasClass(d)&&b.insertAfter(h.parent())}0===g.find("label").length&&b.addClass("fv-icon-no-label"),0!==g.find(".input-group").length&&b.addClass("fv-bootstrap-icon-input-group").insertAfter(g.find(".input-group").eq(0))},_createTooltip:function(a,b,c){var d=this._namespace,e=a.data(d+".icon");if(e)switch(c){case"popover":e.css({cursor:"pointer","pointer-events":"auto"}).popover("destroy").popover({container:"body",content:b,html:!0,placement:"auto top",trigger:"hover click"});break;case"tooltip":default:e.css({cursor:"pointer","pointer-events":"auto"}).tooltip("destroy").tooltip({container:"body",html:!0,placement:"auto top",title:b})}},_destroyTooltip:function(a,b){var c=this._namespace,d=a.data(c+".icon");if(d)switch(b){case"popover":d.css({cursor:"","pointer-events":"none"}).popover("destroy");break;case"tooltip":default:d.css({cursor:"","pointer-events":"none"}).tooltip("destroy")}},_hideTooltip:function(a,b){var c=this._namespace,d=a.data(c+".icon");if(d)switch(b){case"popover":d.popover("hide");break;case"tooltip":default:d.tooltip("hide")}},_showTooltip:function(a,b){var c=this._namespace,d=a.data(c+".icon");if(d)switch(b){case"popover":d.popover("show");break;case"tooltip":default:d.tooltip("show")}}}),a.fn.bootstrapValidator=function(b){var c=arguments;return this.each(function(){var d=a(this),e=d.data("formValidation")||d.data("bootstrapValidator"),f="object"==typeof b&&b;e||(e=new FormValidation.Framework.Bootstrap(this,a.extend({},{events:{formInit:"init.form.bv",formPreValidate:"prevalidate.form.bv",formError:"error.form.bv",formSuccess:"success.form.bv",fieldAdded:"added.field.bv",fieldRemoved:"removed.field.bv",fieldInit:"init.field.bv",fieldError:"error.field.bv",fieldSuccess:"success.field.bv",fieldStatus:"status.field.bv",localeChanged:"changed.locale.bv",validatorError:"error.validator.bv",validatorSuccess:"success.validator.bv"}},f),"bv"),d.addClass("fv-form-bootstrap").data("formValidation",e).data("bootstrapValidator",e)),"string"==typeof b&&e[b].apply(e,Array.prototype.slice.call(c,1))})},a.fn.bootstrapValidator.Constructor=FormValidation.Framework.Bootstrap}(jQuery);;
(function(){var Dropzone,Emitter,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};noop=function(){};Emitter=(function(){function Emitter(){}
Emitter.prototype.addEventListener=Emitter.prototype.on;Emitter.prototype.on=function(event,fn){this._callbacks=this._callbacks||{};if(!this._callbacks[event]){this._callbacks[event]=[];}
this._callbacks[event].push(fn);return this;};Emitter.prototype.emit=function(){var args,callback,callbacks,event,_i,_len;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];this._callbacks=this._callbacks||{};callbacks=this._callbacks[event];if(callbacks){for(_i=0,_len=callbacks.length;_i<_len;_i++){callback=callbacks[_i];callback.apply(this,args);}}
return this;};Emitter.prototype.removeListener=Emitter.prototype.off;Emitter.prototype.removeAllListeners=Emitter.prototype.off;Emitter.prototype.removeEventListener=Emitter.prototype.off;Emitter.prototype.off=function(event,fn){var callback,callbacks,i,_i,_len;if(!this._callbacks||arguments.length===0){this._callbacks={};return this;}
callbacks=this._callbacks[event];if(!callbacks){return this;}
if(arguments.length===1){delete this._callbacks[event];return this;}
for(i=_i=0,_len=callbacks.length;_i<_len;i=++_i){callback=callbacks[i];if(callback===fn){callbacks.splice(i,1);break;}}
return this;};return Emitter;})();Dropzone=(function(_super){var extend,resolveOption;__extends(Dropzone,_super);Dropzone.prototype.Emitter=Emitter;Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1000,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(file,done){return done();},init:function(){return noop;},forceFallback:false,fallback:function(){var child,messageElement,span,_i,_len,_ref;this.element.className=""+this.element.className+" dz-browser-not-supported";_ref=this.element.getElementsByTagName("div");for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];if(/(^| )dz-message($| )/.test(child.className)){messageElement=child;child.className="dz-message";continue;}}
if(!messageElement){messageElement=Dropzone.createElement("<div class=\"dz-message\"><span></span></div>");this.element.appendChild(messageElement);}
span=messageElement.getElementsByTagName("span")[0];if(span){if(span.textContent!=null){span.textContent=this.options.dictFallbackMessage;}else if(span.innerText!=null){span.innerText=this.options.dictFallbackMessage;}}
return this.element.appendChild(this.getFallbackForm());},resize:function(file){var info,srcRatio,trgRatio;info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height};srcRatio=file.width/file.height;info.optWidth=this.options.thumbnailWidth;info.optHeight=this.options.thumbnailHeight;if((info.optWidth==null)&&(info.optHeight==null)){info.optWidth=info.srcWidth;info.optHeight=info.srcHeight;}else if(info.optWidth==null){info.optWidth=srcRatio*info.optHeight;}else if(info.optHeight==null){info.optHeight=(1/srcRatio)*info.optWidth;}
trgRatio=info.optWidth/info.optHeight;if(file.height<info.optHeight||file.width<info.optWidth){info.trgHeight=info.srcHeight;info.trgWidth=info.srcWidth;}else{if(srcRatio>trgRatio){info.srcHeight=file.height;info.srcWidth=info.srcHeight*trgRatio;}else{info.srcWidth=file.width;info.srcHeight=info.srcWidth/trgRatio;}}
info.srcX=(file.width-info.srcWidth)/2;info.srcY=(file.height-info.srcHeight)/2;return info;},drop:function(e){return this.element.classList.remove("dz-drag-hover");},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover");},dragenter:function(e){return this.element.classList.add("dz-drag-hover");},dragover:function(e){return this.element.classList.add("dz-drag-hover");},dragleave:function(e){return this.element.classList.remove("dz-drag-hover");},paste:noop,reset:function(){return this.element.classList.remove("dz-started");},addedfile:function(file){var node,removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results;if(this.element===this.previewsContainer){this.element.classList.add("dz-started");}
if(this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim());file.previewTemplate=file.previewElement;this.previewsContainer.appendChild(file.previewElement);_ref=file.previewElement.querySelectorAll("[data-dz-name]");for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];node.textContent=file.name;}
_ref1=file.previewElement.querySelectorAll("[data-dz-size]");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){node=_ref1[_j];node.innerHTML=this.filesize(file.size);}
if(this.options.addRemoveLinks){file._removeLink=Dropzone.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"+this.options.dictRemoveFile+"</a>");file.previewElement.appendChild(file._removeLink);}
removeFileEvent=(function(_this){return function(e){e.preventDefault();e.stopPropagation();if(file.status===Dropzone.UPLOADING){return Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file);});}else{if(_this.options.dictRemoveFileConfirmation){return Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file);});}else{return _this.removeFile(file);}}};})(this);_ref2=file.previewElement.querySelectorAll("[data-dz-remove]");_results=[];for(_k=0,_len2=_ref2.length;_k<_len2;_k++){removeLink=_ref2[_k];_results.push(removeLink.addEventListener("click",removeFileEvent));}
return _results;}},removedfile:function(file){var _ref;if(file.previewElement){if((_ref=file.previewElement)!=null){_ref.parentNode.removeChild(file.previewElement);}}
return this._updateMaxFilesReachedClass();},thumbnail:function(file,dataUrl){var thumbnailElement,_i,_len,_ref;if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");_ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]");for(_i=0,_len=_ref.length;_i<_len;_i++){thumbnailElement=_ref[_i];thumbnailElement.alt=file.name;thumbnailElement.src=dataUrl;}
return setTimeout(((function(_this){return function(){return file.previewElement.classList.add("dz-image-preview");};})(this)),1);}},error:function(file,message){var node,_i,_len,_ref,_results;if(file.previewElement){file.previewElement.classList.add("dz-error");if(typeof message!=="String"&&message.error){message=message.error;}
_ref=file.previewElement.querySelectorAll("[data-dz-errormessage]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.textContent=message);}
return _results;}},errormultiple:noop,processing:function(file){if(file.previewElement){file.previewElement.classList.add("dz-processing");if(file._removeLink){return file._removeLink.textContent=this.options.dictCancelUpload;}}},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var node,_i,_len,_ref,_results;if(file.previewElement){_ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];if(node.nodeName==='PROGRESS'){_results.push(node.value=progress);}else{_results.push(node.style.width=""+progress+"%");}}
return _results;}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){if(file.previewElement){return file.previewElement.classList.add("dz-success");}},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.");},canceledmultiple:noop,complete:function(file){if(file._removeLink){file._removeLink.textContent=this.options.dictRemoveFile;}
if(file.previewElement){return file.previewElement.classList.add("dz-complete");}},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,addedfiles:noop,previewTemplate:"<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-image\"><img data-dz-thumbnail /></div>\n  <div class=\"dz-details\">\n    <div class=\"dz-size\"><span data-dz-size></span></div>\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n  <div class=\"dz-success-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Check</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\"></path>\n      </g>\n    </svg>\n  </div>\n  <div class=\"dz-error-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Error</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          <path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>"};extend=function(){var key,object,objects,target,val,_i,_len;target=arguments[0],objects=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=objects.length;_i<_len;_i++){object=objects[_i];for(key in object){val=object[key];target[key]=val;}}
return target;};function Dropzone(element,options){var elementOptions,fallback,_ref;this.element=element;this.version=Dropzone.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element);}
if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.");}
if(this.element.dropzone){throw new Error("Dropzone already attached.");}
Dropzone.instances.push(this);this.element.dropzone=this;elementOptions=(_ref=Dropzone.optionsForElement(this.element))!=null?_ref:{};this.options=extend({},this.defaultOptions,elementOptions,options!=null?options:{});if(this.options.forceFallback||!Dropzone.isBrowserSupported()){return this.options.fallback.call(this);}
if(this.options.url==null){this.options.url=this.element.getAttribute("action");}
if(!this.options.url){throw new Error("No URL provided.");}
if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");}
if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes;}
this.options.method=this.options.method.toUpperCase();if((fallback=this.getExistingFallback())&&fallback.parentNode){fallback.parentNode.removeChild(fallback);}
if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer");}else{this.previewsContainer=this.element;}}
if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element];}else{this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable");}}
this.init();}
Dropzone.prototype.getAcceptedFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.accepted){_results.push(file);}}
return _results;};Dropzone.prototype.getRejectedFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(!file.accepted){_results.push(file);}}
return _results;};Dropzone.prototype.getFilesWithStatus=function(status){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status===status){_results.push(file);}}
return _results;};Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED);};Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING);};Dropzone.prototype.getAddedFiles=function(){return this.getFilesWithStatus(Dropzone.ADDED);};Dropzone.prototype.getActiveFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED){_results.push(file);}}
return _results;};Dropzone.prototype.init=function(){var eventName,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data");}
if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(Dropzone.createElement("<div class=\"dz-default dz-message\"><span>"+this.options.dictDefaultMessage+"</span></div>"));}
if(this.clickableElements.length){setupHiddenFileInput=(function(_this){return function(){if(_this.hiddenFileInput){_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);}
_this.hiddenFileInput=document.createElement("input");_this.hiddenFileInput.setAttribute("type","file");if((_this.options.maxFiles==null)||_this.options.maxFiles>1){_this.hiddenFileInput.setAttribute("multiple","multiple");}
_this.hiddenFileInput.className="dz-hidden-input";if(_this.options.acceptedFiles!=null){_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles);}
if(_this.options.capture!=null){_this.hiddenFileInput.setAttribute("capture",_this.options.capture);}
_this.hiddenFileInput.style.visibility="hidden";_this.hiddenFileInput.style.position="absolute";_this.hiddenFileInput.style.top="0";_this.hiddenFileInput.style.left="0";_this.hiddenFileInput.style.height="0";_this.hiddenFileInput.style.width="0";document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);return _this.hiddenFileInput.addEventListener("change",function(){var file,files,_i,_len;files=_this.hiddenFileInput.files;if(files.length){for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];_this.addFile(file);}}
_this.emit("addedfiles",files);return setupHiddenFileInput();});};})(this);setupHiddenFileInput();}
this.URL=(_ref=window.URL)!=null?_ref:window.webkitURL;_ref1=this.events;for(_i=0,_len=_ref1.length;_i<_len;_i++){eventName=_ref1[_i];this.on(eventName,this.options[eventName]);}
this.on("uploadprogress",(function(_this){return function(){return _this.updateTotalUploadProgress();};})(this));this.on("removedfile",(function(_this){return function(){return _this.updateTotalUploadProgress();};})(this));this.on("canceled",(function(_this){return function(file){return _this.emit("complete",file);};})(this));this.on("complete",(function(_this){return function(file){if(_this.getAddedFiles().length===0&&_this.getUploadingFiles().length===0&&_this.getQueuedFiles().length===0){return setTimeout((function(){return _this.emit("queuecomplete");}),0);}};})(this));noPropagation=function(e){e.stopPropagation();if(e.preventDefault){return e.preventDefault();}else{return e.returnValue=false;}};this.listeners=[{element:this.element,events:{"dragstart":(function(_this){return function(e){return _this.emit("dragstart",e);};})(this),"dragenter":(function(_this){return function(e){noPropagation(e);return _this.emit("dragenter",e);};})(this),"dragover":(function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed;}catch(_error){}
e.dataTransfer.dropEffect='move'===efct||'linkMove'===efct?'move':'copy';noPropagation(e);return _this.emit("dragover",e);};})(this),"dragleave":(function(_this){return function(e){return _this.emit("dragleave",e);};})(this),"drop":(function(_this){return function(e){noPropagation(e);return _this.drop(e);};})(this),"dragend":(function(_this){return function(e){return _this.emit("dragend",e);};})(this)}}];this.clickableElements.forEach((function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{"click":function(evt){if((clickableElement!==_this.element)||(evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message")))){_this.hiddenFileInput.click();}
return true;}}});};})(this));this.enable();return this.options.init.call(this);};Dropzone.prototype.destroy=function(){var _ref;this.disable();this.removeAllFiles(true);if((_ref=this.hiddenFileInput)!=null?_ref.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null;}
delete this.element.dropzone;return Dropzone.instances.splice(Dropzone.instances.indexOf(this),1);};Dropzone.prototype.updateTotalUploadProgress=function(){var activeFiles,file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;totalBytesSent=0;totalBytes=0;activeFiles=this.getActiveFiles();if(activeFiles.length){_ref=this.getActiveFiles();for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];totalBytesSent+=file.upload.bytesSent;totalBytes+=file.upload.total;}
totalUploadProgress=100*totalBytesSent/totalBytes;}else{totalUploadProgress=100;}
return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent);};Dropzone.prototype._getParamName=function(n){if(typeof this.options.paramName==="function"){return this.options.paramName(n);}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"");}};Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;if(existingFallback=this.getExistingFallback()){return existingFallback;}
fieldsString="<div class=\"dz-fallback\">";if(this.options.dictFallbackText){fieldsString+="<p>"+this.options.dictFallbackText+"</p>";}
fieldsString+="<input type=\"file\" name=\""+(this._getParamName(0))+"\" "+(this.options.uploadMultiple?'multiple="multiple"':void 0)+" /><input type=\"submit\" value=\"Upload!\"></div>";fields=Dropzone.createElement(fieldsString);if(this.element.tagName!=="FORM"){form=Dropzone.createElement("<form action=\""+this.options.url+"\" enctype=\"multipart/form-data\" method=\""+this.options.method+"\"></form>");form.appendChild(fields);}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method);}
return form!=null?form:fields;};Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,tagName,_i,_len,_ref;getFallback=function(elements){var el,_i,_len;for(_i=0,_len=elements.length;_i<_len;_i++){el=elements[_i];if(/(^| )fallback($| )/.test(el.className)){return el;}}};_ref=["div","form"];for(_i=0,_len=_ref.length;_i<_len;_i++){tagName=_ref[_i];if(fallback=getFallback(this.element.getElementsByTagName(tagName))){return fallback;}}};Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){elementListeners=_ref[_i];_results.push((function(){var _ref1,_results1;_ref1=elementListeners.events;_results1=[];for(event in _ref1){listener=_ref1[event];_results1.push(elementListeners.element.addEventListener(event,listener,false));}
return _results1;})());}
return _results;};Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){elementListeners=_ref[_i];_results.push((function(){var _ref1,_results1;_ref1=elementListeners.events;_results1=[];for(event in _ref1){listener=_ref1[event];_results1.push(elementListeners.element.removeEventListener(event,listener,false));}
return _results1;})());}
return _results;};Dropzone.prototype.disable=function(){var file,_i,_len,_ref,_results;this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable");});this.removeEventListeners();_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];_results.push(this.cancelUpload(file));}
return _results;};Dropzone.prototype.enable=function(){this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable");});return this.setupEventListeners();};Dropzone.prototype.filesize=function(size){var cutoff,i,selectedSize,selectedUnit,unit,units,_i,_len;selectedSize=0;selectedUnit="b";if(size>0){units=['TB','GB','MB','KB','b'];for(i=_i=0,_len=units.length;_i<_len;i=++_i){unit=units[i];cutoff=Math.pow(this.options.filesizeBase,4-i)/10;if(size>=cutoff){selectedSize=size/Math.pow(this.options.filesizeBase,4-i);selectedUnit=unit;break;}}
selectedSize=Math.round(10*selectedSize)/10;}
return"<strong>"+selectedSize+"</strong> "+selectedUnit;};Dropzone.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit('maxfilesreached',this.files);}
return this.element.classList.add("dz-max-files-reached");}else{return this.element.classList.remove("dz-max-files-reached");}};Dropzone.prototype.drop=function(e){var files,items;if(!e.dataTransfer){return;}
this.emit("drop",e);files=e.dataTransfer.files;this.emit("addedfiles",files);if(files.length){items=e.dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry!=null)){this._addFilesFromItems(items);}else{this.handleFiles(files);}}};Dropzone.prototype.paste=function(e){var items,_ref;if((e!=null?(_ref=e.clipboardData)!=null?_ref.items:void 0:void 0)==null){return;}
this.emit("paste",e);items=e.clipboardData.items;if(items.length){return this._addFilesFromItems(items);}};Dropzone.prototype.handleFiles=function(files){var file,_i,_len,_results;_results=[];for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];_results.push(this.addFile(file));}
return _results;};Dropzone.prototype._addFilesFromItems=function(items){var entry,item,_i,_len,_results;_results=[];for(_i=0,_len=items.length;_i<_len;_i++){item=items[_i];if((item.webkitGetAsEntry!=null)&&(entry=item.webkitGetAsEntry())){if(entry.isFile){_results.push(this.addFile(item.getAsFile()));}else if(entry.isDirectory){_results.push(this._addFilesFromDirectory(entry,entry.name));}else{_results.push(void 0);}}else if(item.getAsFile!=null){if((item.kind==null)||item.kind==="file"){_results.push(this.addFile(item.getAsFile()));}else{_results.push(void 0);}}else{_results.push(void 0);}}
return _results;};Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,entriesReader;dirReader=directory.createReader();entriesReader=(function(_this){return function(entries){var entry,_i,_len;for(_i=0,_len=entries.length;_i<_len;_i++){entry=entries[_i];if(entry.isFile){entry.file(function(file){if(_this.options.ignoreHiddenFiles&&file.name.substring(0,1)==='.'){return;}
file.fullPath=""+path+"/"+file.name;return _this.addFile(file);});}else if(entry.isDirectory){_this._addFilesFromDirectory(entry,""+path+"/"+entry.name);}}};})(this);return dirReader.readEntries(entriesReader,function(error){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(error):void 0:void 0;});};Dropzone.prototype.accept=function(file,done){if(file.size>this.options.maxFilesize*1024*1024){return done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize));}else if(!Dropzone.isValidFile(file,this.options.acceptedFiles)){return done(this.options.dictInvalidFileType);}else if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",file);}else{return this.options.accept.call(this,file,done);}};Dropzone.prototype.addFile=function(file){file.upload={progress:0,total:file.size,bytesSent:0};this.files.push(file);file.status=Dropzone.ADDED;this.emit("addedfile",file);this._enqueueThumbnail(file);return this.accept(file,(function(_this){return function(error){if(error){file.accepted=false;_this._errorProcessing([file],error);}else{file.accepted=true;if(_this.options.autoQueue){_this.enqueueFile(file);}}
return _this._updateMaxFilesReachedClass();};})(this));};Dropzone.prototype.enqueueFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];this.enqueueFile(file);}
return null;};Dropzone.prototype.enqueueFile=function(file){if(file.status===Dropzone.ADDED&&file.accepted===true){file.status=Dropzone.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(_this){return function(){return _this.processQueue();};})(this)),0);}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.");}};Dropzone.prototype._thumbnailQueue=[];Dropzone.prototype._processingThumbnail=false;Dropzone.prototype._enqueueThumbnail=function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(file);return setTimeout(((function(_this){return function(){return _this._processThumbnailQueue();};})(this)),0);}};Dropzone.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return;}
this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(_this){return function(){_this._processingThumbnail=false;return _this._processThumbnailQueue();};})(this));};Dropzone.prototype.removeFile=function(file){if(file.status===Dropzone.UPLOADING){this.cancelUpload(file);}
this.files=without(this.files,file);this.emit("removedfile",file);if(this.files.length===0){return this.emit("reset");}};Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,_i,_len,_ref;if(cancelIfNecessary==null){cancelIfNecessary=false;}
_ref=this.files.slice();for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status!==Dropzone.UPLOADING||cancelIfNecessary){this.removeFile(file);}}
return null;};Dropzone.prototype.createThumbnail=function(file,callback){var fileReader;fileReader=new FileReader;fileReader.onload=(function(_this){return function(){if(file.type==="image/svg+xml"){_this.emit("thumbnail",file,fileReader.result);if(callback!=null){callback();}
return;}
return _this.createThumbnailFromUrl(file,fileReader.result,callback);};})(this);return fileReader.readAsDataURL(file);};Dropzone.prototype.createThumbnailFromUrl=function(file,imageUrl,callback,crossOrigin){var img;img=document.createElement("img");if(crossOrigin){img.crossOrigin=crossOrigin;}
img.onload=(function(_this){return function(){var canvas,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;file.width=img.width;file.height=img.height;resizeInfo=_this.options.resize.call(_this,file);if(resizeInfo.trgWidth==null){resizeInfo.trgWidth=resizeInfo.optWidth;}
if(resizeInfo.trgHeight==null){resizeInfo.trgHeight=resizeInfo.optHeight;}
canvas=document.createElement("canvas");ctx=canvas.getContext("2d");canvas.width=resizeInfo.trgWidth;canvas.height=resizeInfo.trgHeight;drawImageIOSFix(ctx,img,(_ref=resizeInfo.srcX)!=null?_ref:0,(_ref1=resizeInfo.srcY)!=null?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,(_ref2=resizeInfo.trgX)!=null?_ref2:0,(_ref3=resizeInfo.trgY)!=null?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight);thumbnail=canvas.toDataURL("image/png");_this.emit("thumbnail",file,thumbnail);if(callback!=null){return callback();}};})(this);if(callback!=null){img.onerror=callback;}
return img.src=imageUrl;};Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;parallelUploads=this.options.parallelUploads;processingLength=this.getUploadingFiles().length;i=processingLength;if(processingLength>=parallelUploads){return;}
queuedFiles=this.getQueuedFiles();if(!(queuedFiles.length>0)){return;}
if(this.options.uploadMultiple){return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));}else{while(i<parallelUploads){if(!queuedFiles.length){return;}
this.processFile(queuedFiles.shift());i++;}}};Dropzone.prototype.processFile=function(file){return this.processFiles([file]);};Dropzone.prototype.processFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.processing=true;file.status=Dropzone.UPLOADING;this.emit("processing",file);}
if(this.options.uploadMultiple){this.emit("processingmultiple",files);}
return this.uploadFiles(files);};Dropzone.prototype._getFilesWithXhr=function(xhr){var file,files;return files=(function(){var _i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.xhr===xhr){_results.push(file);}}
return _results;}).call(this);};Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,_i,_j,_len,_len1,_ref;if(file.status===Dropzone.UPLOADING){groupedFiles=this._getFilesWithXhr(file.xhr);for(_i=0,_len=groupedFiles.length;_i<_len;_i++){groupedFile=groupedFiles[_i];groupedFile.status=Dropzone.CANCELED;}
file.xhr.abort();for(_j=0,_len1=groupedFiles.length;_j<_len1;_j++){groupedFile=groupedFiles[_j];this.emit("canceled",groupedFile);}
if(this.options.uploadMultiple){this.emit("canceledmultiple",groupedFiles);}}else if((_ref=file.status)===Dropzone.ADDED||_ref===Dropzone.QUEUED){file.status=Dropzone.CANCELED;this.emit("canceled",file);if(this.options.uploadMultiple){this.emit("canceledmultiple",[file]);}}
if(this.options.autoProcessQueue){return this.processQueue();}};resolveOption=function(){var args,option;option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(typeof option==='function'){return option.apply(this,args);}
return option;};Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file]);};Dropzone.prototype.uploadFiles=function(files){var file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,key,method,option,progressObj,response,updateProgress,url,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_m,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;xhr=new XMLHttpRequest();for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.xhr=xhr;}
method=resolveOption(this.options.method,files);url=resolveOption(this.options.url,files);xhr.open(method,url,true);xhr.withCredentials=!!this.options.withCredentials;response=null;handleError=(function(_this){return function(){var _j,_len1,_results;_results=[];for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];_results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr));}
return _results;};})(this);updateProgress=(function(_this){return function(e){var allFilesFinished,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(e!=null){progress=100*e.loaded/e.total;for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];file.upload={progress:progress,total:e.total,bytesSent:e.loaded};}}else{allFilesFinished=true;progress=100;for(_k=0,_len2=files.length;_k<_len2;_k++){file=files[_k];if(!(file.upload.progress===100&&file.upload.bytesSent===file.upload.total)){allFilesFinished=false;}
file.upload.progress=progress;file.upload.bytesSent=file.upload.total;}
if(allFilesFinished){return;}}
_results=[];for(_l=0,_len3=files.length;_l<_len3;_l++){file=files[_l];_results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent));}
return _results;};})(this);xhr.onload=(function(_this){return function(e){var _ref;if(files[0].status===Dropzone.CANCELED){return;}
if(xhr.readyState!==4){return;}
response=xhr.responseText;if(xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")){try{response=JSON.parse(response);}catch(_error){e=_error;response="Invalid JSON response from server.";}}
updateProgress();if(!((200<=(_ref=xhr.status)&&_ref<300))){return handleError();}else{return _this._finished(files,response,e);}};})(this);xhr.onerror=(function(_this){return function(){if(files[0].status===Dropzone.CANCELED){return;}
return handleError();};})(this);progressObj=(_ref=xhr.upload)!=null?_ref:xhr;progressObj.onprogress=updateProgress;headers={"Accept":"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){extend(headers,this.options.headers);}
for(headerName in headers){headerValue=headers[headerName];if(headerValue){xhr.setRequestHeader(headerName,headerValue);}}
formData=new FormData();if(this.options.params){_ref1=this.options.params;for(key in _ref1){value=_ref1[key];formData.append(key,value);}}
for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];this.emit("sending",file,xhr,formData);}
if(this.options.uploadMultiple){this.emit("sendingmultiple",files,xhr,formData);}
if(this.element.tagName==="FORM"){_ref2=this.element.querySelectorAll("input, textarea, select, button");for(_k=0,_len2=_ref2.length;_k<_len2;_k++){input=_ref2[_k];inputName=input.getAttribute("name");inputType=input.getAttribute("type");if(input.tagName==="SELECT"&&input.hasAttribute("multiple")){_ref3=input.options;for(_l=0,_len3=_ref3.length;_l<_len3;_l++){option=_ref3[_l];if(option.selected){formData.append(inputName,option.value);}}}else if(!inputType||((_ref4=inputType.toLowerCase())!=="checkbox"&&_ref4!=="radio")||input.checked){formData.append(inputName,input.value);}}}
for(i=_m=0,_ref5=files.length-1;0<=_ref5?_m<=_ref5:_m>=_ref5;i=0<=_ref5?++_m:--_m){formData.append(this._getParamName(i),files[i],files[i].name);}
return this.submitRequest(xhr,formData,files);};Dropzone.prototype.submitRequest=function(xhr,formData,files){return xhr.send(formData);};Dropzone.prototype._finished=function(files,responseText,e){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.status=Dropzone.SUCCESS;this.emit("success",file,responseText,e);this.emit("complete",file);}
if(this.options.uploadMultiple){this.emit("successmultiple",files,responseText,e);this.emit("completemultiple",files);}
if(this.options.autoProcessQueue){return this.processQueue();}};Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.status=Dropzone.ERROR;this.emit("error",file,message,xhr);this.emit("complete",file);}
if(this.options.uploadMultiple){this.emit("errormultiple",files,message,xhr);this.emit("completemultiple",files);}
if(this.options.autoProcessQueue){return this.processQueue();}};return Dropzone;})(Emitter);Dropzone.version="4.2.0";Dropzone.options={};Dropzone.optionsForElement=function(element){if(element.getAttribute("id")){return Dropzone.options[camelize(element.getAttribute("id"))];}else{return void 0;}};Dropzone.instances=[];Dropzone.forElement=function(element){if(typeof element==="string"){element=document.querySelector(element);}
if((element!=null?element.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");}
return element.dropzone;};Dropzone.autoDiscover=true;Dropzone.discover=function(){var checkElements,dropzone,dropzones,_i,_len,_results;if(document.querySelectorAll){dropzones=document.querySelectorAll(".dropzone");}else{dropzones=[];checkElements=function(elements){var el,_i,_len,_results;_results=[];for(_i=0,_len=elements.length;_i<_len;_i++){el=elements[_i];if(/(^| )dropzone($| )/.test(el.className)){_results.push(dropzones.push(el));}else{_results.push(void 0);}}
return _results;};checkElements(document.getElementsByTagName("div"));checkElements(document.getElementsByTagName("form"));}
_results=[];for(_i=0,_len=dropzones.length;_i<_len;_i++){dropzone=dropzones[_i];if(Dropzone.optionsForElement(dropzone)!==false){_results.push(new Dropzone(dropzone));}else{_results.push(void 0);}}
return _results;};Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];Dropzone.isBrowserSupported=function(){var capableBrowser,regex,_i,_len,_ref;capableBrowser=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){capableBrowser=false;}else{_ref=Dropzone.blacklistedBrowsers;for(_i=0,_len=_ref.length;_i<_len;_i++){regex=_ref[_i];if(regex.test(navigator.userAgent)){capableBrowser=false;continue;}}}}else{capableBrowser=false;}
return capableBrowser;};without=function(list,rejectedItem){var item,_i,_len,_results;_results=[];for(_i=0,_len=list.length;_i<_len;_i++){item=list[_i];if(item!==rejectedItem){_results.push(item);}}
return _results;};camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase();});};Dropzone.createElement=function(string){var div;div=document.createElement("div");div.innerHTML=string;return div.childNodes[0];};Dropzone.elementInside=function(element,container){if(element===container){return true;}
while(element=element.parentNode){if(element===container){return true;}}
return false;};Dropzone.getElement=function(el,name){var element;if(typeof el==="string"){element=document.querySelector(el);}else if(el.nodeType!=null){element=el;}
if(element==null){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");}
return element;};Dropzone.getElements=function(els,name){var e,el,elements,_i,_j,_len,_len1,_ref;if(els instanceof Array){elements=[];try{for(_i=0,_len=els.length;_i<_len;_i++){el=els[_i];elements.push(this.getElement(el,name));}}catch(_error){e=_error;elements=null;}}else if(typeof els==="string"){elements=[];_ref=document.querySelectorAll(els);for(_j=0,_len1=_ref.length;_j<_len1;_j++){el=_ref[_j];elements.push(el);}}else if(els.nodeType!=null){elements=[els];}
if(!((elements!=null)&&elements.length)){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");}
return elements;};Dropzone.confirm=function(question,accepted,rejected){if(window.confirm(question)){return accepted();}else if(rejected!=null){return rejected();}};Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,mimeType,validType,_i,_len;if(!acceptedFiles){return true;}
acceptedFiles=acceptedFiles.split(",");mimeType=file.type;baseMimeType=mimeType.replace(/\/.*$/,"");for(_i=0,_len=acceptedFiles.length;_i<_len;_i++){validType=acceptedFiles[_i];validType=validType.trim();if(validType.charAt(0)==="."){if(file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length)!==-1){return true;}}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,"")){return true;}}else{if(mimeType===validType){return true;}}}
return false;};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options);});};}
if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone;}else{window.Dropzone=Dropzone;}
Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";detectVerticalSquash=function(img){var alpha,canvas,ctx,data,ey,ih,iw,py,ratio,sy;iw=img.naturalWidth;ih=img.naturalHeight;canvas=document.createElement("canvas");canvas.width=1;canvas.height=ih;ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);data=ctx.getImageData(0,0,1,ih).data;sy=0;ey=ih;py=ih;while(py>sy){alpha=data[(py-1)*4+3];if(alpha===0){ey=py;}else{sy=py;}
py=(ey+sy)>>1;}
ratio=py/ih;if(ratio===0){return 1;}else{return ratio;}};drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio);};contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;done=false;top=true;doc=win.document;root=doc.documentElement;add=(doc.addEventListener?"addEventListener":"attachEvent");rem=(doc.addEventListener?"removeEventListener":"detachEvent");pre=(doc.addEventListener?"":"on");init=function(e){if(e.type==="readystatechange"&&doc.readyState!=="complete"){return;}
(e.type==="load"?win:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){return fn.call(win,e.type||e);}};poll=function(){var e;try{root.doScroll("left");}catch(_error){e=_error;setTimeout(poll,50);return;}
return init("poll");};if(doc.readyState!=="complete"){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement;}catch(_error){}
if(top){poll();}}
doc[add](pre+"DOMContentLoaded",init,false);doc[add](pre+"readystatechange",init,false);return win[add](pre+"load",init,false);}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover();}};contentLoaded(window,Dropzone._autoDiscoverFunction);}).call(this);;
!function(){"use strict";function e(e){e.fn.swiper=function(a){var s;return e(this).each(function(){var e=new t(this,a);s||(s=e)}),s}}var a,t=function(e,s){function r(){return"horizontal"===v.params.direction}function i(e){return Math.floor(e)}function n(){v.autoplayTimeoutId=setTimeout(function(){v.params.loop?(v.fixLoop(),v._slideNext()):v.isEnd?s.autoplayStopOnLast?v.stopAutoplay():v._slideTo(0):v._slideNext()},v.params.autoplay)}function o(e,t){var s=a(e.target);if(!s.is(t))if("string"==typeof t)s=s.parents(t);else if(t.nodeType){var r;return s.parents().each(function(e,a){a===t&&(r=t)}),r?t:void 0}return 0===s.length?void 0:s[0]}function l(e,a){a=a||{};var t=window.MutationObserver||window.WebkitMutationObserver,s=new t(function(e){e.forEach(function(e){v.onResize(!0),v.emit("onObserverUpdate",v,e)})});s.observe(e,{attributes:"undefined"==typeof a.attributes?!0:a.attributes,childList:"undefined"==typeof a.childList?!0:a.childList,characterData:"undefined"==typeof a.characterData?!0:a.characterData}),v.observers.push(s)}function p(e){e.originalEvent&&(e=e.originalEvent);var a=e.keyCode||e.charCode;if(!v.params.allowSwipeToNext&&(r()&&39===a||!r()&&40===a))return!1;if(!v.params.allowSwipeToPrev&&(r()&&37===a||!r()&&38===a))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===a||39===a||38===a||40===a){var t=!1;if(v.container.parents(".swiper-slide").length>0&&0===v.container.parents(".swiper-slide-active").length)return;var s={left:window.pageXOffset,top:window.pageYOffset},i=window.innerWidth,n=window.innerHeight,o=v.container.offset();v.rtl&&(o.left=o.left-v.container[0].scrollLeft);for(var l=[[o.left,o.top],[o.left+v.width,o.top],[o.left,o.top+v.height],[o.left+v.width,o.top+v.height]],p=0;p<l.length;p++){var d=l[p];d[0]>=s.left&&d[0]<=s.left+i&&d[1]>=s.top&&d[1]<=s.top+n&&(t=!0)}if(!t)return}r()?((37===a||39===a)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===a&&!v.rtl||37===a&&v.rtl)&&v.slideNext(),(37===a&&!v.rtl||39===a&&v.rtl)&&v.slidePrev()):((38===a||40===a)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),40===a&&v.slideNext(),38===a&&v.slidePrev())}}function d(e){e.originalEvent&&(e=e.originalEvent);var a=v.mousewheel.event,t=0;if(e.detail)t=-e.detail;else if("mousewheel"===a)if(v.params.mousewheelForceToAxis)if(r()){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;t=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;t=e.wheelDeltaY}else t=e.wheelDelta;else if("DOMMouseScroll"===a)t=-e.detail;else if("wheel"===a)if(v.params.mousewheelForceToAxis)if(r()){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;t=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;t=-e.deltaY}else t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(v.params.mousewheelInvert&&(t=-t),v.params.freeMode){var s=v.getWrapperTranslate()+t*v.params.mousewheelSensitivity;if(s>0&&(s=0),s<v.maxTranslate()&&(s=v.maxTranslate()),v.setWrapperTransition(0),v.setWrapperTranslate(s),v.updateProgress(),v.updateActiveIndex(),v.params.freeModeSticky&&(clearTimeout(v.mousewheel.timeout),v.mousewheel.timeout=setTimeout(function(){v.slideReset()},300)),0===s||s===v.maxTranslate())return}else{if((new window.Date).getTime()-v.mousewheel.lastScrollTime>60)if(0>t)if(v.isEnd&&!v.params.loop||v.animating){if(v.params.mousewheelReleaseOnEdges)return!0}else v.slideNext();else if(v.isBeginning&&!v.params.loop||v.animating){if(v.params.mousewheelReleaseOnEdges)return!0}else v.slidePrev();v.mousewheel.lastScrollTime=(new window.Date).getTime()}return v.params.autoplay&&v.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function c(e,t){e=a(e);var s,i,n;s=e.attr("data-swiper-parallax")||"0",i=e.attr("data-swiper-parallax-x"),n=e.attr("data-swiper-parallax-y"),i||n?(i=i||"0",n=n||"0"):r()?(i=s,n="0"):(n=s,i="0"),i=i.indexOf("%")>=0?parseInt(i,10)*t+"%":i*t+"px",n=n.indexOf("%")>=0?parseInt(n,10)*t+"%":n*t+"px",e.transform("translate3d("+i+", "+n+",0px)")}function u(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof t))return new t(e,s);var m={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,hashnav:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},f=s&&s.virtualTranslate;s=s||{};for(var h in m)if("undefined"==typeof s[h])s[h]=m[h];else if("object"==typeof s[h])for(var g in m[h])"undefined"==typeof s[h][g]&&(s[h][g]=m[h][g]);var v=this;if(v.params=s,v.classNames=[],"undefined"!=typeof a&&"undefined"!=typeof Dom7&&(a=Dom7),("undefined"!=typeof a||(a="undefined"==typeof Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7))&&(v.$=a,v.container=a(e),0!==v.container.length)){if(v.container.length>1)return void v.container.each(function(){new t(this,s)});v.container[0].swiper=v,v.container.data("swiper",v),v.classNames.push("swiper-container-"+v.params.direction),v.params.freeMode&&v.classNames.push("swiper-container-free-mode"),v.support.flexbox||(v.classNames.push("swiper-container-no-flexbox"),v.params.slidesPerColumn=1),(v.params.parallax||v.params.watchSlidesVisibility)&&(v.params.watchSlidesProgress=!0),["cube","coverflow"].indexOf(v.params.effect)>=0&&(v.support.transforms3d?(v.params.watchSlidesProgress=!0,v.classNames.push("swiper-container-3d")):v.params.effect="slide"),"slide"!==v.params.effect&&v.classNames.push("swiper-container-"+v.params.effect),"cube"===v.params.effect&&(v.params.resistanceRatio=0,v.params.slidesPerView=1,v.params.slidesPerColumn=1,v.params.slidesPerGroup=1,v.params.centeredSlides=!1,v.params.spaceBetween=0,v.params.virtualTranslate=!0,v.params.setWrapperSize=!1),"fade"===v.params.effect&&(v.params.slidesPerView=1,v.params.slidesPerColumn=1,v.params.slidesPerGroup=1,v.params.watchSlidesProgress=!0,v.params.spaceBetween=0,"undefined"==typeof f&&(v.params.virtualTranslate=!0)),v.params.grabCursor&&v.support.touch&&(v.params.grabCursor=!1),v.wrapper=v.container.children("."+v.params.wrapperClass),v.params.pagination&&(v.paginationContainer=a(v.params.pagination),v.params.paginationClickable&&v.paginationContainer.addClass("swiper-pagination-clickable")),v.rtl=r()&&("rtl"===v.container[0].dir.toLowerCase()||"rtl"===v.container.css("direction")),v.rtl&&v.classNames.push("swiper-container-rtl"),v.rtl&&(v.wrongRTL="-webkit-box"===v.wrapper.css("display")),v.params.slidesPerColumn>1&&v.classNames.push("swiper-container-multirow"),v.device.android&&v.classNames.push("swiper-container-android"),v.container.addClass(v.classNames.join(" ")),v.translate=0,v.progress=0,v.velocity=0,v.lockSwipeToNext=function(){v.params.allowSwipeToNext=!1},v.lockSwipeToPrev=function(){v.params.allowSwipeToPrev=!1},v.lockSwipes=function(){v.params.allowSwipeToNext=v.params.allowSwipeToPrev=!1},v.unlockSwipeToNext=function(){v.params.allowSwipeToNext=!0},v.unlockSwipeToPrev=function(){v.params.allowSwipeToPrev=!0},v.unlockSwipes=function(){v.params.allowSwipeToNext=v.params.allowSwipeToPrev=!0},v.params.grabCursor&&(v.container[0].style.cursor="move",v.container[0].style.cursor="-webkit-grab",v.container[0].style.cursor="-moz-grab",v.container[0].style.cursor="grab"),v.imagesToLoad=[],v.imagesLoaded=0,v.loadImage=function(e,a,t,s,r){function i(){r&&r()}var n;e.complete&&s?i():a?(n=new window.Image,n.onload=i,n.onerror=i,n.srcset=t,n.src=a):i()},v.preloadImages=function(){function e(){"undefined"!=typeof v&&null!==v&&(void 0!==v.imagesLoaded&&v.imagesLoaded++,v.imagesLoaded===v.imagesToLoad.length&&(v.params.updateOnImagesReady&&v.update(),v.emit("onImagesReady",v)))}v.imagesToLoad=v.container.find("img");for(var a=0;a<v.imagesToLoad.length;a++)v.loadImage(v.imagesToLoad[a],v.imagesToLoad[a].currentSrc||v.imagesToLoad[a].getAttribute("src"),v.imagesToLoad[a].srcset||v.imagesToLoad[a].getAttribute("srcset"),!0,e)},v.autoplayTimeoutId=void 0,v.autoplaying=!1,v.autoplayPaused=!1,v.startAutoplay=function(){return"undefined"!=typeof v.autoplayTimeoutId?!1:v.params.autoplay?v.autoplaying?!1:(v.autoplaying=!0,v.emit("onAutoplayStart",v),void n()):!1},v.stopAutoplay=function(e){v.autoplayTimeoutId&&(v.autoplayTimeoutId&&clearTimeout(v.autoplayTimeoutId),v.autoplaying=!1,v.autoplayTimeoutId=void 0,v.emit("onAutoplayStop",v))},v.pauseAutoplay=function(e){v.autoplayPaused||(v.autoplayTimeoutId&&clearTimeout(v.autoplayTimeoutId),v.autoplayPaused=!0,0===e?(v.autoplayPaused=!1,n()):v.wrapper.transitionEnd(function(){v&&(v.autoplayPaused=!1,v.autoplaying?n():v.stopAutoplay())}))},v.minTranslate=function(){return-v.snapGrid[0]},v.maxTranslate=function(){return-v.snapGrid[v.snapGrid.length-1]},v.updateContainerSize=function(){var e,a;e="undefined"!=typeof v.params.width?v.params.width:v.container[0].clientWidth,a="undefined"!=typeof v.params.height?v.params.height:v.container[0].clientHeight,0===e&&r()||0===a&&!r()||(e=e-parseInt(v.container.css("padding-left"),10)-parseInt(v.container.css("padding-right"),10),a=a-parseInt(v.container.css("padding-top"),10)-parseInt(v.container.css("padding-bottom"),10),v.width=e,v.height=a,v.size=r()?v.width:v.height)},v.updateSlidesSize=function(){v.slides=v.wrapper.children("."+v.params.slideClass),v.snapGrid=[],v.slidesGrid=[],v.slidesSizesGrid=[];var e,a=v.params.spaceBetween,t=-v.params.slidesOffsetBefore,s=0,n=0;"string"==typeof a&&a.indexOf("%")>=0&&(a=parseFloat(a.replace("%",""))/100*v.size),v.virtualSize=-a,v.rtl?v.slides.css({marginLeft:"",marginTop:""}):v.slides.css({marginRight:"",marginBottom:""});var o;v.params.slidesPerColumn>1&&(o=Math.floor(v.slides.length/v.params.slidesPerColumn)===v.slides.length/v.params.slidesPerColumn?v.slides.length:Math.ceil(v.slides.length/v.params.slidesPerColumn)*v.params.slidesPerColumn);var l,p=v.params.slidesPerColumn,d=o/p,c=d-(v.params.slidesPerColumn*d-v.slides.length);for(e=0;e<v.slides.length;e++){l=0;var u=v.slides.eq(e);if(v.params.slidesPerColumn>1){var m,f,h;"column"===v.params.slidesPerColumnFill?(f=Math.floor(e/p),h=e-f*p,(f>c||f===c&&h===p-1)&&++h>=p&&(h=0,f++),m=f+h*o/p,u.css({"-webkit-box-ordinal-group":m,"-moz-box-ordinal-group":m,"-ms-flex-order":m,"-webkit-order":m,order:m})):(h=Math.floor(e/d),f=e-h*d),u.css({"margin-top":0!==h&&v.params.spaceBetween&&v.params.spaceBetween+"px"}).attr("data-swiper-column",f).attr("data-swiper-row",h)}"none"!==u.css("display")&&("auto"===v.params.slidesPerView?(l=r()?u.outerWidth(!0):u.outerHeight(!0),v.params.roundLengths&&(l=i(l))):(l=(v.size-(v.params.slidesPerView-1)*a)/v.params.slidesPerView,v.params.roundLengths&&(l=i(l)),r()?v.slides[e].style.width=l+"px":v.slides[e].style.height=l+"px"),v.slides[e].swiperSlideSize=l,v.slidesSizesGrid.push(l),v.params.centeredSlides?(t=t+l/2+s/2+a,0===e&&(t=t-v.size/2-a),Math.abs(t)<.001&&(t=0),n%v.params.slidesPerGroup===0&&v.snapGrid.push(t),v.slidesGrid.push(t)):(n%v.params.slidesPerGroup===0&&v.snapGrid.push(t),v.slidesGrid.push(t),t=t+l+a),v.virtualSize+=l+a,s=l,n++)}v.virtualSize=Math.max(v.virtualSize,v.size)+v.params.slidesOffsetAfter;var g;if(v.rtl&&v.wrongRTL&&("slide"===v.params.effect||"coverflow"===v.params.effect)&&v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}),(!v.support.flexbox||v.params.setWrapperSize)&&(r()?v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}):v.wrapper.css({height:v.virtualSize+v.params.spaceBetween+"px"})),v.params.slidesPerColumn>1&&(v.virtualSize=(l+v.params.spaceBetween)*o,v.virtualSize=Math.ceil(v.virtualSize/v.params.slidesPerColumn)-v.params.spaceBetween,v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}),v.params.centeredSlides)){for(g=[],e=0;e<v.snapGrid.length;e++)v.snapGrid[e]<v.virtualSize+v.snapGrid[0]&&g.push(v.snapGrid[e]);v.snapGrid=g}if(!v.params.centeredSlides){for(g=[],e=0;e<v.snapGrid.length;e++)v.snapGrid[e]<=v.virtualSize-v.size&&g.push(v.snapGrid[e]);v.snapGrid=g,Math.floor(v.virtualSize-v.size)>Math.floor(v.snapGrid[v.snapGrid.length-1])&&v.snapGrid.push(v.virtualSize-v.size)}0===v.snapGrid.length&&(v.snapGrid=[0]),0!==v.params.spaceBetween&&(r()?v.rtl?v.slides.css({marginLeft:a+"px"}):v.slides.css({marginRight:a+"px"}):v.slides.css({marginBottom:a+"px"})),v.params.watchSlidesProgress&&v.updateSlidesOffset()},v.updateSlidesOffset=function(){for(var e=0;e<v.slides.length;e++)v.slides[e].swiperSlideOffset=r()?v.slides[e].offsetLeft:v.slides[e].offsetTop},v.updateSlidesProgress=function(e){if("undefined"==typeof e&&(e=v.translate||0),0!==v.slides.length){"undefined"==typeof v.slides[0].swiperSlideOffset&&v.updateSlidesOffset();var a=-e;v.rtl&&(a=e);v.container[0].getBoundingClientRect(),r()?"left":"top",r()?"right":"bottom";v.slides.removeClass(v.params.slideVisibleClass);for(var t=0;t<v.slides.length;t++){var s=v.slides[t],i=(a-s.swiperSlideOffset)/(s.swiperSlideSize+v.params.spaceBetween);if(v.params.watchSlidesVisibility){var n=-(a-s.swiperSlideOffset),o=n+v.slidesSizesGrid[t],l=n>=0&&n<v.size||o>0&&o<=v.size||0>=n&&o>=v.size;l&&v.slides.eq(t).addClass(v.params.slideVisibleClass)}s.progress=v.rtl?-i:i}}},v.updateProgress=function(e){"undefined"==typeof e&&(e=v.translate||0);var a=v.maxTranslate()-v.minTranslate();0===a?(v.progress=0,v.isBeginning=v.isEnd=!0):(v.progress=(e-v.minTranslate())/a,v.isBeginning=v.progress<=0,v.isEnd=v.progress>=1),v.isBeginning&&v.emit("onReachBeginning",v),v.isEnd&&v.emit("onReachEnd",v),v.params.watchSlidesProgress&&v.updateSlidesProgress(e),v.emit("onProgress",v,v.progress)},v.updateActiveIndex=function(){var e,a,t,s=v.rtl?v.translate:-v.translate;for(a=0;a<v.slidesGrid.length;a++)"undefined"!=typeof v.slidesGrid[a+1]?s>=v.slidesGrid[a]&&s<v.slidesGrid[a+1]-(v.slidesGrid[a+1]-v.slidesGrid[a])/2?e=a:s>=v.slidesGrid[a]&&s<v.slidesGrid[a+1]&&(e=a+1):s>=v.slidesGrid[a]&&(e=a);(0>e||"undefined"==typeof e)&&(e=0),t=Math.floor(e/v.params.slidesPerGroup),t>=v.snapGrid.length&&(t=v.snapGrid.length-1),e!==v.activeIndex&&(v.snapIndex=t,v.previousIndex=v.activeIndex,v.activeIndex=e,v.updateClasses())},v.updateClasses=function(){v.slides.removeClass(v.params.slideActiveClass+" "+v.params.slideNextClass+" "+v.params.slidePrevClass);var e=v.slides.eq(v.activeIndex);if(e.addClass(v.params.slideActiveClass),e.next("."+v.params.slideClass).addClass(v.params.slideNextClass),e.prev("."+v.params.slideClass).addClass(v.params.slidePrevClass),v.bullets&&v.bullets.length>0){v.bullets.removeClass(v.params.bulletActiveClass);var t;v.params.loop?(t=Math.ceil(v.activeIndex-v.loopedSlides)/v.params.slidesPerGroup,t>v.slides.length-1-2*v.loopedSlides&&(t-=v.slides.length-2*v.loopedSlides),t>v.bullets.length-1&&(t-=v.bullets.length)):t="undefined"!=typeof v.snapIndex?v.snapIndex:v.activeIndex||0,v.paginationContainer.length>1?v.bullets.each(function(){a(this).index()===t&&a(this).addClass(v.params.bulletActiveClass)}):v.bullets.eq(t).addClass(v.params.bulletActiveClass)}v.params.loop||(v.params.prevButton&&(v.isBeginning?(a(v.params.prevButton).addClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.disable(a(v.params.prevButton))):(a(v.params.prevButton).removeClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.enable(a(v.params.prevButton)))),v.params.nextButton&&(v.isEnd?(a(v.params.nextButton).addClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.disable(a(v.params.nextButton))):(a(v.params.nextButton).removeClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.enable(a(v.params.nextButton)))))},v.updatePagination=function(){if(v.params.pagination&&v.paginationContainer&&v.paginationContainer.length>0){for(var e="",a=v.params.loop?Math.ceil((v.slides.length-2*v.loopedSlides)/v.params.slidesPerGroup):v.snapGrid.length,t=0;a>t;t++)e+=v.params.paginationBulletRender?v.params.paginationBulletRender(t,v.params.bulletClass):"<"+v.params.paginationElement+' class="'+v.params.bulletClass+'"></'+v.params.paginationElement+">";v.paginationContainer.html(e),v.bullets=v.paginationContainer.find("."+v.params.bulletClass),v.params.paginationClickable&&v.params.a11y&&v.a11y&&v.a11y.initPagination()}},v.update=function(e){function a(){s=Math.min(Math.max(v.translate,v.maxTranslate()),v.minTranslate()),v.setWrapperTranslate(s),v.updateActiveIndex(),v.updateClasses()}if(v.updateContainerSize(),v.updateSlidesSize(),v.updateProgress(),v.updatePagination(),v.updateClasses(),v.params.scrollbar&&v.scrollbar&&v.scrollbar.set(),e){var t,s;v.controller&&v.controller.spline&&(v.controller.spline=void 0),v.params.freeMode?a():(t=("auto"===v.params.slidesPerView||v.params.slidesPerView>1)&&v.isEnd&&!v.params.centeredSlides?v.slideTo(v.slides.length-1,0,!1,!0):v.slideTo(v.activeIndex,0,!1,!0),t||a())}},v.onResize=function(e){var a=v.params.allowSwipeToPrev,t=v.params.allowSwipeToNext;if(v.params.allowSwipeToPrev=v.params.allowSwipeToNext=!0,v.updateContainerSize(),v.updateSlidesSize(),("auto"===v.params.slidesPerView||v.params.freeMode||e)&&v.updatePagination(),v.params.scrollbar&&v.scrollbar&&v.scrollbar.set(),v.controller&&v.controller.spline&&(v.controller.spline=void 0),v.params.freeMode){var s=Math.min(Math.max(v.translate,v.maxTranslate()),v.minTranslate());v.setWrapperTranslate(s),v.updateActiveIndex(),v.updateClasses()}else v.updateClasses(),("auto"===v.params.slidesPerView||v.params.slidesPerView>1)&&v.isEnd&&!v.params.centeredSlides?v.slideTo(v.slides.length-1,0,!1,!0):v.slideTo(v.activeIndex,0,!1,!0);v.params.allowSwipeToPrev=a,v.params.allowSwipeToNext=t};var w=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?w=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(w=["MSPointerDown","MSPointerMove","MSPointerUp"]),v.touchEvents={start:v.support.touch||!v.params.simulateTouch?"touchstart":w[0],move:v.support.touch||!v.params.simulateTouch?"touchmove":w[1],end:v.support.touch||!v.params.simulateTouch?"touchend":w[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===v.params.touchEventsTarget?v.container:v.wrapper).addClass("swiper-wp8-"+v.params.direction),v.initEvents=function(e){var t=e?"off":"on",r=e?"removeEventListener":"addEventListener",i="container"===v.params.touchEventsTarget?v.container[0]:v.wrapper[0],n=v.support.touch?i:document,o=v.params.nested?!0:!1;v.browser.ie?(i[r](v.touchEvents.start,v.onTouchStart,!1),n[r](v.touchEvents.move,v.onTouchMove,o),n[r](v.touchEvents.end,v.onTouchEnd,!1)):(v.support.touch&&(i[r](v.touchEvents.start,v.onTouchStart,!1),i[r](v.touchEvents.move,v.onTouchMove,o),i[r](v.touchEvents.end,v.onTouchEnd,!1)),!s.simulateTouch||v.device.ios||v.device.android||(i[r]("mousedown",v.onTouchStart,!1),document[r]("mousemove",v.onTouchMove,o),document[r]("mouseup",v.onTouchEnd,!1))),window[r]("resize",v.onResize),v.params.nextButton&&(a(v.params.nextButton)[t]("click",v.onClickNext),v.params.a11y&&v.a11y&&a(v.params.nextButton)[t]("keydown",v.a11y.onEnterKey)),v.params.prevButton&&(a(v.params.prevButton)[t]("click",v.onClickPrev),v.params.a11y&&v.a11y&&a(v.params.prevButton)[t]("keydown",v.a11y.onEnterKey)),v.params.pagination&&v.params.paginationClickable&&(a(v.paginationContainer)[t]("click","."+v.params.bulletClass,v.onClickIndex),v.params.a11y&&v.a11y&&a(v.paginationContainer)[t]("keydown","."+v.params.bulletClass,v.a11y.onEnterKey)),(v.params.preventClicks||v.params.preventClicksPropagation)&&i[r]("click",v.preventClicks,!0)},v.attachEvents=function(e){v.initEvents()},v.detachEvents=function(){v.initEvents(!0)},v.allowClick=!0,v.preventClicks=function(e){v.allowClick||(v.params.preventClicks&&e.preventDefault(),v.params.preventClicksPropagation&&v.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},v.onClickNext=function(e){e.preventDefault(),(!v.isEnd||v.params.loop)&&v.slideNext()},v.onClickPrev=function(e){e.preventDefault(),(!v.isBeginning||v.params.loop)&&v.slidePrev()},v.onClickIndex=function(e){e.preventDefault();var t=a(this).index()*v.params.slidesPerGroup;v.params.loop&&(t+=v.loopedSlides),v.slideTo(t)},v.updateClickedSlide=function(e){var t=o(e,"."+v.params.slideClass),s=!1;if(t)for(var r=0;r<v.slides.length;r++)v.slides[r]===t&&(s=!0);if(!t||!s)return v.clickedSlide=void 0,void(v.clickedIndex=void 0);if(v.clickedSlide=t,v.clickedIndex=a(t).index(),v.params.slideToClickedSlide&&void 0!==v.clickedIndex&&v.clickedIndex!==v.activeIndex){var i,n,l=v.clickedIndex;v.params.loop?(i=a(v.clickedSlide).attr("data-swiper-slide-index"),v.params.centeredSlides?l<v.loopedSlides-v.params.slidesPerView/2?(v.fixLoop(),n=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+i+'"]'),l=n.eq(n.length-1).index(),setTimeout(function(){v.slideTo(l)},0)):l>v.slides.length-v.loopedSlides+v.params.slidesPerView/2?(v.fixLoop(),l=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+i+'"]').eq(0).index(),setTimeout(function(){v.slideTo(l)},0)):v.slideTo(l):l>v.slides.length-v.params.slidesPerView?(v.fixLoop(),l=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+i+'"]').eq(0).index(),setTimeout(function(){v.slideTo(l)},0)):l<v.params.slidesPerView-1?(v.fixLoop(),n=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+i+'"]'),l=n.eq(n.length-1).index(),setTimeout(function(){v.slideTo(l)},0)):v.slideTo(l)):v.slideTo(l)}};var y,b,x,T,S,C,M,P,z,I="input, select, textarea, button",E=Date.now(),k=[];v.animating=!1,v.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var D,L;if(v.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),D="touchstart"===e.type,D||!("which"in e)||3!==e.which){if(v.params.noSwiping&&o(e,"."+v.params.noSwipingClass))return void(v.allowClick=!0);if(!v.params.swipeHandler||o(e,v.params.swipeHandler)){var t=v.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s=v.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY;if(!(v.device.ios&&v.params.iOSEdgeSwipeDetection&&t<=v.params.iOSEdgeSwipeThreshold)){if(y=!0,b=!1,T=void 0,L=void 0,v.touches.startX=t,v.touches.startY=s,x=Date.now(),v.allowClick=!0,v.updateContainerSize(),v.swipeDirection=void 0,v.params.threshold>0&&(M=!1),"touchstart"!==e.type){var r=!0;a(e.target).is(I)&&(r=!1),document.activeElement&&a(document.activeElement).is(I)&&document.activeElement.blur(),r&&e.preventDefault()}v.emit("onTouchStart",v,e)}}}},v.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!(D&&"mousemove"===e.type||e.preventedByNestedSwiper)){if(v.params.onlyExternal)return v.allowClick=!1,void(y&&(v.touches.startX=v.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,v.touches.startY=v.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,x=Date.now()));if(D&&document.activeElement&&e.target===document.activeElement&&a(e.target).is(I))return b=!0,void(v.allowClick=!1);if(v.emit("onTouchMove",v,e),!(e.targetTouches&&e.targetTouches.length>1)){if(v.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,v.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof T){var t=180*Math.atan2(Math.abs(v.touches.currentY-v.touches.startY),Math.abs(v.touches.currentX-v.touches.startX))/Math.PI;T=r()?t>v.params.touchAngle:90-t>v.params.touchAngle}if(T&&v.emit("onTouchMoveOpposite",v,e),"undefined"==typeof L&&v.browser.ieTouch&&(v.touches.currentX!==v.touches.startX||v.touches.currentY!==v.touches.startY)&&(L=!0),y){if(T)return void(y=!1);if(L||!v.browser.ieTouch){v.allowClick=!1,v.emit("onSliderMove",v,e),e.preventDefault(),v.params.touchMoveStopPropagation&&!v.params.nested&&e.stopPropagation(),b||(s.loop&&v.fixLoop(),C=v.getWrapperTranslate(),v.setWrapperTransition(0),v.animating&&v.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),v.params.autoplay&&v.autoplaying&&(v.params.autoplayDisableOnInteraction?v.stopAutoplay():v.pauseAutoplay()),z=!1,v.params.grabCursor&&(v.container[0].style.cursor="move",v.container[0].style.cursor="-webkit-grabbing",v.container[0].style.cursor="-moz-grabbin",v.container[0].style.cursor="grabbing")),b=!0;var i=v.touches.diff=r()?v.touches.currentX-v.touches.startX:v.touches.currentY-v.touches.startY;i*=v.params.touchRatio,v.rtl&&(i=-i),v.swipeDirection=i>0?"prev":"next",S=i+C;var n=!0;if(i>0&&S>v.minTranslate()?(n=!1,v.params.resistance&&(S=v.minTranslate()-1+Math.pow(-v.minTranslate()+C+i,v.params.resistanceRatio))):0>i&&S<v.maxTranslate()&&(n=!1,v.params.resistance&&(S=v.maxTranslate()+1-Math.pow(v.maxTranslate()-C-i,v.params.resistanceRatio))),n&&(e.preventedByNestedSwiper=!0),!v.params.allowSwipeToNext&&"next"===v.swipeDirection&&C>S&&(S=C),!v.params.allowSwipeToPrev&&"prev"===v.swipeDirection&&S>C&&(S=C),v.params.followFinger){if(v.params.threshold>0){if(!(Math.abs(i)>v.params.threshold||M))return void(S=C);if(!M)return M=!0,v.touches.startX=v.touches.currentX,v.touches.startY=v.touches.currentY,S=C,void(v.touches.diff=r()?v.touches.currentX-v.touches.startX:v.touches.currentY-v.touches.startY)}(v.params.freeMode||v.params.watchSlidesProgress)&&v.updateActiveIndex(),v.params.freeMode&&(0===k.length&&k.push({position:v.touches[r()?"startX":"startY"],time:x}),k.push({position:v.touches[r()?"currentX":"currentY"],time:(new window.Date).getTime()})),v.updateProgress(S),v.setWrapperTranslate(S)}}}}}},v.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),v.emit("onTouchEnd",v,e),y){v.params.grabCursor&&b&&y&&(v.container[0].style.cursor="move",v.container[0].style.cursor="-webkit-grab",v.container[0].style.cursor="-moz-grab",v.container[0].style.cursor="grab");var t=Date.now(),s=t-x;if(v.allowClick&&(v.updateClickedSlide(e),v.emit("onTap",v,e),300>s&&t-E>300&&(P&&clearTimeout(P),P=setTimeout(function(){v&&(v.params.paginationHide&&v.paginationContainer.length>0&&!a(e.target).hasClass(v.params.bulletClass)&&v.paginationContainer.toggleClass(v.params.paginationHiddenClass),v.emit("onClick",v,e))},300)),300>s&&300>t-E&&(P&&clearTimeout(P),v.emit("onDoubleTap",v,e))),E=Date.now(),setTimeout(function(){v&&(v.allowClick=!0)},0),!y||!b||!v.swipeDirection||0===v.touches.diff||S===C)return void(y=b=!1);y=b=!1;var r;if(r=v.params.followFinger?v.rtl?v.translate:-v.translate:-S,v.params.freeMode){if(r<-v.minTranslate())return void v.slideTo(v.activeIndex);if(r>-v.maxTranslate())return void(v.slides.length<v.snapGrid.length?v.slideTo(v.snapGrid.length-1):v.slideTo(v.slides.length-1));if(v.params.freeModeMomentum){if(k.length>1){var i=k.pop(),n=k.pop(),o=i.position-n.position,l=i.time-n.time;v.velocity=o/l,v.velocity=v.velocity/2,Math.abs(v.velocity)<v.params.freeModeMinimumVelocity&&(v.velocity=0),(l>150||(new window.Date).getTime()-i.time>300)&&(v.velocity=0)}else v.velocity=0;k.length=0;var p=1e3*v.params.freeModeMomentumRatio,d=v.velocity*p,c=v.translate+d;v.rtl&&(c=-c);var u,m=!1,f=20*Math.abs(v.velocity)*v.params.freeModeMomentumBounceRatio;if(c<v.maxTranslate())v.params.freeModeMomentumBounce?(c+v.maxTranslate()<-f&&(c=v.maxTranslate()-f),u=v.maxTranslate(),m=!0,z=!0):c=v.maxTranslate();else if(c>v.minTranslate())v.params.freeModeMomentumBounce?(c-v.minTranslate()>f&&(c=v.minTranslate()+f),u=v.minTranslate(),m=!0,z=!0):c=v.minTranslate();else if(v.params.freeModeSticky){var h,g=0;for(g=0;g<v.snapGrid.length;g+=1)if(v.snapGrid[g]>-c){h=g;break}c=Math.abs(v.snapGrid[h]-c)<Math.abs(v.snapGrid[h-1]-c)||"next"===v.swipeDirection?v.snapGrid[h]:v.snapGrid[h-1],v.rtl||(c=-c)}if(0!==v.velocity)p=v.rtl?Math.abs((-c-v.translate)/v.velocity):Math.abs((c-v.translate)/v.velocity);else if(v.params.freeModeSticky)return void v.slideReset();v.params.freeModeMomentumBounce&&m?(v.updateProgress(u),v.setWrapperTransition(p),v.setWrapperTranslate(c),v.onTransitionStart(),v.animating=!0,v.wrapper.transitionEnd(function(){v&&z&&(v.emit("onMomentumBounce",v),v.setWrapperTransition(v.params.speed),v.setWrapperTranslate(u),v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd()}))})):v.velocity?(v.updateProgress(c),v.setWrapperTransition(p),v.setWrapperTranslate(c),v.onTransitionStart(),v.animating||(v.animating=!0,v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd()}))):v.updateProgress(c),v.updateActiveIndex()}return void((!v.params.freeModeMomentum||s>=v.params.longSwipesMs)&&(v.updateProgress(),v.updateActiveIndex()))}var w,T=0,M=v.slidesSizesGrid[0];for(w=0;w<v.slidesGrid.length;w+=v.params.slidesPerGroup)"undefined"!=typeof v.slidesGrid[w+v.params.slidesPerGroup]?r>=v.slidesGrid[w]&&r<v.slidesGrid[w+v.params.slidesPerGroup]&&(T=w,M=v.slidesGrid[w+v.params.slidesPerGroup]-v.slidesGrid[w]):r>=v.slidesGrid[w]&&(T=w,M=v.slidesGrid[v.slidesGrid.length-1]-v.slidesGrid[v.slidesGrid.length-2]);var I=(r-v.slidesGrid[T])/M;if(s>v.params.longSwipesMs){if(!v.params.longSwipes)return void v.slideTo(v.activeIndex);"next"===v.swipeDirection&&(I>=v.params.longSwipesRatio?v.slideTo(T+v.params.slidesPerGroup):v.slideTo(T)),"prev"===v.swipeDirection&&(I>1-v.params.longSwipesRatio?v.slideTo(T+v.params.slidesPerGroup):v.slideTo(T))}else{if(!v.params.shortSwipes)return void v.slideTo(v.activeIndex);"next"===v.swipeDirection&&v.slideTo(T+v.params.slidesPerGroup),"prev"===v.swipeDirection&&v.slideTo(T)}}},v._slideTo=function(e,a){return v.slideTo(e,a,!0,!0)},v.slideTo=function(e,a,t,s){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),0>e&&(e=0),v.snapIndex=Math.floor(e/v.params.slidesPerGroup),v.snapIndex>=v.snapGrid.length&&(v.snapIndex=v.snapGrid.length-1);var i=-v.snapGrid[v.snapIndex];v.params.autoplay&&v.autoplaying&&(s||!v.params.autoplayDisableOnInteraction?v.pauseAutoplay(a):v.stopAutoplay()),v.updateProgress(i);for(var n=0;n<v.slidesGrid.length;n++)-Math.floor(100*i)>=Math.floor(100*v.slidesGrid[n])&&(e=n);if(!v.params.allowSwipeToNext&&i<v.translate&&i<v.minTranslate())return!1;if(!v.params.allowSwipeToPrev&&i>v.translate&&i>v.maxTranslate()&&(v.activeIndex||0)!==e)return!1;if("undefined"==typeof a&&(a=v.params.speed),v.previousIndex=v.activeIndex||0,v.activeIndex=e,i===v.translate)return v.updateClasses(),!1;v.updateClasses(),v.onTransitionStart(t);r()?i:0,r()?0:i;return 0===a?(v.setWrapperTransition(0),v.setWrapperTranslate(i),v.onTransitionEnd(t)):(v.setWrapperTransition(a),v.setWrapperTranslate(i),v.animating||(v.animating=!0,v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd(t)}))),!0},v.onTransitionStart=function(e){"undefined"==typeof e&&(e=!0),v.lazy&&v.lazy.onTransitionStart(),e&&(v.emit("onTransitionStart",v),v.activeIndex!==v.previousIndex&&v.emit("onSlideChangeStart",v))},v.onTransitionEnd=function(e){v.animating=!1,v.setWrapperTransition(0),"undefined"==typeof e&&(e=!0),v.lazy&&v.lazy.onTransitionEnd(),e&&(v.emit("onTransitionEnd",v),v.activeIndex!==v.previousIndex&&v.emit("onSlideChangeEnd",v)),v.params.hashnav&&v.hashnav&&v.hashnav.setHash()},v.slideNext=function(e,a,t){if(v.params.loop){if(v.animating)return!1;v.fixLoop();v.container[0].clientLeft;return v.slideTo(v.activeIndex+v.params.slidesPerGroup,a,e,t)}return v.slideTo(v.activeIndex+v.params.slidesPerGroup,a,e,t)},v._slideNext=function(e){return v.slideNext(!0,e,!0)},v.slidePrev=function(e,a,t){if(v.params.loop){if(v.animating)return!1;v.fixLoop();v.container[0].clientLeft;return v.slideTo(v.activeIndex-1,a,e,t)}return v.slideTo(v.activeIndex-1,a,e,t)},v._slidePrev=function(e){return v.slidePrev(!0,e,!0)},v.slideReset=function(e,a,t){return v.slideTo(v.activeIndex,a,e)},v.setWrapperTransition=function(e,a){v.wrapper.transition(e),"slide"!==v.params.effect&&v.effects[v.params.effect]&&v.effects[v.params.effect].setTransition(e),v.params.parallax&&v.parallax&&v.parallax.setTransition(e),v.params.scrollbar&&v.scrollbar&&v.scrollbar.setTransition(e),v.params.control&&v.controller&&v.controller.setTransition(e,a),v.emit("onSetTransition",v,e)},v.setWrapperTranslate=function(e,a,t){var s=0,n=0,o=0;r()?s=v.rtl?-e:e:n=e,v.params.roundLengths&&(s=i(s),n=i(n)),v.params.virtualTranslate||(v.support.transforms3d?v.wrapper.transform("translate3d("+s+"px, "+n+"px, "+o+"px)"):v.wrapper.transform("translate("+s+"px, "+n+"px)")),v.translate=r()?s:n,a&&v.updateActiveIndex(),"slide"!==v.params.effect&&v.effects[v.params.effect]&&v.effects[v.params.effect].setTranslate(v.translate),v.params.parallax&&v.parallax&&v.parallax.setTranslate(v.translate),v.params.scrollbar&&v.scrollbar&&v.scrollbar.setTranslate(v.translate),v.params.control&&v.controller&&v.controller.setTranslate(v.translate,t),v.emit("onSetTranslate",v,v.translate)},v.getTranslate=function(e,a){var t,s,r,i;return"undefined"==typeof a&&(a="x"),v.params.virtualTranslate?v.rtl?-v.translate:v.translate:(r=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(s=r.transform||r.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),i=new window.WebKitCSSMatrix("none"===s?"":s)):(i=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=i.toString().split(",")),"x"===a&&(s=window.WebKitCSSMatrix?i.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===a&&(s=window.WebKitCSSMatrix?i.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),v.rtl&&s&&(s=-s),s||0)},v.getWrapperTranslate=function(e){return"undefined"==typeof e&&(e=r()?"x":"y"),v.getTranslate(v.wrapper[0],e)},v.observers=[],v.initObservers=function(){if(v.params.observeParents)for(var e=v.container.parents(),a=0;a<e.length;a++)l(e[a]);l(v.container[0],{childList:!1}),l(v.wrapper[0],{attributes:!1})},v.disconnectObservers=function(){for(var e=0;e<v.observers.length;e++)v.observers[e].disconnect();v.observers=[]},v.createLoop=function(){v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass).remove();var e=v.wrapper.children("."+v.params.slideClass);"auto"!==v.params.slidesPerView||v.params.loopedSlides||(v.params.loopedSlides=e.length),v.loopedSlides=parseInt(v.params.loopedSlides||v.params.slidesPerView,10),v.loopedSlides=v.loopedSlides+v.params.loopAdditionalSlides,v.loopedSlides>e.length&&(v.loopedSlides=e.length);var t,s=[],r=[];for(e.each(function(t,i){var n=a(this);t<v.loopedSlides&&r.push(i),t<e.length&&t>=e.length-v.loopedSlides&&s.push(i),n.attr("data-swiper-slide-index",t)}),t=0;t<r.length;t++)v.wrapper.append(a(r[t].cloneNode(!0)).addClass(v.params.slideDuplicateClass));for(t=s.length-1;t>=0;t--)v.wrapper.prepend(a(s[t].cloneNode(!0)).addClass(v.params.slideDuplicateClass))},v.destroyLoop=function(){v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass).remove(),v.slides.removeAttr("data-swiper-slide-index")},v.fixLoop=function(){var e;v.activeIndex<v.loopedSlides?(e=v.slides.length-3*v.loopedSlides+v.activeIndex,e+=v.loopedSlides,v.slideTo(e,0,!1,!0)):("auto"===v.params.slidesPerView&&v.activeIndex>=2*v.loopedSlides||v.activeIndex>v.slides.length-2*v.params.slidesPerView)&&(e=-v.slides.length+v.activeIndex+v.loopedSlides,e+=v.loopedSlides,v.slideTo(e,0,!1,!0))},v.appendSlide=function(e){if(v.params.loop&&v.destroyLoop(),"object"==typeof e&&e.length)for(var a=0;a<e.length;a++)e[a]&&v.wrapper.append(e[a]);else v.wrapper.append(e);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0)},v.prependSlide=function(e){v.params.loop&&v.destroyLoop();var a=v.activeIndex+1;if("object"==typeof e&&e.length){for(var t=0;t<e.length;t++)e[t]&&v.wrapper.prepend(e[t]);a=v.activeIndex+e.length}else v.wrapper.prepend(e);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0),v.slideTo(a,0,!1)},v.removeSlide=function(e){v.params.loop&&(v.destroyLoop(),v.slides=v.wrapper.children("."+v.params.slideClass));var a,t=v.activeIndex;if("object"==typeof e&&e.length){for(var s=0;s<e.length;s++)a=e[s],v.slides[a]&&v.slides.eq(a).remove(),t>a&&t--;t=Math.max(t,0)}else a=e,v.slides[a]&&v.slides.eq(a).remove(),t>a&&t--,t=Math.max(t,0);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0),v.params.loop?v.slideTo(t+v.loopedSlides,0,!1):v.slideTo(t,0,!1)},v.removeAllSlides=function(){for(var e=[],a=0;a<v.slides.length;a++)e.push(a);v.removeSlide(e)},v.effects={fade:{setTranslate:function(){for(var e=0;e<v.slides.length;e++){var a=v.slides.eq(e),t=a[0].swiperSlideOffset,s=-t;v.params.virtualTranslate||(s-=v.translate);var i=0;r()||(i=s,s=0);var n=v.params.fade.crossFade?Math.max(1-Math.abs(a[0].progress),0):1+Math.min(Math.max(a[0].progress,-1),0);a.css({opacity:n}).transform("translate3d("+s+"px, "+i+"px, 0px)")}},setTransition:function(e){if(v.slides.transition(e),v.params.virtualTranslate&&0!==e){var a=!1;v.slides.transitionEnd(function(){if(!a&&v){a=!0,v.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],t=0;t<e.length;t++)v.wrapper.trigger(e[t])}})}}},cube:{setTranslate:function(){var e,t=0;v.params.cube.shadow&&(r()?(e=v.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=a('<div class="swiper-cube-shadow"></div>'),v.wrapper.append(e)),e.css({height:v.width+"px"})):(e=v.container.find(".swiper-cube-shadow"),0===e.length&&(e=a('<div class="swiper-cube-shadow"></div>'),v.container.append(e))));for(var s=0;s<v.slides.length;s++){var i=v.slides.eq(s),n=90*s,o=Math.floor(n/360);v.rtl&&(n=-n,o=Math.floor(-n/360));var l=Math.max(Math.min(i[0].progress,1),-1),p=0,d=0,c=0;s%4===0?(p=4*-o*v.size,c=0):(s-1)%4===0?(p=0,c=4*-o*v.size):(s-2)%4===0?(p=v.size+4*o*v.size,c=v.size):(s-3)%4===0&&(p=-v.size,c=3*v.size+4*v.size*o),v.rtl&&(p=-p),r()||(d=p,p=0);var u="rotateX("+(r()?0:-n)+"deg) rotateY("+(r()?n:0)+"deg) translate3d("+p+"px, "+d+"px, "+c+"px)";if(1>=l&&l>-1&&(t=90*s+90*l,v.rtl&&(t=90*-s-90*l)),i.transform(u),v.params.cube.slideShadows){var m=r()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),f=r()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===m.length&&(m=a('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),i.append(m)),0===f.length&&(f=a('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),i.append(f));i[0].progress;m.length&&(m[0].style.opacity=-i[0].progress),f.length&&(f[0].style.opacity=i[0].progress)}}if(v.wrapper.css({"-webkit-transform-origin":"50% 50% -"+v.size/2+"px","-moz-transform-origin":"50% 50% -"+v.size/2+"px","-ms-transform-origin":"50% 50% -"+v.size/2+"px","transform-origin":"50% 50% -"+v.size/2+"px"}),v.params.cube.shadow)if(r())e.transform("translate3d(0px, "+(v.width/2+v.params.cube.shadowOffset)+"px, "+-v.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+v.params.cube.shadowScale+")");else{var h=Math.abs(t)-90*Math.floor(Math.abs(t)/90),g=1.5-(Math.sin(2*h*Math.PI/360)/2+Math.cos(2*h*Math.PI/360)/2),w=v.params.cube.shadowScale,y=v.params.cube.shadowScale/g,b=v.params.cube.shadowOffset;e.transform("scale3d("+w+", 1, "+y+") translate3d(0px, "+(v.height/2+b)+"px, "+-v.height/2/y+"px) rotateX(-90deg)")}var x=v.isSafari||v.isUiWebView?-v.size/2:0;v.wrapper.transform("translate3d(0px,0,"+x+"px) rotateX("+(r()?0:t)+"deg) rotateY("+(r()?-t:0)+"deg)")},setTransition:function(e){v.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),v.params.cube.shadow&&!r()&&v.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=v.translate,t=r()?-e+v.width/2:-e+v.height/2,s=r()?v.params.coverflow.rotate:-v.params.coverflow.rotate,i=v.params.coverflow.depth,n=0,o=v.slides.length;o>n;n++){var l=v.slides.eq(n),p=v.slidesSizesGrid[n],d=l[0].swiperSlideOffset,c=(t-d-p/2)/p*v.params.coverflow.modifier,u=r()?s*c:0,m=r()?0:s*c,f=-i*Math.abs(c),h=r()?0:v.params.coverflow.stretch*c,g=r()?v.params.coverflow.stretch*c:0;Math.abs(g)<.001&&(g=0),Math.abs(h)<.001&&(h=0),Math.abs(f)<.001&&(f=0),Math.abs(u)<.001&&(u=0),Math.abs(m)<.001&&(m=0);var w="translate3d("+g+"px,"+h+"px,"+f+"px)  rotateX("+m+"deg) rotateY("+u+"deg)";if(l.transform(w),l[0].style.zIndex=-Math.abs(Math.round(c))+1,v.params.coverflow.slideShadows){var y=r()?l.find(".swiper-slide-shadow-left"):l.find(".swiper-slide-shadow-top"),b=r()?l.find(".swiper-slide-shadow-right"):l.find(".swiper-slide-shadow-bottom");0===y.length&&(y=a('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),l.append(y)),0===b.length&&(b=a('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),l.append(b)),y.length&&(y[0].style.opacity=c>0?c:0),b.length&&(b[0].style.opacity=-c>0?-c:0)}}if(v.browser.ie){var x=v.wrapper[0].style;x.perspectiveOrigin=t+"px 50%"}},setTransition:function(e){v.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},v.lazy={initialImageLoaded:!1,loadImageInSlide:function(e,t){if("undefined"!=typeof e&&("undefined"==typeof t&&(t=!0),0!==v.slides.length)){var s=v.slides.eq(e),r=s.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");!s.hasClass("swiper-lazy")||s.hasClass("swiper-lazy-loaded")||s.hasClass("swiper-lazy-loading")||r.add(s[0]),0!==r.length&&r.each(function(){var e=a(this);e.addClass("swiper-lazy-loading");var r=e.attr("data-background"),i=e.attr("data-src"),n=e.attr("data-srcset");v.loadImage(e[0],i||r,n,!1,function(){if(r?(e.css("background-image","url("+r+")"),e.removeAttr("data-background")):(n&&(e.attr("srcset",n),e.removeAttr("data-srcset")),e.attr("src",i),e.removeAttr("data-src")),e.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),s.find(".swiper-lazy-preloader, .preloader").remove(),v.params.loop&&t){var a=s.attr("data-swiper-slide-index");if(s.hasClass(v.params.slideDuplicateClass)){var o=v.wrapper.children('[data-swiper-slide-index="'+a+'"]:not(.'+v.params.slideDuplicateClass+")");v.lazy.loadImageInSlide(o.index(),!1)}else{var l=v.wrapper.children("."+v.params.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]');v.lazy.loadImageInSlide(l.index(),!1)}}v.emit("onLazyImageReady",v,s[0],e[0])}),v.emit("onLazyImageLoad",v,s[0],e[0])})}},load:function(){var e;if(v.params.watchSlidesVisibility)v.wrapper.children("."+v.params.slideVisibleClass).each(function(){v.lazy.loadImageInSlide(a(this).index())});else if(v.params.slidesPerView>1)for(e=v.activeIndex;e<v.activeIndex+v.params.slidesPerView;e++)v.slides[e]&&v.lazy.loadImageInSlide(e);else v.lazy.loadImageInSlide(v.activeIndex);if(v.params.lazyLoadingInPrevNext)if(v.params.slidesPerView>1){for(e=v.activeIndex+v.params.slidesPerView;e<v.activeIndex+v.params.slidesPerView+v.params.slidesPerView;e++)v.slides[e]&&v.lazy.loadImageInSlide(e);for(e=v.activeIndex-v.params.slidesPerView;e<v.activeIndex;e++)v.slides[e]&&v.lazy.loadImageInSlide(e)}else{var t=v.wrapper.children("."+v.params.slideNextClass);t.length>0&&v.lazy.loadImageInSlide(t.index());var s=v.wrapper.children("."+v.params.slidePrevClass);s.length>0&&v.lazy.loadImageInSlide(s.index())}},onTransitionStart:function(){v.params.lazyLoading&&(v.params.lazyLoadingOnTransitionStart||!v.params.lazyLoadingOnTransitionStart&&!v.lazy.initialImageLoaded)&&v.lazy.load()},onTransitionEnd:function(){v.params.lazyLoading&&!v.params.lazyLoadingOnTransitionStart&&v.lazy.load()}},v.scrollbar={isTouched:!1,setDragPosition:function(e){var a=v.scrollbar,t=r()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY,s=t-a.track.offset()[r()?"left":"top"]-a.dragSize/2,i=-v.minTranslate()*a.moveDivider,n=-v.maxTranslate()*a.moveDivider;i>s?s=i:s>n&&(s=n),s=-s/a.moveDivider,v.updateProgress(s),v.setWrapperTranslate(s,!0)},dragStart:function(e){var a=v.scrollbar;a.isTouched=!0,e.preventDefault(),e.stopPropagation(),a.setDragPosition(e),clearTimeout(a.dragTimeout),a.track.transition(0),v.params.scrollbarHide&&a.track.css("opacity",1),v.wrapper.transition(100),a.drag.transition(100),v.emit("onScrollbarDragStart",v)},dragMove:function(e){var a=v.scrollbar;a.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,a.setDragPosition(e),v.wrapper.transition(0),a.track.transition(0),a.drag.transition(0),v.emit("onScrollbarDragMove",v))},dragEnd:function(e){var a=v.scrollbar;a.isTouched&&(a.isTouched=!1,v.params.scrollbarHide&&(clearTimeout(a.dragTimeout),a.dragTimeout=setTimeout(function(){a.track.css("opacity",0),a.track.transition(400)},1e3)),v.emit("onScrollbarDragEnd",v),v.params.scrollbarSnapOnRelease&&v.slideReset())},enableDraggable:function(){var e=v.scrollbar,t=v.support.touch?e.track:document;a(e.track).on(v.touchEvents.start,e.dragStart),a(t).on(v.touchEvents.move,e.dragMove),a(t).on(v.touchEvents.end,e.dragEnd)},disableDraggable:function(){var e=v.scrollbar,t=v.support.touch?e.track:document;a(e.track).off(v.touchEvents.start,e.dragStart),a(t).off(v.touchEvents.move,e.dragMove),a(t).off(v.touchEvents.end,e.dragEnd)},set:function(){if(v.params.scrollbar){var e=v.scrollbar;e.track=a(v.params.scrollbar),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=a('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=r()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=v.size/v.virtualSize,e.moveDivider=e.divider*(e.trackSize/v.size),e.dragSize=e.trackSize*e.divider,r()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.divider>=1?e.track[0].style.display="none":e.track[0].style.display="",v.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(v.params.scrollbar){var e,a=v.scrollbar,t=(v.translate||0,a.dragSize);e=(a.trackSize-a.dragSize)*v.progress,v.rtl&&r()?(e=-e,e>0?(t=a.dragSize-e,e=0):-e+a.dragSize>a.trackSize&&(t=a.trackSize+e)):0>e?(t=a.dragSize+e,e=0):e+a.dragSize>a.trackSize&&(t=a.trackSize-e),r()?(v.support.transforms3d?a.drag.transform("translate3d("+e+"px, 0, 0)"):a.drag.transform("translateX("+e+"px)"),a.drag[0].style.width=t+"px"):(v.support.transforms3d?a.drag.transform("translate3d(0px, "+e+"px, 0)"):a.drag.transform("translateY("+e+"px)"),a.drag[0].style.height=t+"px"),v.params.scrollbarHide&&(clearTimeout(a.timeout),a.track[0].style.opacity=1,a.timeout=setTimeout(function(){a.track[0].style.opacity=0,a.track.transition(400)},1e3))}},setTransition:function(e){v.params.scrollbar&&v.scrollbar.drag.transition(e)}},v.controller={LinearSpline:function(e,a){this.x=e,this.y=a,this.lastIndex=e.length-1;var t,s;this.x.length;this.interpolate=function(e){return e?(s=r(this.x,e),t=s-1,(e-this.x[t])*(this.y[s]-this.y[t])/(this.x[s]-this.x[t])+this.y[t]):0};var r=function(){var e,a,t;return function(s,r){for(a=-1,e=s.length;e-a>1;)s[t=e+a>>1]<=r?a=t:e=t;return e}}()},getInterpolateFunction:function(e){v.controller.spline||(v.controller.spline=v.params.loop?new v.controller.LinearSpline(v.slidesGrid,e.slidesGrid):new v.controller.LinearSpline(v.snapGrid,e.snapGrid))},setTranslate:function(e,a){function s(a){e=a.rtl&&"horizontal"===a.params.direction?-v.translate:v.translate,"slide"===v.params.controlBy&&(v.controller.getInterpolateFunction(a),i=-v.controller.spline.interpolate(-e)),i&&"container"!==v.params.controlBy||(r=(a.maxTranslate()-a.minTranslate())/(v.maxTranslate()-v.minTranslate()),i=(e-v.minTranslate())*r+a.minTranslate()),v.params.controlInverse&&(i=a.maxTranslate()-i),a.updateProgress(i),a.setWrapperTranslate(i,!1,v),a.updateActiveIndex()}var r,i,n=v.params.control;if(v.isArray(n))for(var o=0;o<n.length;o++)n[o]!==a&&n[o]instanceof t&&s(n[o]);else n instanceof t&&a!==n&&s(n)},setTransition:function(e,a){function s(a){a.setWrapperTransition(e,v),0!==e&&(a.onTransitionStart(),a.wrapper.transitionEnd(function(){i&&(a.params.loop&&"slide"===v.params.controlBy&&a.fixLoop(),a.onTransitionEnd())}))}var r,i=v.params.control;if(v.isArray(i))for(r=0;r<i.length;r++)i[r]!==a&&i[r]instanceof t&&s(i[r]);else i instanceof t&&a!==i&&s(i)}},v.hashnav={init:function(){if(v.params.hashnav){v.hashnav.initialized=!0;var e=document.location.hash.replace("#","");if(e)for(var a=0,t=0,s=v.slides.length;s>t;t++){var r=v.slides.eq(t),i=r.attr("data-hash");if(i===e&&!r.hasClass(v.params.slideDuplicateClass)){var n=r.index();v.slideTo(n,a,v.params.runCallbacksOnInit,!0)}}}},setHash:function(){v.hashnav.initialized&&v.params.hashnav&&(document.location.hash=v.slides.eq(v.activeIndex).attr("data-hash")||"")}},v.disableKeyboardControl=function(){a(document).off("keydown",p)},v.enableKeyboardControl=function(){a(document).on("keydown",p)},v.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},v.params.mousewheelControl){try{new window.WheelEvent("wheel"),v.mousewheel.event="wheel"}catch(G){}v.mousewheel.event||void 0===document.onmousewheel||(v.mousewheel.event="mousewheel"),v.mousewheel.event||(v.mousewheel.event="DOMMouseScroll")}v.disableMousewheelControl=function(){return v.mousewheel.event?(v.container.off(v.mousewheel.event,d),!0):!1},v.enableMousewheelControl=function(){return v.mousewheel.event?(v.container.on(v.mousewheel.event,d),!0):!1},v.parallax={setTranslate:function(){v.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){c(this,v.progress)}),v.slides.each(function(){var e=a(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var a=Math.min(Math.max(e[0].progress,-1),1);c(this,a)})})},setTransition:function(e){"undefined"==typeof e&&(e=v.params.speed),v.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=a(this),s=parseInt(t.attr("data-swiper-parallax-duration"),10)||e;0===e&&(s=0),t.transition(s)})}},v._plugins=[];for(var B in v.plugins){var O=v.plugins[B](v,v.params[B]);O&&v._plugins.push(O)}return v.callPlugins=function(e){for(var a=0;a<v._plugins.length;a++)e in v._plugins[a]&&v._plugins[a][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},v.emitterEventListeners={},v.emit=function(e){v.params[e]&&v.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var a;if(v.emitterEventListeners[e])for(a=0;a<v.emitterEventListeners[e].length;a++)v.emitterEventListeners[e][a](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);v.callPlugins&&v.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},v.on=function(e,a){return e=u(e),v.emitterEventListeners[e]||(v.emitterEventListeners[e]=[]),v.emitterEventListeners[e].push(a),v},v.off=function(e,a){var t;if(e=u(e),"undefined"==typeof a)return v.emitterEventListeners[e]=[],v;if(v.emitterEventListeners[e]&&0!==v.emitterEventListeners[e].length){for(t=0;t<v.emitterEventListeners[e].length;t++)v.emitterEventListeners[e][t]===a&&v.emitterEventListeners[e].splice(t,1);return v}},v.once=function(e,a){e=u(e);var t=function(){a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),v.off(e,t)};return v.on(e,t),v},v.a11y={makeFocusable:function(e){return e.attr("tabIndex","0"),e},addRole:function(e,a){return e.attr("role",a),e},addLabel:function(e,a){return e.attr("aria-label",a),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){13===e.keyCode&&(a(e.target).is(v.params.nextButton)?(v.onClickNext(e),v.isEnd?v.a11y.notify(v.params.lastSlideMessage):v.a11y.notify(v.params.nextSlideMessage)):a(e.target).is(v.params.prevButton)&&(v.onClickPrev(e),v.isBeginning?v.a11y.notify(v.params.firstSlideMessage):v.a11y.notify(v.params.prevSlideMessage)),a(e.target).is("."+v.params.bulletClass)&&a(e.target)[0].click())},liveRegion:a('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var a=v.a11y.liveRegion;0!==a.length&&(a.html(""),a.html(e))},init:function(){if(v.params.nextButton){var e=a(v.params.nextButton);v.a11y.makeFocusable(e),v.a11y.addRole(e,"button"),v.a11y.addLabel(e,v.params.nextSlideMessage)}if(v.params.prevButton){var t=a(v.params.prevButton);v.a11y.makeFocusable(t),v.a11y.addRole(t,"button"),v.a11y.addLabel(t,v.params.prevSlideMessage)}a(v.container).append(v.a11y.liveRegion)},initPagination:function(){v.params.pagination&&v.params.paginationClickable&&v.bullets&&v.bullets.length&&v.bullets.each(function(){var e=a(this);v.a11y.makeFocusable(e),v.a11y.addRole(e,"button"),v.a11y.addLabel(e,v.params.paginationBulletMessage.replace(/{{index}}/,e.index()+1))})},destroy:function(){v.a11y.liveRegion&&v.a11y.liveRegion.length>0&&v.a11y.liveRegion.remove()}},v.init=function(){v.params.loop&&v.createLoop(),v.updateContainerSize(),v.updateSlidesSize(),v.updatePagination(),v.params.scrollbar&&v.scrollbar&&(v.scrollbar.set(),v.params.scrollbarDraggable&&v.scrollbar.enableDraggable()),"slide"!==v.params.effect&&v.effects[v.params.effect]&&(v.params.loop||v.updateProgress(),v.effects[v.params.effect].setTranslate()),v.params.loop?v.slideTo(v.params.initialSlide+v.loopedSlides,0,v.params.runCallbacksOnInit):(v.slideTo(v.params.initialSlide,0,v.params.runCallbacksOnInit),0===v.params.initialSlide&&(v.parallax&&v.params.parallax&&v.parallax.setTranslate(),v.lazy&&v.params.lazyLoading&&(v.lazy.load(),v.lazy.initialImageLoaded=!0))),v.attachEvents(),v.params.observer&&v.support.observer&&v.initObservers(),v.params.preloadImages&&!v.params.lazyLoading&&v.preloadImages(),v.params.autoplay&&v.startAutoplay(),v.params.keyboardControl&&v.enableKeyboardControl&&v.enableKeyboardControl(),v.params.mousewheelControl&&v.enableMousewheelControl&&v.enableMousewheelControl(),v.params.hashnav&&v.hashnav&&v.hashnav.init(),v.params.a11y&&v.a11y&&v.a11y.init(),v.emit("onInit",v)},v.cleanupStyles=function(){v.container.removeClass(v.classNames.join(" ")).removeAttr("style"),v.wrapper.removeAttr("style"),v.slides&&v.slides.length&&v.slides.removeClass([v.params.slideVisibleClass,v.params.slideActiveClass,v.params.slideNextClass,v.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),v.paginationContainer&&v.paginationContainer.length&&v.paginationContainer.removeClass(v.params.paginationHiddenClass),v.bullets&&v.bullets.length&&v.bullets.removeClass(v.params.bulletActiveClass),v.params.prevButton&&a(v.params.prevButton).removeClass(v.params.buttonDisabledClass),v.params.nextButton&&a(v.params.nextButton).removeClass(v.params.buttonDisabledClass),v.params.scrollbar&&v.scrollbar&&(v.scrollbar.track&&v.scrollbar.track.length&&v.scrollbar.track.removeAttr("style"),v.scrollbar.drag&&v.scrollbar.drag.length&&v.scrollbar.drag.removeAttr("style"))},v.destroy=function(e,a){v.detachEvents(),v.stopAutoplay(),v.params.scrollbar&&v.scrollbar&&v.params.scrollbarDraggable&&v.scrollbar.disableDraggable(),v.params.loop&&v.destroyLoop(),a&&v.cleanupStyles(),v.disconnectObservers(),v.params.keyboardControl&&v.disableKeyboardControl&&v.disableKeyboardControl(),v.params.mousewheelControl&&v.disableMousewheelControl&&v.disableMousewheelControl(),v.params.a11y&&v.a11y&&v.a11y.destroy(),v.emit("onDestroy"),e!==!1&&(v=null)},v.init(),v}};t.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var e=navigator.userAgent,a=e.match(/(Android);?[\s\/]+([\d.]+)?/),t=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),r=!t&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:t||r||s,android:a}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,a="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),t=0;t<a.length;t++)if(a[t]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()},plugins:{}};for(var s=["jQuery","Zepto","Dom7"],r=0;r<s.length;r++)window[s[r]]&&e(window[s[r]]);var i;i="undefined"==typeof Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7,i&&("transitionEnd"in i.fn||(i.fn.transitionEnd=function(e){function a(i){if(i.target===this)for(e.call(this,i),t=0;t<s.length;t++)r.off(s[t],a)}var t,s=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],r=this;if(e)for(t=0;t<s.length;t++)r.on(s[t],a);return this}),"transform"in i.fn||(i.fn.transform=function(e){for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=e}return this}),"transition"in i.fn||(i.fn.transition=function(e){"string"!=typeof e&&(e+="ms");for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e}return this})),window.Swiper=t}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define([],function(){"use strict";return window.Swiper});;;(function($,window,document,undefined){'use strict';var PLUGIN_NAME='countdown',defaults={from:180,to:0,movingUnit:1000,timerEnd:undefined,outputPattern:'$day Day $hour : $minute : $second',autostart:true},outputReplacement=new RegExp('\\$day|\\$hour|\\$minute|\\$second','g');function Plugin(element,options){this.element=element;this.$element=$(element);this.settings=$.extend({},defaults,options);this._defaults=defaults;this._name=PLUGIN_NAME;this._displacement=-1*(this.settings.from-this.settings.to)/Math.abs(this.settings.from-this.settings.to);this._timerAt=this.settings.from;this._intervalId=undefined;this._isCounting=false;this.init();}
Plugin.prototype={init:function(){this._updateTimerText();if(this.settings.autostart)
this._start();},destroy:function(){window.clearInterval(this._intervalID);$.data(this.element,'plugin_'+PLUGIN_NAME,null);},resume:function(){if(this._isCounting)
return;this._start();},pause:function(){if(!this._isCounting)
return;this._isCounting=false;if(undefined!==this._intervalID)
window.clearInterval(this._intervalID);},_start:function(){var that=this;if(undefined!==this._intervalID)
window.clearInterval(this._intervalID);this._isCounting=true;this._intervalID=window.setInterval(function(){that._timerAt+=that._displacement;that._update();},that.settings.movingUnit);},_stop:function(){this.destroy();if(this.settings.timerEnd&&'function'===typeof this.settings.timerEnd){this.settings.timerEnd.call(this.$element);}},_update:function(){var that=this;this._updateTimerText();if(this._timerAt===this.settings.to||isNaN(this._timerAt)){this._stop();}},_updateTimerText:function(){var that=this;this.$element.text(function(index,text){var _parsedStuff=that._parseSeconds(that._timerAt);var _daysParsed=_parsedStuff.days.toString(),_hoursParsed=_parsedStuff.hours.toString(),_minutesParsed=_parsedStuff.minutes.toString(),_secondsParsed=_parsedStuff.seconds.toString();if(_parsedStuff.days<10)
_daysParsed='0'+_daysParsed;if(_parsedStuff.hours<10)
_hoursParsed='0'+_hoursParsed;if(_parsedStuff.minutes<10)
_minutesParsed='0'+_minutesParsed;if(_parsedStuff.seconds<10)
_secondsParsed='0'+_secondsParsed;return that.settings.outputPattern.replace(outputReplacement,function(match,offset,string){switch(match){case'$day':return _daysParsed;case'$hour':return _hoursParsed;case'$minute':return _minutesParsed;case'$second':return _secondsParsed;default:return'';}});});},_parseSeconds:function(seconds){seconds=Math.abs(seconds);var _parsedTime={days:0,hours:0,minutes:Math.floor(seconds/60),seconds:0};if(seconds>=86400){_parsedTime.days=Math.floor(seconds/86400);_parsedTime.hours=Math.floor(seconds%86400/3600);}
else if(seconds>=3600)
_parsedTime.hours=Math.floor(seconds/3600);if(seconds>=3600)
_parsedTime.minutes=Math.floor(seconds%3600/60);_parsedTime.seconds=seconds%60;return _parsedTime;}};$.fn[PLUGIN_NAME]=function(options){if(undefined===options||'object'===typeof options){return this.each(function(){if(!$.data(this,'plugin_'+PLUGIN_NAME))
$.data(this,'plugin_'+PLUGIN_NAME,new Plugin(this,options));});}
else if('string'===typeof options&&options[0]!=='_'&&options!=='init'){return this.each(function(){var instance=$.data(this,'plugin_'+PLUGIN_NAME);if(instance instanceof Plugin&&'function'===typeof instance[options]){instance[options].call(instance);}});}};})(jQuery,window,document);;
function ajaxPost(functionUrl,data,option)
{var defaults={'beforeSend':function(){},'success':function(){},'error':function(){},'type':'POST','dataType':'json','async':true};options=$.extend(defaults,option);$.ajax({url:functionUrl,type:options['type'],dataType:options['dataType'],data:data,async:options['async'],success:options['success'],error:options['error']})}
function ajaxGet(functionUrl,data,option)
{var defaults={'beforeSend':function(){},'success':function(){},'error':function(){},'type':'GET','dataType':'json','async':true};options=$.extend(defaults,option);$.ajax({url:functionUrl,type:options['type'],dataType:options['dataType'],data:data,async:options['async'],success:options['success'],error:options['error']})}
function number_format(number,decimals,dec_point,thousands_sep){number=(number+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+(Math.round(n*k)/k).toFixed(prec);};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec);}
function http_build_query(formdata,numeric_prefix,arg_separator){var value,key,tmp=[],that=this;var _http_build_query_helper=function(key,val,arg_separator){var k,tmp=[];if(val===true){val='1';}else if(val===false){val='0';}
if(val!=null){if(typeof val==='object'){for(k in val){if(val[k]!=null){tmp.push(_http_build_query_helper(key+'['+k+']',val[k],arg_separator));}}
return tmp.join(arg_separator);}else if(typeof val!=='function'){return that.urlencode(key)+'='+that.urlencode(val);}else{throw new Error('There was an error processing for http_build_query().');}}else{return'';}};if(!arg_separator){arg_separator='&';}
for(key in formdata){value=formdata[key];if(numeric_prefix&&!isNaN(key)){key=String(numeric_prefix)+key;}
var query=_http_build_query_helper(key,value,arg_separator);if(query!==''){tmp.push(query);}}
return tmp.join(arg_separator);}
function redirect(url){window.location=url;}
function parse_url(str,component){var query,key=['source','scheme','authority','userInfo','user','pass','host','port','relative','path','directory','file','query','fragment'],ini=(this.php_js&&this.php_js.ini)||{},mode=(ini['phpjs.parse_url.mode']&&ini['phpjs.parse_url.mode'].local_value)||'php',parser={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};var m=parser[mode].exec(str),uri={},i=14;while(i--){if(m[i]){uri[key[i]]=m[i];}}
if(component){return uri[component.replace('PHP_URL_','').toLowerCase()];}
if(mode!=='php'){var name=(ini['phpjs.parse_url.queryKey']&&ini['phpjs.parse_url.queryKey'].local_value)||'queryKey';parser=/(?:^|&)([^&=]*)=?([^&]*)/g;uri[name]={};query=uri[key[12]]||'';query.replace(parser,function($0,$1,$2){if($1){uri[name][$1]=$2;}});}
delete uri.source;return uri;}
function parseURL(url){var a=document.createElement('a');a.href=url;return{source:url,protocol:a.protocol.replace(':',''),host:a.hostname,port:a.port,query:a.search,params:(function(){var ret={},seg=a.search.replace(/^\?/,'').split('&'),len=seg.length,i=0,s;for(;i<len;i++){if(!seg[i]){continue;}
s=seg[i].split('=');ret[s[0]]=s[1];}
return ret;})(),file:(a.pathname.match(/\/([^\/?#]+)$/i)||[,''])[1],hash:a.hash.replace('#',''),path:a.pathname.replace(/^([^\/])/,'/$1'),relative:(a.href.match(/tps?:\/\/[^\/]+(.+)/)||[,''])[1],segments:a.pathname.replace(/^\//,'').split('/')};}
function urldecode(str){return decodeURIComponent((str+'').replace(/%(?![\da-f]{2})/gi,function(){return'%25';}).replace(/\+/g,'%20'));}
function urlencode(str){str=(str+'').toString();return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+');}
$.modalTemplate='<div class="modal fade compact">'+'<div class="modal-dialog modal-sm">'+'<div class="modal-content"><div class="modal-body clearfix"><button type="button" class="close" data-dismiss="modal">&times;</button></div></div>'+'</div>'+'</div>';$.confirmModalTemplate='<div class="modal fade" role="dialog">'+'    <div class="modal-dialog modal-sm">'+'        <div class="modal-content">'+'            <div class="modal-body text-center"></div>'+'            <div class="modal-footer">'+'                <div class="text-center">'+'                    <button type="button" class="btn btn-success btn-yes">Đồng ý</button>'+'                    <button type="button" data-dismiss="modal" class="btn btn-default btn-no">Hủy</button>'+'                </div>'+'            </div>'+'        </div>'+'    </div>'+'</div>';function showAlert(title,message,cls,params){var jalert=$($.modalTemplate);jalert.find('.modal-body').append('<div class="alert alert-'+cls+'"><strong>'+title+'</strong><br />'+message+'</div>');jalert.on('hidden.bs.modal',function(){jalert.remove();});jalert.modal('show');}
function showConfirm(params){params=$.extend({},{text:'Bạn có chắc chắn muốn thực hiện?',btnYes:true,btnYesText:'Đồng Ý',btnNo:true,btnNoText:'Hủy',callback:function(jelm,confirm){},callbackYes:function(jelm){},callbackNo:function(jelm){}},params);var jconfirm=$($.confirmModalTemplate);jconfirm.on('click','.btn-yes',function(e){if(typeof(params.callback)==='function'){ret=params.callback(jconfirm,true);}
if(typeof(params.callbackYes)==='function'){params.callbackYes(jconfirm);}
if(typeof(ret)=='undefined'||ret===true){jconfirm.modal('hide');}}).on('click','.btn-no',function(e){if(typeof(params.callback)==='function'){params.callback(jconfirm,false);}
if(typeof(params.callbackYes)==='function'){params.callbackNo(jconfirm);}}).on('hidden.bs.modal',function(){jconfirm.remove();});jconfirm.find('.modal-body').append(params.text);jconfirm.find('.btn-yes').text(params.btnYesText);jconfirm.find('.btn-no').text(params.btnNoText);if(!params.btnYes){jconfirm.find('.btn-yes').hide();}
if(!params.btnNo){jconfirm.find('.btn-no').hide();}
jconfirm.modal('show');};
(function(c){var b={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:3000,text:"",sticky:false,type:"notice",position:"top-right",closeText:"",close:null};var a={init:function(d){if(d){c.extend(b,d)}},showToast:function(f){var g={};c.extend(g,b,f);var j,e,d,i,h;j=(!c(".toast-container").length)?c("<div></div>").addClass("toast-container").addClass("toast-position-"+g.position).appendTo("body"):c(".toast-container");e=c("<div></div>").addClass("toast-item-wrapper");d=c("<div></div>").hide().addClass("toast-item toast-type-"+g.type).appendTo(j).html(c("<p>").append(g.text)).animate(g.inEffect,g.inEffectDuration).wrap(e);i=c("<div></div>").addClass("toast-item-close").prependTo(d).html(g.closeText).click(function(){c().toastmessage("removeToast",d,g)});h=c("<div></div>").addClass("toast-item-image").addClass("toast-item-image-"+g.type).prependTo(d);if(navigator.userAgent.match(/MSIE 6/i)){j.css({top:document.documentElement.scrollTop})}if(!g.sticky){setTimeout(function(){c().toastmessage("removeToast",d,g)},g.stayTime)}return d},showNoticeToast:function(e){var d={text:e,type:"notice"};return c().toastmessage("showToast",d)},showSuccessToast:function(e){var d={text:e,type:"success"};return c().toastmessage("showToast",d)},showErrorToast:function(e){var d={text:e,type:"error"};return c().toastmessage("showToast",d)},showWarningToast:function(e){var d={text:e,type:"warning"};return c().toastmessage("showToast",d)},removeToast:function(e,d){e.animate({opacity:"0"},600,function(){e.parent().animate({height:"0px"},300,function(){e.parent().remove()})});if(d&&d.close!==null){d.close()}}};c.fn.toastmessage=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on jQuery.toastmessage")}}}})(jQuery);;;(function($){$.fn.rating=function(callback){callback=callback||function(){};this.each(function(i,v){$(v).data('rating',{callback:callback}).bind('init.rating',$.fn.rating.init).bind('set.rating',$.fn.rating.set).bind('hover.rating',$.fn.rating.hover).trigger('init.rating');});};$.extend($.fn.rating,{init:function(e){var el=$(this),list='',isChecked=null,childs=el.children('input'),i=0,l=childs.length;for(;i<l;i++){list=list+'<a class="star" title="'+$(childs[i]).val()+'" />';if($(childs[i]).is(':checked')){isChecked=$(childs[i]).val();};};childs.hide();el.append('<div class="stars">'+list+'</div>').trigger('set.rating',isChecked);$('a',el).bind('click',$.fn.rating.click);el.trigger('hover.rating');},set:function(e,val){var el=$(this),item=$('a',el),input=undefined;if(val){item.removeClass('fullStar');input=item.filter(function(i){if($(this).attr('title')==val)
return $(this);else
return false;});input.addClass('fullStar').prevAll().addClass('fullStar');}
return;},hover:function(e){var el=$(this),stars=$('a',el);stars.bind('mouseenter',function(e){$(this).addClass('tmp_fs').prevAll().addClass('tmp_fs');$(this).nextAll().addClass('tmp_es');});stars.bind('mouseleave',function(e){$(this).removeClass('tmp_fs').prevAll().removeClass('tmp_fs');$(this).nextAll().removeClass('tmp_es');});},click:function(e){e.preventDefault();var el=$(e.target),container=el.parent().parent(),inputs=container.children('input'),rate=el.attr('title');matchInput=inputs.filter(function(i){if($(this).val()==rate)
return true;else
return false;});matchInput.attr('checked',true).siblings('input').attr('checked',false);container.trigger('set.rating',matchInput.val()).data('rating').callback(rate,e);}});})(jQuery);;
(function(root,factory){if(typeof define==="function"&&define.amd){define("bloodhound",["jquery"],function(a0){return root["Bloodhound"]=factory(a0);});}else if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{root["Bloodhound"]=factory(jQuery);}})(this,function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false;},isBlankString:function(str){return!str||/^\s*$/.test(str);},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");},isString:function(obj){return typeof obj==="string";},isNumber:function(obj){return typeof obj==="number";},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return typeof obj==="undefined";},isElement:function(obj){return!!(obj&&obj.nodeType===1);},isJQuery:function(obj){return obj instanceof $;},toStr:function toStr(s){return _.isUndefined(s)||s===null?"":s+"";},bind:$.proxy,each:function(collection,cb){$.each(collection,reverseArgs);function reverseArgs(index,value){return cb(value,index);}},map:$.map,filter:$.grep,every:function(obj,test){var result=true;if(!obj){return result;}
$.each(obj,function(key,val){if(!(result=test.call(null,val,key,obj))){return false;}});return!!result;},some:function(obj,test){var result=false;if(!obj){return result;}
$.each(obj,function(key,val){if(result=test.call(null,val,key,obj)){return false;}});return!!result;},mixin:$.extend,identity:function(x){return x;},clone:function(obj){return $.extend(true,{},obj);},getIdGenerator:function(){var counter=0;return function(){return counter++;};},templatify:function templatify(obj){return $.isFunction(obj)?obj:template;function template(){return String(obj);}},defer:function(fn){setTimeout(fn,0);},debounce:function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments,later,callNow;later=function(){timeout=null;if(!immediate){result=func.apply(context,args);}};callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);}
return result;};},throttle:function(func,wait){var context,args,timeout,result,previous,later;previous=0;later=function(){previous=new Date();timeout=null;result=func.apply(context,args);};return function(){var now=new Date(),remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);}else if(!timeout){timeout=setTimeout(later,remaining);}
return result;};},stringify:function(val){return _.isString(val)?val:JSON.stringify(val);},noop:function(){}};}();var VERSION="0.11.1";var tokenizers=function(){"use strict";return{nonword:nonword,whitespace:whitespace,obj:{nonword:getObjTokenizer(nonword),whitespace:getObjTokenizer(whitespace)}};function whitespace(str){str=_.toStr(str);return str?str.split(/\s+/):[];}
function nonword(str){str=_.toStr(str);return str?str.split(/\W+/):[];}
function getObjTokenizer(tokenizer){return function setKey(keys){keys=_.isArray(keys)?keys:[].slice.call(arguments,0);return function tokenize(o){var tokens=[];_.each(keys,function(k){tokens=tokens.concat(tokenizer(_.toStr(o[k])));});return tokens;};};}}();var LruCache=function(){"use strict";function LruCache(maxSize){this.maxSize=_.isNumber(maxSize)?maxSize:100;this.reset();if(this.maxSize<=0){this.set=this.get=$.noop;}}
_.mixin(LruCache.prototype,{set:function set(key,val){var tailItem=this.list.tail,node;if(this.size>=this.maxSize){this.list.remove(tailItem);delete this.hash[tailItem.key];this.size--;}
if(node=this.hash[key]){node.val=val;this.list.moveToFront(node);}else{node=new Node(key,val);this.list.add(node);this.hash[key]=node;this.size++;}},get:function get(key){var node=this.hash[key];if(node){this.list.moveToFront(node);return node.val;}},reset:function reset(){this.size=0;this.hash={};this.list=new List();}});function List(){this.head=this.tail=null;}
_.mixin(List.prototype,{add:function add(node){if(this.head){node.next=this.head;this.head.prev=node;}
this.head=node;this.tail=this.tail||node;},remove:function remove(node){node.prev?node.prev.next=node.next:this.head=node.next;node.next?node.next.prev=node.prev:this.tail=node.prev;},moveToFront:function(node){this.remove(node);this.add(node);}});function Node(key,val){this.key=key;this.val=val;this.prev=this.next=null;}
return LruCache;}();var PersistentStorage=function(){"use strict";var LOCAL_STORAGE;try{LOCAL_STORAGE=window.localStorage;LOCAL_STORAGE.setItem("~~~","!");LOCAL_STORAGE.removeItem("~~~");}catch(err){LOCAL_STORAGE=null;}
function PersistentStorage(namespace,override){this.prefix=["__",namespace,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+_.escapeRegExChars(this.prefix));this.ls=override||LOCAL_STORAGE;!this.ls&&this._noop();}
_.mixin(PersistentStorage.prototype,{_prefix:function(key){return this.prefix+key;},_ttlKey:function(key){return this._prefix(key)+this.ttlKey;},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=_.noop;},_safeSet:function(key,val){try{this.ls.setItem(key,val);}catch(err){if(err.name==="QuotaExceededError"){this.clear();this._noop();}}},get:function(key){if(this.isExpired(key)){this.remove(key);}
return decode(this.ls.getItem(this._prefix(key)));},set:function(key,val,ttl){if(_.isNumber(ttl)){this._safeSet(this._ttlKey(key),encode(now()+ttl));}else{this.ls.removeItem(this._ttlKey(key));}
return this._safeSet(this._prefix(key),encode(val));},remove:function(key){this.ls.removeItem(this._ttlKey(key));this.ls.removeItem(this._prefix(key));return this;},clear:function(){var i,keys=gatherMatchingKeys(this.keyMatcher);for(i=keys.length;i--;){this.remove(keys[i]);}
return this;},isExpired:function(key){var ttl=decode(this.ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?true:false;}});return PersistentStorage;function now(){return new Date().getTime();}
function encode(val){return JSON.stringify(_.isUndefined(val)?null:val);}
function decode(val){return $.parseJSON(val);}
function gatherMatchingKeys(keyMatcher){var i,key,keys=[],len=LOCAL_STORAGE.length;for(i=0;i<len;i++){if((key=LOCAL_STORAGE.key(i)).match(keyMatcher)){keys.push(key.replace(keyMatcher,""));}}
return keys;}}();var Transport=function(){"use strict";var pendingRequestsCount=0,pendingRequests={},maxPendingRequests=6,sharedCache=new LruCache(10);function Transport(o){o=o||{};this.cancelled=false;this.lastReq=null;this._send=o.transport;this._get=o.limiter?o.limiter(this._get):this._get;this._cache=o.cache===false?new LruCache(0):sharedCache;}
Transport.setMaxPendingRequests=function setMaxPendingRequests(num){maxPendingRequests=num;};Transport.resetCache=function resetCache(){sharedCache.reset();};_.mixin(Transport.prototype,{_fingerprint:function fingerprint(o){o=o||{};return o.url+o.type+$.param(o.data||{});},_get:function(o,cb){var that=this,fingerprint,jqXhr;fingerprint=this._fingerprint(o);if(this.cancelled||fingerprint!==this.lastReq){return;}
if(jqXhr=pendingRequests[fingerprint]){jqXhr.done(done).fail(fail);}else if(pendingRequestsCount<maxPendingRequests){pendingRequestsCount++;pendingRequests[fingerprint]=this._send(o).done(done).fail(fail).always(always);}else{this.onDeckRequestArgs=[].slice.call(arguments,0);}
function done(resp){cb(null,resp);that._cache.set(fingerprint,resp);}
function fail(){cb(true);}
function always(){pendingRequestsCount--;delete pendingRequests[fingerprint];if(that.onDeckRequestArgs){that._get.apply(that,that.onDeckRequestArgs);that.onDeckRequestArgs=null;}}},get:function(o,cb){var resp,fingerprint;cb=cb||$.noop;o=_.isString(o)?{url:o}:o||{};fingerprint=this._fingerprint(o);this.cancelled=false;this.lastReq=fingerprint;if(resp=this._cache.get(fingerprint)){cb(null,resp);}else{this._get(o,cb);}},cancel:function(){this.cancelled=true;}});return Transport;}();var SearchIndex=window.SearchIndex=function(){"use strict";var CHILDREN="c",IDS="i";function SearchIndex(o){o=o||{};if(!o.datumTokenizer||!o.queryTokenizer){$.error("datumTokenizer and queryTokenizer are both required");}
this.identify=o.identify||_.stringify;this.datumTokenizer=o.datumTokenizer;this.queryTokenizer=o.queryTokenizer;this.reset();}
_.mixin(SearchIndex.prototype,{bootstrap:function bootstrap(o){this.datums=o.datums;this.trie=o.trie;},add:function(data){var that=this;data=_.isArray(data)?data:[data];_.each(data,function(datum){var id,tokens;that.datums[id=that.identify(datum)]=datum;tokens=normalizeTokens(that.datumTokenizer(datum));_.each(tokens,function(token){var node,chars,ch;node=that.trie;chars=token.split("");while(ch=chars.shift()){node=node[CHILDREN][ch]||(node[CHILDREN][ch]=newNode());node[IDS].push(id);}});});},get:function get(ids){var that=this;return _.map(ids,function(id){return that.datums[id];});},search:function search(query){var that=this,tokens,matches;tokens=normalizeTokens(this.queryTokenizer(query));_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&matches.length===0){return false;}
node=that.trie;chars=token.split("");while(node&&(ch=chars.shift())){node=node[CHILDREN][ch];}
if(node&&chars.length===0){ids=node[IDS].slice(0);matches=matches?getIntersection(matches,ids):ids;}else{matches=[];return false;}});return matches?_.map(unique(matches),function(id){return that.datums[id];}):[];},all:function all(){var values=[];for(var key in this.datums){values.push(this.datums[key]);}
return values;},reset:function reset(){this.datums={};this.trie=newNode();},serialize:function serialize(){return{datums:this.datums,trie:this.trie};}});return SearchIndex;function normalizeTokens(tokens){tokens=_.filter(tokens,function(token){return!!token;});tokens=_.map(tokens,function(token){return token.toLowerCase();});return tokens;}
function newNode(){var node={};node[IDS]=[];node[CHILDREN]={};return node;}
function unique(array){var seen={},uniques=[];for(var i=0,len=array.length;i<len;i++){if(!seen[array[i]]){seen[array[i]]=true;uniques.push(array[i]);}}
return uniques;}
function getIntersection(arrayA,arrayB){var ai=0,bi=0,intersection=[];arrayA=arrayA.sort();arrayB=arrayB.sort();var lenArrayA=arrayA.length,lenArrayB=arrayB.length;while(ai<lenArrayA&&bi<lenArrayB){if(arrayA[ai]<arrayB[bi]){ai++;}else if(arrayA[ai]>arrayB[bi]){bi++;}else{intersection.push(arrayA[ai]);ai++;bi++;}}
return intersection;}}();var Prefetch=function(){"use strict";var keys;keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function Prefetch(o){this.url=o.url;this.ttl=o.ttl;this.cache=o.cache;this.prepare=o.prepare;this.transform=o.transform;this.transport=o.transport;this.thumbprint=o.thumbprint;this.storage=new PersistentStorage(o.cacheKey);}
_.mixin(Prefetch.prototype,{_settings:function settings(){return{url:this.url,type:"GET",dataType:"json"};},store:function store(data){if(!this.cache){return;}
this.storage.set(keys.data,data,this.ttl);this.storage.set(keys.protocol,location.protocol,this.ttl);this.storage.set(keys.thumbprint,this.thumbprint,this.ttl);},fromCache:function fromCache(){var stored={},isExpired;if(!this.cache){return null;}
stored.data=this.storage.get(keys.data);stored.protocol=this.storage.get(keys.protocol);stored.thumbprint=this.storage.get(keys.thumbprint);isExpired=stored.thumbprint!==this.thumbprint||stored.protocol!==location.protocol;return stored.data&&!isExpired?stored.data:null;},fromNetwork:function(cb){var that=this,settings;if(!cb){return;}
settings=this.prepare(this._settings());this.transport(settings).fail(onError).done(onResponse);function onError(){cb(true);}
function onResponse(resp){cb(null,that.transform(resp));}},clear:function clear(){this.storage.clear();return this;}});return Prefetch;}();var Remote=function(){"use strict";function Remote(o){this.url=o.url;this.prepare=o.prepare;this.transform=o.transform;this.transport=new Transport({cache:o.cache,limiter:o.limiter,transport:o.transport});}
_.mixin(Remote.prototype,{_settings:function settings(){return{url:this.url,type:"GET",dataType:"json"};},get:function get(query,cb){var that=this,settings;if(!cb){return;}
query=query||"";settings=this.prepare(query,this._settings());return this.transport.get(settings,onResponse);function onResponse(err,resp){err?cb([]):cb(that.transform(resp));}},cancelLastRequest:function cancelLastRequest(){this.transport.cancel();}});return Remote;}();var oParser=function(){"use strict";return function parse(o){var defaults,sorter;defaults={initialize:true,identify:_.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null};o=_.mixin(defaults,o||{});!o.datumTokenizer&&$.error("datumTokenizer is required");!o.queryTokenizer&&$.error("queryTokenizer is required");sorter=o.sorter;o.sorter=sorter?function(x){return x.sort(sorter);}:_.identity;o.local=_.isFunction(o.local)?o.local():o.local;o.prefetch=parsePrefetch(o.prefetch);o.remote=parseRemote(o.remote);return o;};function parsePrefetch(o){var defaults;if(!o){return null;}
defaults={url:null,ttl:24*60*60*1e3,cache:true,cacheKey:null,thumbprint:"",prepare:_.identity,transform:_.identity,transport:null};o=_.isString(o)?{url:o}:o;o=_.mixin(defaults,o);!o.url&&$.error("prefetch requires url to be set");o.transform=o.filter||o.transform;o.cacheKey=o.cacheKey||o.url;o.thumbprint=VERSION+o.thumbprint;o.transport=o.transport?callbackToDeferred(o.transport):$.ajax;return o;}
function parseRemote(o){var defaults;if(!o){return;}
defaults={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:_.identity,transport:null};o=_.isString(o)?{url:o}:o;o=_.mixin(defaults,o);!o.url&&$.error("remote requires url to be set");o.transform=o.filter||o.transform;o.prepare=toRemotePrepare(o);o.limiter=toLimiter(o);o.transport=o.transport?callbackToDeferred(o.transport):$.ajax;delete o.replace;delete o.wildcard;delete o.rateLimitBy;delete o.rateLimitWait;return o;}
function toRemotePrepare(o){var prepare,replace,wildcard;prepare=o.prepare;replace=o.replace;wildcard=o.wildcard;if(prepare){return prepare;}
if(replace){prepare=prepareByReplace;}else if(o.wildcard){prepare=prepareByWildcard;}else{prepare=idenityPrepare;}
return prepare;function prepareByReplace(query,settings){settings.url=replace(settings.url,query);return settings;}
function prepareByWildcard(query,settings){settings.url=settings.url.replace(wildcard,encodeURIComponent(query));return settings;}
function idenityPrepare(query,settings){return settings;}}
function toLimiter(o){var limiter,method,wait;limiter=o.limiter;method=o.rateLimitBy;wait=o.rateLimitWait;if(!limiter){limiter=/^throttle$/i.test(method)?throttle(wait):debounce(wait);}
return limiter;function debounce(wait){return function debounce(fn){return _.debounce(fn,wait);};}
function throttle(wait){return function throttle(fn){return _.throttle(fn,wait);};}}
function callbackToDeferred(fn){return function wrapper(o){var deferred=$.Deferred();fn(o,onSuccess,onError);return deferred;function onSuccess(resp){_.defer(function(){deferred.resolve(resp);});}
function onError(err){_.defer(function(){deferred.reject(err);});}};}}();var Bloodhound=function(){"use strict";var old;old=window&&window.Bloodhound;function Bloodhound(o){o=oParser(o);this.sorter=o.sorter;this.identify=o.identify;this.sufficient=o.sufficient;this.local=o.local;this.remote=o.remote?new Remote(o.remote):null;this.prefetch=o.prefetch?new Prefetch(o.prefetch):null;this.index=new SearchIndex({identify:this.identify,datumTokenizer:o.datumTokenizer,queryTokenizer:o.queryTokenizer});o.initialize!==false&&this.initialize();}
Bloodhound.noConflict=function noConflict(){window&&(window.Bloodhound=old);return Bloodhound;};Bloodhound.tokenizers=tokenizers;_.mixin(Bloodhound.prototype,{__ttAdapter:function ttAdapter(){var that=this;return this.remote?withAsync:withoutAsync;function withAsync(query,sync,async){return that.search(query,sync,async);}
function withoutAsync(query,sync){return that.search(query,sync);}},_loadPrefetch:function loadPrefetch(){var that=this,deferred,serialized;deferred=$.Deferred();if(!this.prefetch){deferred.resolve();}else if(serialized=this.prefetch.fromCache()){this.index.bootstrap(serialized);deferred.resolve();}else{this.prefetch.fromNetwork(done);}
return deferred.promise();function done(err,data){if(err){return deferred.reject();}
that.add(data);that.prefetch.store(that.index.serialize());deferred.resolve();}},_initialize:function initialize(){var that=this,deferred;this.clear();(this.initPromise=this._loadPrefetch()).done(addLocalToIndex);return this.initPromise;function addLocalToIndex(){that.add(that.local);}},initialize:function initialize(force){return!this.initPromise||force?this._initialize():this.initPromise;},add:function add(data){this.index.add(data);return this;},get:function get(ids){ids=_.isArray(ids)?ids:[].slice.call(arguments);return this.index.get(ids);},search:function search(query,sync,async){var that=this,local;local=this.sorter(this.index.search(query));sync(this.remote?local.slice():local);if(this.remote&&local.length<this.sufficient){this.remote.get(query,processRemote);}else if(this.remote){this.remote.cancelLastRequest();}
return this;function processRemote(remote){var nonDuplicates=[];_.each(remote,function(r){!_.some(local,function(l){return that.identify(r)===that.identify(l);})&&nonDuplicates.push(r);});async&&async(nonDuplicates);}},all:function all(){return this.index.all();},clear:function clear(){this.index.reset();return this;},clearPrefetchCache:function clearPrefetchCache(){this.prefetch&&this.prefetch.clear();return this;},clearRemoteCache:function clearRemoteCache(){Transport.resetCache();return this;},ttAdapter:function ttAdapter(){return this.__ttAdapter();}});return Bloodhound;}();return Bloodhound;});(function(root,factory){if(typeof define==="function"&&define.amd){define("typeahead.js",["jquery"],function(a0){return factory(a0);});}else if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{factory(jQuery);}})(this,function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false;},isBlankString:function(str){return!str||/^\s*$/.test(str);},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");},isString:function(obj){return typeof obj==="string";},isNumber:function(obj){return typeof obj==="number";},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return typeof obj==="undefined";},isElement:function(obj){return!!(obj&&obj.nodeType===1);},isJQuery:function(obj){return obj instanceof $;},toStr:function toStr(s){return _.isUndefined(s)||s===null?"":s+"";},bind:$.proxy,each:function(collection,cb){$.each(collection,reverseArgs);function reverseArgs(index,value){return cb(value,index);}},map:$.map,filter:$.grep,every:function(obj,test){var result=true;if(!obj){return result;}
$.each(obj,function(key,val){if(!(result=test.call(null,val,key,obj))){return false;}});return!!result;},some:function(obj,test){var result=false;if(!obj){return result;}
$.each(obj,function(key,val){if(result=test.call(null,val,key,obj)){return false;}});return!!result;},mixin:$.extend,identity:function(x){return x;},clone:function(obj){return $.extend(true,{},obj);},getIdGenerator:function(){var counter=0;return function(){return counter++;};},templatify:function templatify(obj){return $.isFunction(obj)?obj:template;function template(){return String(obj);}},defer:function(fn){setTimeout(fn,0);},debounce:function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments,later,callNow;later=function(){timeout=null;if(!immediate){result=func.apply(context,args);}};callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);}
return result;};},throttle:function(func,wait){var context,args,timeout,result,previous,later;previous=0;later=function(){previous=new Date();timeout=null;result=func.apply(context,args);};return function(){var now=new Date(),remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);}else if(!timeout){timeout=setTimeout(later,remaining);}
return result;};},stringify:function(val){return _.isString(val)?val:JSON.stringify(val);},noop:function(){}};}();var WWW=function(){"use strict";var defaultClassNames={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return build;function build(o){var www,classes;classes=_.mixin({},defaultClassNames,o);www={css:buildCss(),classes:classes,html:buildHtml(classes),selectors:buildSelectors(classes)};return{css:www.css,html:www.html,classes:www.classes,selectors:www.selectors,mixin:function(o){_.mixin(o,www);}};}
function buildHtml(c){return{wrapper:'<span class="'+c.wrapper+'"></span>',menu:'<div class="'+c.menu+'"></div>'};}
function buildSelectors(classes){var selectors={};_.each(classes,function(v,k){selectors[k]="."+v;});return selectors;}
function buildCss(){var css={wrapper:{position:"relative",display:"block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(_.isMsie()){_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});}
return css;}}();var EventBus=function(){"use strict";var namespace,deprecationMap;namespace="typeahead:";deprecationMap={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function EventBus(o){if(!o||!o.el){$.error("EventBus initialized without el");}
this.$el=$(o.el);}
_.mixin(EventBus.prototype,{_trigger:function(type,args){var $e;$e=$.Event(namespace+type);(args=args||[]).unshift($e);this.$el.trigger.apply(this.$el,args);return $e;},before:function(type){var args,$e;args=[].slice.call(arguments,1);$e=this._trigger("before"+type,args);return $e.isDefaultPrevented();},trigger:function(type){var deprecatedType;this._trigger(type,[].slice.call(arguments,1));if(deprecatedType=deprecationMap[type]){this._trigger(deprecatedType,[].slice.call(arguments,1));}}});return EventBus;}();var EventEmitter=function(){"use strict";var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger};function on(method,types,cb,context){var type;if(!cb){return this;}
types=types.split(splitter);cb=context?bindContext(cb,context):cb;this._callbacks=this._callbacks||{};while(type=types.shift()){this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]};this._callbacks[type][method].push(cb);}
return this;}
function onAsync(types,cb,context){return on.call(this,"async",types,cb,context);}
function onSync(types,cb,context){return on.call(this,"sync",types,cb,context);}
function off(types){var type;if(!this._callbacks){return this;}
types=types.split(splitter);while(type=types.shift()){delete this._callbacks[type];}
return this;}
function trigger(types){var type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks){return this;}
types=types.split(splitter);args=[].slice.call(arguments,1);while((type=types.shift())&&(callbacks=this._callbacks[type])){syncFlush=getFlush(callbacks.sync,this,[type].concat(args));asyncFlush=getFlush(callbacks.async,this,[type].concat(args));syncFlush()&&nextTick(asyncFlush);}
return this;}
function getFlush(callbacks,context,args){return flush;function flush(){var cancelled;for(var i=0,len=callbacks.length;!cancelled&&i<len;i+=1){cancelled=callbacks[i].apply(context,args)===false;}
return!cancelled;}}
function getNextTick(){var nextTickFn;if(window.setImmediate){nextTickFn=function nextTickSetImmediate(fn){setImmediate(function(){fn();});};}else{nextTickFn=function nextTickSetTimeout(fn){setTimeout(function(){fn();},0);};}
return nextTickFn;}
function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0));};}}();var highlight=function(doc){"use strict";var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function hightlight(o){var regex;o=_.mixin({},defaults,o);if(!o.node||!o.pattern){return;}
o.pattern=_.isArray(o.pattern)?o.pattern:[o.pattern];regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly);traverse(o.node,hightlightTextNode);function hightlightTextNode(textNode){var match,patternNode,wrapperNode;if(match=regex.exec(textNode.data)){wrapperNode=doc.createElement(o.tagName);o.className&&(wrapperNode.className=o.className);patternNode=textNode.splitText(match.index);patternNode.splitText(match[0].length);wrapperNode.appendChild(patternNode.cloneNode(true));textNode.parentNode.replaceChild(wrapperNode,patternNode);}
return!!match;}
function traverse(el,hightlightTextNode){var childNode,TEXT_NODE_TYPE=3;for(var i=0;i<el.childNodes.length;i++){childNode=el.childNodes[i];if(childNode.nodeType===TEXT_NODE_TYPE){i+=hightlightTextNode(childNode)?1:0;}else{traverse(childNode,hightlightTextNode);}}}};function getRegex(patterns,caseSensitive,wordsOnly){var escapedPatterns=[],regexStr;for(var i=0,len=patterns.length;i<len;i++){escapedPatterns.push(_.escapeRegExChars(patterns[i]));}
regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+")";return caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i");}}(window.document);var Input=function(){"use strict";var specialKeyCodeMap;specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function Input(o,www){o=o||{};if(!o.input){$.error("input is missing");}
www.mixin(this);this.$hint=$(o.hint);this.$input=$(o.input);this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=buildOverflowHelper(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop;}}
Input.normalizeQuery=function(str){return _.toStr(str).replace(/^\s*/g,"").replace(/\s{2,}/g," ");};_.mixin(Input.prototype,EventEmitter,{_onBlur:function onBlur(){this.resetInputValue();this.trigger("blurred");},_onFocus:function onFocus(){this.queryWhenFocused=this.query;this.trigger("focused");},_onKeydown:function onKeydown($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e);if(keyName&&this._shouldTrigger(keyName,$e)){this.trigger(keyName+"Keyed",$e);}},_onInput:function onInput(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection();},_managePreventDefault:function managePreventDefault(keyName,$e){var preventDefault;switch(keyName){case"up":case"down":preventDefault=!withModifier($e);break;default:preventDefault=false;}
preventDefault&&$e.preventDefault();},_shouldTrigger:function shouldTrigger(keyName,$e){var trigger;switch(keyName){case"tab":trigger=!withModifier($e);break;default:trigger=true;}
return trigger;},_checkLanguageDirection:function checkLanguageDirection(){var dir=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==dir){this.dir=dir;this.$hint.attr("dir",dir);this.trigger("langDirChanged",dir);}},_setQuery:function setQuery(val,silent){var areEquivalent,hasDifferentWhitespace;areEquivalent=areQueriesEquivalent(val,this.query);hasDifferentWhitespace=areEquivalent?this.query.length!==val.length:false;this.query=val;if(!silent&&!areEquivalent){this.trigger("queryChanged",this.query);}else if(!silent&&hasDifferentWhitespace){this.trigger("whitespaceChanged",this.query);}},bind:function(){var that=this,onBlur,onFocus,onKeydown,onInput;onBlur=_.bind(this._onBlur,this);onFocus=_.bind(this._onFocus,this);onKeydown=_.bind(this._onKeydown,this);onInput=_.bind(this._onInput,this);this.$input.on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown);if(!_.isMsie()||_.isMsie()>9){this.$input.on("input.tt",onInput);}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){if(specialKeyCodeMap[$e.which||$e.keyCode]){return;}
_.defer(_.bind(that._onInput,that,$e));});}
return this;},focus:function focus(){this.$input.focus();},blur:function blur(){this.$input.blur();},getLangDir:function getLangDir(){return this.dir;},getQuery:function getQuery(){return this.query||"";},setQuery:function setQuery(val,silent){this.setInputValue(val);this._setQuery(val,silent);},hasQueryChangedSinceLastFocus:function hasQueryChangedSinceLastFocus(){return this.query!==this.queryWhenFocused;},getInputValue:function getInputValue(){return this.$input.val();},setInputValue:function setInputValue(value){this.$input.val(value);this.clearHintIfInvalid();this._checkLanguageDirection();},resetInputValue:function resetInputValue(){this.setInputValue(this.query);},getHint:function getHint(){return this.$hint.val();},setHint:function setHint(value){this.$hint.val(value);},clearHint:function clearHint(){this.setHint("");},clearHintIfInvalid:function clearHintIfInvalid(){var val,hint,valIsPrefixOfHint,isValid;val=this.getInputValue();hint=this.getHint();valIsPrefixOfHint=val!==hint&&hint.indexOf(val)===0;isValid=val!==""&&valIsPrefixOfHint&&!this.hasOverflow();!isValid&&this.clearHint();},hasFocus:function hasFocus(){return this.$input.is(":focus");},hasOverflow:function hasOverflow(){var constraint=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=constraint;},isCursorAtEnd:function(){var valueLength,selectionStart,range;valueLength=this.$input.val().length;selectionStart=this.$input[0].selectionStart;if(_.isNumber(selectionStart)){return selectionStart===valueLength;}else if(document.selection){range=document.selection.createRange();range.moveStart("character",-valueLength);return valueLength===range.text.length;}
return true;},destroy:function destroy(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=$("<div>");}});return Input;function buildOverflowHelper($input){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input);}
function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b);}
function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey;}}();var Dataset=function(){"use strict";var keys,nameGenerator;keys={val:"tt-selectable-display",obj:"tt-selectable-object"};nameGenerator=_.getIdGenerator();function Dataset(o,www){o=o||{};o.templates=o.templates||{};o.templates.notFound=o.templates.notFound||o.templates.empty;if(!o.source){$.error("missing source");}
if(!o.node){$.error("missing node");}
if(o.name&&!isValidName(o.name)){$.error("invalid dataset name: "+o.name);}
www.mixin(this);this.highlight=!!o.highlight;this.name=o.name||nameGenerator();this.limit=o.limit||5;this.displayFn=getDisplayFn(o.display||o.displayKey);this.templates=getTemplates(o.templates,this.displayFn);this.source=o.source.__ttAdapter?o.source.__ttAdapter():o.source;this.async=_.isUndefined(o.async)?this.source.length>2:!!o.async;this._resetLastSuggestion();this.$el=$(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name);}
Dataset.extractData=function extractData(el){var $el=$(el);if($el.data(keys.obj)){return{val:$el.data(keys.val)||"",obj:$el.data(keys.obj)||null};}
return null;};_.mixin(Dataset.prototype,EventEmitter,{_overwrite:function overwrite(query,suggestions){suggestions=suggestions||[];if(suggestions.length){this._renderSuggestions(query,suggestions);}else if(this.async&&this.templates.pending){this._renderPending(query);}else if(!this.async&&this.templates.notFound){this._renderNotFound(query);}else{this._empty();}
this.trigger("rendered",this.name,suggestions,false);},_append:function append(query,suggestions){suggestions=suggestions||[];if(suggestions.length&&this.$lastSuggestion.length){this._appendSuggestions(query,suggestions);}else if(suggestions.length){this._renderSuggestions(query,suggestions);}else if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(query);}
this.trigger("rendered",this.name,suggestions,true);},_renderSuggestions:function renderSuggestions(query,suggestions){var $fragment;$fragment=this._getSuggestionsFragment(query,suggestions);this.$lastSuggestion=$fragment.children().last();this.$el.html($fragment).prepend(this._getHeader(query,suggestions)).append(this._getFooter(query,suggestions));},_appendSuggestions:function appendSuggestions(query,suggestions){var $fragment,$lastSuggestion;$fragment=this._getSuggestionsFragment(query,suggestions);$lastSuggestion=$fragment.children().last();this.$lastSuggestion.after($fragment);this.$lastSuggestion=$lastSuggestion;},_renderPending:function renderPending(query){var template=this.templates.pending;this._resetLastSuggestion();template&&this.$el.html(template({query:query,dataset:this.name}));},_renderNotFound:function renderNotFound(query){var template=this.templates.notFound;this._resetLastSuggestion();template&&this.$el.html(template({query:query,dataset:this.name}));},_empty:function empty(){this.$el.empty();this._resetLastSuggestion();},_getSuggestionsFragment:function getSuggestionsFragment(query,suggestions){var that=this,fragment;fragment=document.createDocumentFragment();_.each(suggestions,function getSuggestionNode(suggestion){var $el,context;context=that._injectQuery(query,suggestion);$el=$(that.templates.suggestion(context)).data(keys.obj,suggestion).data(keys.val,that.displayFn(suggestion)).addClass(that.classes.suggestion+" "+that.classes.selectable);fragment.appendChild($el[0]);});this.highlight&&highlight({className:this.classes.highlight,node:fragment,pattern:query});return $(fragment);},_getFooter:function getFooter(query,suggestions){return this.templates.footer?this.templates.footer({query:query,suggestions:suggestions,dataset:this.name}):null;},_getHeader:function getHeader(query,suggestions){return this.templates.header?this.templates.header({query:query,suggestions:suggestions,dataset:this.name}):null;},_resetLastSuggestion:function resetLastSuggestion(){this.$lastSuggestion=$();},_injectQuery:function injectQuery(query,obj){return _.isObject(obj)?_.mixin({_query:query},obj):obj;},update:function update(query){var that=this,canceled=false,syncCalled=false,rendered=0;this.cancel();this.cancel=function cancel(){canceled=true;that.cancel=$.noop;that.async&&that.trigger("asyncCanceled",query);};this.source(query,sync,async);!syncCalled&&sync([]);function sync(suggestions){if(syncCalled){return;}
syncCalled=true;suggestions=(suggestions||[]).slice(0,that.limit);rendered=suggestions.length;that._overwrite(query,suggestions);if(rendered<that.limit&&that.async){that.trigger("asyncRequested",query);}}
function async(suggestions){suggestions=suggestions||[];if(!canceled&&rendered<that.limit){that.cancel=$.noop;rendered+=suggestions.length;that._append(query,suggestions.slice(0,that.limit-rendered));that.async&&that.trigger("asyncReceived",query);}}},cancel:$.noop,clear:function clear(){this._empty();this.cancel();this.trigger("cleared");},isEmpty:function isEmpty(){return this.$el.is(":empty");},destroy:function destroy(){this.$el=$("<div>");}});return Dataset;function getDisplayFn(display){display=display||_.stringify;return _.isFunction(display)?display:displayFn;function displayFn(obj){return obj[display];}}
function getTemplates(templates,displayFn){return{notFound:templates.notFound&&_.templatify(templates.notFound),pending:templates.pending&&_.templatify(templates.pending),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate};function suggestionTemplate(context){return $("<div>").text(displayFn(context));}}
function isValidName(str){return/^[_a-zA-Z0-9-]+$/.test(str);}}();var Menu=function(){"use strict";function Menu(o,www){var that=this;o=o||{};if(!o.node){$.error("node is required");}
www.mixin(this);this.$node=$(o.node);this.query=null;this.datasets=_.map(o.datasets,initializeDataset);function initializeDataset(oDataset){var node=that.$node.find(oDataset.node).first();oDataset.node=node.length?node:$("<div>").appendTo(that.$node);return new Dataset(oDataset,www);}}
_.mixin(Menu.prototype,EventEmitter,{_onSelectableClick:function onSelectableClick($e){this.trigger("selectableClicked",$($e.currentTarget));},_onSelectableMouseOver:function onSelectableMouseOver($e){this.trigger('selectableMouseOver',$($e.currentTarget));},_onRendered:function onRendered(type,dataset,suggestions,async){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",dataset,suggestions,async);},_onCleared:function onCleared(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared");},_propagate:function propagate(){this.trigger.apply(this,arguments);},_allDatasetsEmpty:function allDatasetsEmpty(){return _.every(this.datasets,isDatasetEmpty);function isDatasetEmpty(dataset){return dataset.isEmpty();}},_getSelectables:function getSelectables(){return this.$node.find(this.selectors.selectable);},_removeCursor:function _removeCursor(){var $selectable=this.getActiveSelectable();$selectable&&$selectable.removeClass(this.classes.cursor);},_ensureVisible:function ensureVisible($el){var elTop,elBottom,nodeScrollTop,nodeHeight;elTop=$el.position().top;elBottom=elTop+$el.outerHeight(true);nodeScrollTop=this.$node.scrollTop();nodeHeight=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(elTop<0){this.$node.scrollTop(nodeScrollTop+elTop);}else if(nodeHeight<elBottom){this.$node.scrollTop(nodeScrollTop+(elBottom-nodeHeight));}},bind:function(){var that=this,onSelectableClick,onSelectableMouseOver;onSelectableClick=_.bind(this._onSelectableClick,this);onSelectableMouseOver=_.bind(this._onSelectableMouseOver,this);this.$node.on("click.tt",this.selectors.selectable,onSelectableClick);this.$node.on("mouseenter.tt",this.selectors.selectable,onSelectableMouseOver);_.each(this.datasets,function(dataset){dataset.onSync("asyncRequested",that._propagate,that).onSync("asyncCanceled",that._propagate,that).onSync("asyncReceived",that._propagate,that).onSync("rendered",that._onRendered,that).onSync("cleared",that._onCleared,that);});return this;},isOpen:function isOpen(){return this.$node.hasClass(this.classes.open);},open:function open(){this.$node.addClass(this.classes.open);},close:function close(){this.$node.removeClass(this.classes.open);this._removeCursor();},setLanguageDirection:function setLanguageDirection(dir){this.$node.attr("dir",dir);},selectableRelativeToCursor:function selectableRelativeToCursor(delta){var $selectables,$oldCursor,oldIndex,newIndex;$oldCursor=this.getActiveSelectable();$selectables=this._getSelectables();oldIndex=$oldCursor?$selectables.index($oldCursor):-1;newIndex=oldIndex+delta;newIndex=(newIndex+1)%($selectables.length+1)-1;newIndex=newIndex<-1?$selectables.length-1:newIndex;return newIndex===-1?null:$selectables.eq(newIndex);},setCursor:function setCursor($selectable){this._removeCursor();if($selectable=$selectable&&$selectable.first()){$selectable.addClass(this.classes.cursor);this._ensureVisible($selectable);}},getSelectableData:function getSelectableData($el){return $el&&$el.length?Dataset.extractData($el):null;},getActiveSelectable:function getActiveSelectable(){var $selectable=this._getSelectables().filter(this.selectors.cursor).first();return $selectable.length?$selectable:null;},getTopSelectable:function getTopSelectable(){var $selectable=this._getSelectables().first();return $selectable.length?$selectable:null;},update:function update(query){var isValidUpdate=query!==this.query;if(isValidUpdate){this.query=query;_.each(this.datasets,updateDataset);}
return isValidUpdate;function updateDataset(dataset){dataset.update(query);}},empty:function empty(){_.each(this.datasets,clearDataset);this.query=null;this.$node.addClass(this.classes.empty);function clearDataset(dataset){dataset.clear();}},destroy:function destroy(){this.$node.off(".tt");this.$node=$("<div>");_.each(this.datasets,destroyDataset);function destroyDataset(dataset){dataset.destroy();}}});return Menu;}();var DefaultMenu=function(){"use strict";var s=Menu.prototype;function DefaultMenu(){Menu.apply(this,[].slice.call(arguments,0));}
_.mixin(DefaultMenu.prototype,Menu.prototype,{open:function open(){!this._allDatasetsEmpty()&&this._show();return s.open.apply(this,[].slice.call(arguments,0));},close:function close(){this._hide();return s.close.apply(this,[].slice.call(arguments,0));},_onRendered:function onRendered(){if(this._allDatasetsEmpty()){this._hide();}else{this.isOpen()&&this._show();}
return s._onRendered.apply(this,[].slice.call(arguments,0));},_onCleared:function onCleared(){if(this._allDatasetsEmpty()){this._hide();}else{this.isOpen()&&this._show();}
return s._onCleared.apply(this,[].slice.call(arguments,0));},setLanguageDirection:function setLanguageDirection(dir){this.$node.css(dir==="ltr"?this.css.ltr:this.css.rtl);return s.setLanguageDirection.apply(this,[].slice.call(arguments,0));},_hide:function hide(){this.$node.hide();},_show:function show(){this.$node.css("display","block");}});return DefaultMenu;}();var Typeahead=function(){"use strict";function Typeahead(o,www){var onFocused,onBlurred,onEnterKeyed,onTabKeyed,onEscKeyed,onUpKeyed,onDownKeyed,onLeftKeyed,onRightKeyed,onQueryChanged,onWhitespaceChanged;o=o||{};if(!o.input){$.error("missing input");}
if(!o.menu){$.error("missing menu");}
if(!o.eventBus){$.error("missing event bus");}
www.mixin(this);this.eventBus=o.eventBus;this.minLength=_.isNumber(o.minLength)?o.minLength:1;this.input=o.input;this.menu=o.menu;this.enabled=true;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync('selectableMouseOver',this._onSelectableMouseOver,this).onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);onFocused=c(this,"activate","open","_onFocused");onBlurred=c(this,"deactivate","_onBlurred");onEnterKeyed=c(this,"isActive","isOpen","_onEnterKeyed");onTabKeyed=c(this,"isActive","isOpen","_onTabKeyed");onEscKeyed=c(this,"isActive","_onEscKeyed");onUpKeyed=c(this,"isActive","open","_onUpKeyed");onDownKeyed=c(this,"isActive","open","_onDownKeyed");onLeftKeyed=c(this,"isActive","isOpen","_onLeftKeyed");onRightKeyed=c(this,"isActive","isOpen","_onRightKeyed");onQueryChanged=c(this,"_openIfActive","_onQueryChanged");onWhitespaceChanged=c(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",onFocused,this).onSync("blurred",onBlurred,this).onSync("enterKeyed",onEnterKeyed,this).onSync("tabKeyed",onTabKeyed,this).onSync("escKeyed",onEscKeyed,this).onSync("upKeyed",onUpKeyed,this).onSync("downKeyed",onDownKeyed,this).onSync("leftKeyed",onLeftKeyed,this).onSync("rightKeyed",onRightKeyed,this).onSync("queryChanged",onQueryChanged,this).onSync("whitespaceChanged",onWhitespaceChanged,this).onSync("langDirChanged",this._onLangDirChanged,this);}
_.mixin(Typeahead.prototype,{_hacks:function hacks(){var $input,$menu;$input=this.input.$input||$("<div>");$menu=this.menu.$node||$("<div>");$input.on("blur.tt",function($e){var active,isActive,hasActive;active=document.activeElement;isActive=$menu.is(active);hasActive=$menu.has(active).length>0;if(_.isMsie()&&(isActive||hasActive)){$e.preventDefault();$e.stopImmediatePropagation();_.defer(function(){$input.focus();});}});$menu.on("mousedown.tt",function($e){$e.preventDefault();});},_onSelectableClicked:function onSelectableClicked(type,$el){this.select($el);},_onSelectableMouseOver:function onSelectableMouseOver(type,$el){this.setCursor($el);},_onDatasetCleared:function onDatasetCleared(){this._updateHint();},_onDatasetRendered:function onDatasetRendered(type,dataset,suggestions,async){this._updateHint();this.eventBus.trigger("render",suggestions,async,dataset);},_onAsyncRequested:function onAsyncRequested(type,dataset,query){this.eventBus.trigger("asyncrequest",query,dataset);},_onAsyncCanceled:function onAsyncCanceled(type,dataset,query){this.eventBus.trigger("asynccancel",query,dataset);},_onAsyncReceived:function onAsyncReceived(type,dataset,query){this.eventBus.trigger("asyncreceive",query,dataset);},_onFocused:function onFocused(){this._minLengthMet()&&this.menu.update(this.input.getQuery());},_onBlurred:function onBlurred(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery());}},_onEnterKeyed:function onEnterKeyed(type,$e){var $selectable;if($selectable=this.menu.getActiveSelectable()){this.select($selectable)&&$e.preventDefault();}},_onTabKeyed:function onTabKeyed(type,$e){var $selectable;if($selectable=this.menu.getActiveSelectable()){this.select($selectable)&&$e.preventDefault();}else if($selectable=this.menu.getTopSelectable()){this.autocomplete($selectable)&&$e.preventDefault();}},_onEscKeyed:function onEscKeyed(){this.close();},_onUpKeyed:function onUpKeyed(){this.moveCursor(-1);},_onDownKeyed:function onDownKeyed(){this.moveCursor(+1);},_onLeftKeyed:function onLeftKeyed(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable());}},_onRightKeyed:function onRightKeyed(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable());}},_onQueryChanged:function onQueryChanged(e,query){this._minLengthMet(query)?this.menu.update(query):this.menu.empty();},_onWhitespaceChanged:function onWhitespaceChanged(){this._updateHint();},_onLangDirChanged:function onLangDirChanged(e,dir){if(this.dir!==dir){this.dir=dir;this.menu.setLanguageDirection(dir);}},_openIfActive:function openIfActive(){this.isActive()&&this.open();},_minLengthMet:function minLengthMet(query){query=_.isString(query)?query:this.input.getQuery()||"";return query.length>=this.minLength;},_updateHint:function updateHint(){var $selectable,data,val,query,escapedQuery,frontMatchRegEx,match;$selectable=this.menu.getTopSelectable();data=this.menu.getSelectableData($selectable);val=this.input.getInputValue();if(data&&!_.isBlankString(val)&&!this.input.hasOverflow()){query=Input.normalizeQuery(val);escapedQuery=_.escapeRegExChars(query);frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.+$)","i");match=frontMatchRegEx.exec(data.val);match&&this.input.setHint(val+match[1]);}else{this.input.clearHint();}},isEnabled:function isEnabled(){return this.enabled;},enable:function enable(){this.enabled=true;},disable:function disable(){this.enabled=false;},isActive:function isActive(){return this.active;},activate:function activate(){if(this.isActive()){return true;}else if(!this.isEnabled()||this.eventBus.before("active")){return false;}else{this.active=true;this.eventBus.trigger("active");return true;}},deactivate:function deactivate(){if(!this.isActive()){return true;}else if(this.eventBus.before("idle")){return false;}else{this.active=false;this.close();this.eventBus.trigger("idle");return true;}},isOpen:function isOpen(){return this.menu.isOpen();},open:function open(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open");}
return this.isOpen();},close:function close(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close");}
return!this.isOpen();},setVal:function setVal(val){this.input.setQuery(_.toStr(val));},getVal:function getVal(){return this.input.getQuery();},select:function select($selectable){var data=this.menu.getSelectableData($selectable);if(data&&!this.eventBus.before("select",data.obj)){this.input.setQuery(data.val,true);this.eventBus.trigger("select",data.obj);this.close();return true;}
return false;},autocomplete:function autocomplete($selectable){var query,data,isValid;query=this.input.getQuery();data=this.menu.getSelectableData($selectable);isValid=data&&query!==data.val;if(isValid&&!this.eventBus.before("autocomplete",data.obj)){this.input.setQuery(data.val);this.eventBus.trigger("autocomplete",data.obj);return true;}
return false;},moveCursor:function moveCursor(delta){var query,$candidate,data,payload,cancelMove;query=this.input.getQuery();$candidate=this.menu.selectableRelativeToCursor(delta);data=this.menu.getSelectableData($candidate);payload=data?data.obj:null;cancelMove=this._minLengthMet()&&this.menu.update(query);if(!cancelMove&&!this.eventBus.before("cursorchange",payload)){this.menu.setCursor($candidate);if(data){this.input.setInputValue(data.val);}else{this.input.resetInputValue();this._updateHint();}
this.eventBus.trigger("cursorchange",payload);return true;}
return false;},setCursor:function setCursor($candidate){var query,data,payload,cancelMove;query=this.input.getQuery();data=this.menu.getSelectableData($candidate);payload=data?data.obj:null;cancelMove=this._minLengthMet()&&this.menu.update(query);if(!cancelMove&&!this.eventBus.before("cursorchange",payload)){this.menu.setCursor($candidate);if(data){this.input.setInputValue(data.val);}else{this.input.resetInputValue();this._updateHint();}
this.eventBus.trigger("cursorchange",payload);return true;}
return false;},destroy:function destroy(){this.input.destroy();this.menu.destroy();}});return Typeahead;function c(ctx){var methods=[].slice.call(arguments,1);return function(){var args=[].slice.call(arguments);_.each(methods,function(method){return ctx[method].apply(ctx,args);});};}}();(function(){"use strict";var old,keys,methods;old=$.fn.typeahead;keys={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};methods={initialize:function initialize(o,datasets){var www;datasets=_.isArray(datasets)?datasets:[].slice.call(arguments,1);o=o||{};www=WWW(o.classNames);return this.each(attach);function attach(){var $input,$wrapper,$hint,$menu,defaultHint,defaultMenu,eventBus,input,menu,typeahead,MenuConstructor;_.each(datasets,function(d){d.highlight=!!o.highlight;});$input=$(this);$wrapper=$(www.html.wrapper);$hint=$elOrNull(o.hint);$menu=$elOrNull(o.menu);defaultHint=o.hint!==false&&!$hint;defaultMenu=o.menu!==false&&!$menu;defaultHint&&($hint=buildHintFromInput($input,www));defaultMenu&&($menu=$(www.html.menu).css(www.css.menu));$hint&&$hint.val("");$input=prepInput($input,www);if(defaultHint||defaultMenu){$wrapper.css(www.css.wrapper);$input.css(defaultHint?www.css.input:www.css.inputWithNoHint);$input.wrap($wrapper).parent().prepend(defaultHint?$hint:null).append(defaultMenu?$menu:null);}
MenuConstructor=defaultMenu?DefaultMenu:Menu;eventBus=new EventBus({el:$input});input=new Input({hint:$hint,input:$input},www);menu=new MenuConstructor({node:$menu,datasets:datasets},www);typeahead=new Typeahead({input:input,menu:menu,eventBus:eventBus,minLength:o.minLength},www);$input.data(keys.www,www);$input.data(keys.typeahead,typeahead);}},isEnabled:function isEnabled(){var enabled;ttEach(this.first(),function(t){enabled=t.isEnabled();});return enabled;},enable:function enable(){ttEach(this,function(t){t.enable();});return this;},disable:function disable(){ttEach(this,function(t){t.disable();});return this;},isActive:function isActive(){var active;ttEach(this.first(),function(t){active=t.isActive();});return active;},activate:function activate(){ttEach(this,function(t){t.activate();});return this;},deactivate:function deactivate(){ttEach(this,function(t){t.deactivate();});return this;},isOpen:function isOpen(){var open;ttEach(this.first(),function(t){open=t.isOpen();});return open;},open:function open(){ttEach(this,function(t){t.open();});return this;},close:function close(){ttEach(this,function(t){t.close();});return this;},select:function select(el){var success=false,$el=$(el);ttEach(this.first(),function(t){success=t.select($el);});return success;},autocomplete:function autocomplete(el){var success=false,$el=$(el);ttEach(this.first(),function(t){success=t.autocomplete($el);});return success;},moveCursor:function moveCursoe(delta){var success=false;ttEach(this.first(),function(t){success=t.moveCursor(delta);});return success;},val:function val(newVal){var query;if(!arguments.length){ttEach(this.first(),function(t){query=t.getVal();});return query;}else{ttEach(this,function(t){t.setVal(newVal);});return this;}},destroy:function destroy(){ttEach(this,function(typeahead,$input){revert($input);typeahead.destroy();});return this;}};$.fn.typeahead=function(method){if(methods[method]){return methods[method].apply(this,[].slice.call(arguments,1));}else{return methods.initialize.apply(this,arguments);}};$.fn.typeahead.noConflict=function noConflict(){$.fn.typeahead=old;return this;};function ttEach($els,fn){$els.each(function(){var $input=$(this),typeahead;(typeahead=$input.data(keys.typeahead))&&fn(typeahead,$input);});}
function buildHintFromInput($input,www){return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop("readonly",true).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1});}
function prepInput($input,www){$input.data(keys.attrs,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")});$input.addClass(www.classes.input).attr({autocomplete:"off",spellcheck:false});try{!$input.attr("dir")&&$input.attr("dir","auto");}catch(e){}
return $input;}
function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")};}
function revert($input){var www,$wrapper;www=$input.data(keys.www);$wrapper=$input.parent().filter(www.selectors.wrapper);_.each($input.data(keys.attrs),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val);});$input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);if($wrapper.length){$input.detach().insertAfter($wrapper);$wrapper.remove();}}
function $elOrNull(obj){var isValid,$el;isValid=_.isJQuery(obj)||_.isElement(obj);$el=isValid?$(obj).first():[];return $el.length?$el:null;}})();});;
(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:6,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn)}else{if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector})}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut})}}var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.sqrt((pX-cX)*(pX-cX)+(pY-cY)*(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=true;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=false;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type==="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(!ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector)}})(jQuery);;
var TemplateCache={};var TemplateViewsPath='/assets/js/template/';var TemplateEngine=function(html,options){var re=/<%([^%>]+)?%>/g,reExp=/(^( )?(if|for|else|switch|case|break|{|}|\[))(.*)?/g,code='var r=[];\n',cursor=0,match;var add=function(line,js){js?(code+=line.match(reExp)?line+'\n':'r.push('+line+');\n'):(code+=line!=''?'r.push("'+line.replace(/"/g,'\\"')+'");\n':'');return add;}
while(match=re.exec(html)){add(html.slice(cursor,match.index))(match[1],true);cursor=match.index+match[0].length;}
add(html.substr(cursor,html.length-cursor));code+='return r.join("");';return new Function(code.replace(/[\r\t\n]/g,'')).apply(options);};function RenderTemplate(template,params){if(typeof(TemplateCache[template])=='undefined'){$.ajax({url:TemplateViewsPath+template+'.htm',type:'get',async:false,success:function(TemplateContent){TemplateCache[template]=TemplateContent;}});}
return TemplateEngine(TemplateCache[template],params);}
if(!Array.prototype.filter)
{Array.prototype.filter=function(fun)
{var len=this.length;if(typeof fun!="function")
throw new TypeError();var res=new Array();var thisp=arguments[1];for(var i=0;i<len;i++)
{if(i in this)
{var val=this[i];if(fun.call(thisp,val,i,this))
res.push(val);}}
return res;};};
(function(root,factory){if(typeof define=='function'&&define.amd){define(['jquery'],factory);}else{factory(root.jQuery);}})(this,function($){var UA=navigator.userAgent;var isEdge=/Edge/i.test(UA);var SmartBanner=function(options){this.origHtmlMargin=parseFloat($('html').css('margin-top'));this.options=$.extend({},$.smartbanner.defaults,options);var standalone=navigator.standalone;if(this.options.force){this.type=this.options.force;}
else if(UA.match(/Windows Phone/i)!==null&&UA.match(/Edge|Touch/i)!==null){this.type='windows';}
else if(UA.match(/iPhone|iPod/i)!==null||(UA.match(/iPad/)&&this.options.iOSUniversalApp)){if(UA.match(/Safari/i)!==null&&(UA.match(/CriOS/i)!==null||window.Number(UA.substr(UA.indexOf('OS ')+3,3).replace('_','.'))<6)){this.type='ios';}}
else if(UA.match(/\bSilk\/(.*\bMobile Safari\b)?/)||UA.match(/\bKF\w/)||UA.match('Kindle Fire')){this.type='kindle';}
else if(UA.match(/Android/i)!==null){this.type='android';}
if(!this.type||standalone||this.getCookie('sb-installed')){return;}
this.scale=this.options.scale=='auto'?$(window).width()/window.screen.width:this.options.scale;if(this.scale<1){this.scale=1;}
var meta=$(this.type=='android'?'meta[name="google-play-app"]':(this.type=='ios'?'meta[name="apple-itunes-app"]':(this.type=='kindle'?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]')));if(!meta.length){return;}
if(this.type=='windows'){if(isEdge){this.appId=$('meta[name="msApplication-PackageEdgeName"]').attr('content');}
if(!this.appId){this.appId=$('meta[name="msApplication-PackageFamilyName"]').attr('content');}}
else{var parsedMetaContent=/app-id=([^\s,]+)/.exec(meta.attr('content'));if(parsedMetaContent){this.appId=parsedMetaContent[1];}else{return;}}
this.title=this.options.title?this.options.title:(meta.data('title')||$('title').text().replace(/\s*[|\-·].*$/,''));this.author=this.options.author?this.options.author:(meta.data('author')||($('meta[name="author"]').length?$('meta[name="author"]').attr('content'):window.location.hostname));this.iconUrl=meta.data('icon-url');this.price=meta.data('price');if(typeof this.options.onInstall=='function'){this.options.onInstall=this.options.onInstall;}else{this.options.onInstall=function(){};}
if(typeof this.options.onClose=='function'){this.options.onClose=this.options.onClose;}else{this.options.onClose=function(){};}
if(typeof this.options.onShow=='function'){this.options.onShow=this.options.onShow;}else{this.options.onShow=function(){};}
this.create();this.show();this.listen();};SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL;var price=this.price||this.options.price;var link=this.options.url||(function(){switch(this.type){case'android':return'market://details?id=';case'kindle':return'amzn://apps/android?asin=';case'windows':return isEdge?'ms-windows-store://pdp/?productid=':'ms-windows-store:navigate?appid=';}
return'https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id';}.call(this)+this.appId);var inStore=!price?'':(function(){var result=price+' - ';switch(this.type){case'android':return result+this.options.inGooglePlay;case'kindle':return result+this.options.inAmazonAppStore;case'windows':return result+this.options.inWindowsStore;}
return result+this.options.inAppStore}.call(this));var gloss=this.options.iconGloss==null?(this.type=='ios'):this.options.iconGloss;if(this.type=='android'&&this.options.GooglePlayParams){link+='&referrer='+this.options.GooglePlayParams;}
var banner=('<div id="smartbanner" class="'+this.type+'">'+'<div class="sb-container">'+'<a href="#" class="sb-close">&times;</a>'+'<span class="sb-icon"></span>'+'<div class="sb-info">'+'<strong>'+this.title+'</strong>'+'<span>'+this.author+'</span>'+'<span>'+inStore+'</span>'+'</div>'+'<a href="'+link+'" class="sb-button">'+'<span>'+this.options.button+'</span>'+'</a>'+'</div>'+'</div>');if(this.options.layer){$(this.options.appendToSelector).append(banner);}else{$(this.options.appendToSelector).prepend(banner);}
if(this.options.icon){iconURL=this.options.icon;}else if(this.iconUrl){iconURL=this.iconUrl;}else if($('link[rel="apple-touch-icon-precomposed"]').length>0){iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr('href');if(this.options.iconGloss==null){gloss=false;}}else if($('link[rel="apple-touch-icon"]').length>0){iconURL=$('link[rel="apple-touch-icon"]').attr('href');}else if($('meta[name="msApplication-TileImage"]').length>0){iconURL=$('meta[name="msApplication-TileImage"]').attr('content');}else if($('meta[name="msapplication-TileImage"]').length>0){iconURL=$('meta[name="msapplication-TileImage"]').attr('content');}
if(iconURL){$('#smartbanner .sb-icon').css('background-image','url('+iconURL+')');if(gloss){$('#smartbanner .sb-icon').addClass('gloss');}}else{$('#smartbanner').addClass('no-icon');}
this.bannerHeight=$('#smartbanner').outerHeight()+2;if(this.scale>1){$('#smartbanner').css('top',parseFloat($('#smartbanner').css('top'))*this.scale).css('height',parseFloat($('#smartbanner').css('height'))*this.scale).hide();$('#smartbanner .sb-container').css('-webkit-transform','scale('+this.scale+')').css('-msie-transform','scale('+this.scale+')').css('-moz-transform','scale('+this.scale+')').css('width',$(window).width()/this.scale);}
$('#smartbanner').css('position',this.options.layer?'absolute':'static');},listen:function(){$('#smartbanner .sb-close').on('click',$.proxy(this.close,this));$('#smartbanner .sb-button').on('click',$.proxy(this.install,this));},show:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:0,display:'block'},this.options.speedIn).addClass('shown').show();$(this.pushSelector).animate({paddingTop:this.origHtmlMargin+(this.bannerHeight*this.scale)},this.options.speedIn,'swing',callback);}
else{if($.support.transition){banner.animate({top:0},this.options.speedIn).addClass('shown');var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedIn).css('margin-top',this.origHtmlMargin+(this.bannerHeight*this.scale));}
else{banner.slideDown(this.options.speedIn).addClass('shown');}}
this.options.onShow();},hide:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:-1*this.bannerHeight*this.scale,display:'block'},this.options.speedIn).removeClass('shown');$(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,'swing',callback);}
else{if($.support.transition){if(this.type!=='android'){banner.css('top',-1*this.bannerHeight*this.scale).removeClass('shown');}
else{banner.css({display:'none'}).removeClass('shown');}
var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedOut).css('margin-top',this.origHtmlMargin);}
else{banner.slideUp(this.options.speedOut).removeClass('shown');}}},close:function(e){e.preventDefault();this.hide();this.setCookie('sb-closed','true',this.options.daysHidden);this.options.onClose(e);},install:function(e){if(this.options.hideOnInstall){this.hide();}
this.setCookie('sb-installed','true',this.options.daysReminder);this.options.onInstall(e);},setCookie:function(name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);value=encodeURI(value)+((exdays==null)?'':'; expires='+exdate.toUTCString());document.cookie=name+'='+value+'; path=/;';},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(';');for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf('='));y=ARRcookies[i].substr(ARRcookies[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x==name){return decodeURI(y);}}
return null;},switchType:function(){var that=this;this.hide(function(){that.type=that.type=='android'?'ios':'android';var meta=$(that.type=='android'?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr('content');that.appId=/app-id=([^\s,]+)/.exec(meta)[1];$('#smartbanner').detach();that.create();that.show();});}};$.smartbanner=function(option){var $window=$(window);var data=$window.data('smartbanner');var options=typeof option=='object'&&option;if(!data){$window.data('smartbanner',(data=new SmartBanner(options)));}
if(typeof option=='string'){data[option]();}};$.smartbanner.defaults={title:null,author:null,price:'FREE',appStoreLanguage:'us',inAppStore:'On the App Store',inGooglePlay:'In Google Play',inAmazonAppStore:'In the Amazon Appstore',inWindowsStore:'In the Windows Store',GooglePlayParams:null,icon:null,iconGloss:null,button:'VIEW',url:null,scale:'auto',speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:'body',pushSelector:'html'};$.smartbanner.Constructor=SmartBanner;function transitionEnd(){var el=document.createElement('smartbanner');var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]};}}
return false;}
if($.support.transition!==undefined){return;}
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=true;});var callback=function(){if(!called){$($el).trigger($.support.transition.end);}};setTimeout(callback,duration);return this;};$(function(){$.support.transition=transitionEnd();});});;
(function($){$.smartbanner({title:'Hotdeal.vn',author:'Hotdeal JSC',button:'DOWNLOAD',icon:'//s3-hd.hotdeal.vn/original/2016/5/0/5729c590046a8-57.png',inAppStore:'Đã có trên App Store',inGooglePlay:'Đã có trên Google Play',price:'FREE',onClose:function(ev)
{$('html').removeClass('smartbanner-shown');$('#smartbanner').remove();},onShow:function(){$('html').addClass('smartbanner-shown');}});$.screens={mobile:[0,768],desktop:[768,9999]};$.currentScreen2='';$.moneyFormatter=wNumb({mark:',',thousand:'.',prefix:'',postfix:'đ'});for(scr in $.screens){var w=$.screens[scr];if($.currentScreen2!=scr&&$(window).width()>=w[0]&&$(window).width()<w[1]){$.currentScreen2=scr;break;}}
$.fn.switchAvailability=function(flag,hide_flag){return this.each(function(){$(this).find(':input').each(function(){if(flag){$(this).removeAttr('disabled');}});var quantitySelect=$('._quantity-select');var boxCalendar=$('.box-calendar');var deal=$('#departure_date');if(flag){boxCalendar.removeClass('hidden');deal.prop('disabled',false);var option='';if(slotAvailable!==null){for(var i=1;i<=slotAvailable;i++){option+='<option value="'+i+'">'+i+'</option>';}
$('#alert-room').hide();}else{option='<option value="0">0</option>';$('#btn--buy-now').prop('disabled',true);$('#alert-room').show();}
quantitySelect.empty().append(option);if(hide_flag)
$(this).removeClass('hidden');}else{boxCalendar.addClass('hidden');deal.prop('disabled',true);var option='';for(var i=1;i<=10;i++){option+='<option value="'+i+'">'+i+'</option>';}
quantitySelect.empty().append(option);$('#alert-room').hide();$('#btn--buy-now').prop('disabled',false);if(hide_flag)
$(this).addClass('hidden');}
if($(this).closest('form').length){var fv=$(this).closest('form').data('formValidation');if(fv)
fv.resetForm();}
$('.price__book').empty().append(number_format(((quantitySelect.val()==null)?0:quantitySelect.val())*quantitySelect.data('price')));});};$(".search-area").each(function(){var elm=this,jelm=$(elm),jinput=jelm.find('input'),jcontainer=$('#page-wrapper');jinput.on('start_search',function(){if(!elm.overlayBg){elm.overlayBg=$('<div class="search-overlay"></div>');jcontainer.append(elm.overlayBg);}
elm.overlayBg.show();jcontainer.addClass('search-mode');jelm.find('.btn--remove').on('click',function(){jinput.val('').focus();});jelm.find('.btn--cancel').removeClass('hidden').on('click',function(){jinput.val('');elm.overlayBg.hide();jcontainer.removeClass('search-mode');$(this).addClass('hidden');$('body').removeClass('overflow-hidden');});elm.overlayBg.on('click',function(){jelm.find('.btn--cancel').trigger('click');});$('body').addClass('overflow-hidden');}).on('focus',function(){$(this).trigger('start_search');});});$('.tab').on('shown.bs.tab',function(e){$(window).trigger('resize');revalidateLazy();}).on('show.bs.tab',function(e){var tabEl=$(e.target);loadTab(tabEl);});$('.tab__item a').hover(function(){if(!$(this).data('load')){loadTab(this);}});function loadTab(tabEl){if($('body').hasClass('home')){tabEl=$(tabEl);if(!tabEl.data('load')){tabEl.data('load',1);var contentEl=$('.products__inner',$(tabEl.attr('href')));var content=contentEl.html();if(content.length<100){var hotProductId=[];$('#tab0 .product__icons').each(function(){hotProductId.push($(this).data('productId'));});$.post('/ajax?api=homepage.getTabContent',{slug:tabEl.data('slug'),category_id:tabEl.data('categoryId'),length:tabEl.data('length'),exclude_id:hotProductId.join(',')},function(rs){contentEl.html(rs.data.html);});}}}}
$('.to-top').each(function(){var jelm=$(this),data=jelm.data();$(window).on('scroll',function(){if($(window).scrollTop()>data.offset){jelm.show();$('.logo-yan').hide();}else{$('.logo-yan').show();jelm.hide();}});jelm.on('click',function(e){e.preventDefault();$('html, body').animate({scrollTop:0},500);});});$('[data-toggle="tooltip"]').tooltip();if($('.scrollspy').length){$('body').scrollspy({target:'.scrollspy',offset:100});}
var sticky_header=$(".header__navigation").clone(true).css("z-index",20);sticky_header.attr('id','main-nav-clone').addClass('sticky-header').insertAfter(".header__navigation");setTimeout(function(){$(".sticky-header").affix({offset:{top:$("#header").height()+($("#topGDM").length?$("#topGDM").height():0)}}).on('affix.bs.affix',function(){$("#header").height($("#header").height());});},10);$('.nav--floating').each(function(){$(this).css('top',$(".block.branding").eq(0).position().top);$(this).affix({offset:{top:$(".block.branding").eq(0).offset().top-55}}).on('click','a',function(e){e.preventDefault();if(typeof($($(this).attr('href')).offset())!='undefined'){$('html, body').animate({scrollTop:$($(this).attr('href')).offset().top-55},500,function(){history.pushState({},'',$(this).attr('href'));});}});$(this).removeClass('hidden');});$(".panel-title a").bind('click',function(){var map_id=$(this).attr("data-map-id");$(".product-map").addClass("hidden");$(map_id).removeClass("hidden");});$(".panel-title a:eq(0)").trigger('click');$('.no-js').removeClass('no-js');$('.selectpicker').each(function(){var jelm=$(this);if(jelm.next('.bootstrap-select').length){jelm.next('.bootstrap-select').remove();}
jelm.selectpicker({iconBase:'',tickIcon:'fa fa-check'});});$(document).on('init_pricerange','.multiple-range',function(){var elm=this,jelm=$(this),jrange=jelm.find('.range-holder'),data=jrange.data();if(elm.initialized)
return;elm.slider=jrange.slider({orientation:'horizontal',tooltip:'show',tooltip_position:'bottom',range:true,step:parseInt(data.step),min:parseInt(data.min),max:parseInt(data.max),ticks:$.currentScreen2&&$.currentScreen2=='mobile'?data.mobileTicks:data.ticks,ticks_labels:$.currentScreen2&&$.currentScreen2=='mobile'?data.mobileTicksLabels:data.ticksLabels,ticks_position:$.currentScreen2&&$.currentScreen2=='mobile'?data.mobileTicksPositions:data.ticksPositions,ticks_snap_bounds:parseInt(data.snap),value:[data.valueMin,data.valueMax],formatter:function(value){if(typeof value=='object'){return'Từ '+$.moneyFormatter.to(value[0])+' đến '+(value[1]>=parseInt(data.max)?'>'+$.moneyFormatter.to(data.max):$.moneyFormatter.to(value[1]));}else{return $.moneyFormatter.to(value);}}}).on('change',function(e){if(data.inputMinSelector){jelm.find(data.inputMinSelector).removeAttr('disabled').val(e.value.newValue[0]);if(e.value.newValue[0]==data.min){jelm.find(data.inputMinSelector).attr('disabled','disabled')}}
if(data.inputMaxSelector){jelm.find(data.inputMaxSelector).removeAttr('disabled').val(e.value.newValue[1]);if(e.value.newValue[1]==data.max){jelm.find(data.inputMaxSelector).attr('disabled','disabled')}}}).on('slideStop',function(e){jelm.trigger('changed');});jelm.on('reset',function(){elm.slider.slider('setValue',[data.min,data.max],true,true);jelm.trigger('changed');});elm.initialized=true;});$('.multiple-range').trigger('init_pricerange');$('.stars').each(function(){var jelm=$(this),data=jelm.data();if(data.stars){for(var i=0;i<parseInt(data.stars);i++){jelm.append('<span class="stars__star star star--on"><i class="hd hd-star"></i></span>');}}});$('.datepicker').each(function(){var jelm=$(this),data=jelm.data();var options={dayViewHeaderFormat:'MM / YYYY',icons:{time:'fa fa-clock-o',date:'fa fa-calendar',up:'fa fa-chevron-up',down:'fa fa-chevron-down',previous:'fa fa-chevron-left',next:'fa fa-chevron-right',today:'fa fa-crosshairs',clear:'fa fa-trash'},singleDatePicker:true,showDropdowns:true,showTodayButton:true,showClear:true,showClose:true,format:'DD/MM/YYYY'};options=$.extend({},data,options);jelm.daterangepicker(options);jelm.on('apply.daterangepicker',function(ev,picker){jelm.find('input').val(picker.startDate.format('DD/MM/YYYY'));jelm.find('input').trigger('change');jelm.parents('form').formValidation('revalidateField',jelm.find('input').attr('name'));});});initDateRangePicker();$('.main-nav__branding').hoverIntent(function(){$(this).toggleClass('hover');if($(this).closest('.sticky-header').length){if($('.menu-overlay').length){$('.menu-overlay').remove();}else{$("body").append('<div class="menu-overlay" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 7;"></div>');}}});$('.promo-slider').each(function(){var jelm=$(this),jslides=jelm.find('.promo-slider__slides');jelm.append('<div class="promo-slider__pager"></div>');jslides.find('> .slider-item').each(function(){var jbg=$(this).find('img:eq(0)');$(this).data('width',jbg.width());});jslides.cycle({fx:'fade',timeout:8000,delay:1000,swipe:true,swipeFx:'scrollHorz',slides:'> .slider-item',pager:jelm.find('.promo-slider__pager'),pagerActiveClass:'active',prev:jelm.find('.btn-prev'),next:jelm.find('.btn-next'),pagerTemplate:'<a><i class="fa fa-circle"></i></a>','pause-on-hover':true});jslides.find('> .slider-item').on('prepare.layerslider',function(e){var jitem=$(this);jitem.find(".layer-elm").each(function(){var from_offset=($(this).attr("layer-offset-from")+"").split("|");var delay=parseInt($(this).attr("layer-delay"));$(this).css({opacity:0,left:parseInt(from_offset[0]),top:parseInt(from_offset[1])});});}).on('run.layerslider',function(e){var jitem=$(this);jitem.find(".layer-elm").each(function(){var delay=parseInt($(this).attr("layer-delay"));var elm=this;setTimeout(function(){js_animate(elm);},delay);});}).eq(0).trigger('prepare.layerslider').trigger('run.layerslider');jslides.on('cycle-before',function(event,optionHash,outgoingSlideEl,incomingSlideEl,forwardFlag){$(incomingSlideEl).trigger('prepare.layerslider');}).on('cycle-after',function(event,optionHash,outgoingSlideEl,incomingSlideEl,forwardFlag){$(incomingSlideEl).trigger('run.layerslider');});$(window).on('resize',function(){var _w=jelm.width();jslides.find('> .slider-item').each(function(){var _ow=jelm.data('width')?parseInt(jelm.data('width')):690;if(jelm.data('scale')=='no'){return;}
$(this).css('transform','scale('+(_w/_ow)+')');});});});$('.media-gallery').each(function(){var jelm=$(this),data=jelm.data();jelm.find('> a').on('click',function(){return false;});});$('.media-link').each(function(){var data=$(this).data();switch(data.type){case'video':data.type='iframe';data.closeOnBgClick=false;break;case'map':data.type='iframe';data.closeOnBgClick=false;data.mainClass='mfp-map';break;default:case'image':data.type='image';if(data.zoomEnabled){data.zoom={enabled:true,duration:data.zoomDuration?datazoomDuration:300};data.mainClass='mfp-with-zoom';data.fixedContentPos=true;}else{data.mainClass='mfp-fade';}
break;}
$(this).magnificPopup(data);});$('.gallery').each(function(){var jelm=$(this),jslides=jelm.find('.gallery__image'),jthumbs=jelm.find('.gallery__thumbnails'),jcarousel=false,data=jelm.data();if(data.thumbnailId){jthumbs=$('#'+data.thumbnailId);}
if(jthumbs.length){jthumbs.wrapInner('<div class="thumbs-carousel"></div>');jcarousel=jthumbs.find('.thumbs-carousel');}
jslides.owlCarousel({animateOut:'fadeOut',animateIn:'fadeIn',singleItem:true,lazyLoad:true,slideSpeed:400,pagination:false,itemsScaleUp:true,addClassActive:true,afterAction:function(el){var current=this.currentItem;jcarousel.find(".owl-item").removeClass("active").eq(current).addClass("active");if(jcarousel.data("owlCarousel")!==undefined){var owl=jcarousel.data("owlCarousel").owl;var sync2visible=jcarousel.data("owlCarousel").owl.visibleItems;if(owl.userOptions.itemsMobile&&$(window).width()<owl.userOptions.itemsMobile[0]){sync2visible=sync2visible.slice(Math.floor(owl.currentItem),Math.floor(owl.currentItem)+parseInt(owl.userOptions.itemsMobile[1]));}
var num=current;var found=false;for(var i in sync2visible){if(num===sync2visible[i]){var found=true;}}
if(found===false){if(num>sync2visible[sync2visible.length-1]){jcarousel.trigger("owl.goTo",num-sync2visible.length+2);}else{if(num-1===-1){num=0;}
jcarousel.trigger("owl.goTo",num);}}else if(num===sync2visible[sync2visible.length-1]){jcarousel.trigger("owl.goTo",sync2visible[1])}else if(num===sync2visible[0]){jcarousel.trigger("owl.goTo",num-1)}}},responsiveRefreshRate:200});if(jslides.length&&jthumbs.length){jcarousel.owlCarousel({items:parseInt(data.maxThumbs),center:data.center?true:false,itemsMobile:[767,6.4],navigation:false,pagination:false,responsiveRefreshRate:100,afterInit:function(el){el.find(".owl-item").eq(0).addClass("active");var wrapperWidth=el.find('.owl-item').length*el.find('.owl-item').eq(0).width();if($(window).width()<1199&&wrapperWidth<$(window).width()){el.find('.owl-wrapper-outer').width(wrapperWidth);}}});jcarousel.append('<a class="btn btn--prev"><i class="hd hd-angle-down"></i></a>');jcarousel.append('<a class="btn btn--next"><i class="hd hd-angle-down"></i></a>');jcarousel.on("click",".owl-item",function(e){e.preventDefault();var number=$(this).data("owlItem");jslides.trigger("owl.goTo",number);}).on('click','.btn--prev',function(e){e.preventDefault();jslides.trigger('owl.prev');}).on('click','.btn--next',function(e){e.preventDefault();jslides.trigger('owl.next');});}});$(document).on('click',".toggle-filter",function(e,no_ani){$(this).closest('.filter').toggleClass('collasped').find('.filter__body').slideToggle(no_ani?0:'fast','easeOutCubic');return false;}).on('click','.filter__title',function(){$(this).find('.toggle-filter').trigger('click');});$(document).on('init_filter','.product-filters',function(){var elm=this,jelm=$(elm),data=jelm.data(),jcontainer=$(data.mainContainer),jfilters=jelm.find('.filter'),jsortings=$(data.sortContainer),jsidebar=jcontainer.find('#category_sidebar'),jcontent=jcontainer.find('#category_content');elm.autoSubmit=true;elm.forceSubmit=false;if(elm.filter_initialized)
return;jelm.on('autoSubmit',function(){if(elm.autoSubmit||elm.forceSubmit){jelm.trigger('submit');jelm.forceSubmit=false;}}).on('submit',function(){var url,keys_path=[],slugs_path=[],query_str={};jelm.find(':checkbox, :radio').filter(':checked').each(function(){var self=$(this),k=self.attr('name'),v=self.attr('value'),p=self.data('slug');keys_path.push(k+v);slugs_path.push(p);});jelm.find(':text:enabled[name]').each(function(){var self=$(this);query_str[self.attr('name')]=self.val();});jsortings.find('.sorting--active').each(function(){var self=$(this);if(self.data('field')&&self.data('sort')){query_str['field']=self.data('field');query_str['sort']=self.data('sort');}});url=data.urlPrefix;var test=false;if(slugs_path.length){url+=slugs_path.join('-');test=true;}
if(keys_path.length){url+=(slugs_path.length?'_':'')+keys_path.join('.');test=true;}
if(test)
url+='/';if(query_str){url+='?'+$.param(query_str);}
$.ajax({url:url,data:{},beforeSend:function(){jcontainer.addClass('loading');showLoading();},complete:function(){jcontainer.removeClass('loading');hideLoading();},success:function(html){jsidebar.html($(html).find(data.mainContainer).find('#category_sidebar').html());jcontent.html($(html).find(data.mainContainer).find('#category_content').html());jcontainer.find('.product-filters').trigger('init_filter');jcontainer.find('div.pagination').trigger('init_pagination');jsortings.html($(html).find(data.sortContainer).html());history.pushState({},null,url);revalidateLazy();}});}).on('resetFilters',function(){jfilters.find('.filter__button').trigger('resetState');jfilters.trigger('updateActiveItems');}).on('clearFilters',function(){jfilters.filter(':not(.filter--listing)').find('.filter__button').trigger('clearState');});jfilters.each(function(){var jfilter=$(this),jactive=$('<div class="filter-active-items"></div>"'),jfilter_items=jfilter.find('.filter__button'),jfilter_body=jfilter.find('.filter__body');jactive.insertAfter(jfilter.find('.filter__title'));jfilter.on('updateActiveItems',function(){jactive.html('');jfilter_items.each(function(){var jclone=$(this).clone();if(jclone.hasClass('active')){jclone.find('span').remove();jactive.append('<span>'+jclone.text().trim()+'</span>');}});}).trigger('updateActiveItems');if(!jfilter.hasClass('filter--listing')){if(jfilter.find('.filter__button').length>20){var suffixId=Math.round(Math.random()*9999999999);if(jfilter_body.find('.filter__wrapper').length){jfilter_body.find('.filter__wrapper').attr('id','Content'+suffixId);}else{jfilter_body.wrapInner('<div class="filter__wrapper" id="Content'+suffixId+'">');}
jfilter_body.prepend('<input class="form-control" type="search" id="Search'+suffixId+'">');new Jets({searchTag:'#Search'+suffixId,contentTag:'#Content'+suffixId,manualContentHandling:function(tag){var text=$(tag).text();return fn_khongdau(text)+' '+text;}})}}
jfilter_items.each(function(){var filter_item=this,jfilter_item=$(filter_item);filter_item.originalState=jfilter_item.hasClass('active');if(jfilter_item.hasClass('active')){var jtarget=$('#current-filter-tag'),jclone=jfilter_item.clone();jclone.one('click',function(e){e.stopPropagation();e.preventDefault();jfilter_item.trigger('clearState');});jclone.find('ul').remove();if(jclone.find('a').length){jclone.find('a').append('<i class="hd hd-remove"></i>');}else{jclone.append('<i class="hd hd-remove"></i>')}
jclone.find('span').remove();jtarget.append(jclone);jtarget.closest('.current-filter').removeClass('hidden');}
jfilter_item.on('change',':checkbox, :radio',function(){if($(this).is(':checked')){jfilter_item.addClass('active');}else{jfilter_item.removeClass('active');}
if($(this).is(':radio')){elm.forceSubmit=true;}
jfilter.trigger('updateActiveItems');jelm.trigger('autoSubmit');}).on('clearState',function(){jfilter_item.find(':checkbox, :radio').prop('checked',false).trigger('change');}).on('resetState',function(){if(jfilter_item.find(':checkbox, :radio').prop('checked')!=filter_item.originalState)
jfilter_item.find(':checkbox, :radio').prop('checked',filter_item.originalState).trigger('change');});});jfilter.find('.multiple-range').each(function(){var jfilter_item=$(this),jtarget=$('#current-filter-tag'),jclone;jfilter_item.on('changed',function(){jelm.trigger('autoSubmit');});if(jfilter_item.find(':text:enabled').length){jclone=$('<label class="filter__button active"> <i class="hd hd-remove"></i></label>');jclone.prepend('Giá '
+(jfilter_item.find('.priceMin').is(':enabled')?' từ '+$.moneyFormatter.to(parseInt(jfilter_item.find('.priceMin').val())):'')
+(jfilter_item.find('.priceMax').is(':enabled')?' đến '+$.moneyFormatter.to(parseInt(jfilter_item.find('.priceMax').val())):''));jclone.one('click',function(){jfilter_item.trigger('reset');});jtarget.append(jclone);}});});jsortings.on('click','.sorting',function(e){e.preventDefault();var self=$(this);jsortings.find('.sorting').removeClass('sorting--active');self.addClass('sorting--active');jelm.trigger('autoSubmit');});jcontainer.find('.multiple-range').trigger('init_pricerange');jcontainer.find('.timer-countdown').trigger('init_timer');elm.filter_initialized=true;});$('.tabs').each(function(){var jelm=$(this),jtab=jelm.find('.tabs__nav'),distance=jelm.data('distance')?parseInt(jelm.data('distance')):50;jtab.on('click.tabs--sticky','a',function(e){var self=$(this);e.preventDefault();var id=$(this).attr('href');$('html, body').animate({scrollTop:$(id).offset().top-distance},500,function(){});});});$('.tabs--floating-nav').each(function(){var jelm=$(this),jtab=jelm.find('.tabs__nav'),jcontent=jelm.find('.tabs__content'),distance=jelm.data('distance')?parseInt(jelm.data('distance')):50;jtab.on('changestate.tabs--floating-nav','a',function(e){jtab.find('> .active').removeClass('active');$(this).parent().addClass('active');});jcontent.on('shown.tabs--floating-nav','> *',function(){var self_id=$(this).attr('id');jtab.find('a[href="#'+self_id+'"]').trigger('changestate.tabs--floating-nav');});$(window).on('resize.tabs--floating-nav',function(){jtab.width(jelm.width());}).trigger('resize.tabs--floating-nav');$(window).on('scroll.tabs--floating-nav',function(){var windowScrollTop=$(window).scrollTop();var elmScrollTop=jelm.offset().top;var elmHeight=jelm.height();var screenHeight=$(window).height();var navRelPos=windowScrollTop-elmScrollTop;navRelPos=navRelPos>0?navRelPos:0;if(navRelPos>0){if(navRelPos<elmHeight-screenHeight/2){jtab.css('top',0).addClass('tabs__nav--floating');}else{jtab.css('top',elmHeight-screenHeight/2).removeClass('tabs__nav--floating');}}else{jtab.removeClass('tabs__nav--floating');}
jcontent.find('> *').each(function(){var selfRelPos=$(this).offset().top-elmScrollTop;if(navRelPos>selfRelPos-(distance*1.5)){$(this).trigger('shown.tabs--floating-nav');}});});setTimeout(function(){$(window).trigger('scroll.tabs--floating-nav');},500);});$('.size-selection').each(function(){var jelm=$(this),jtarget=null;if(jelm.data().targetId){jtarget=$('#'+jelm.data().targetId);jelm.find('.btn > input').on('change',function(){var filter=$(this).attr('id');jtarget.find('.product--variant').hide().removeClass('active');jtarget.find('.product--variant[data-size="'+filter+'"]').show().addClass('active');jtarget.find('.nano').trigger('refresh');});}
jelm.find(':checked').trigger('change');});$('.product--variant').each(function(){var jelm=$(this),data=jelm.data();if(data.imageId){jelm.on('click',function(){$('.'+data.imageId).trigger('click');});}});$('.table--scroll').each(function(){var jelm=$(this),data=jelm.data();var jclone=jelm.clone();jclone.find('tr:gt(0)').remove();jclone.insertBefore(jelm);jelm.find('tr:eq(0)').css({visibility:'hidden'});var scrollable_div=$('<div class="nano table-nano skin--slim"></div>');scrollable_div.css(data);jelm.wrap(scrollable_div);});$('.nano').each(function(){var jelm=$(this);if(jelm.find('> .viewport').length===0){jelm.find('> *').wrapAll('<div class="viewport"><div class="overview"></div></div>');}
if(jelm.find('> .scrollbar').length===0){jelm.prepend('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>');}
var maxHeight=parseInt(jelm.css('maxHeight'));if(jelm.find('.overview').height()>maxHeight){jelm.find('.viewport').css('height',maxHeight);}else{jelm.find('.viewport').css('height',jelm.find('.overview').height());}
jelm.tinyscrollbar({touchLock:jelm.data('touch-lock')?true:false});jelm.on('refresh',function(){var maxHeight=parseInt(jelm.css('maxHeight'));if(jelm.find('.overview').height()>maxHeight){jelm.find('.viewport').css('height',maxHeight);}
$(window).trigger('resize.refresh');}).trigger('refresh');});$('.dropdown-cart a.btn-close').on('click',function(e){e.stopPropagation();$(this).parents('.minicart__item').fadeOut('fast',function(){$(this).remove();});});$(document).on('init_form_validator','form',function(){var jelm=$(this),data=jelm.data();if(jelm.data('formValidation')){jelm.formValidation('destroy');}
var options={framework:'bootstrap',err:{container:'popover'},icon:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'}};options=$.extend({},options,data);jelm.formValidation(options).on('err.field.fv',function(e,data){if(!data)
return false;var $icon=data.element.data('fv.icon'),options=$icon.data('bs.popover').options;options.placement=function(tip,el){var $tip=$(tip);var placement='right';$tip.detach().css({top:0,left:0,display:'block'}).addClass(placement).data('bs.'+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var orgPlacement=placement
var $container=this.options.container?$(this.options.container):this.$element.parent();var containerDim=this.getPosition($container);placement=placement=='right'&&pos.right+actualWidth>containerDim.width?'bottom':placement;$tip.detach();$tip.removeClass(orgPlacement);return placement;}
options.trigger='click hover focus';$icon.popover('destroy');$icon.popover(options);}).on('success.field.fv',function(e,data){if(data.element.val()===''){var $parent=data.element.parents('.form-group');$parent.removeClass('has-success');data.element.data('fv.icon').hide();}});});$('[data-toggle="validator"]').trigger('init_form_validator');$('img.svg').svgInject();$('[rel="popover"]').each(function(){var jelm=$(this);jelm.popover({container:jelm.parent().attr('id')?'#'+jelm.parent().attr('id'):'body',html:true,content:function(){var clone=$(jelm.data('popover-content')).clone(true).removeClass('hide');return clone;}});});$('.combination').each(function(){var jelm=$(this),joptions=jelm.find('option'),data=jelm.data(),combination=data.combination;jelm.on('change',function(){var jselected=jelm.find(':selected');$('.'+combination).switchAvailability(false,true);if(jselected.length&&jselected.val()!=''){$('#'+combination+'-'+jselected.val()).removeClass('hidden availability-off');}});}).trigger('change');$('.editable-section').each(function(){var jelm=$(this),data=jelm.data();jelm.on('click','.button-edit',function(){jelm.trigger('edit.editable');}).on('click','.button-cancel',function(){jelm.trigger('cancel.editable');}).on('click','.button-save',function(){jelm.trigger('save.editable');});jelm.on('edit.editable',function(){jelm.addClass('editing').switchAvailability(true,true);}).on('cancel.editable',function(){if(jelm.hasClass('cancel-validation')){var fv=jelm.closest('form').data('formValidation');fv.validateContainer(jelm);if(!fv.isValidContainer(jelm)){return false;}}
jelm.removeClass('editing').switchAvailability(false,true).removeClass('availability-off');}).on('save.editable',function(e,callback){var fv=jelm.closest('form').data('formValidation');fv.validateContainer(jelm);if(fv.isValidContainer(jelm)){fv.resetForm();jelm.find('.editable').each(function(){var jtext=$(this).find('.text'),jinput=$(this).find('.input :input');if(jinput.is('select')){jtext.text(jinput.find(':selected').text());}else if(jinput.is(':radio')||jinput.is(':checkbox')){jtext.text(jinput.filter(':checked').closest('label').text());}else{jtext.text(jinput.val());}});if(data.submitUrl){var _data=jelm.find(':input').serialize();$.ajax({url:data.submitUrl,data:_data,type:'post',dataType:'json',success:function(r){if(r.error==0){jelm.removeClass('editing availability-on cancel-disabled cancel-validation').switchAvailability(false,true);if(r.data&&r.data.need_reload){window.location.reload();}
if(typeof callback==="function"){callback(r.data);}
jelm.trigger('saveSuccess.editable',[jelm,r]);}else{showAlert('Có lỗi xảy ra!',r.message,'error');}}});}else{jelm.removeClass('editing availability-on');}}else{showAlert('Báo lỗi!',data.errorMessage?data.errorMessage:'Quý khách vui lòng điền đầy đủ thông tin địa chỉ giao hàng.','error');}});if(jelm.hasClass('editing')){jelm.trigger('edit.editable');}});$(document).on('click','.btn-select-address',function(e,select_only){e.preventDefault();$('.editable-section').trigger('cancel.editable');var jelm=$(this),jaddress_box=jelm.closest('.address-box'),address_id=jaddress_box.data('addressId');$('#address_id').val(address_id);$('.address-box.selected').removeClass('selected');jaddress_box.addClass('selected');if(typeof(select_only)=='undefined'||!select_only){$('#btn--buy-now').trigger('click');}}).on('click','.btn-edit-address',function(e){e.preventDefault();var jelm=$(this),jaddress_box=jelm.closest('.address-box'),address_id=jaddress_box.data('addressId');$('.address-edit.editing .button-cancel').trigger('click');$(jaddress_box.data('targetId')).unbind('saveSuccess.editable').on('saveSuccess.editable',function(ev,el,response){$('html, body').animate({scrollTop:jaddress_box.offset().top},1000);var new_address_box=$(RenderTemplate('address-box',response.data.data.address));jaddress_box.replaceWith(new_address_box);jaddress_box=new_address_box;jaddress_box.find('.btn-select-address').trigger('click',[true]);}).trigger('edit.editable');$('html, body').animate({scrollTop:$(jaddress_box.data('targetId')).offset().top});}).on('click','.btn-add-address',function(e){e.preventDefault();e.preventDefault();var jelm=$(this),jaddress_box=jelm.closest('.address-box');$('.address-edit.editing .button-cancel').trigger('click');$('#address-edit-').unbind('saveSuccess.editable').on('saveSuccess.editable',function(ev,el,response){$('html, body').animate({scrollTop:jaddress_box.offset().top},1000);var new_address_box=$(RenderTemplate('address-box',response.data.data.address));jaddress_box.replaceWith(new_address_box);jaddress_box=new_address_box;jaddress_box.find('.btn-select-address').trigger('click');}).trigger('edit.editable');$('html, body').animate({scrollTop:$('#address-edit-').offset().top});}).on('click','.btn-delete-address',function(e){e.preventDefault();var jelm=$(this),jaddress_box=jelm.closest('.address-box'),address_id=jaddress_box.data('addressId'),deleteUrl=jelm.data('deleteUrl');showConfirm({text:'Bạn có chắc chắn muốn xóa địa chỉ này?',callback:function(element,confirm){if(confirm){$.ajax({url:deleteUrl,type:'post',data:{address_id:address_id},dataType:'json',success:function(r){if(r.error){showAlert('Lỗi',r.message,'error');}else{showAlert('Thành công',r.message,'success');if(jaddress_box.hasClass('selected')){if($('.address-box').length>1){$('.address-box').not(jaddress_box).first().addClass('selected');}else{$('#address_id').val('');jaddress_box.closest('.address-container').removeClass('has-address');}}
jaddress_box.parent().remove();$(jaddress_box.data('targetId')).remove();}}});}}});});if($('.address-container').length&&!$('.address-container').hasClass('has-address')){$('.btn-add-address').trigger('click');}
$('.form-blocking').on('submit',function(){var frmValid=$(this).data('formValidation');if(!frmValid||frmValid.isValid()){if($('body').find('.page-loading').length==0){$('body').append('<div class="page-loading">');}}});$.blazy=new Blazy({selector:'img.lazy',offset:$(window).height(),src:'data-original',breakpoints:[{width:480,src:'data-src-mobile'}]});var jbuyreal=$('#btn--buy-now');if($(window).width()<$.screens.mobile[1]){if(jbuyreal.length>0){var jbuynow=$('<div></div>').append(jbuyreal.clone().attr('id','btn--buy-now-2').addClass('btn-block btn-lg'));jbuynow.css({position:'fixed',zIndex:910,bottom:0,right:0,left:0,background:'#fff',borderTop:'1px solid #dfdfdf',padding:'8px 10px'}).appendTo('body').hide();jbuynow.find(".btn").on('click',function(){jbuyreal.trigger('click');});$(window).on('scroll',function(){if($(window).scrollTop()>jbuyreal.offset().top){jbuynow.show();}else{jbuynow.hide();}});}}
$('.image-uploader').each(function(){var jelm=$(this),data=jelm.data(),jpreview=jelm.find('.preview'),jform=jelm.closest('form'),jbtn_add=jelm.find('.button-add');jbtn_add.attr('id','upload-button-'+Math.round(Math.random()*100000));var options={previewsContainer:jpreview.get(0),thumbnailWidth:75,thumbnailHeight:75,acceptedFiles:'image/*',addRemoveLinks:true,dictRemoveFile:'x',headers:{'Cache-Control':null,'X-Requested-With':null},init:function(){this.on('queuecomplete',function(){jform.addClass('upload-completed');});this.on('success',function(file,r){if(r.error==0){jelm.append('<input type="hidden" name="'+data.imageName+'[]" value="'+r.data+'" />');}});}};options=$.extend({},options,data);jbtn_add.dropzone(options);});$('.branding__menu').menuAim({activate:function(row){$(row).addClass('nav-active');},deactivate:function(row){$(row).removeClass('nav-active');},exitMenu:function(){return true;}});$('.product-well').each(function(){var jelm=$(this);$('.btn--view-more').on('click',function(){jelm.toggleClass('expanded');});});$('[data-toggle="box-link"]').on('click',function(e){switch(e.which){case 1:var jelm=$(this),url=jelm.data('url'),target=jelm.data('target');if(target=='_blank'||e.ctrlKey){window.open(url,'_blank');}else{window.location.href=url;}
break;}});$('.block--tab').each(function(){var jelm=$(this),jtab=jelm.find('.tab');jtab.on('shown.bs.tab',function(){var jitem_active=jtab.find('.active a');if(jitem_active.data('url')){jelm.find('.block__more').show().attr('href',jitem_active.data('url')).find('span').text(jitem_active.data('title'));}else{jelm.find('.block__more').hide();}});});$('.products').on('init_swipe',function(e,params){$(this).each(function(){var elm=this,jelm=$(elm);if(jelm.find('.products__inner').length==0){jelm.wrapInner('<div class="products__inner"></div>');}
elm.productsCarousel=new Swiper(elm,{direction:'horizontal',wrapperClass:'products__inner',slideClass:'product-wrapper',slidesPerView:'auto',preventClicks:false,preventClicksPropagation:false,spaceBetween:typeof(params)!=='undefined'?params.productsSpaceBetween:0,observer:true,freeMode:true,onSliderMove:function(){revalidateLazy();},onInit:function(){revalidateLazy();}});jelm.on('swipe_left',function(){elm.productsCarousel.slidePrev();}).on('swipe_right',function(){elm.productsCarousel.slideNext();});});}).on('update_swipe',function(){var elm=this;if(elm.productsCarousel){elm.productsCarousel.update();}});var responsiveOnResize=function(){for(scr in $.screens){var w=$.screens[scr];if($.currentScreen!=scr&&$(window).width()>=w[0]&&$(window).width()<w[1]){$.currentScreen=scr;switch($.currentScreen){case'mobile':init_mobile();break;case'tablet':init_tablet();break;case'desktop':init_desktop();break;}}}
$('.hd-menu .nano').css('maxHeight',$(window).height()).trigger('refresh');};responsiveOnResize();$(window).on('resize',function(){responsiveOnResize();});$('.hd-menu .nano').css('maxHeight',$(window).height()).trigger('refresh');if($('.product-filters').length){$('.product-filters').each(function(){$(this).trigger('init_filter');});}else{$('.category-header-filter-button').css('visibility','hidden');}})(jQuery);function init_desktop(params){params=$.extend({},{initProductsCarousel:false,initProductDetailsTab:false},params);if(!params.initProductsCarousel){$('.products--mobile').removeClass('products--mobile');}}
function init_tablet(params){params=$.extend({},{brandingSpaceBetween:10,initProductsCarousel:true,productsSpaceBetween:0,initProductDetailsTab:true},params);init_mobile(params);}
function init_mobile(params){params=$.extend({},{brandingSpaceBetween:7,initProductsCarousel:true,productsSpaceBetween:0,initProductDetailsTab:true},params);if($('.page-home').length&&$('.m-branding').length==0){var jmenu=$('#main-nav').find('.branding__menu').clone(true);jmenu.find('.submenu-wrapper').remove();jmenu.insertAfter('#promo-banners').wrap('<div class="m-branding visible-xs visible-sm"></div>');$.brandingCarousel=new Swiper('.m-branding',{direction:'horizontal',wrapperClass:'branding__menu',slideClass:'branding__item',slidesPerView:'auto',spaceBetween:params.brandingSpaceBetween});}
if(params.initProductsCarousel){$('.products--mobile').trigger('init_swipe',[params]);}else{$('.products--mobile').removeClass('products--mobile');}
window.prevScrollTop=$(window).scrollTop();$(window).on('scroll',function(){var jheader=$('.header__main'),i=$(window).scrollTop();if(jheader.hasClass('header__main--simple'))
return;i>jheader.innerHeight()?jheader.addClass("on-scroll"):i<=jheader.innerHeight()&&jheader.removeClass('on-scroll');i>window.prevScrollTop+20?(jheader.removeClass("on-scroll-up"),window.prevScrollTop=i):i<window.prevScrollTop-20&&(jheader.addClass("on-scroll-up"),window.prevScrollTop=i);});$('.toggle-nav').unbind('click').on('click',function(e){e.preventDefault();var jelm=$(this),jcontainer=$(jelm.data('target'));jcontainer.addClass(jelm.data('effect')).toggleClass('hd-menu-open');$('html').toggleClass('state-sidebar');});$('.toggle-search').unbind('click').on('click',function(e){e.preventDefault();var jelm=$(this),jtarget=$(jelm.data('target'));console.log(jtarget);jtarget.find('input').trigger('start_search');});$.filterToggleStates=[];$(document).on('init_filter','.product-filters',function(){var elm=this,jelm=$(this),jcontext=$('<div class="context-sidebar"></div>');elm.autoSubmit=false;$(this).find('.toggle-filter:gt(0)').trigger('click',[true]);jcontext.appendTo('body');jcontext.append(jelm);jcontext.prepend('<div class="nav"><a class="btn context-close"><i class="fa fa-angle-double-left"></i> Quay lại</a> Bộ lọc</div>');jcontext.append('<div class="nav-bottom"><a class="btn btn-success btn-apply">Áp dụng</a><a class="btn btn-default btn-reset">Xóa tất cả</a></div>');$('.filters-toggle').unbind('click').on('click',function(e){$('html').toggleClass('state-filter');});$('.context-close').unbind('click').on('click',function(e){$('html').toggleClass('state-filter');jelm.trigger('resetFilters');});jcontext.find('.btn-apply').on('click',function(){jelm.trigger('submit');$('html').toggleClass('state-filter');});jcontext.find('.btn-reset').on('click',function(){jelm.trigger('clearFilters');});});$('.hd-touch-layer').on('click swipeLeft.cycle swipeleft.cycle',function(e){$('.toggle-nav').eq(0).trigger('click');});if(params.initProductDetailsTab){$('#product-details').each(function(){var jelm=$(this),jpanes=jelm.find('.tab-content > .tab-pane');jpanes.each(function(){var jpane=$(this),jhandler=jpane.find('.block__title'),jcontent=jpane.find('.block__content');jhandler.on('click',function(){if(jpane.hasClass('collapsed')){jpane.removeClass('collapsed');jcontent.slideDown('medium');}else{jpane.addClass('collapsed');jcontent.slideUp('medium');}}).trigger('click');});jpanes.eq(2).find('.block__title').trigger('click');});}
$(document).on('init_pagination','div.pagination',function(){var elm=this,jelm=$(this),id=jelm.attr('id'),distance=jelm.data('distance'),target=jelm.data('target'),jtarget=$(target);if(elm.initialized)
return;$(window).unbind('scroll.infinitescroll').on('scroll.infinitescroll',function(){if(!jelm.data('loading')&&($(window).scrollTop()+$(window).height()+distance>jelm.offset().top)){jelm.data('loading',true);var jnums=jelm.find('.page-number'),jnums_next=jnums.filter('.active:last').next('.page-number');if(jnums_next.length==0){$(window).unbind('scroll.infinitescroll');jelm.data('loading',false);jelm.addClass('done');return true;}
$.ajax({url:jnums_next.find('a').attr('href'),type:'GET',dataType:'html'}).done(function(data){var jresponse=$(data);jelm.data('loading',false);jtarget.append(jresponse.find(target).html());revalidateLazy();var jnew=jresponse.find('#'+id);jelm.replaceWith(jnew);jelm=jnew;}).fail(function(data){$(window).unbind('scroll.infinitescroll');jelm.data('loading',false);jelm.addClass('done fail');});}});elm.initialized=true;});$("div.pagination").trigger('init_pagination');$('.block--tab').each(function(){var elm=this,jelm=$(this),jtab=jelm.find('.tab'),jitems=jtab.find('.tab__item');var custom_block=jelm.find('.block__title_custom');jelm.addClass('tab-carousel');elm.tabsCarousel=new Swiper(jelm.find('.block__tab').get(0),{direction:'horizontal',wrapperClass:'tab',slideClass:'tab__item',slidesPerView:'auto'});if(custom_block.length==0){elm.tabsCarousel.slideTo(jitems.index(jitems.filter('.active'))-1);}
jtab.on('shown.bs.tab',function(){jelm.find('.products').trigger('update_swipe');});});$('.wysiwyg iframe').each(function(){$(this).wrap('<div class="iframe-wrapper"></div>');});$('.footer-menu .menu__heading').on('click',function(){$(this).toggleClass('expanded');$(this).siblings('.menu__listing').toggleClass('expanded');});}
function fn_khongdau(str){str=str.toLowerCase();str=str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a");str=str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e");str=str.replace(/ì|í|ị|ỉ|ĩ/g,"i");str=str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o");str=str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u");str=str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y");str=str.replace(/đ/g,"d");str=str.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-");str=str.replace(/-+-/g," ");str=str.replace(/^\-+|\-+$/g,"");str=str.replace('-',' ');return str;}
function revalidateLazy(){$.blazy.revalidate();setTimeout(function(){$.blazy.revalidate();},400);setTimeout(function(){$.blazy.revalidate();},1000);}
function js_animate(elm){var to_offset=($(elm).attr("layer-offset-to")+"").split("|");var time=parseInt($(elm).attr("layer-time"));$(elm).animate({left:parseInt(to_offset[0]),top:parseInt(to_offset[1]),opacity:1},time);}
function showLoading(){if($('body').find('.page-loading').length==0){$('body').append('<div class="page-loading">');}}
function hideLoading(){$('.page-loading').remove();}
function initDateRangePicker(){$('.datepicker--range').each(function(){var jelm=$(this),jstart,jend,grp=jelm.attr('rel'),data=jelm.data();if(jelm.hasClass('datepicker--range-start')){jstart=jelm;jend=$('.datepicker--range-end[rel="'+grp+'"]');var options={icons:{time:'fa fa-clock-o',date:'fa fa-calendar',up:'fa fa-chevron-up',down:'fa fa-chevron-down',previous:'fa fa-chevron-left',next:'fa fa-chevron-right',today:'fa fa-crosshairs',clear:'fa fa-trash'},singleDatePicker:true,showDropdowns:true,showTodayButton:true,showClear:true,showClose:true,locale:{format:'DD/MM/YYYY'},format:'DD/MM/YYYY',widgetPositioning:{vertical:'bottom'},};if(typeof $startDate!='undefined'&&$endDate){options.minDate=$startDate;}
if(typeof $endDate!='undefined'&&$endDate){options.maxDate=$endDate;}
if(typeof $departureDate!='undefined'&&$departureDate){options.enabledDates=$departureDate;}
options=$.extend({},data,options);$(jstart).daterangepicker(options);var optionsJend=options;optionsJend.minDate=moment(options.minDate,'DD/MM/YYYY').add(1,'day').format('DD/MM/YYYY');$(jend).daterangepicker(optionsJend);jstart.on('dp.change',function(){jend.data("DateTimePicker").minDate(jstart.val());});jstart.on('apply.daterangepicker',function(ev,picker){minReturnDate=moment(jstart.val(),'DD/MM/YYYY').add(1,'day');options.minDate=moment(minReturnDate).format('DD/MM/YYYY');jend.daterangepicker(options);});}});}
function isiPhone(){return((navigator.platform.indexOf("iPhone")!=-1)||(navigator.platform.indexOf("iPod")!=-1));}
function unformat_number(str){return str.replace(/\,/g,'');}
var numNight,inventories;var slotAvailable=null;var resultDateDeal=null;function checkInventories(currentDate,loadFirstTime){var disable=false;slotAvailable=null;var date=new Date(currentDate);for(var i=0;i<numNight;i++){var returnedData=$.grep(inventories,function(element){return element.at==currentDate;});var newDate=new Date(date.setDate(date.getDate()+1)),month=''+(newDate.getMonth()+1),day=''+newDate.getDate(),year=''+newDate.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;currentDate=[year,month,day].join('-');if(returnedData.length==0||parseInt(returnedData[0]['qty'])<=0){disable=true;slotAvailable=null;break;}else{disable=false;if(slotAvailable>parseInt(returnedData[0]['qty'])||slotAvailable===null){slotAvailable=parseInt(returnedData[0]['qty']);}}}
var option='';if(loadFirstTime===true){if(disable===true){if(typeof currentDate!==undefined){resultDateDeal=currentDate;return checkInventories(currentDate,loadFirstTime);}}}
if(disable===true){$('#btn--buy-now').prop("disabled",true);$('#alert-room').show();option='<option value="0">0</option>';$('.quantity-modifier').css('border','1px solid #CCC');}else{$('#btn--buy-now').prop('disabled',false);$('#alert-room').hide();for(var i=1;i<=slotAvailable;i++){option+='<option value="'+i+'">'+i+'</option>';}}
$('.quantity-modifier-select').empty().append(option);$('.quantity-modifier-select').prop('disabled',false);if(loadFirstTime===true){return resultDateDeal;}}
$(document).ready(function(){var newDate=new Date(),month=''+(newDate.getMonth()+1),day=''+newDate.getDate(),year=''+newDate.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;var currentDate=[year,month,day].join('-');var findDate=null;if(numNight>0){try{findDate=checkInventories(currentDate,true);}catch(err){findDate=null;$('#btn--buy-now').prop("disabled",true);}
if(typeof findDate!==undefined){findDate=(findDate==null)?currentDate:findDate;var date=new Date(findDate),month=''+(date.getMonth()+1),day=''+date.getDate(),year=''+date.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;var findDate=[day,month,year].join('/');$('.datePicker').val(findDate);}}
var options={weekDays:['CN','T2','T3','T4','T5','T6','T7'],months:['Tháng 1','Tháng 2','Tháng 3','Tháng 4','Tháng 5','Tháng 6','Tháng 7','Tháng 8','Tháng 9','Tháng 10','Tháng 11','Tháng 12'],weekStartsMonday:false,mode:'dp-below',events:inventories,disabledClass:'disabled',minDate:currentDate,renderValue:function(container,element,value){var returnedData=$.grep(inventories,function(element){return element.qty>0;});if(returnedData.length>0){checkInventories(value,false);}
var date=new Date(value),month=''+(date.getMonth()+1),day=''+date.getDate(),year=''+date.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;var findDate=[day,month,year].join('/');$('.datePicker').css('border','1px solid #CCC');if(slotAvailable!=null){$('.quantity-modifier').css('border','0.11em solid #63a50f');}
if(slotAvailable==null||slotAvailable=='null'){$('.quantity-modifier').css('border','1px solid #CCC');}
return findDate;},template:{row:'<td class=""><span class=""{{event}} data-day=\'{"day":"{{day}}", "month":"{{month}}", "year":"{{year}}"}\'>{{day-event}}{{today}}</span></td>',day:function(day,date,event){var length=event.length;for(var n=length;n--;){if(event[n].qty>0){return day+'<div class="position-corner"><span class="count-icon">'+event[n].qty+'</span></div>';}}}}};var datePicker=new DatePicker('.datePicker',options);$('.datePicker').trigger('click');setTimeout(function(){$('.errorMessage').remove();},5000);});$('.quantity-modifier').change(function(){$(this).css('border','1px solid #CCC');});;
var checkAddAddressNew=false;var displayFreeshipPopup=false;(function($){$.ajaxSetup({cache:true});$('ul.dropdown-menu-city li').on('click',function(event){var data=$(this).attr('city-code');$(this).closest('form').append($('<input>').attr('name','location').attr('type','hidden').attr('value',data)).submit();});$('.block--tab').on('click','.tab__item a',function(e){var jelm=$(this),jblock=jelm.closest('.block--tab');if(jelm.attr('href')=='#tab2'){jblock.find('.block__footer .block__more').hide();}else{jblock.find('.block__footer .block__more').show();jblock.find('.block__footer .block__more').attr('href',jelm.data('url'));}
return true;});$('.login-facebook').on('click',function(){var url=$(location).attr('protocol')+'//'+$(location).attr('host')+'/'
window.open(url+"dang-nhap-facebook","_blank","width=800, height="+$(window).height());});$('.login-google').on('click',function(){var url=$(location).attr('protocol')+'//'+$(location).attr('host')+'/'
window.open(url+"dang-nhap-google","_blank","width=800, height="+$(window).height());});$('.login-yahoo').on('click',function(){var url=$(location).attr('protocol')+'//'+$(location).attr('host')+'/'
window.open(url+"dang-nhap-yahoo","_blank","width=800, height="+$(window).height());});show_notice_sesion_temp();$('.btn-group.size-selection[data-toggle="buttons"] > label').click(function(event){var size=$(this).children('input').val();showProductChild(size);});if(typeof size!=='undefined')
showProductChild(size);$('#timer-countdown').countdown({from:Number($('#timer-countdown').data('time'))-Math.floor(Date.now()/1000),to:0,movingUnit:1000,timerEnd:undefined,outputPattern:'$day Ngày $hour : $minute : $second',autostart:true});$(document).on('init_timer','.timer-countdown',function(){var elm=this,jelm=$(this),data=jelm.data(),countdown=(Number(jelm.data('time'))-Math.floor(Date.now()/1000));if(elm.initialized)
return;data=$.extend({},{to:0,movingUnit:1000,outputPattern:'$day ngày $hour:$minute:$second',autostart:true},data);if(countdown<86400){if(data.shortOutputPattern){data.outputPattern=data.shortOutputPattern;}else{data.outputPattern='$hour:$minute:$second';}}else if(countdown>86400*20){countdown=(countdown%(86400*20));countdown=countdown<(86400*14)?countdown+(86400*14):countdown;}
data.from=countdown;jelm.countdown(data);elm.initialized=true;});$('.timer-countdown').trigger('init_timer');loadCart();$('.nav-cart > a[data-toggle="dropdown"]').on('click',function(){loadCart();});initCheckLogin();productViewed();getProductViewed();fashionCheckBtnBuyNow();loadProductSimilar();if($('#comments-block').length>0){var $objectId=$('#comments-block #object_id').val();var $objectType=$('#comments-block #object_type').val();loadComment($objectId,$objectType);$('#comments-block').on('click','.pagination a',function(e){e.preventDefault();var $url=$(this).attr('data-url');var $data={"object_id":$objectId,"object_type":$objectType};$("#comments-block").load($url,$data,function(){});});$('body').on('click','.comment-reply',function(e){e.preventDefault();var commentId=$(this).attr('href').split('-');$('#comment-dialog #parent_id').val(commentId[2]);if(checkLogin()){$('#comment-dialog').modal('show');}else{loginDialog('show');}});$('#comment-dialog').on('hide.bs.modal',function(){$(this).find('form').bootstrapValidator('resetForm',true);});$('#comment_image_upload_btn').on('click',function(){$('.dz-hidden-input').trigger("click");});showBtnComment();$('form#comment-form-popup').formValidation({}).off('success.form.fv').on('success.form.fv',function(e){e.preventDefault();$.ajax({url:'/comment-post',type:'POST',data:$(this).serialize(),dataType:"json",success:function(result){if(result.result==1){$("#alertNoticeContent").html('<div class="alert "><strong>Cám ơn bạn đã gửi bình luận tới Hotdeal. Chúng tôi sẽ duyệt trong thời gian sớm nhất!</strong></div>');if(result.share_on_facebook==1){shareOnFB(window.location.href);}}else if(result.result==0){$("#alertNoticeContent").html('<div class="alert "><strong>Có lỗi xảy ra, vui lòng thử lại!</strong></div>');}
$('#comment-dialog').modal('hide');$("#alertNotice").modal();}}).always(function(result){$("form#comment-form-popup input#token").attr('name',result.token_name);$("form#comment-form-popup input#token").attr('value',result.token_value);$('div.dz-success').remove();$('input[type="hidden"][name^="comment_image_ids"]').remove();});});}
$('.rating-group').rating(function(vote,event){$('#rating_value').val(vote);});if($('#error_message').length){$("#alertNoticeContent").html('<div class="alert "><strong>'+$('#error_message').val()+'</strong></div>');$("#alertNotice").modal();}
if($('#is_show_error_modal').length){var errMsg='<div class="alert "><strong>'+$('#is_show_error_modal').val()+'</strong></div>';$("#alertNoticeContent").html(errMsg);$("#alertNotice").modal('show');setInterval(function(){$("#alertNotice").modal('hide');},2000);}
if($("input[type=checkbox][name=use_reward_point]").length||$(".order-shippings").length){calculateOrderstep3();showRewardPoint();showPaymentMethod($('input[name=shipping]:radio:checked').val());$("input[type=checkbox][name=use_reward_point]").on('change',function(){showRewardPoint();calculateOrderstep3();});$('input[name=reward_point]').on('keyup',function(e){if(e.keyCode!=46&&e.keyCode>40&&e.keyCode<110){showRewardPoint();}
calculateOrderstep3();});$('input[name=shipping]:radio').on('change',function(){shippingChange($(this).val());$('input[name=use_reward_point]').prop('checked',false);showRewardPoint();calculateOrderstep3();});$('input[name=payment]:radio').on('change',function(){showBankAccount($(this).val());});$('input[name=payment]:radio:checked').trigger('change');}
$('#location-selector a.close.btn-close').removeClass('hidden');var checkHref=window.location.href;if(checkHref.indexOf("ho-chi-minh")>-1){setCookie('city',437,365);setCookie('city_name','ho-chi-minh',365);}else if(checkHref.indexOf("ha-noi")>-1){setCookie('city',440,365);setCookie('city_name','ha-noi',365);}else if(checkHref.indexOf("tinh-thanh-khac")>-1){setCookie('city',999999,365);setCookie('city_name','tinh-thanh-khac',365);}else{if(getCookie('city')==''){$('#location-selector a.close.btn-close').addClass('hidden');$('a#changeLocation').click();}}
if($("a#checkout_voucher_booking").length){$('a#checkout_voucher_booking').on('click',function(e){e.preventDefault();$.ajax({url:$(this).attr('href'),type:'GET',dataType:"json",success:function(result){if(result.error==0){$('#booking-dialog').replaceWith(result.data);$('#booking-dialog').modal('show');initDateRangePicker();checkValidateBooking();}else if(result.error==1){$("#alertNoticeContent").html('<div class="alert "><strong>Có lỗi xảy ra, vui lòng thử lại!</strong></div>');$("#alertNotice").modal('show');setInterval(function(){$("#alertNotice").modal('hide');},1000);}}}).always(function(result){});});}
if($("a#checkout_insurance, .checkout_insurance").length){$('a#checkout_insurance, .checkout_insurance').on('click',function(e){e.preventDefault();$('#insurance-dialog').modal('show');});}
$('.deal-insurance, .checkout-deal-insurance').on('change',function(){var qty=$(this).val();var qty_now=$('#checkout_voucher_step1_insurance_frm #content-form .col-md-6').length;var html_clone=$('#checkout_voucher_step1_insurance_frm #content-form .col-md-6').html();if(qty>qty_now){for(i=qty_now;i<qty;i++){$('#checkout_voucher_step1_insurance_frm #content-form').append('<div class="col-md-6">'+html_clone+'</div>');}
var i=1;$('#checkout_voucher_step1_insurance_frm #content-form .col-md-6').each(function(){$(this).find('.title-number').html(i);if(i>qty_now){$(this).find('input').val('');}
i++;});}else{var i=1;$('#checkout_voucher_step1_insurance_frm #content-form .col-md-6').each(function(){if(i>qty){$(this).remove();}
i++;});}
$('#checkout_voucher_step1_insurance_frm').trigger('init_form_validator');initDateRangePicker();if($('.checkout-deal-insurance').length>0){$('#checkout_insurance').click();}});$('#checkout_voucher_step1_insurance_frm').on('submit',function(e){e.preventDefault();var fv=$(this).closest('form').data('formValidation');fv.validateContainer($(this));if(fv.isValidContainer($(this))){$.ajax({url:'/ajax?api=Insurance.update',type:'POST',data:$(this).serialize(),dataType:"json",success:function(result){$('#insurance-dialog').modal('hide');if(result.error==0){$("#alertNoticeContent").html('<div class="alert "><strong>Cập nhật thành công!</strong></div>');$("#alertNotice").modal('show');if($('#form-add-to-cart').length>0){$('#form-add-to-cart').submit();}}else if(result.error==1){$("#alertNoticeContent").html('<div class="alert "><strong>Có lỗi xảy ra, vui lòng thử lại!</strong></div>');$("#alertNotice").modal('show');}
setInterval(function(){$("#alertNotice").modal('hide');},1000);}}).always(function(result){});}});setTimeout(function(){$(window).trigger('resize');},50);$('#choose_date_yes').switchAvailability(false,false);})(jQuery);function showProductChild($size){$('.product--variant').hide().removeClass('active');$('.product--variant[data-size="'+$size+'"]').show().addClass('active');$('.nano').trigger('refresh');}
var searchProduct=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('name'),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:'/ajax?api=search.suggestion&term=%QUERY',type:'GET',dataType:'json',wildcard:'%QUERY'}});$('input.input-search').each(function(){var jelm=$(this);jelm.typeahead(null,{name:'search_minimize',limit:30,display:'name',source:searchProduct,highlight:true,templates:{empty:['<div class="empty-message">','Không tìm thấy dữ liệu','</div>'].join('\n'),suggestion:function(data){return'<div class="'+(data.category_name?'tt-search-in-category':'tt-search-product')+' '+(data.class?data.class:'')+'"><strong><a href="'+data.url+'">'+data.name+
(data.category_name?' <span class="tt-search-in">trong</span> <span class="tt-search-category">'+data.category_name+'</span>':'')+'</a></strong></div>';}}}).on('typeahead:select',function(e,suggestion){if(suggestion.url){window.location.href=suggestion.url;}});});function getsessionnotice(types,contents){$().toastmessage('showToast',{stayTime:10000,text:contents,sticky:false,position:'top-right',type:types,closeText:'',close:function(){}});}
function show_notice_sesion_temp(){$.post($(location).attr('protocol')+'//'+$(location).attr('host')+'/'+'kiem-tra-thong-bao-session',function(data,status){if(data!=''){var obj=JSON.parse(data);if(obj.notice.type!='close_tab'){var classAlert='';var titleAlert='';if(obj.notice.type!=''){classAlert=obj.notice.type;if(obj.notice.type=='error'){classAlert='danger';}}else{classAlert='success';}
if(obj.notice.title!=''&&typeof obj.notice.title!='undefined'){titleAlert=obj.notice.title;if(obj.notice.type=='error'){titleAlert='Lỗi';}}else if(obj.notice.type=='success'){titleAlert='Thành công';}
if(titleAlert==''){$("#alertNoticeContent").html('<div class="alert alert-'+classAlert+'">'+obj.notice.content+'</div>');}else{$("#alertNoticeContent").html('<div class="alert alert-'+classAlert+'"><strong>'+titleAlert+' !</strong><br/> '+obj.notice.content+'</div>');}
$("#alertNotice").modal();}else{window.open('','_self').close();setCookie('pageAction','refresh',1);}}});}
function startIntervalrefresh(){myVar=setInterval(function(){if(getCookie('pageAction')!=''&&getCookie('pageAction')=='refresh'){deleteCookie('pageAction');location.reload();clearInterval(myVar);}},1000);}
function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+"; "+expires+"; path=/; domain="+cookieDomain;}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')
c=c.substring(1);if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";}
function deleteCookie(cname){document.cookie=""+cname+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain="+cookieDomain;}
$('#city').change(function(){var state_id=$('#city').val();if(state_id!=''){$.post("/get-districts",{state_id:state_id},function(result){if(result!=''){$('#district').find('option').remove().end().append(result).val('');}});}
$('#district').val('');$('#ward').find('option').remove().end().append('<option selected value="">Chọn Phường / Xã</option>').val('');});$('#district').change(function(){var district_id=$('#district').val();if(district_id!=''){$.post("/get-wards",{district_id:district_id},function(result){if(result!=''){$('#ward').find('option').remove().end().append(result).val('');}});}
$('#ward').val('');});$('.city').change(function(){var state_id=$(this).val();var parent=$(this).parents('.address-edit');var district_field=parent.find('.district');var ward_field=parent.find('.ward');if(state_id!=''){$.post("/get-districts",{state_id:state_id},function(result){if(result!=''){district_field.find('option').remove().end().append(result).val('');}});}
district_field.val('');ward_field.find('option').remove().end().append('<option selected value="">Chọn Phường / Xã</option>').val('');});$('.district').change(function(){var district_id=$(this).val();var parent=$(this).parents('.address-edit');var ward_field=parent.find('.ward');if(district_id!=''){$.post("/get-wards",{district_id:district_id},function(result){if(result!=''){ward_field.find('option').remove().end().append(result).val('');}});}
ward_field.val('');});$('#selected_address').change(function(){var index=$('#selected_address').val();var address_id=$('input[name="address['+index+'][id]"]').val();$('#address_id').val(address_id);});$('#selected_address').trigger('change');$('.datepicker').keydown(function(){return false;});$('#add-to-cart').click(function(){var data=$('#add-to-cart').closest('form.add-to-cart').serializeArray();var parentId=0;var listProductId=[];var listQuantity={};var price=0;var name='';data.forEach(function(entry){if(entry.name==="product_id"){parentId=entry.value;price=$('#price_'+entry.value).val();}
if(entry.name==="variants[product_id][]"){if($('#quantity_'+entry.value).val()>0){listProductId.push(entry.value);listQuantity[entry.value]=$('#quantity_'+entry.value).val();name=$('h1.product__title').html();}}});if(listProductId.length>0){callAddToCart(parentId,listProductId,listQuantity,price,name);}
return false;});$('#add-to-cart-deal').click(function(){if($('.product__variants').hasClass('border-red'))
return;var data=$('form.add-to-cart').serializeArray();var parentId=0;var listProductId=[];var listQuantity={};data.forEach(function(entry){if(entry.name==="product_id"){parentId=entry.value;listProductId.push(entry.value);listQuantity[entry.value]=$('#quantity_'+entry.value).val();}});callAddToCart(parentId,listProductId,listQuantity);return false;});function callAddToCart(parentId,listProductId,listQuantity,price,name){ajaxPost('/ajax?api=cart.add',{parentId:parentId,listProductId:listProductId,listQuantity:listQuantity},{'success':function(response){if(response.error==0){loadCart(listProductId);displayFreeshipPopup=true;}
var cate='';if($('.breadcrumb__link').size()>1){cate=$($('.breadcrumb__link').get(1)).attr('title');}
gaTracking.addToCart({id:parentId,name:name,category:cate,variant:listProductId.join(','),price:price||0});}});$('.header-cart .nav-cart > a[data-toggle="dropdown"]').dropdown('toggle');}
function removeItem(productId){ajaxPost('/ajax?api=cart.removeItem',{productId:productId},{'success':function(response){if(response.error==0){loadCart();}
var cate='';if($('.breadcrumb__link').size()>1){cate=$($('.breadcrumb__link').get(1));}
gaTracking.removeCart({id:productId});}});}
function addToCart(data,listProductId){var listProduct=data.list_product;listProduct.forEach(function(product){product.imageUrl=product.imageUrl.replace('http://','//');$('#minicart__item__'+product.productId).remove();$item=$('<div id="minicart__item__'+product.productId+'" class="minicart__item">');$info=$('<div class="minicart__item__info">');$img=$('<img src="'+product.imageUrl+'" alt="">');$divName=$('<div class="minicart__item__name">');$name=$('<div><a href="'+product.url+'">'+product.name+' - <span style="color: #999;">Mã SP: '+product.productCode+'</span></a></div>');if(product.productKind!=99){$price=$('<span class="minicart__item__price price"><span class="price__value">'+product.price+'</span><span class="price__symbol">đ</span></span>');}else{$price=$('<span class="minicart__item__price price"><span class="price__value">Miễn phí</span></span>');}
$action=$('<div class="minicart__item__actions"><a href="#" rel="nofollow" data-product="'+product.productId+'" title="Xóa khỏi giỏ hàng" class="btn-close show-on-hover">x</a></div>');$divName.append($name);$divName.append($price);$divName.append(' x '+product.quantity);$info.append($img);$info.append($divName);$item.append($info);if(product.productKind!=99)
$item.append($action);$('.dropdown-menu > .minicart__wrapper').append($item);if(listProductId&&$.inArray(""+product.productId,listProductId)>-1){$('#minicart__item__'+product.productId).addClass('cart-new-item');setTimeout(function(){$('#minicart__item__'+product.productId).removeClass('cart-new-item');},1000);}});$('.dropdown-menu .minicart__summary .price__value').html(data.subtotal);$('.nav-cart > a > .circle').html(listProduct.length);$('.dropdown-cart a.btn-close').on('click',function(e){e.stopPropagation();var items=$(this).data('product');showConfirm({text:'Bạn có chắc chắn muốn xóa?',callback:function(jconfirm,confirm){if(confirm){removeItem(items);}}});});}
function showFreeShipTooltip(amount){var msgs=['Bạn hãy tiếp tục mua sắm để được miễn phí giao hàng cho đơn hàng từ 150.000đ tại nội thành Hà Nội.','Bạn hãy tiếp tục mua sắm để được miễn phí giao hàng cho đơn hàng từ 150.000đ tại nội thành Hồ Chí Minh.','Chúc mừng bạn, đơn hàng của bạn đã được miễn phí giao hàng tại nội thành Hà Nội.','Chúc mừng bạn, đơn hàng của bạn đã được miễn phí giao hàng tại nội thành Hồ Chí Minh.',];if(displayFreeshipPopup){var content='';var city=getCookie('city');if(city==437){content=amount<150000?msgs[1]:msgs[3];}else if(city==440){content=amount<150000?msgs[0]:msgs[2];}
if(content!=''){$('.header-cart-wrapper').showBalloon({html:true,position:"bottom",contents:content,css:{fontSize:'12px',lineHeight:'2'},showDuration:"slow",maxLifetime:5000,showAnimation:function(d,c){this.fadeIn(d,c);}});}}
displayFreeshipPopup=false;}
function loadCart(listProductId){ajaxGet('/ajax?api=cart.getCart',{},{'success':function(response){if(response.error==0&&typeof response.data.subtotal!=='undefined'){$('.dropdown-menu > .minicart__wrapper').html('');addToCart(response.data,listProductId);if(response.data.list_product.length>0){$(".minicart__actions > a.btn--view-cart").removeAttr("disabled");$(".minicart__actions > a.btn--buy-now").removeAttr("disabled");$(".minicart__actions > a.btn--view-cart").attr("href","/checkout-step-1");$(".minicart__actions > a.btn--buy-now").attr("href","/checkout-step-2");showFreeShipTooltip(response.data.subTotalOrigin);}else{$(".minicart__actions > a.btn--view-cart").attr("disabled","disabled");$(".minicart__actions > a.btn--buy-now").attr("disabled","disabled");$(".minicart__actions > a.btn--view-cart").attr("href","#");$(".minicart__actions > a.btn--buy-now").attr("href","#");}}}});}
function loadComment($objectId,$objectType){var $data={"object_id":$objectId,"object_type":$objectType};$('#comments-block').load('/comment-get',$data,function(){if($('#comment_success').length){if($('#comment_success').val()==1){$("#alertNoticeContent").html('<div class="alert "><strong>Cám ơn bạn đã gửi bình luận tới Hotdeal. Chúng tôi sẽ duyệt trong thời gian sớm nhất!</strong></div>');}else if($('#comment_success').val()==-1){$("#alertNoticeContent").html('<div class="alert "><strong>Có lỗi xảy ra, vui lòng thử lại!</strong></div>');}
$("#alertNotice").modal();};});}
$('form.booking-form .quantity-modifier').on('change',function(){var value=$(this).data('value');var productId=$($(this).children('input.quantity-number')).data('product');addToCartTravel()});$('form.add-to-cart.add-to-cart--form .quantity-modifier').on('change',function(){var data=$('form.add-to-cart').serializeArray();var parentId=0;var listProductId=[];var listQuantity={};var enable=false;data.forEach(function(entry){if(entry.name==="variants[product_id][]"){if($('#quantity_'+entry.value).val()>0)
enable=true;}});if(enable){$('.product__variants').removeClass('border-red');}else{$('.product__variants').addClass('border-red');}});function addToCartTravel(){var data=$('form.booking-form.form.sku').serializeArray();var parentId=0;var listProductId=[];var listQuantity={};var listPrice={};var prices={};var totalPrice=0;var totalPriceList=0;var enable=false;data.forEach(function(entry){if(entry.name==="product_id"){parentId=parseInt(entry.value);}
if(entry.name==="variants[product_id][]"){listProductId.push(parseInt(entry.value));listQuantity[entry.value]=parseInt($('#quantity_'+entry.value).val());listPrice[entry.value]=parseInt($('#price_'+entry.value).val());prices[entry.value]=parseInt($('#price_list_'+entry.value).val());totalPrice=totalPrice+listQuantity[entry.value]*listPrice[entry.value];totalPriceList=totalPriceList+listQuantity[entry.value]*prices[entry.value];if(listQuantity[entry.value]>0)
enable=true;}});$('form.booking-form tfoot .product__price .price__value').html(number_format(totalPrice));$('form.booking-form tfoot .product__price--list-price .price--list-price .price__value').html(number_format(totalPriceList));if(enable){$('form.booking-form tfoot button.btn.btn-success.btn--buy-now').prop("disabled",false);}else{$('form.booking-form tfoot button.btn.btn-success.btn--buy-now').attr("disabled",true);}}
$('form#checkout-step-1 .quantity-modifier').on('change',function(){var value=$(this).data('value');checkoutStep1()});function checkoutStep1(){var data=$('form#checkout-step-1').serializeArray();var listProductId=[];var listQuantity={};var listPrice={};var totalPrice=0;var totalQuantity=0;data.forEach(function(entry){if(entry.name==="variants[product_id][]"){listProductId.push(parseInt(entry.value));listQuantity[entry.value]=parseInt($('#quantity_'+entry.value).val());listPrice[entry.value]=parseInt($('#price_'+entry.value).val());totalPrice=totalPrice+listQuantity[entry.value]*listPrice[entry.value];totalQuantity=totalQuantity+listQuantity[entry.value];$('#total_'+entry.value).html(number_format(listQuantity[entry.value]*listPrice[entry.value])+' đ');}});$('#order-quantity').html(number_format(totalQuantity));$('#order-subtotal').html(number_format(totalPrice)+' đ');$('#order-total').html(number_format(totalPrice)+' đ');}
function updateAddress(index){var id=$('input[name="address['+index+'][address_id]"]').val();var name=$('input[name="address['+index+'][name]"]').val();var phone=$('input[name="address['+index+'][phone]"]').val();var city=$('select[name="address['+index+'][city]"]').val();var district=$('select[name="address['+index+'][district]"]').val();var ward=$('select[name="address['+index+'][ward]"]').val();var address=$('input[name="address['+index+'][address]"]').val();var street=$('input[name="address['+index+'][street]"]').val();var floor=$('input[name="address['+index+'][floor]"]').val();var addressType=$('input[name="address['+index+'][address_type]"]:checked').val();if(name==''||phone==''||city==''||district==''||ward==''||address==''||street==''){var titleAlert='Báo lỗi';var classAlert='error';showAlert(titleAlert,'Quý khách vui lòng điền đầy đủ thông tin địa chỉ giao hàng.',classAlert);return false;}else{ajaxPost('/ajax?api=location.updateUserProfile',{id:id,name:name,phone:phone,city:city,district:district,ward:ward,address:address,street:street,floor:floor,addressType:addressType},{'success':function(response){if(response.error==0){$('input[name="address['+index+'][id]"]').val(response.data);$('#address_id').val(response.data);$('.box__footer button#btn--buy-now').prop("disabled",false);if(typeof step_callback==="function"){step_callback();}else{if(checkAddAddressNew==true){window.location.reload();}}}}});}}
$('.nav-cart .dropdown-menu .minicart__actions .btn.btn-success.btn--buy-now').on('click',function(){if(checkLogin())
return true;else
loginDialog('show');return false;});$('#checkout-step-1 button.btn.btn-success.btn-lg.btn--buy-now').on('click',function(){if(checkLogin())
return true;else
loginDialog('show');return false;});$('ol.progress-steps li[data-step="2"] a').on('click',function(e){if(checkLogin())
return true;else
loginDialog('show');return false;});$('ol.progress-steps li[data-step="3"] a').on('click',function(){if(checkLogin())
return true;else
loginDialog('show');return false;});function checkLogin(){if(getCookie('isLogin')!=='undefined'&&getCookie('isLogin')==1)
return true;else{return false;}}
function initCheckLogin(){ajaxGet('/ajax?api=location.sync',{},{'success':function(response){}});ajaxGet('/ajax?api=user.checkLogin',{},{'success':function(response){if(response.error==0&&response.data&&response.data.html){for(var k in response.data.html){if($("#"+k).length){$("#"+k).html(response.data.html[k].replace(new RegExp('http://','g'),'//'));}}}
$('#user-info-header').append(response.data.html);if(response.error==0&&response.data.isLogin==true){$('#user-info-header').addClass('account-info-group');setCookie('isLogin',1);setUrlFormAddCart();if(response.data.is_password_changed){passwordChangeConfirm();}}else if(response.error==0&&response.data.isLogin==false){$('#login-popup-header').appendTo($('#login-popup-header-form'));deleteCookie('isLogin');}},'async':false});return false;}
function loginDialog(type){$("#login-dialog").modal(type);}
$('.btnAddProfile').click(function(){$('#profile-form-content').removeClass('hidden');$('#group-button').removeClass('hidden');$(this).attr('disabled',true);});function getTextSelect(id){var name=$('#'+id).find('option:selected').text();$("#"+id+"_name").val(name);}
function showBtnComment(){if(checkLogin()){$('a.btn.btn-success[data-target="#comment-dialog"]').removeClass("hide");}else{$('a.btn.btn-success[data-target="#login-dialog"]').removeClass("hide");}}
function productViewed(){if(productId>0){ajaxGet('/ajax?api=product.viewed',{productId:productId},{'success':function(response){}});}}
function getProductViewed(){}
function scrollToTop(){$('html,body').animate({scrollTop:0},'slow');return false;}
function toTab(id){$('#'+id).trigger('click');return false;}
function confirmLink(e){$('#confirmModal').modal().one('click','#confirnYes',function(){var link=$(e).attr('href');if(link.indexOf('delete-product')>0){var idMatch=link.match(/productId=(\d+)/i);if(idMatch.length>1){gaTracking.removeCart({id:idMatch[1]},function(){window.location.href=link;});}}});}
function removeAddresDelivery(addressID){$('#confirmModal').modal().one('click','#confirnYes',function(){$('.delivery-info-'+addressID).remove();});}
function fashionCheckBtnBuyNow(){$('.page-product #btn--buy-now, .page-product #add-to-cart').on('click',function(){var data=$('form.add-to-cart').serializeArray();var enable=false;data.forEach(function(entry){if(entry.name==="variants[product_id][]"){if($('#quantity_'+entry.value).val()>0)
enable=true;}});if(!enable){$('body, html').animate({scrollTop:$('.product__details').offset().top-100});showAlert('Báo lỗi!','Bạn vui lòng chọn số lượng','error');$('.product__variants').addClass('border-red');return false;}else{$('.product__variants').removeClass('border-red');var bookingFrm=$('._booking-section form');if(bookingFrm.length>0&&$('input[name=choose_date]',bookingFrm).prop('checked')){var frmValid=bookingFrm.data('formValidation');if(frmValid){frmValid.validate();if(!frmValid.isValid()){$('html, body').animate({scrollTop:bookingFrm.offset().top},1000);}else{frmValid.defaultSubmit();}}else{bookingFrm.submit();}
return false;}}});}
function calculateOrderstep3(){var rewardPoint=0;if($("input[type=checkbox][name=use_reward_point]").prop('checked')){rewardPoint=parseFloat(unformat_number($('input[name=reward_point]').val()));}
var shippingCost=$($('._shipping-cost').get(0)).data('value');var subTotal=$($('._sub-total').get(0)).data('value');var discount=$($('._discount').get(0)).data('value');var _couponCode=$('._couponCode').text();if(_couponCode!=''&&_couponCode.substr(0,4)=='HDFS'){if(parseInt(shippingCost)==0){$('._discount').text('0 đ');discount=0;}else{$('._discount').text(number_format(discount)+' đ');}}
var total=subTotal+shippingCost-discount;if(total>0&&rewardPoint>total){rewardPoint=total;$('input[name=reward_point]').val(number_format(rewardPoint));}
var orderRewardPoint=parseInt($($('._order_reward_point').get(0)).data('value'));$('._order_reward_point').html(number_format(rewardPoint+orderRewardPoint));total-=parseFloat(rewardPoint+orderRewardPoint);if(total<0){total=0;}
if(total%1000>0){total=total-total%1000+1000;}
$('._total').html(number_format(total)+' đ');$('._total').get(0).setAttribute('data-value',number_format(total));if(!$('input[name=use_reward_point]').prop('checked')){$($('._total').get(0)).data('value',total);if($('#user_reward_point').val()>=total){$('.box-info-text').val(number_format(total));}
else{$('.box-info-text').val($('#user_reward_point').val());}}
return total;}
$('#shipping-cod').click(function(e){checkShipping();});$('#shipping-evoucher').click(function(e){checkShipping();});function checkShipping(){if($('#shipping-cod').is(':checked')){$('#payment-cash').show();}else{$('#payment-cash').hide();}}
function loadProductSimilar(){$('[data-toggle="similar-products"]').each(function(){var jelm=$(this),data=jelm.data(),limit=16;if(data.calculateLimit){var height=$('#product-details').height()-46-625;if(height<0)
height=0;limit=Math.floor(height/368)-1;}
if(data.limit){limit=parseInt(data.limit);}
if(data.enableScreens){var enable=false;for(var i=0;i<data.enableScreens.length;i++){var scr=data.enableScreens[i],scr_data=$.screens[scr];if($(window).width()>scr_data[0]&&$(window).width()<scr_data[1]){enable=true;}}
if(!enable)
return;}
ajaxGet(data.apiUrl?data.apiUrl:'/ajax?api=product.getProductSimilar',{productId:data.productId?data.productId:0,limit:limit},{'success':function(response){if(response.error==0&&response.data.length>0){if(data.containerId){$('#'+data.containerId).removeClass('hidden');}
jelm.html('');var listProduct=response.data;listProduct.forEach(function(product){product.imageUrl=product.imageUrl.replace('http://','//');var $item=$(RenderTemplate('box_product_simple',product));jelm.append($item);$item.wrap('<div class="product-wrapper '+(data.wrapperClass?data.wrapperClass:'')+'"></div>');});setTimeout(lazyLoadImage,300);}else{if(data.containerId){$('#'+data.containerId).addClass('hidden');}}
if(data.callback){window[data.callback](jelm);}}});});}
function lazyLoadImage(){$.blazy.revalidate();}
function initProductsSwiper(jelm){jelm.trigger('init_swipe');}
function initRecommendProducts(jelm){jelm.trigger('init_swipe');}
function initViewedProducts(jelm){jelm.trigger('init_swipe');}
function afterLoadSimilarMobile(jelm){jelm.trigger('init_swipe');}
function loadBlockViewedProducts(){var viewed_bottom=$('.footer').outerHeight(true)+65;$(".block-viewed-products").affix({offset:{top:function(){var pre=$(".block-viewed-products").prev();return pre.offset().top+pre.height()-50;},bottom:viewed_bottom}});}
function showPaymentMethod($shippingMethod){var $hidePaymentMethod={12:"6",11:"6"};if(!($shippingMethod in $hidePaymentMethod)){$('div[id^=payment_method_]').show();}else{$.each($hidePaymentMethod[$shippingMethod].split(','),function(index,_paymentMethod){var $hideElement=$('div#payment_method_'+_paymentMethod);if($($hideElement).find('input[name=payment]:radio').is(':checked')){$($hideElement).next().find('input[name=payment]:radio').prop('checked',true);}
$('div#payment_method_'+_paymentMethod).hide();});}}
function showRewardPoint(){if($('input[name=reward_point]').size()){var userRewardPoint=parseInt($('input[name=user_reward_point]').val());var rewardPointEl=$('input[name=reward_point]');var rewardPoint=parseInt(unformat_number(rewardPointEl.val()));var total=parseInt($($('._total').get(0)).data('value'));if(rewardPoint>userRewardPoint){rewardPoint=userRewardPoint;}
if($('input[name=use_reward_point]').prop('checked')){$('#point-reward-input').switchAvailability(true,false);var shippingCost=parseInt($($('._shipping-cost').get(0)).data('value'));var evoucherShipping=$('._shipping-method0 input[name=shipping]');if(evoucherShipping.size()&&rewardPoint>=(total-shippingCost)){evoucherShipping.prop('checked',true);shippingChange(evoucherShipping.val());rewardPoint=(total-shippingCost);}}else{$('#point-reward-input').switchAvailability(false,false);}
if(rewardPoint>total){rewardPointEl.val(number_format(total));}else{rewardPointEl.val(number_format(rewardPoint));}}}
function showBankAccount($paymentId){if($paymentId==12){$('div[data-order="bank-account-info"]').show();}else{$('div[data-order="bank-account-info"]').hide();}}
function loginSocialFinish(showNotice){$('#login-dialog').modal('hide');initCheckLogin();if(showNotice=='show'){showAlert('Đăng nhập thành công.','Vui lòng kiểm tra email để xem thông tin tài khoản đăng nhập của bạn.','success');}}
function loginSocialError(){$('#login-dialog').modal('hide');showAlert('Đăng nhập thất bại.','Bạn không cấp quyền truy cập thông tin cho chúng tôi, vui lòng kiểm tra lại.','danger');}
function shareOnFB($url){FB.ui({method:'share',href:$url,},function(response){});}
$('.address-table.editable-section .btn.btn-default.btn-sm.button-edit').click(function(){checkAddAddressNew=false;});$('.address-table.editable-section .btn.btn-default.btn-sm.button-add').click(function(){$(this).parent('.address-table').addClass('availability-off hidden');$('#address_id').val('');checkAddAddressNew=true;$('.formAddAddress').trigger('edit.editable').removeClass('hidden cancel-disabled cancel-validation').on('cancel.editable',function(){$('.formAddAddress').switchAvailability(false,true);var index=$('#selected_address').val();var address_id=$('input[name="address['+index+'][id]"]').val();$('#address_id').val(address_id);$('#address-table-'+index).removeClass('availability-off hidden');});});var isRefresh=false;var isAlert=false;$(function(){$(document).on("keydown",function(e){if(e.which===82||e.which===116){isRefresh=true;}});});var alertTimeCount=0;$(document).mousemove(function(e){if(e.clientY<=10){isAlert=true;}else{isAlert=false;}});setInterval(function(){alertTimeCount=alertTimeCount+1;},1000);window.onbeforeunload=function(){if(!isRefresh&&isAlert&&alertTimeCount<=10&&!getCookie('showUnload')){setCookie('showUnload',1,90);return"Xin chào bạn!\n\nHOTDEAL.vn vừa thay đổi giao diện mới với nhiều tính năng hơn. Bạn hãy trải nghiệm nhé, nếu có gì bạn chưa hài lòng xin hãy góp ý với chúng tôi!\n\nXin trân trọng cám ơn.";}};function setUrlFormAddCart(){if(moduleName=="product"&&controllerName=="detail"&&actionName=="index"){var url=$("#form-add-to-cart").attr('action');if(url=="/checkout-voucher-step-1"){url="/checkout-voucher-step-2";}else{url="/checkout-step-2";}
$("#form-add-to-cart").attr('action',url);}}
function cancelOrder(){showConfirm({text:'Vui lòng nhập lý do hủy đơn hàng <br/><br/> <input type="text" id="reasonCancelOrder" class="form-control" autocomplete="off" placeholder="Lý do hủy" >',callback:function(jconfirm,confirm){if(confirm){var reasonText=$('#reasonCancelOrder').val();if(reasonText==''){$('#reasonCancelOrder').css('border','thin solid #DA7E7E');$('#reasonCancelOrder').focus();return false;}else{var orderId=$('#orderId').val();var urlText='/ajax?api=orders.changeStatusOrder';$.ajax({type:'post',url:urlText,data:{type:'cancelOrder',orderId:orderId,reason:reasonText},success:function(result){if(result.error==0){$('.orderStatusText').text('Hủy');$('.orderNotes').append('<br/> Lý do hủy : '+reasonText);var tempEl=$('#CancelOrderFinishModal');$('#CancelOrderFinishModal').remove();$('body').append(tempEl);$('#CancelOrderFinishModal').modal('show');}else{showAlert('Thất bại!',result.data,'danger');}
$('.btnCancelOrder').remove();},error:function(result){console.log(result);}});}}}});return false;}
function deleteAddress(elm){showConfirm({text:'Bạn có chắc chắn muốn xóa?',callback:function(jconfirm,confirm){if(confirm){window.location.href=$(elm).data('url');}}});}
function checkValidateBooking(){$('form#checkout_voucher_step1_booking_frm').formValidation({}).off('success.form.fv').on('success.form.fv',function(e){e.preventDefault();$.ajax({url:$(this).attr('action'),type:'POST',data:$(this).serialize(),dataType:"json",success:function(result){if(result.error==0){$("#alertNoticeContent").html('<div class="alert "><strong>Thông tin booking đã cập nhật thành công!</strong></div>');}else if(result.error==1){$("#alertNoticeContent").html('<div class="alert "><strong>Có lỗi xảy ra, vui lòng thử lại!</strong></div>');}
$('#booking-dialog').modal('hide');$('#booking-dialog').bootstrapValidator('resetForm',true);$("#alertNotice").modal('show');setInterval(function(){$("#alertNotice").modal('hide');},1000);}}).always(function(result){});});}
$(window).bind("pageshow",function(event){$.blazy.revalidate();setTimeout(function(){$.blazy.revalidate();},200);});$('.profile-avatar').click(function(){$('#fileAvatar').trigger('click');$.get("/ajax?api=image.getUrlApiUpload",function(data,status){if(data.error==0){$('#form-avatar-profile').trigger('reset');$('#form-avatar-profile').attr('action',data.data);$('#form-avatar-profile').attr('onsubmit','return true');}else{$('#form-avatar-profile').attr('onsubmit','return false');}});});$('#fileAvatar').click(function(){$.get("/ajax?api=image.getUrlApiUpload",function(data,status){if(data.error==0){$('#form-avatar-profile').trigger('reset');$('#form-avatar-profile').attr('action',data.data);$('#form-avatar-profile').attr('onsubmit','return true');}else{$('#form-avatar-profile').attr('onsubmit','return false');}});});$('#form-avatar-profile').on('submit',(function(e){e.preventDefault();var formData=new FormData(this);var ext=$('#fileAvatar').val().split('.').pop().toLowerCase();if($.inArray(ext,['gif','png','jpg','jpeg'])==-1){showAlert('Thông báo','Tập tin không được hỗ trợ, vui lòng kiểm tra lại.','danger');}else{$.ajax({type:'POST',url:$(this).attr('action'),data:formData,dataType:'json',cache:false,contentType:false,processData:false,success:function(data){if(data.error==0){var avatarUrl=data.data;$('.profile-avatar').attr('src',avatarUrl);avatarUrl=avatarUrl.replace('original','w_200_200_100_1');$('.profile-avatar2').attr('src',avatarUrl);}},error:function(data){}});}
return false;}));$('#btnSaveAvatar').on('click',(function(e){var avatarUrl=document.getElementById('profile-avatar').getAttribute('src');$.ajax({async:false,type:'POST',url:'ajax?api=user.updateAvatar',data:{avatar:avatarUrl},dataType:'json',beforeSend:function(){},success:function(data){$('#modalAvatar').modal('hide');$('#form-avatar-profile').trigger('reset');if(data.error==0){showAlert('Thông báo','Hình đại diện của bạn đã tải lên thành công. Hotdeal sẽ cập nhật trong thời gian sớm nhất','success');}else{showAlert('Thông báo','Hình đại diện của bạn tải lên thất bại, vui lòng thử lại sau ít phút.','danger');}},error:function(jqxhr){console.log('Error while contacting server, please try again');},complete:function(){}});}));$.get("/ajax?api=campaigns.getIconProductCampaign",function(data,status){var listCampaign=data.data;if(listCampaign!=''){$('.product__icons_ajax_load_icon').each(function(){var dataProduct=$(this).data();for(var key in listCampaign){var id=parseInt(key.replace('c',''));if($.inArray(id,dataProduct.category)>=0&&listCampaign[key]['image']!=''){$(this).find('img').attr('src',listCampaign[key]['image'].replace('http://','//'));$(this).find('img').addClass('category-'+id);break;}}});}});$('.online-fever-url').click(function(){var url='/online-fever-2015/';if(Math.floor(Math.random()*(9-0+1)+0)=='0'){$(this).attr("href",url);}else{$(this).attr("href",$(this).data().href);}});$('.bao-li-xi').click(function(){var position=$(this).data().position;if(startLiXi!='1'){$('#lixiThongBao .text-content').html('Chương trình sẽ bắt đầu vào ngày 08/02/1026 và kết thúc ngày 17/02/2016.');$('#lixiThongBao .text-btn a').css('display','none');$('#lixiThongBao').modal();}else if(userId==''||userId==0||orderId==''||orderId==0){$('#lixiThongBao .text-content').html('Bạn chưa có lượt chọn. Mời bạn mua hàng để có lượt chọn.');$('#lixiThongBao').modal();}else{$.ajax({async:false,type:'POST',url:urlCheckLiXi,data:{user_id:userId,order_id:orderId,key:keyLiXi,position:position},dataType:'json',beforeSend:function(){},success:function(data){var response=$.parseJSON(data.text);if(response.code==0){var title='';var text='';switch(parseInt(response.value)){case 5000:title='Bao May Mắn';text='là bao lì xì trị giá 5,000đ';break;case 10000:title='Bao An Khang';text='là bao lì xì trị giá 10,000đ';break;case 20000:title='Bao Như Ý';text='là bao lì xì trị giá 20,000đ';break;case 50000:title='Bao Cát Tường';text='là bao lì xì trị giá 50,000đ';break;case 100000:title='Bao Tài Lộc';text='là bao lì xì trị giá 50,000đ';break;case 3293000:title='Bao Lì Xì Vàng Hotdeal';text='là 1 Chỉ vàng SCJ';break;default:}
var numberRandom=Math.floor((Math.random()*10)+1);var imgTextCauChuc='<img src="/assets/img/li-xi-tet-2016/cauchuc/cauchuc'+numberRandom+'.png">';console.log(imgTextCauChuc);$('#lixiChucMung .text-content .title').html(title);$('#lixiChucMung .text-content .text').html(text);$('#lixiChucMung .text-hotdeal').html(imgTextCauChuc);$('#lixiChucMung').modal();}else{$('#lixiThongBao .text-content').html(response.msg);$('#lixiThongBao .text-btn a').css('display','none');$('#lixiThongBao').modal();}},error:function(jqxhr){console.log('Error while contacting server, please try again');},complete:function(){}});}});var checkRegisterNewLatter=setInterval(function(){if(getCookie('registerNewsLatter')!='1'&&getCookie('city')!=''&&getCookie('city_name')!=''){$('#modalRegisterNewsLatter').modal('show');setCookie('registerNewsLatter','1',365);}
clearInterval(checkRegisterNewLatter);},30000);var checkEmailConfirmLoginSocial=setInterval(function(){if(getCookie('accountInfoSocial')=='1'){$("#modalEmailComfirmLoginSocial").modal({backdrop:"static"});deleteCookie('accountInfoSocial');}
clearInterval(checkEmailConfirmLoginSocial);},0);$("#emailConfirmLoginSocial").keydown(function(e){var code=e.which;if(code==13){e.preventDefault();}});function submitEmailConfirm(){var email=$('#emailConfirmLoginSocial').val();$.ajax({async:false,type:'POST',url:'/ajax?api=user.processEmailConfirmLoginSocial',data:{email:email},dataType:'json',beforeSend:function(){},success:function(data){$('#text-notice-email-confirm').html('text');if(data.error==0){$("#modalEmailComfirmLoginSocial").modal('hide');window.opener.loginSocialFinish('show');window.close();}else{$('#text-notice-email-confirm').html(data.message);}},error:function(jqxhr){console.log('Error while contacting server, please try again');},complete:function(){}});return false;}
$('._quantity-select').each(function(){quantityChange(this);$(this).change(function(e){quantityChange(this);});});function quantityChange(el){var data=$(el).data();var quanlity=parseInt($(el).val());if(quanlity>0){$('._amount-'+data.id).html(number_format(data.price*quanlity));$('._amount-origin-'+data.id).html(number_format(data.priceOrigin*quanlity));$('input._quantity-'+data.id).val(quanlity);}}
$('._expand-toggle').click(function(){var data=$(this).data();if(data.expanded){$(data.box).css('height',data.default);$(this).data('expanded',false);$(this).html($(this).html().replace('Thu gọn','Xem thêm'));}else{$(this).data('default',$(data.box).css('height')).data('expanded',true);$(data.box).css('height','auto');$(this).html($(this).html().replace('Xem thêm','Thu gọn'));}
return false;});function paymentChange(paymentId){var shippingId=$('input[name=shipping]:checked').val();var data=$('._payment-method'+paymentId).data();data.shippingId=''+data.shippingId;var shippingIdList=data.shippingId.split(',');if(shippingIdList.indexOf(shippingId)<0){for(var x in shippingIdList){var shippingSelected=$('._shipping-method'+shippingIdList[x]);if(shippingSelected.size()){$('input[name=shipping]',shippingSelected).trigger('click');break;}}}}
function shippingChange(shippingId){var paymentId=$('input[name=payment]:checked').val();var shippingEl=$('._shipping-method'+shippingId);var data=shippingEl.data();var shippingCost=data.cost;var productKind=data.kind;$('._payment-method').addClass('disabled');if(productKind==3&&data.evouchercod==0){$('._payment-method').removeClass('disabled');}
$('._payment-method').each(function(i,obj){var fields=$(this).attr('id').split('_');if(data.paymentId.includes(fields[2])===false&&typeof fields[2]!='undefined'){$('._payment-method'+fields[2]).addClass('disabled');}});$('._shipping-show').addClass('hidden');$('._shipping-show'+shippingId).removeClass('hidden');data.paymentId=''+data.paymentId;var paymentIdList=data.paymentId.split(',');for(var x in paymentIdList){$('._payment-method'+paymentIdList[x]).removeClass('disabled');}
if(paymentIdList.indexOf(paymentId)<0){for(var x in paymentIdList){var paymentSelected=$('._payment-method'+paymentIdList[x]);if(paymentSelected.size()>0){$('input[name=payment]',paymentSelected).trigger('click');break;}}}
$('span._shipping-cost').data('value',shippingCost).html(number_format(shippingCost));calculateOrderstep3();}
function officeShipping(inp){if($(inp).prop('checked')){$('input[name=office]').val(1);$('._office-show').removeClass('hidden');$('._office-hide').addClass('hidden');}else{$('input[name=office]').val(0);$('._office-show').addClass('hidden');$('._office-hide').removeClass('hidden');}}
$(document).ready(function(){$(".flip").click(function(){$("#panel").slideToggle("slow");});$('#login-dialog input[name=is_guest]').change(function(){loginBoxShow(parseInt($(this).val()));});loginBoxShow(parseInt($('#login-dialog input[name=is_guest]').val()));if(location.pathname.search('checkout-voucher-step-3')!=-1||location.pathname.search('checkout-step-3')!=-1||location.pathname.search('checkout-repay')!=-1){var check=$('input[name=shipping]:checked');if(check.size()){shippingChange(check.val());}}
officeShipping($('input[name=office_check]'));$('input[name=office_check]').change(function(){officeShipping(this);});$('._autoload').each(function(){var fn=$(this).data('fn');if(typeof window[fn]!='undefined'){window[fn].call(fn,this);}});});function loginBoxShow(guestVal){var box=$('#login-dialog');if(!guestVal){$('input[name=is_guest][value='+guestVal+']',box).prop('checked',true);$('.txtPass').slideDown();$('.box-hide-pas').show(100);$('[name=user_login]',box).attr('placeholder','Tên đăng nhập');$('button',box).each(function(){$(this).html($(this).html().replace('ĐẶT HÀNG','ĐĂNG NHẬP'));});}else{$('input[name=is_guest][value='+guestVal+']',box).prop('checked',true);$('.txtPass').slideUp();$('.box-hide-pas').hide(100);$('[name=user_login]',box).attr('placeholder','Email');$('button',box).each(function(){$(this).html($(this).html().replace('ĐĂNG NHẬP','ĐẶT HÀNG'));});}}
function passwordChangeConfirm(){if(location.pathname.search('xac-nhan-mat-khau')===-1){window.location.href='/xac-nhan-mat-khau?returnUrl='+encodeURI(location.href);}}
function autoLoadImg(el){$(el).attr('src',$(el).data('original')).removeClass('_autoload');}
$(document).on('click','.btnApplyGiftCode',function(){var elParent=$(this).parents('._boxGiftCode');var inputGiftCode=elParent.find('#inputGiftCode');var elNotice=elParent.find('._noticeGiftCode');var giftCode=inputGiftCode.val();var shippingMethod=$('.order-shippings ._shipping-method input[type="radio"]:checked').val();var paymentMethod=$('.order-shippings ._payment-method input[type="radio"]:checked').val();if(giftCode==''){inputGiftCode.addClass('error');elNotice.text('Bạn chưa điền mã code !');return false;}
$.ajax({async:false,type:'POST',url:'/ajax?api=promotion.applyGiftCodePromotion',data:{giftCode:giftCode,cartType:controllerName,shippingMethod:shippingMethod,paymentMethod:paymentMethod},dataType:'json',beforeSend:function(){},success:function(result){var error=result.error;var message=result.message;var data=result.data;if(error==0&&data!=''){$("#alertNoticeContent").html('<div class="alert "><strong>'+message+'</strong></div>');$("#alertNotice").modal();setTimeout(function(){window.location.reload();},2000);}else{elNotice.text(message);}},error:function(jqxhr){console.log('Error while contacting server, please try again');},complete:function(){}});});$(document).on('keyup','._boxGiftCode input[type="text"]',function(){var elInput=$(this);if(elInput.val()!=''){$(this).removeClass('error');$('._noticeGiftCode').text('');}});$(document).on('click','._btnRemoveGiftCode',function(){var elBtnRemove=$(this);var giftCode=elBtnRemove.data().gift;$.ajax({async:false,type:'POST',url:'/ajax?api=promotion.removeGiftCodePromotion',data:{giftCode:giftCode,cartType:controllerName},dataType:'json',beforeSend:function(){},success:function(result){if(result.error==0){window.location.reload();$('.order-items .order-item').each(function(){var gift=$(this).data().gift;if(gift==giftCode){$(this).remove();}});$('.form-add-gif-tcode').removeClass('hidden');elBtnRemove.parent().html('');}},error:function(jqxhr){console.log('Error while contacting server, please try again');},complete:function(){}});});$(document).ready(function(){$('#formInventoryAlert').formValidation({framework:'bootstrap',icon:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'}}).on('success.form.fv',function(e){if($('.date_choose').val()!=''&&$('.name_inventory').val()!=''&&$('.number_phone_inventory').val()!=''&&$('.email_inventory').val()!=''){$('#formInventoryAlert').formValidation('revalidateField','phone');$.ajax({type:'POST',url:'/ajax?api=product.emailToCSDeal',data:{product_id:$('.product_id_inventory').val(),user_id:$('.user_id_inventory').val(),date:$('.date_choose').val(),name:$('.name_inventory').val(),number_phone:$('.number_phone_inventory').val(),email:$('.email_inventory').val()},success:function(data){console.log(data);if(data.error===0){$("#confirmAlertInventoryModal").modal('hide');$("#modalAlertInventory").modal();}},error:function(data){}});}
e.preventDefault();});});$('#alert-room').click(function(){$('.date_choose').val($('.datePicker').val());$('.product_id_inventory').val($('.datePicker').data('id'));if(checkLogin()){$.ajax({type:'POST',url:'/ajax?api=user.getInfoUser',data:{user_id:getCookie('user_id')},success:function(data){console.log(data);if(data.error===0){$('.user_id_inventory').val(getCookie('user_id'));$('.name_inventory').val(data.data['name']);$('.email_inventory').val(data.data['email']);$('.number_phone_inventory').val(data.data['number_phone']);$("#confirmAlertInventoryModal").modal();}},error:function(data){}});}else{$("#confirmAlertInventoryModal").modal();}});function changeLocationContactPage(value){if(value=="Hà Nội"){$('.spa-lam-dep').removeClass('hide');$('.spa-lam-dep').attr('selected',true);$('.am-thuc-giai-tri').removeClass('hide');$('.du-lich-khach-san').removeClass('hide');$('.ve-su-kien').addClass('hide');}
else if(value=="Hồ Chí Minh"){$('.spa-lam-dep').removeClass('hide');$('.am-thuc-giai-tri').removeClass('hide');$('.du-lich-khach-san').removeClass('hide');$('.ve-su-kien').removeClass('hide');}
else{$('.non-catalog').attr('selected',true);$('.spa-lam-dep').addClass('hide');$('.am-thuc-giai-tri').addClass('hide');$('.du-lich-khach-san').addClass('hide');$('.ve-su-kien').addClass('hide');}}
$(document).ready(function(){$("a.tab").click(function(){$(".active-s").removeClass("active-s");$(this).addClass("active-s");$(".box-deal-1").slideUp();var content_show=$(this).attr("title");$("#"+content_show).slideDown();});});;
(function(d){d.flexslider=function(j,l){var a=d(j),c=d.extend({},d.flexslider.defaults,l),e=c.namespace,q="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,u=q?"touchend":"click",m="vertical"===c.direction,n=c.reverse,h=0<c.itemWidth,s="fade"===c.animation,t=""!==c.asNavFor,f={};d.data(j,"flexslider",a);f={init:function(){a.animating=!1;a.currentSlide=c.startAt;a.animatingTo=a.currentSlide;a.atEnd=0===a.currentSlide||a.currentSlide===a.last;a.containerSelector=c.selector.substr(0,c.selector.search(" "));a.slides=d(c.selector,a);a.container=d(a.containerSelector,a);a.count=a.slides.length;a.syncExists=0<d(c.sync).length;"slide"===c.animation&&(c.animation="swing");a.prop=m?"top":"marginLeft";a.args={};a.manualPause=!1;var b=a,g;if(g=!c.video)if(g=!s)if(g=c.useCSS)a:{g=document.createElement("div");var p=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],e;for(e in p)if(void 0!==g.style[p[e]]){a.pfx=p[e].replace("Perspective","").toLowerCase();a.prop="-"+a.pfx+"-transform";g=!0;break a}g=!1}b.transitions=g;""!==c.controlsContainer&&(a.controlsContainer=0<d(c.controlsContainer).length&&d(c.controlsContainer));""!==c.manualControls&&(a.manualControls=0<d(c.manualControls).length&&d(c.manualControls));c.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-0.5}),a.container.empty().append(a.slides));a.doMath();t&&f.asNav.setup();a.setup("init");c.controlNav&&f.controlNav.setup();c.directionNav&&f.directionNav.setup();c.keyboard&&(1===d(a.containerSelector).length||c.multipleKeyboard)&&d(document).bind("keyup",function(b){b=b.keyCode;if(!a.animating&&(39===b||37===b))b=39===b?a.getTarget("next"):37===b?a.getTarget("prev"):!1,a.flexAnimate(b,c.pauseOnAction)});c.mousewheel&&a.bind("mousewheel",function(b,g){b.preventDefault();var d=0>g?a.getTarget("next"):a.getTarget("prev");a.flexAnimate(d,c.pauseOnAction)});c.pausePlay&&f.pausePlay.setup();c.slideshow&&(c.pauseOnHover&&a.hover(function(){!a.manualPlay&&!a.manualPause&&a.pause()},function(){!a.manualPause&&!a.manualPlay&&a.play()}),0<c.initDelay?setTimeout(a.play,c.initDelay):a.play());q&&c.touch&&f.touch();(!s||s&&c.smoothHeight)&&d(window).bind("resize focus",f.resize);setTimeout(function(){c.start(a)},200)},asNav:{setup:function(){a.asNav=!0;a.animatingTo=Math.floor(a.currentSlide/a.move);a.currentItem=a.currentSlide;a.slides.removeClass(e+"active-slide").eq(a.currentItem).addClass(e+"active-slide");a.slides.click(function(b){b.preventDefault();b=d(this);var g=b.index();!d(c.asNavFor).data("flexslider").animating&&!b.hasClass("active")&&(a.direction=a.currentItem<g?"next":"prev",a.flexAnimate(g,c.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){a.manualControls?f.controlNav.setupManual():f.controlNav.setupPaging()},setupPaging:function(){var b=1,g;a.controlNavScaffold=d('<ol class="'+e+"control-nav "+e+("thumbnails"===c.controlNav?"control-thumbs":"control-paging")+'"></ol>');if(1<a.pagingCount)for(var p=0;p<a.pagingCount;p++)g="thumbnails"===c.controlNav?'<img src="'+a.slides.eq(p).attr("data-thumb")+'"/>':"<a>"+b+"</a>",a.controlNavScaffold.append("<li>"+g+"</li>"),b++;a.controlsContainer?d(a.controlsContainer).append(a.controlNavScaffold):a.append(a.controlNavScaffold);f.controlNav.set();f.controlNav.active();a.controlNavScaffold.delegate("a, img",u,function(b){b.preventDefault();b=d(this);var g=a.controlNav.index(b);b.hasClass(e+"active")||(a.direction=g>a.currentSlide?"next":"prev",a.flexAnimate(g,c.pauseOnAction))});q&&a.controlNavScaffold.delegate("a","click touchstart",function(a){a.preventDefault()})},setupManual:function(){a.controlNav=a.manualControls;f.controlNav.active();a.controlNav.live(u,function(b){b.preventDefault();b=d(this);var g=a.controlNav.index(b);b.hasClass(e+"active")||(g>a.currentSlide?a.direction="next":a.direction="prev",a.flexAnimate(g,c.pauseOnAction))});q&&a.controlNav.live("click touchstart",function(a){a.preventDefault()})},set:function(){a.controlNav=d("."+e+"control-nav li "+("thumbnails"===c.controlNav?"img":"a"),a.controlsContainer?a.controlsContainer:a)},active:function(){a.controlNav.removeClass(e+"active").eq(a.animatingTo).addClass(e+"active")},update:function(b,c){1<a.pagingCount&&"add"===b?a.controlNavScaffold.append(d("<li><a>"+a.count+"</a></li>")):1===a.pagingCount?a.controlNavScaffold.find("li").remove():a.controlNav.eq(c).closest("li").remove();f.controlNav.set();1<a.pagingCount&&a.pagingCount!==a.controlNav.length?a.update(c,b):f.controlNav.active()}},directionNav:{setup:function(){var b=d('<ul class="'+
e+'direction-nav"><li><a class="'+e+'prev" href="#">'+c.prevText+'</a></li><li><a class="'+e+'next" href="#">'+c.nextText+"</a></li></ul>");a.controlsContainer?(d(a.controlsContainer).append(b),a.directionNav=d("."+e+"direction-nav li a",a.controlsContainer)):(a.append(b),a.directionNav=d("."+e+"direction-nav li a",a));f.directionNav.update();a.directionNav.bind(u,function(b){b.preventDefault();b=d(this).hasClass(e+"next")?a.getTarget("next"):a.getTarget("prev");a.flexAnimate(b,c.pauseOnAction)});q&&a.directionNav.bind("click touchstart",function(a){a.preventDefault()})},update:function(){var b=e+"disabled";1===a.pagingCount?a.directionNav.addClass(b):c.animationLoop?a.directionNav.removeClass(b):0===a.animatingTo?a.directionNav.removeClass(b).filter("."+e+"prev").addClass(b):a.animatingTo===a.last?a.directionNav.removeClass(b).filter("."+e+"next").addClass(b):a.directionNav.removeClass(b)}},pausePlay:{setup:function(){var b=d('<div class="'+e+'pauseplay"><a></a></div>');a.controlsContainer?(a.controlsContainer.append(b),a.pausePlay=d("."+e+"pauseplay a",a.controlsContainer)):(a.append(b),a.pausePlay=d("."+e+"pauseplay a",a));f.pausePlay.update(c.slideshow?e+"pause":e+"play");a.pausePlay.bind(u,function(b){b.preventDefault();d(this).hasClass(e+"pause")?(a.manualPause=!0,a.manualPlay=!1,a.pause()):(a.manualPause=!1,a.manualPlay=!0,a.play())});q&&a.pausePlay.bind("click touchstart",function(a){a.preventDefault()})},update:function(b){"play"===b?a.pausePlay.removeClass(e+"pause").addClass(e+"play").text(c.playText):a.pausePlay.removeClass(e+"play").addClass(e+"pause").text(c.pauseText)}},touch:function(){function b(b){k=m?d-b.touches[0].pageY:d-b.touches[0].pageX;q=m?Math.abs(k)<Math.abs(b.touches[0].pageX-e):Math.abs(k)<Math.abs(b.touches[0].pageY-e);if(!q||500<Number(new Date)-l)b.preventDefault(),!s&&a.transitions&&(c.animationLoop||(k/=0===a.currentSlide&&0>k||a.currentSlide===a.last&&0<k?Math.abs(k)/r+2:1),a.setProps(f+k,"setTouch"))}function g(){j.removeEventListener("touchmove",b,!1);if(a.animatingTo===a.currentSlide&&!q&&null!==k){var h=n?-k:k,m=0<h?a.getTarget("next"):a.getTarget("prev");a.canAdvance(m)&&(550>Number(new Date)-l&&50<Math.abs(h)||Math.abs(h)>r/2)?a.flexAnimate(m,c.pauseOnAction):s||a.flexAnimate(a.currentSlide,c.pauseOnAction,!0)}j.removeEventListener("touchend",g,!1);f=k=e=d=null}var d,e,f,r,k,l,q=!1;j.addEventListener("touchstart",function(k){a.animating?k.preventDefault():1===k.touches.length&&(a.pause(),r=m?a.h:a.w,l=Number(new Date),f=h&&n&&a.animatingTo===a.last?0:h&&n?a.limit-(a.itemW+c.itemMargin)*a.move*a.animatingTo:h&&a.currentSlide===a.last?a.limit:h?(a.itemW+c.itemMargin)*a.move*a.currentSlide:n?(a.last-a.currentSlide+a.cloneOffset)*r:(a.currentSlide+a.cloneOffset)*r,d=m?k.touches[0].pageY:k.touches[0].pageX,e=m?k.touches[0].pageX:k.touches[0].pageY,j.addEventListener("touchmove",b,!1),j.addEventListener("touchend",g,!1))},!1)},resize:function(){!a.animating&&a.is(":visible")&&(h||a.doMath(),s?f.smoothHeight():h?(a.slides.width(a.computedW),a.update(a.pagingCount),a.setProps()):m?(a.viewport.height(a.h),a.setProps(a.h,"setTotal")):(c.smoothHeight&&f.smoothHeight(),a.newSlides.width(a.computedW),a.setProps(a.computedW,"setTotal")))},smoothHeight:function(b){if(!m||s){var c=s?a:a.viewport;b?c.animate({height:a.slides.eq(a.animatingTo).height()},b):c.height(a.slides.eq(a.animatingTo).height())}},sync:function(b){var g=d(c.sync).data("flexslider"),e=a.animatingTo;switch(b){case"animate":g.flexAnimate(e,c.pauseOnAction,!1,!0);break;case"play":!g.playing&&!g.asNav&&g.play();break;case"pause":g.pause()}}};a.flexAnimate=function(b,g,p,j,l){t&&1===a.pagingCount&&(a.direction=a.currentItem<b?"next":"prev");if(!a.animating&&(a.canAdvance(b,l)||p)&&a.is(":visible")){if(t&&j)if(p=d(c.asNavFor).data("flexslider"),a.atEnd=0===b||b===a.count-1,p.flexAnimate(b,!0,!1,!0,l),a.direction=a.currentItem<b?"next":"prev",p.direction=a.direction,Math.ceil((b+1)/a.visible)-1!==a.currentSlide&&0!==b)a.currentItem=b,a.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide"),b=Math.floor(b/a.visible);else return a.currentItem=b,a.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide"),!1;a.animating=!0;a.animatingTo=b;c.before(a);g&&a.pause();a.syncExists&&!l&&f.sync("animate");c.controlNav&&f.controlNav.active();h||a.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide");a.atEnd=0===b||b===a.last;c.directionNav&&f.directionNav.update();b===a.last&&(c.end(a),c.animationLoop||a.pause());if(s)q?(a.slides.eq(a.currentSlide).css({opacity:0,zIndex:1}),a.slides.eq(b).css({opacity:1,zIndex:2}),a.slides.unbind("webkitTransitionEnd transitionend"),a.slides.eq(a.currentSlide).bind("webkitTransitionEnd transitionend",function(){c.after(a)}),a.animating=!1,a.currentSlide=a.animatingTo):(a.slides.eq(a.currentSlide).fadeOut(c.animationSpeed,c.easing),a.slides.eq(b).fadeIn(c.animationSpeed,c.easing,a.wrapup));else{var r=m?a.slides.filter(":first").height():a.computedW;h?(b=c.itemWidth>a.w?2*c.itemMargin:c.itemMargin,b=(a.itemW+b)*a.move*a.animatingTo,b=b>a.limit&&1!==a.visible?a.limit:b):b=0===a.currentSlide&&b===a.count-1&&c.animationLoop&&"next"!==a.direction?n?(a.count+a.cloneOffset)*r:0:a.currentSlide===a.last&&0===b&&c.animationLoop&&"prev"!==a.direction?n?0:(a.count+1)*r:n?(a.count-1-b+a.cloneOffset)*r:(b+a.cloneOffset)*r;a.setProps(b,"",c.animationSpeed);if(a.transitions){if(!c.animationLoop||!a.atEnd)a.animating=!1,a.currentSlide=a.animatingTo;a.container.unbind("webkitTransitionEnd transitionend");a.container.bind("webkitTransitionEnd transitionend",function(){a.wrapup(r)})}else a.container.animate(a.args,c.animationSpeed,c.easing,function(){a.wrapup(r)})}c.smoothHeight&&f.smoothHeight(c.animationSpeed)}};a.wrapup=function(b){!s&&!h&&(0===a.currentSlide&&a.animatingTo===a.last&&c.animationLoop?a.setProps(b,"jumpEnd"):a.currentSlide===a.last&&(0===a.animatingTo&&c.animationLoop)&&a.setProps(b,"jumpStart"));a.animating=!1;a.currentSlide=a.animatingTo;c.after(a)};a.animateSlides=function(){a.animating||a.flexAnimate(a.getTarget("next"))};a.pause=function(){clearInterval(a.animatedSlides);a.playing=!1;c.pausePlay&&f.pausePlay.update("play");a.syncExists&&f.sync("pause")};a.play=function(){a.animatedSlides=setInterval(a.animateSlides,c.slideshowSpeed);a.playing=!0;c.pausePlay&&f.pausePlay.update("pause");a.syncExists&&f.sync("play")};a.canAdvance=function(b,g){var d=t?a.pagingCount-1:a.last;return g?!0:t&&a.currentItem===a.count-1&&0===b&&"prev"===a.direction?!0:t&&0===a.currentItem&&b===a.pagingCount-1&&"next"!==a.direction?!1:b===a.currentSlide&&!t?!1:c.animationLoop?!0:a.atEnd&&0===a.currentSlide&&b===d&&"next"!==a.direction?!1:a.atEnd&&a.currentSlide===d&&0===b&&"next"===a.direction?!1:!0};a.getTarget=function(b){a.direction=b;return"next"===b?a.currentSlide===a.last?0:a.currentSlide+1:0===a.currentSlide?a.last:a.currentSlide-1};a.setProps=function(b,g,d){var e,f=b?b:(a.itemW+c.itemMargin)*a.move*a.animatingTo;e=-1*function(){if(h)return"setTouch"===g?b:n&&a.animatingTo===a.last?0:n?a.limit-(a.itemW+c.itemMargin)*a.move*a.animatingTo:a.animatingTo===a.last?a.limit:f;switch(g){case"setTotal":return n?(a.count-1-a.currentSlide+a.cloneOffset)*b:(a.currentSlide+a.cloneOffset)*b;case"setTouch":return b;case"jumpEnd":return n?b:a.count*b;case"jumpStart":return n?a.count*b:b;default:return b}}()+"px";a.transitions&&(e=m?"translate3d(0,"+e+",0)":"translate3d("+e+",0,0)",d=void 0!==d?d/1E3+"s":"0s",a.container.css("-"+a.pfx+"-transition-duration",d));a.args[a.prop]=e;(a.transitions||void 0===d)&&a.container.css(a.args)};a.setup=function(b){if(s)a.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(q?a.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+c.animationSpeed/1E3+"s ease",zIndex:1}).eq(a.currentSlide).css({opacity:1,zIndex:2}):a.slides.eq(a.currentSlide).fadeIn(c.animationSpeed,c.easing)),c.smoothHeight&&f.smoothHeight();else{var g,p;"init"===b&&(a.viewport=d('<div class="'+e+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(a).append(a.container),a.cloneCount=0,a.cloneOffset=0,n&&(p=d.makeArray(a.slides).reverse(),a.slides=d(p),a.container.empty().append(a.slides)));c.animationLoop&&!h&&(a.cloneCount=2,a.cloneOffset=1,"init"!==b&&a.container.find(".clone").remove(),a.container.append(a.slides.first().clone().addClass("clone")).prepend(a.slides.last().clone().addClass("clone")));a.newSlides=d(c.selector,a);g=n?a.count-1-a.currentSlide+a.cloneOffset:a.currentSlide+a.cloneOffset;m&&!h?(a.container.height(200*(a.count+a.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){a.newSlides.css({display:"block"});a.doMath();a.viewport.height(a.h);a.setProps(g*a.h,"init")},"init"===b?100:0)):(a.container.width(200*(a.count+a.cloneCount)+"%"),a.setProps(g*a.computedW,"init"),setTimeout(function(){a.doMath();a.newSlides.css({width:a.computedW,"float":"left",display:"block"});c.smoothHeight&&f.smoothHeight()},"init"===b?100:0))}h||a.slides.removeClass(e+"active-slide").eq(a.currentSlide).addClass(e+"active-slide")};a.doMath=function(){var b=a.slides.first(),d=c.itemMargin,e=c.minItems,f=c.maxItems;a.w=a.width();a.h=b.height();a.boxPadding=b.outerWidth()-b.width();h?(a.itemT=c.itemWidth+d,a.minW=e?e*a.itemT:a.w,a.maxW=f?f*a.itemT:a.w,a.itemW=a.minW>a.w?(a.w-d*e)/e:a.maxW<a.w?(a.w-d*f)/f:c.itemWidth>a.w?a.w:c.itemWidth,a.visible=Math.floor(a.w/(a.itemW+d)),a.move=0<c.move&&c.move<a.visible?c.move:a.visible,a.pagingCount=Math.ceil((a.count-a.visible)/a.move+1),a.last=a.pagingCount-1,a.limit=1===a.pagingCount?0:c.itemWidth>a.w?(a.itemW+2*d)*a.count-a.w-
d:(a.itemW+d)*a.count-a.w-d):(a.itemW=a.w,a.pagingCount=a.count,a.last=a.count-1);a.computedW=a.itemW-a.boxPadding};a.update=function(b,d){a.doMath();h||(b<a.currentSlide?a.currentSlide+=1:b<=a.currentSlide&&0!==b&&(a.currentSlide-=1),a.animatingTo=a.currentSlide);if(c.controlNav&&!a.manualControls)if("add"===d&&!h||a.pagingCount>a.controlNav.length)f.controlNav.update("add");else if("remove"===d&&!h||a.pagingCount<a.controlNav.length)h&&a.currentSlide>a.last&&(a.currentSlide-=1,a.animatingTo-=1),f.controlNav.update("remove",a.last);c.directionNav&&f.directionNav.update()};a.addSlide=function(b,e){var f=d(b);a.count+=1;a.last=a.count-1;m&&n?void 0!==e?a.slides.eq(a.count-e).after(f):a.container.prepend(f):void 0!==e?a.slides.eq(e).before(f):a.container.append(f);a.update(e,"add");a.slides=d(c.selector+":not(.clone)",a);a.setup();c.added(a)};a.removeSlide=function(b){var e=isNaN(b)?a.slides.index(d(b)):b;a.count-=1;a.last=a.count-1;isNaN(b)?d(b,a.slides).remove():m&&n?a.slides.eq(a.last).remove():a.slides.eq(b).remove();a.doMath();a.update(e,"remove");a.slides=d(c.selector+":not(.clone)",a);a.setup();c.removed(a)};f.init()};d.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7E3,animationSpeed:600,initDelay:0,randomize:!1,pauseOnAction:!0,pauseOnHover:!1,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};d.fn.flexslider=function(j){void 0===j&&(j={});if("object"===typeof j)return this.each(function(){var a=d(this),c=a.find(j.selector?j.selector:".slides > li");1===c.length?(c.fadeIn(400),j.start&&j.start(a)):void 0==a.data("flexslider")&&new d.flexslider(this,j)});var l=d(this).data("flexslider");switch(j){case"play":l.play();break;case"pause":l.pause();break;case"next":l.flexAnimate(l.getTarget("next"),!0);break;case"prev":case"previous":l.flexAnimate(l.getTarget("prev"),!0);break;default:"number"===typeof j&&l.flexAnimate(j,!0)}}})(jQuery);;
!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,i,s,a;for(var f in C){if(e=[],n=C[f],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,"function")?n.fn():n.fn,i=0;i<e.length;i++)s=e[i],a=s.split("."),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),g.push((o?"":"no-")+a.join("-"))}}function i(e){var n=x.className,t=Modernizr._config.classPrefix||"";if(w&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(r,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),w?x.className.baseVal=n:x.className=n)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function a(e,n){return!!~(""+e).indexOf(n)}function f(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):w?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function l(e,n){return function(){return e.apply(n,arguments)}}function u(e,n,t){var o;for(var i in e)if(e[i]in n)return t===!1?e[i]:(o=n[e[i]],r(o,"function")?l(o,t||n):o);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(){var e=n.body;return e||(e=f(w?"svg":"body"),e.fake=!0),e}function c(e,t,r,o){var i,s,a,l,u="modernizr",p=f("div"),c=d();if(parseInt(r,10))for(;r--;)a=f("div"),a.id=o?o[r]:u+(r+1),p.appendChild(a);return i=f("style"),i.type="text/css",i.id="s"+u,(c.fake?c:p).appendChild(i),c.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e)),p.id=u,c.fake&&(c.style.background="",c.style.overflow="hidden",l=x.style.overflow,x.style.overflow="hidden",x.appendChild(c)),s=t(p,e),c.fake?(c.parentNode.removeChild(c),x.style.overflow=l,x.offsetHeight):p.parentNode.removeChild(p),!!s}function m(n,r){var o=n.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(p(n[o]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];o--;)i.push("("+p(n[o])+":"+r+")");return i=i.join(" or "),c("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return t}function v(e,n,o,i){function l(){p&&(delete P.style,delete P.modElem)}if(i=r(i,"undefined")?!1:i,!r(o,"undefined")){var u=m(e,o);if(!r(u,"undefined"))return u}for(var p,d,c,v,h,y=["modernizr","tspan"];!P.style;)p=!0,P.modElem=f(y.shift()),P.style=P.modElem.style;for(c=e.length,d=0;c>d;d++)if(v=e[d],h=P.style[v],a(v,"-")&&(v=s(v)),P.style[v]!==t){if(i||r(o,"undefined"))return l(),"pfx"==n?v:!0;try{P.style[v]=o}catch(g){}if(P.style[v]!=h)return l(),"pfx"==n?v:!0}return l(),!1}function h(e,n,t,o,i){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+b.join(s+" ")+s).split(" ");return r(n,"string")||r(n,"undefined")?v(a,n,o,i):(a=(e+" "+N.join(s+" ")+s).split(" "),u(a,n,t))}function y(e,n,r){return h(e,t,t,n,r)}var g=[],C=[],_={_version:"3.1.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){C.push({name:e,fn:n,options:t})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=_,Modernizr=new Modernizr;var x=n.documentElement,w="svg"===x.nodeName.toLowerCase(),S="Moz O ms Webkit",b=_._config.usePrefixes?S.split(" "):[];_._cssomPrefixes=b;var E=function(n){var r,o=prefixes.length,i=e.CSSRule;if("undefined"==typeof i)return t;if(!n)return!1;if(n=n.replace(/^@/,""),r=n.replace(/-/g,"_").toUpperCase()+"_RULE",r in i)return"@"+n;for(var s=0;o>s;s++){var a=prefixes[s],f=a.toUpperCase()+"_"+r;if(f in i)return"@-"+a.toLowerCase()+"-"+n}return!1};_.atRule=E;var N=_._config.usePrefixes?S.toLowerCase().split(" "):[];_._domPrefixes=N;var z={elem:f("modernizr")};Modernizr._q.push(function(){delete z.elem});var P={style:z.elem.style};Modernizr._q.unshift(function(){delete P.style}),_.testAllProps=h;_.prefixed=function(e,n,t){return 0===e.indexOf("@")?E(e):(-1!=e.indexOf("-")&&(e=s(e)),n?h(e,n,t):h(e,"pfx"))};_.testAllProps=y,Modernizr.addTest("cssanimations",y("animationName","a",!0)),o(),i(g),delete _.addTest,delete _.addAsyncTest;for(var T=0;T<Modernizr._q.length;T++)Modernizr._q[T]();e.Modernizr=Modernizr}(window,document);;
(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie);}else if(typeof exports==='object'){module.exports=classie;}else{window.classie=classie;}})(window);;
(function(){var t,e,n,r,i,o,s,a,l,u,f,h,c,p,m,d,g,y,v,b,w,x,M,k,S,T,C,F,H,R,q,X,Y,j,z,I,A,G,V,Z,E,O,L,D,P,W,N,$,B,U,K,J,Q,_,te,ee,ne=function(t,e){return function(){return t.apply(e,arguments)}};H=function(){return"visible"===document.visibilityState||null!=T.tests},j=function(){var t;return t=[],"undefined"!=typeof document&&null!==document&&document.addEventListener("visibilitychange",function(){var e,n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(e(H()));return i}),function(e){return t.push(e)}}(),x=function(t){var e,n,r;n={};for(e in t)r=t[e],n[e]=r;return n},b=function(t){var e;return e={},function(){var n,r,i,o,s;for(r="",o=0,s=arguments.length;s>o;o++)n=arguments[o],r+=n.toString()+",";return i=e[r],i||(e[r]=i=t.apply(this,arguments)),i}},Y=function(t){return function(e){var n,r,i;return e instanceof Array||e instanceof NodeList||e instanceof HTMLCollection?i=function(){var i,o,s;for(s=[],r=i=0,o=e.length;o>=0?o>i:i>o;r=o>=0?++i:--i)n=Array.prototype.slice.call(arguments,1),n.splice(0,0,e[r]),s.push(t.apply(this,n));return s}.apply(this,arguments):t.apply(this,arguments)}},d=function(t,e){var n,r,i;i=[];for(n in e)r=e[n],i.push(null!=t[n]?t[n]:t[n]=r);return i},g=function(t,e){var n,r,i;if(null!=t.style)return y(t,e);i=[];for(n in e)r=e[n],i.push(t[n]=r.format());return i},y=function(t,e){var n,r,i,o,s;e=z(e),o=[],n=R(t);for(r in e)s=e[r],_.contains(r)?o.push([r,s]):(s=null!=s.format?s.format():""+s+ee(r,s),n&&B.contains(r)?t.setAttribute(r,s):t.style[A(r)]=s);return o.length>0?n?(i=new l,i.applyProperties(o),t.setAttribute("transform",i.decompose().format())):(s=o.map(function(t){return te(t[0],t[1])}).join(" "),t.style[A("transform")]=s):void 0},R=function(t){var e,n;return"undefined"!=typeof SVGElement&&null!==SVGElement&&"undefined"!=typeof SVGSVGElement&&null!==SVGSVGElement?t instanceof SVGElement&&!(t instanceof SVGSVGElement):null!=(e=null!=(n=T.tests)&&"function"==typeof n.isSVG?n.isSVG(t):void 0)?e:!1},Z=function(t,e){var n;return n=Math.pow(10,e),Math.round(t*n)/n},u=function(){function t(t){var e,n,r;for(this.obj={},n=0,r=t.length;r>n;n++)e=t[n],this.obj[e]=1}return t.prototype.contains=function(t){return 1===this.obj[t]},t}(),Q=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},G=new u("marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius".split(",")),S=new u("rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ".split(",")),_=new u("translate,translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,rotateC,rotateCX,rotateCY,skew,skewX,skewY,skewZ,perspective".split(",")),B=new u("accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z".split(",")),ee=function(t,e){return"number"!=typeof e?"":G.contains(t)?"px":S.contains(t)?"deg":""},te=function(t,e){var n,r;return n=(""+e).match(/^([0-9.-]*)([^0-9]*)$/),null!=n?(e=n[1],r=n[2]):e=parseFloat(e),e=Z(parseFloat(e),10),(null==r||""===r)&&(r=ee(t,e)),""+t+"("+e+r+")"},z=function(t){var e,n,r,i,o,s,a,l;r={};for(i in t)if(o=t[i],_.contains(i))if(n=i.match(/(translate|rotateC|rotate|skew|scale|perspective)(X|Y|Z|)/),n&&n[2].length>0)r[i]=o;else for(l=["X","Y","Z"],s=0,a=l.length;a>s;s++)e=l[s],r[n[1]+e]=o;else r[i]=o;return r},k=function(t){var e;return e="opacity"===t?1:0,""+e+ee(t,e)},C=function(t,e){var n,r,i,o,s,u,f,h,c,p,m;if(o={},n=R(t),null!=t.style)for(s=window.getComputedStyle(t,null),f=0,c=e.length;c>f;f++)r=e[f],_.contains(r)?null==o.transform&&(i=n?new l(null!=(m=t.transform.baseVal.consolidate())?m.matrix:void 0):a.fromTransform(s[A("transform")]),o.transform=i.decompose()):(u=s[r],null==u&&B.contains(r)&&(u=t.getAttribute(r)),(""===u||null==u)&&(u=k(r)),o[r]=M(u));else for(h=0,p=e.length;p>h;h++)r=e[h],o[r]=M(t[r]);return o},M=function(t){var e,n,a,l,u;for(a=[i,r,o,s],l=0,u=a.length;u>l;l++)if(n=a[l],e=n.create(t),null!=e)return e;return null},o=function(){function t(t){this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this),this.obj=t}return t.prototype.interpolate=function(e,n){var r,i,o,s,a;s=this.obj,r=e.obj,o={};for(i in s)a=s[i],o[i]=null!=a.interpolate?a.interpolate(r[i],n):a;return new t(o)},t.prototype.format=function(){return this.obj},t.create=function(e){var n,r,i;if(e instanceof Object){r={};for(n in e)i=e[n],r[n]=M(i);return new t(r)}return null},t}(),s=function(){function t(t,e,n){this.prefix=e,this.suffix=n,this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this),this.value=parseFloat(t)}return t.prototype.interpolate=function(e,n){var r,i;return i=this.value,r=e.value,new t((r-i)*n+i,e.prefix||this.prefix,e.suffix||this.suffix)},t.prototype.format=function(){return null==this.prefix&&null==this.suffix?Z(this.value,5):this.prefix+Z(this.value,5)+this.suffix},t.create=function(e){var n;return"string"!=typeof e?new t(e):(n=(""+e).match("([^0-9.+-]*)([0-9.+-]+)([^0-9.+-]*)"),null!=n?new t(n[2],n[1],n[3]):null)},t}(),r=function(){function t(t,e){this.values=t,this.sep=e,this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this)}return t.prototype.interpolate=function(e,n){var r,i,o,s,a,l;for(s=this.values,r=e.values,o=[],i=a=0,l=Math.min(s.length,r.length);l>=0?l>a:a>l;i=l>=0?++a:--a)o.push(null!=s[i].interpolate?s[i].interpolate(r[i],n):s[i]);return new t(o,this.sep)},t.prototype.format=function(){var t;return t=this.values.map(function(t){return null!=t.format?t.format():t}),null!=this.sep?t.join(this.sep):t},t.createFromArray=function(e,n){var r;return r=e.map(function(t){return M(t)||t}),r=r.filter(function(t){return null!=t}),new t(r,n)},t.create=function(e){var n,r,i,o,s;if(e instanceof Array)return t.createFromArray(e,null);if("string"==typeof e){for(i=[" ",",","|",";","/",":"],o=0,s=i.length;s>o;o++)if(r=i[o],n=e.split(r),n.length>1)return t.createFromArray(n,r);return null}},t}(),t=function(){function t(t,e){this.rgb=null!=t?t:{},this.format=e,this.toRgba=ne(this.toRgba,this),this.toRgb=ne(this.toRgb,this),this.toHex=ne(this.toHex,this)}return t.fromHex=function(e){var n,r;return n=e.match(/^#([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i),null!=n&&(e="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),r=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i),null!=r?new t({r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:1},"hex"):null},t.fromRgb=function(e){var n,r;return n=e.match(/^rgba?\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\)$/),null!=n?new t({r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(null!=(r=n[4])?r:1)},null!=n[4]?"rgba":"rgb"):null},t.componentToHex=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},t.prototype.toHex=function(){return"#"+t.componentToHex(this.rgb.r)+t.componentToHex(this.rgb.g)+t.componentToHex(this.rgb.b)},t.prototype.toRgb=function(){return"rgb("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+")"},t.prototype.toRgba=function(){return"rgba("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+", "+this.rgb.a+")"},t}(),i=function(){function e(t){this.color=t,this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this)}return e.prototype.interpolate=function(n,r){var i,o,s,a,l,u,f,h;for(a=this.color,i=n.color,s={},h=["r","g","b"],u=0,f=h.length;f>u;u++)o=h[u],l=Math.round((i.rgb[o]-a.rgb[o])*r+a.rgb[o]),s[o]=Math.min(255,Math.max(0,l));return o="a",l=Z((i.rgb[o]-a.rgb[o])*r+a.rgb[o],5),s[o]=Math.min(1,Math.max(0,l)),new e(new t(s,i.format))},e.prototype.format=function(){return"hex"===this.color.format?this.color.toHex():"rgb"===this.color.format?this.color.toRgb():"rgba"===this.color.format?this.color.toRgba():void 0},e.create=function(n){var r;if("string"==typeof n)return r=t.fromHex(n)||t.fromRgb(n),null!=r?new e(r):null},e}(),n=function(){function t(t){this.props=t,this.applyRotateCenter=ne(this.applyRotateCenter,this),this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this)}return t.prototype.interpolate=function(e,n){var r,i,o,s,a,l,u,f,h,c,p,m;for(o={},c=["translate","scale","rotate"],s=0,f=c.length;f>s;s++)for(i=c[s],o[i]=[],r=a=0,p=this.props[i].length;p>=0?p>a:a>p;r=p>=0?++a:--a)o[i][r]=(e.props[i][r]-this.props[i][r])*n+this.props[i][r];for(r=l=1;2>=l;r=++l)o.rotate[r]=e.props.rotate[r];for(m=["skew"],u=0,h=m.length;h>u;u++)i=m[u],o[i]=(e.props[i]-this.props[i])*n+this.props[i];return new t(o)},t.prototype.format=function(){return"translate("+this.props.translate.join(",")+") rotate("+this.props.rotate.join(",")+") skewX("+this.props.skew+") scale("+this.props.scale.join(",")+")"},t.prototype.applyRotateCenter=function(t){var e,n,r,i,o,s;for(n=v.createSVGMatrix(),n=n.translate(t[0],t[1]),n=n.rotate(this.props.rotate[0]),n=n.translate(-t[0],-t[1]),r=new l(n),i=r.decompose().props.translate,s=[],e=o=0;1>=o;e=++o)s.push(this.props.translate[e]-=i[e]);return s},t}(),v="undefined"!=typeof document&&null!==document?document.createElementNS("http://www.w3.org/2000/svg","svg"):void 0,l=function(){function t(t){this.m=t,this.applyProperties=ne(this.applyProperties,this),this.decompose=ne(this.decompose,this),this.m||(this.m=v.createSVGMatrix())}return t.prototype.decompose=function(){var t,e,r,i,o;return i=new f([this.m.a,this.m.b]),o=new f([this.m.c,this.m.d]),t=i.length(),r=i.dot(o),i=i.normalize(),e=o.combine(i,1,-r).length(),new n({translate:[this.m.e,this.m.f],rotate:[180*Math.atan2(this.m.b,this.m.a)/Math.PI,this.rotateCX,this.rotateCY],scale:[t,e],skew:r/e*180/Math.PI})},t.prototype.applyProperties=function(t){var e,n,r,i,o,s,a,l;for(e={},o=0,s=t.length;s>o;o++)r=t[o],e[r[0]]=r[1];for(n in e)i=e[n],"translateX"===n?this.m=this.m.translate(i,0):"translateY"===n?this.m=this.m.translate(0,i):"scaleX"===n?this.m=this.m.scale(i,1):"scaleY"===n?this.m=this.m.scale(1,i):"rotateZ"===n?this.m=this.m.rotate(i):"skewX"===n?this.m=this.m.skewX(i):"skewY"===n&&(this.m=this.m.skewY(i));return this.rotateCX=null!=(a=e.rotateCX)?a:0,this.rotateCY=null!=(l=e.rotateCY)?l:0},t}(),f=function(){function t(t){this.els=t,this.combine=ne(this.combine,this),this.normalize=ne(this.normalize,this),this.length=ne(this.length,this),this.cross=ne(this.cross,this),this.dot=ne(this.dot,this),this.e=ne(this.e,this)}return t.prototype.e=function(t){return 1>t||t>this.els.length?null:this.els[t-1]},t.prototype.dot=function(t){var e,n,r;if(e=t.els||t,r=0,n=this.els.length,n!==e.length)return null;for(n+=1;--n;)r+=this.els[n-1]*e[n-1];return r},t.prototype.cross=function(e){var n,r;return r=e.els||e,3!==this.els.length||3!==r.length?null:(n=this.els,new t([n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]))},t.prototype.length=function(){var t,e,n,r,i;for(t=0,i=this.els,n=0,r=i.length;r>n;n++)e=i[n],t+=Math.pow(e,2);return Math.sqrt(t)},t.prototype.normalize=function(){var e,n,r,i,o;r=this.length(),i=[],o=this.els;for(n in o)e=o[n],i[n]=e/r;return new t(i)},t.prototype.combine=function(e,n,r){var i,o,s,a;for(o=[],i=s=0,a=this.els.length;a>=0?a>s:s>a;i=a>=0?++s:--s)o[i]=n*this.els[i]+r*e.els[i];return new t(o)},t}(),e=function(){function t(){this.toMatrix=ne(this.toMatrix,this),this.format=ne(this.format,this),this.interpolate=ne(this.interpolate,this)}return t.prototype.interpolate=function(e,n,r){var i,o,s,a,l,u,f,h,c,p,m,d,g,y,v,b,w,x;for(null==r&&(r=null),s=this,o=new t,w=["translate","scale","skew","perspective"],d=0,b=w.length;b>d;d++)for(f=w[d],o[f]=[],a=g=0,x=s[f].length-1;x>=0?x>=g:g>=x;a=x>=0?++g:--g)o[f][a]=null==r||r.indexOf(f)>-1||r.indexOf(""+f+["x","y","z"][a])>-1?(e[f][a]-s[f][a])*n+s[f][a]:s[f][a];if(null==r||-1!==r.indexOf("rotate")){if(h=s.quaternion,c=e.quaternion,i=h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],0>i){for(a=y=0;3>=y;a=++y)h[a]=-h[a];i=-i}for(i+1>.05?1-i>=.05?(m=Math.acos(i),u=1/Math.sin(m),p=Math.sin(m*(1-n))*u,l=Math.sin(m*n)*u):(p=1-n,l=n):(c[0]=-h[1],c[1]=h[0],c[2]=-h[3],c[3]=h[2],p=Math.sin(piDouble*(.5-n)),l=Math.sin(piDouble*n)),o.quaternion=[],a=v=0;3>=v;a=++v)o.quaternion[a]=h[a]*p+c[a]*l}else o.quaternion=s.quaternion;return o},t.prototype.format=function(){return this.toMatrix().toString()},t.prototype.toMatrix=function(){var t,e,n,r,i,o,s,l,u,f,h,c,p,m,d,g;for(t=this,i=a.I(4),e=p=0;3>=p;e=++p)i.els[e][3]=t.perspective[e];for(o=t.quaternion,f=o[0],h=o[1],c=o[2],u=o[3],s=t.skew,r=[[1,0],[2,0],[2,1]],e=m=2;m>=0;e=--m)s[e]&&(l=a.I(4),l.els[r[e][0]][r[e][1]]=s[e],i=i.multiply(l));for(i=i.multiply(new a([[1-2*(h*h+c*c),2*(f*h-c*u),2*(f*c+h*u),0],[2*(f*h+c*u),1-2*(f*f+c*c),2*(h*c-f*u),0],[2*(f*c-h*u),2*(h*c+f*u),1-2*(f*f+h*h),0],[0,0,0,1]])),e=d=0;2>=d;e=++d){for(n=g=0;2>=g;n=++g)i.els[e][n]*=t.scale[e];i.els[3][e]=t.translate[e]}return i},t}(),a=function(){function t(t){this.els=t,this.toString=ne(this.toString,this),this.decompose=ne(this.decompose,this),this.inverse=ne(this.inverse,this),this.augment=ne(this.augment,this),this.toRightTriangular=ne(this.toRightTriangular,this),this.transpose=ne(this.transpose,this),this.multiply=ne(this.multiply,this),this.dup=ne(this.dup,this),this.e=ne(this.e,this)}return t.prototype.e=function(t,e){return 1>t||t>this.els.length||1>e||e>this.els[0].length?null:this.els[t-1][e-1]},t.prototype.dup=function(){return new t(this.els)},t.prototype.multiply=function(e){var n,r,i,o,s,a,l,u,f,h,c,p,m;for(p=e.modulus?!0:!1,n=e.els||e,"undefined"==typeof n[0][0]&&(n=new t(n).els),h=this.els.length,l=h,u=n[0].length,i=this.els[0].length,o=[],h+=1;--h;)for(s=l-h,o[s]=[],c=u,c+=1;--c;){for(a=u-c,m=0,f=i,f+=1;--f;)r=i-f,m+=this.els[s][r]*n[r][a];o[s][a]=m}return n=new t(o),p?n.col(1):n},t.prototype.transpose=function(){var e,n,r,i,o,s,a;for(a=this.els.length,e=this.els[0].length,n=[],o=e,o+=1;--o;)for(r=e-o,n[r]=[],s=a,s+=1;--s;)i=a-s,n[r][i]=this.els[i][r];return new t(n)},t.prototype.toRightTriangular=function(){var t,e,n,r,i,o,s,a,l,u,f,h,c,p;for(t=this.dup(),a=this.els.length,i=a,o=this.els[0].length;--a;){if(n=i-a,0===t.els[n][n])for(r=f=c=n+1;i>=c?i>f:f>i;r=i>=c?++f:--f)if(0!==t.els[r][n]){for(e=[],l=o,l+=1;--l;)u=o-l,e.push(t.els[n][u]+t.els[r][u]);t.els[n]=e;break}if(0!==t.els[n][n])for(r=h=p=n+1;i>=p?i>h:h>i;r=i>=p?++h:--h){for(s=t.els[r][n]/t.els[n][n],e=[],l=o,l+=1;--l;)u=o-l,e.push(n>=u?0:t.els[r][u]-t.els[n][u]*s);t.els[r]=e}}return t},t.prototype.augment=function(e){var n,r,i,o,s,a,l,u,f;if(n=e.els||e,"undefined"==typeof n[0][0]&&(n=new t(n).els),r=this.dup(),i=r.els[0].length,u=r.els.length,a=u,l=n[0].length,u!==n.length)return null;for(u+=1;--u;)for(o=a-u,f=l,f+=1;--f;)s=l-f,r.els[o][i+s]=n[o][s];return r},t.prototype.inverse=function(){var e,n,r,i,o,s,a,l,u,f,h,c,p;for(f=this.els.length,a=f,e=this.augment(t.I(f)).toRightTriangular(),l=e.els[0].length,o=[],f+=1;--f;){for(i=f-1,r=[],h=l,o[i]=[],n=e.els[i][i],h+=1;--h;)c=l-h,u=e.els[i][c]/n,r.push(u),c>=a&&o[i].push(u);for(e.els[i]=r,s=p=0;i>=0?i>p:p>i;s=i>=0?++p:--p){for(r=[],h=l,h+=1;--h;)c=l-h,r.push(e.els[s][c]-e.els[i][c]*e.els[s][i]);e.els[s]=r}}return new t(o)},t.I=function(e){var n,r,i,o,s;for(n=[],o=e,e+=1;--e;)for(r=o-e,n[r]=[],s=o,s+=1;--s;)i=o-s,n[r][i]=r===i?1:0;return new t(n)},t.prototype.decompose=function(){var t,n,r,i,o,s,a,l,u,h,c,p,m,d,g,y,v,b,w,x,M,k,S,T,C,F,H,R,q,X,Y,j,z,I,A,G,V,Z;for(s=this,x=[],v=[],b=[],h=[],l=[],t=[],n=q=0;3>=q;n=++q)for(t[n]=[],i=X=0;3>=X;i=++X)t[n][i]=s.els[n][i];if(0===t[3][3])return!1;for(n=Y=0;3>=Y;n=++Y)for(i=j=0;3>=j;i=++j)t[n][i]/=t[3][3];for(u=s.dup(),n=z=0;2>=z;n=++z)u.els[n][3]=0;if(u.els[3][3]=1,0!==t[0][3]||0!==t[1][3]||0!==t[2][3]){for(p=new f(t.slice(0,4)[3]),r=u.inverse(),M=r.transpose(),l=M.multiply(p).els,n=I=0;2>=I;n=++I)t[n][3]=0;t[3][3]=1}else l=[0,0,0,1];for(n=A=0;2>=A;n=++A)x[n]=t[3][n],t[3][n]=0;for(d=[],n=G=0;2>=G;n=++G)d[n]=new f(t[n].slice(0,3));if(v[0]=d[0].length(),d[0]=d[0].normalize(),b[0]=d[0].dot(d[1]),d[1]=d[1].combine(d[0],1,-b[0]),v[1]=d[1].length(),d[1]=d[1].normalize(),b[0]/=v[1],b[1]=d[0].dot(d[2]),d[2]=d[2].combine(d[0],1,-b[1]),b[2]=d[1].dot(d[2]),d[2]=d[2].combine(d[1],1,-b[2]),v[2]=d[2].length(),d[2]=d[2].normalize(),b[1]/=v[2],b[2]/=v[2],a=d[1].cross(d[2]),d[0].dot(a)<0)for(n=V=0;2>=V;n=++V)for(v[n]*=-1,i=Z=0;2>=Z;i=++Z)d[n].els[i]*=-1;g=function(t,e){return d[t].els[e]},m=[],m[1]=Math.asin(-g(0,2)),0!==Math.cos(m[1])?(m[0]=Math.atan2(g(1,2),g(2,2)),m[2]=Math.atan2(g(0,1),g(0,0))):(m[0]=Math.atan2(-g(2,0),g(1,1)),m[1]=0),w=g(0,0)+g(1,1)+g(2,2)+1,w>1e-4?(y=.5/Math.sqrt(w),C=.25/y,F=(g(2,1)-g(1,2))*y,H=(g(0,2)-g(2,0))*y,R=(g(1,0)-g(0,1))*y):g(0,0)>g(1,1)&&g(0,0)>g(2,2)?(y=2*Math.sqrt(1+g(0,0)-g(1,1)-g(2,2)),F=.25*y,H=(g(0,1)+g(1,0))/y,R=(g(0,2)+g(2,0))/y,C=(g(2,1)-g(1,2))/y):g(1,1)>g(2,2)?(y=2*Math.sqrt(1+g(1,1)-g(0,0)-g(2,2)),F=(g(0,1)+g(1,0))/y,H=.25*y,R=(g(1,2)+g(2,1))/y,C=(g(0,2)-g(2,0))/y):(y=2*Math.sqrt(1+g(2,2)-g(0,0)-g(1,1)),F=(g(0,2)+g(2,0))/y,H=(g(1,2)+g(2,1))/y,R=.25*y,C=(g(1,0)-g(0,1))/y),h=[F,H,R,C],c=new e,c.translate=x,c.scale=v,c.skew=b,c.quaternion=h,c.perspective=l,c.rotate=m;for(S in c){k=c[S];for(o in k)T=k[o],isNaN(T)&&(k[o]=0)}return c},t.prototype.toString=function(){var t,e,n,r,i;for(n="matrix3d(",t=r=0;3>=r;t=++r)for(e=i=0;3>=i;e=++i)n+=Z(this.els[t][e],10),(3!==t||3!==e)&&(n+=",");return n+=")"},t.matrixForTransform=b(function(t){var e,n,r,i,o,s;return e=document.createElement("div"),e.style.position="absolute",e.style.visibility="hidden",e.style[A("transform")]=t,document.body.appendChild(e),r=window.getComputedStyle(e,null),n=null!=(i=null!=(o=r.transform)?o:r[A("transform")])?i:null!=(s=T.tests)?s.matrixForTransform(t):void 0,document.body.removeChild(e),n}),t.fromTransform=function(e){var n,r,i,o,s,a;for(o=null!=e?e.match(/matrix3?d?\(([-0-9,e \.]*)\)/):void 0,o?(n=o[1].split(","),n=n.map(parseFloat),r=6===n.length?[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]:n):r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=[],i=a=0;3>=a;i=++a)s.push(r.slice(4*i,4*i+4));return new t(s)},t}(),I=b(function(t){var e,n,r,i,o,s,a,l,u,f;if(void 0!==document.body.style[t])return"";for(i=t.split("-"),o="",s=0,l=i.length;l>s;s++)r=i[s],o+=r.substring(0,1).toUpperCase()+r.substring(1);for(f=["Webkit","Moz","ms"],a=0,u=f.length;u>a;a++)if(n=f[a],e=n+o,void 0!==document.body.style[e])return n;return""}),A=b(function(t){var e;return e=I(t),"Moz"===e?""+e+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==e?"-"+e.toLowerCase()+"-"+Q(t):Q(t)}),V="undefined"!=typeof window&&null!==window?window.requestAnimationFrame:void 0,p=[],m=[],P=!1,W=1,"undefined"!=typeof window&&null!==window&&window.addEventListener("keyup",function(t){return 68===t.keyCode&&t.shiftKey&&t.ctrlKey?T.toggleSlow():void 0}),null==V&&(q=0,V=function(t){var e,n,r;return e=Date.now(),r=Math.max(0,16-(e-q)),n=window.setTimeout(function(){return t(e+r)},r),q=e+r,n}),O=!1,E=!1,$=function(){return O?void 0:(O=!0,V(L))},L=function(t){var e,n,r,i;if(E)return void V(L);for(n=[],r=0,i=p.length;i>r;r++)e=p[r],c(t,e)||n.push(e);return p=p.filter(function(t){return-1===n.indexOf(t)}),0===p.length?O=!1:V(L)},c=function(t,e){var n,r,i,o,s,a,l,u;if(null==e.tStart&&(e.tStart=t),o=(t-e.tStart)/e.options.duration,s=e.curve(o),r={},o>=1)r=e.curve.initialForce?e.properties.start:e.properties.end;else{u=e.properties.start;for(n in u)i=u[n],r[n]=F(i,e.properties.end[n],s)}return g(e.el,r),"function"==typeof(a=e.options).change&&a.change(e.el),o>=1&&"function"==typeof(l=e.options).complete&&l.complete(e.el),1>o},F=function(t,e,n){return null!=t&&null!=t.interpolate?t.interpolate(e,n):null},N=function(t,e,n,r){var i,o,u,f,h,c,d,g;if(null!=r&&(m=m.filter(function(t){return t.id!==r})),T.stop(t,{timeout:!1}),!n.animated)return T.css(t,e),void("function"==typeof n.complete&&n.complete(this));e=z(e),h=C(t,Object.keys(e)),i={},c=[];for(u in e)d=e[u],_.contains(u)?c.push([u,d]):(i[u]=M(d),i[u]instanceof s&&null!=t.style&&(i[u].prefix="",null==(g=i[u]).suffix&&(g.suffix=ee(u,0))));return c.length>0&&(o=R(t),o?(f=new l,f.applyProperties(c)):(d=c.map(function(t){return te(t[0],t[1])}).join(" "),f=a.fromTransform(a.matrixForTransform(d))),i.transform=f.decompose(),o&&h.transform.applyRotateCenter([i.transform.props.rotate[1],i.transform.props.rotate[2]])),p.push({el:t,properties:{start:h,end:i},options:n,curve:n.type.call(n.type,n)}),$()},J=[],K=0,D=function(t){return H()?t.realTimeoutId=setTimeout(function(){return t.fn(),w(t.id)},t.delay):void 0},h=function(t,e){var n;return K+=1,n={id:K,tStart:Date.now(),fn:t,delay:e,originalDelay:e},D(n),J.push(n),K},w=function(t){return J=J.filter(function(e){return e.id===t&&clearTimeout(e.realTimeoutId),e.id!==t})},X=function(t,e){var n;return null!=t?(n=t-e.tStart,e.originalDelay-n):e.originalDelay},"undefined"!=typeof window&&null!==window&&window.addEventListener("unload",function(){}),U=null,j(function(t){var e,n,r,i,o,s,a,l,u,f;if(E=!t,t){if(O)for(n=Date.now()-U,o=0,l=p.length;l>o;o++)e=p[o],null!=e.tStart&&(e.tStart+=n);for(s=0,u=J.length;u>s;s++)r=J[s],r.delay=X(U,r),D(r);return U=null}for(U=Date.now(),f=[],i=0,a=J.length;a>i;i++)r=J[i],f.push(clearTimeout(r.realTimeoutId));return f}),T={},T.linear=function(){return function(t){return t}},T.spring=function(t){var e,n,r,i,o,s;return null==t&&(t={}),d(t,arguments.callee.defaults),i=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),s=t.anticipationSize/1e3,r=Math.max(0,s),e=function(e){var n,r,i,o,a;return n=.8,o=s/(1-s),a=0,i=(o-n*a)/(o-a),r=(n-i)/o,r*e*t.anticipationStrength/100+i},n=function(t){return Math.pow(o/10,-t)*(1-t)},function(t){var r,o,a,l,u,f,h,c;return f=t/(1-s)-s/(1-s),s>t?(c=s/(1-s)-s/(1-s),h=0/(1-s)-s/(1-s),u=Math.acos(1/e(c)),a=(Math.acos(1/e(h))-u)/(i*-s),r=e):(r=n,u=0,a=1),o=r(f),l=i*(t-s)*a+u,1-o*Math.cos(l)}},T.bounce=function(t){var e,n,r,i;return null==t&&(t={}),d(t,arguments.callee.defaults),r=Math.max(1,t.frequency/20),i=Math.pow(20,t.friction/100),e=function(t){return Math.pow(i/10,-t)*(1-t)},n=function(t){var n,i,o,s;return s=-1.57,i=1,n=e(t),o=r*t*i+s,n*Math.cos(o)},n.initialForce=!0,n},T.gravity=function(t){var e,n,r,i,o,s,a;return null==t&&(t={}),d(t,arguments.callee.defaults),n=Math.min(t.bounciness/1250,.8),i=t.elasticity/1e3,a=100,r=[],e=function(){var r,i;for(r=Math.sqrt(2/a),i={a:-r,b:r,H:1},t.initialForce&&(i.a=0,i.b=2*i.b);i.H>.001;)e=i.b-i.a,i={a:i.b,b:i.b+e*n,H:i.H*n*n};return i.b}(),s=function(n,r,i,o){var s,a;return e=r-n,a=2/e*o-1-2*n/e,s=a*a*i-i+1,t.initialForce&&(s=1-s),s},function(){var o,s,l,u;for(s=Math.sqrt(2/(a*e*e)),l={a:-s,b:s,H:1},t.initialForce&&(l.a=0,l.b=2*l.b),r.push(l),o=e,u=[];l.b<1&&l.H>.001;)o=l.b-l.a,l={a:l.b,b:l.b+o*n,H:l.H*i},u.push(r.push(l));return u}(),o=function(e){var n,i,o;for(i=0,n=r[i];!(e>=n.a&&e<=n.b)&&(i+=1,n=r[i]););return o=n?s(n.a,n.b,n.H,e):t.initialForce?0:1},o.initialForce=t.initialForce,o},T.forceWithGravity=function(t){return null==t&&(t={}),d(t,arguments.callee.defaults),t.initialForce=!0,T.gravity(t)},T.bezier=function(){var t,e,n;return e=function(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i},t=function(t,n,r,i,o){return{x:e(t,n.x,r.x,i.x,o.x),y:e(t,n.y,r.y,i.y,o.y)}},n=function(t,e,n){var r,i,o,s,a,l,u,f,h,c;for(r=null,h=0,c=e.length;c>h&&(i=e[h],t>=i(0).x&&t<=i(1).x&&(r=i),null===r);h++);if(!r)return n?0:1;for(f=1e-4,s=0,l=1,a=(l+s)/2,u=r(a).x,o=0;Math.abs(t-u)>f&&100>o;)t>u?s=a:l=a,a=(l+s)/2,u=r(a).x,o+=1;return r(a).y},function(e){var r,i,o;return null==e&&(e={}),i=e.points,o=!1,r=function(){var e,n,o;r=[],o=function(e,n){var i;return i=function(r){return t(r,e,e.cp[e.cp.length-1],n.cp[0],n)},r.push(i)};for(e in i){if(n=parseInt(e),n>=i.length-1)break;o(i[n],i[n+1])}return r}(),function(t){return 0===t?0:1===t?1:n(t,r,o)}}}(),T.easeInOut=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:arguments.callee.defaults.friction,T.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},T.easeIn=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:arguments.callee.defaults.friction,T.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:1,y:1}]}]})},T.easeOut=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:arguments.callee.defaults.friction,T.bezier({points:[{x:0,y:0,cp:[{x:0,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},T.spring.defaults={frequency:300,friction:200,anticipationSize:0,anticipationStrength:0},T.bounce.defaults={frequency:300,friction:200},T.forceWithGravity.defaults=T.gravity.defaults={bounciness:400,elasticity:200},T.easeInOut.defaults=T.easeIn.defaults=T.easeOut.defaults={friction:500},T.css=Y(function(t,e){return y(t,e,!0)}),T.animate=Y(function(t,e,n){var r;return null==n&&(n={}),n=x(n),d(n,{type:T.easeInOut,duration:1e3,delay:0,animated:!0}),n.duration=Math.max(0,n.duration*W),n.delay=Math.max(0,n.delay),0===n.delay?N(t,e,n):(r=T.setTimeout(function(){return N(t,e,n,r)},n.delay),m.push({id:r,el:t}))}),T.stop=Y(function(t,e){return null==e&&(e={}),null==e.timeout&&(e.timeout=!0),e.timeout&&(m=m.filter(function(n){return n.el!==t||null!=e.filter&&!e.filter(n)?!1:(T.clearTimeout(n.id),!0)})),p=p.filter(function(e){return e.el!==t})}),T.setTimeout=function(t,e){return h(t,e*W)},T.clearTimeout=function(t){return w(t)},T.toggleSlow=function(){return P=!P,W=P?3:1,"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("dynamics.js: slow animations "+(P?"enabled":"disabled")):void 0},"object"==typeof module&&"object"==typeof module.exports?module.exports=T:"function"==typeof define?define("dynamics",function(){return T}):window.dynamics=T}).call(this);;;(function(window){'use strict';var support={animations:Modernizr.cssanimations},animEndEventNames={'WebkitAnimation':'webkitAnimationEnd','OAnimation':'oAnimationEnd','msAnimation':'MSAnimationEnd','animation':'animationend'},animEndEventName=animEndEventNames[Modernizr.prefixed('animation')],onEndAnimation=function(el,callback){var onEndCallbackFn=function(ev){if(support.animations){if(ev.target!=this)return;this.removeEventListener(animEndEventName,onEndCallbackFn);}
if(callback&&typeof callback==='function'){callback.call();}};if(support.animations){el.addEventListener(animEndEventName,onEndCallbackFn);}
else{onEndCallbackFn();}};function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key];}}
return a;}
function Stack(el,options){this.el=el;this.options=extend({},this.options);extend(this.options,options);this.items=[].slice.call(this.el.children);this.itemsTotal=this.items.length;if(this.options.infinite&&this.options.visible>=this.itemsTotal||!this.options.infinite&&this.options.visible>this.itemsTotal||this.options.visible<=0){this.options.visible=1;}
this.current=0;this._init();}
Stack.prototype.options={perspective:1000,perspectiveOrigin:'50% -50%',visible:3,infinite:true,onEndStack:function(){return false;},stackItemsAnimation:{duration:500,type:dynamics.bezier,points:[{'x':0,'y':0,'cp':[{'x':0.25,'y':0.1}]},{'x':1,'y':1,'cp':[{'x':0.25,'y':1}]}]},stackItemsAnimationDelay:0,};Stack.prototype._init=function(){this.el.style.WebkitPerspective=this.el.style.perspective=this.options.perspective+'px';this.el.style.WebkitPerspectiveOrigin=this.el.style.perspectiveOrigin=this.options.perspectiveOrigin;var self=this;for(var i=0;i<this.itemsTotal;++i){var item=this.items[i];item.style.opacity=1;if(i==0){item.style.transform=' rotate(0deg) scale(1) skew(1deg) translate(0px)';item.style.zIndex=5;}
if(i==1){item.style.transform=' rotate(6deg) scale(1) skew(1deg) translate(0px)';item.style.zIndex=4;item.style.left='30px';}
if(i==2){item.style.transform=' rotate(9deg) scale(1) skew(1deg) translate(0px)';item.style.zIndex=3;item.style.left='50px';}
if(i==3){item.style.transform=' rotate(-6deg) scale(1) skew(1deg) translate(0px)';item.style.zIndex=2;item.style.left='-30px';}
if(i==4){item.style.transform=' rotate(-9deg) scale(1) skew(1deg) translate(0px)';item.style.zIndex=1;item.style.left='-50px';}}
classie.add(this.items[this.current],'stack__item--current');};Stack.prototype.reject=function(callback){this._next('reject',callback);};Stack.prototype.accept=function(callback){this._next('accept',callback);};Stack.prototype.restart=function(){this.hasEnded=false;this._init();};Stack.prototype._next=function(action,callback){if(this.isAnimating||(!this.options.infinite&&this.hasEnded))return;this.isAnimating=true;var currentItem=this.items[this.current];classie.remove(currentItem,'stack__item--current');classie.add(currentItem,action==='accept'?'stack__item--accept':'stack__item--reject');if(this.current+1==this.itemsTotal){var i_next=0;}else{var i_next=this.current+1;}
var nextItem=this.items[i_next];var i_next1=this.current+2;if(this.current+2==this.itemsTotal){var i_next1=0;}else if(this.current+2>this.itemsTotal){var i_next1=1;}else{var i_next1=this.current+2;}
var nextItem1=this.items[i_next1];var i_prev=this.current+3==this.itemsTotal?0:this.current+3;if(this.current+3==this.itemsTotal){var i_prev=0;}else if(this.current+3==this.itemsTotal+1){var i_prev=1;}else if(this.current+3>this.itemsTotal+1){var i_prev=2;}else{var i_prev=this.current+3;}
var preItem=this.items[i_prev];var i_prev1=this.current-1>=0?this.current-1:4;var preItem1=this.items[i_prev1];var self=this;onEndAnimation(currentItem,function(){currentItem.style.opacity=1;currentItem.style.zIndex=1;currentItem.style.transform='rotate(-9deg) scale(1) skew(1deg) translate(0px)';currentItem.style.left='-50px';nextItem.style.zIndex=5;nextItem.style.opacity=1;nextItem.style.transform=' rotate(0deg) scale(1) skew(1deg) translate(0px)';nextItem.style.left='0px';nextItem1.style.zIndex=4;nextItem1.style.opacity=1;nextItem1.style.transform='rotate(6deg) scale(1) skew(1deg) translate(0px)';nextItem1.style.left='30px';preItem.style.zIndex=3;preItem.style.opacity=1;preItem.style.transform='rotate(9deg) scale(1) skew(1deg) translate(0px)';preItem.style.left='50px';preItem1.style.zIndex=2;preItem1.style.opacity=1;preItem1.style.transform='rotate(-6deg) scale(1) skew(1deg) translate(0px)';preItem1.style.left='-30px';classie.remove(currentItem,action==='accept'?'stack__item--accept':'stack__item--reject');self.isAnimating=false;if(callback)callback();if(!self.options.infinite&&self.current===0){self.hasEnded=true;self.options.onEndStack(self);}});this.current=this.current<this.itemsTotal-1?this.current+1:0;classie.add(this.items[this.current],'stack__item--current');}
window.Stack=Stack;})(window);;
(function(){function n(n,t){return n.set(t[0],t[1]),n}function t(n,t){return n.add(t),n}function r(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function e(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function i(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function o(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function f(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function a(n,t){var r=null==n?0:n.length;return!!r&&b(n,t,0)>-1}function c(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function l(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function s(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function h(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function p(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function v(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function _(n){return n.split("")}function g(n){return n.match(Bt)||[]}function y(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function d(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function b(n,t,r){return t===t?K(n,t,r):d(n,m,r)}function w(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function m(n){return n!==n}function x(n,t){var r=null==n?0:n.length;return r?I(n,t)/r:En}function j(n){return function(t){return null==t?X:t[n]}}function A(n){return function(t){return null==n?X:n[t]}}function k(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function O(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function I(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==X&&(r=r===X?i:r+i)}return r}function R(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function z(n,t){return l(t,function(t){return[t,n[t]]})}function E(n){return function(t){return n(t)}}function S(n,t){return l(t,function(t){return n[t]})}function W(n,t){return n.has(t)}function L(n,t){for(var r=-1,e=n.length;++r<e&&b(t,n[r],0)>-1;);return r}function C(n,t){for(var r=n.length;r--&&b(t,n[r],0)>-1;);return r}function U(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}function B(n){return"\\"+Kr[n]}function T(n,t){return null==n?X:n[t]}function $(n){return Tr.test(n)}function D(n){return $r.test(n)}function M(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function F(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function N(n,t){return function(r){return n(t(r))}}function P(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==fn||(n[r]=fn,i[u++]=r)}return i}function q(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Z(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function K(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function V(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function G(n){return $(n)?J(n):ce(n)}function H(n){return $(n)?Y(n):_(n)}function J(n){for(var t=Ur.lastIndex=0;Ur.test(n);)++t;return t}function Y(n){return n.match(Ur)||[]}function Q(n){return n.match(Br)||[]}var X,nn="4.16.5",tn=200,rn="Unsupported core-js use. Try https://github.com/es-shims.",en="Expected a function",un="__lodash_hash_undefined__",on=500,fn="__lodash_placeholder__",an=1,cn=2,ln=4,sn=8,hn=16,pn=32,vn=64,_n=128,gn=256,yn=512,dn=1,bn=2,wn=30,mn="...",xn=800,jn=16,An=1,kn=2,On=3,In=1/0,Rn=9007199254740991,zn=1.7976931348623157e308,En=NaN,Sn=4294967295,Wn=Sn-1,Ln=Sn>>>1,Cn=[["ary",_n],["bind",an],["bindKey",cn],["curry",sn],["curryRight",hn],["flip",yn],["partial",pn],["partialRight",vn],["rearg",gn]],Un="[object Arguments]",Bn="[object Array]",Tn="[object AsyncFunction]",$n="[object Boolean]",Dn="[object Date]",Mn="[object DOMException]",Fn="[object Error]",Nn="[object Function]",Pn="[object GeneratorFunction]",qn="[object Map]",Zn="[object Number]",Kn="[object Null]",Vn="[object Object]",Gn="[object Promise]",Hn="[object Proxy]",Jn="[object RegExp]",Yn="[object Set]",Qn="[object String]",Xn="[object Symbol]",nt="[object Undefined]",tt="[object WeakMap]",rt="[object WeakSet]",et="[object ArrayBuffer]",ut="[object DataView]",it="[object Float32Array]",ot="[object Float64Array]",ft="[object Int8Array]",at="[object Int16Array]",ct="[object Int32Array]",lt="[object Uint8Array]",st="[object Uint8ClampedArray]",ht="[object Uint16Array]",pt="[object Uint32Array]",vt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39);/g,dt=/[&<>"']/g,bt=RegExp(yt.source),wt=RegExp(dt.source),mt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Ot=/^\./,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(Rt.source),Et=/^\s+|\s+$/g,St=/^\s+/,Wt=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tt=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,Mt=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,Nt=/^\[object .+?Constructor\]$/,Pt=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Vt=/['\n\r\u2028\u2029\\]/g,Gt="\\ud800-\\udfff",Ht="\\u0300-\\u036f\\ufe20-\\ufe23",Jt="\\u20d0-\\u20f0",Yt="\\u2700-\\u27bf",Qt="a-z\\xdf-\\xf6\\xf8-\\xff",Xt="\\xac\\xb1\\xd7\\xf7",nr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tr="\\u2000-\\u206f",rr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",er="A-Z\\xc0-\\xd6\\xd8-\\xde",ur="\\ufe0e\\ufe0f",ir=Xt+nr+tr+rr,or="['’]",fr="["+Gt+"]",ar="["+ir+"]",cr="["+Ht+Jt+"]",lr="\\d+",sr="["+Yt+"]",hr="["+Qt+"]",pr="[^"+Gt+ir+lr+Yt+Qt+er+"]",vr="\\ud83c[\\udffb-\\udfff]",_r="(?:"+cr+"|"+vr+")",gr="[^"+Gt+"]",yr="(?:\\ud83c[\\udde6-\\uddff]){2}",dr="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+er+"]",wr="\\u200d",mr="(?:"+hr+"|"+pr+")",xr="(?:"+br+"|"+pr+")",jr="(?:"+or+"(?:d|ll|m|re|s|t|ve))?",Ar="(?:"+or+"(?:D|LL|M|RE|S|T|VE))?",kr=_r+"?",Or="["+ur+"]?",Ir="(?:"+wr+"(?:"+[gr,yr,dr].join("|")+")"+Or+kr+")*",Rr="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",zr="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Er=Or+kr+Ir,Sr="(?:"+[sr,yr,dr].join("|")+")"+Er,Wr="(?:"+[gr+cr+"?",cr,yr,dr,fr].join("|")+")",Lr=RegExp(or,"g"),Cr=RegExp(cr,"g"),Ur=RegExp(vr+"(?="+vr+")|"+Wr+Er,"g"),Br=RegExp([br+"?"+hr+"+"+jr+"(?="+[ar,br,"$"].join("|")+")",xr+"+"+Ar+"(?="+[ar,br+mr,"$"].join("|")+")",br+"?"+mr+"+"+jr,br+"+"+Ar,zr,Rr,lr,Sr].join("|"),"g"),Tr=RegExp("["+wr+Gt+Ht+Jt+ur+"]"),$r=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mr=-1,Fr={};Fr[it]=Fr[ot]=Fr[ft]=Fr[at]=Fr[ct]=Fr[lt]=Fr[st]=Fr[ht]=Fr[pt]=!0,Fr[Un]=Fr[Bn]=Fr[et]=Fr[$n]=Fr[ut]=Fr[Dn]=Fr[Fn]=Fr[Nn]=Fr[qn]=Fr[Zn]=Fr[Vn]=Fr[Jn]=Fr[Yn]=Fr[Qn]=Fr[tt]=!1;var Nr={};Nr[Un]=Nr[Bn]=Nr[et]=Nr[ut]=Nr[$n]=Nr[Dn]=Nr[it]=Nr[ot]=Nr[ft]=Nr[at]=Nr[ct]=Nr[qn]=Nr[Zn]=Nr[Vn]=Nr[Jn]=Nr[Yn]=Nr[Qn]=Nr[Xn]=Nr[lt]=Nr[st]=Nr[ht]=Nr[pt]=!0,Nr[Fn]=Nr[Nn]=Nr[tt]=!1;var Pr={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vr=parseFloat,Gr=parseInt,Hr="object"==typeof global&&global&&global.Object===Object&&global,Jr="object"==typeof self&&self&&self.Object===Object&&self,Yr=Hr||Jr||Function("return this")(),Qr="object"==typeof exports&&exports&&!exports.nodeType&&exports,Xr=Qr&&"object"==typeof module&&module&&!module.nodeType&&module,ne=Xr&&Xr.exports===Qr,te=ne&&Hr.process,re=function(){try{return te&&te.binding("util")}catch(n){}}(),ee=re&&re.isArrayBuffer,ue=re&&re.isDate,ie=re&&re.isMap,oe=re&&re.isRegExp,fe=re&&re.isSet,ae=re&&re.isTypedArray,ce=j("length"),le=A(Pr),se=A(qr),he=A(Zr),pe=function _(A){function K(n){if(ua(n)&&!_h(n)&&!(n instanceof Bt)){if(n instanceof Y)return n;if(_l.call(n,"__wrapped__"))return Xi(n)}return new Y(n)}function J(){}function Y(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=X}function Bt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sn,this.__views__=[]}function Gt(){var n=new Bt(this.__wrapped__);return n.__actions__=Tu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Tu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Tu(this.__views__),n}function Ht(){if(this.__filtered__){var n=new Bt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Jt(){var n=this.__wrapped__.value(),t=this.__dir__,r=_h(n),e=t<0,u=r?n.length:0,i=xi(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Zl(a,this.__takeCount__);if(!r||u<tn||u==a&&p==a)return du(n,this.__actions__);var v=[];n:for(;a--&&h<p;){c+=t;for(var _=-1,g=n[c];++_<s;){var y=l[_],d=y.iteratee,b=y.type,w=d(g);if(b==kn)g=w;else if(!w){if(b==An)continue n;break n}}v[h++]=g}return v}function Yt(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Qt(){this.__data__=ts?ts(null):{},this.size=0}function Xt(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function nr(n){var t=this.__data__;if(ts){var r=t[n];return r===un?X:r}return _l.call(t,n)?t[n]:X}function tr(n){var t=this.__data__;return ts?t[n]!==X:_l.call(t,n)}function rr(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=ts&&t===X?un:t,this}function er(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function ur(){this.__data__=[],this.size=0}function ir(n){var t=this.__data__,r=Sr(t,n);if(r<0)return!1;var e=t.length-1;return r==e?t.pop():zl.call(t,r,1),--this.size,!0}function or(n){var t=this.__data__,r=Sr(t,n);return r<0?X:t[r][1]}function fr(n){return Sr(this.__data__,n)>-1}function ar(n,t){var r=this.__data__,e=Sr(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function cr(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function lr(){this.size=0,this.__data__={hash:new Yt,map:new(Yl||er),string:new Yt}}function sr(n){var t=di(this,n).delete(n);return this.size-=t?1:0,t}function hr(n){return di(this,n).get(n)}function pr(n){return di(this,n).has(n)}function vr(n,t){var r=di(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function _r(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new cr;++t<r;)this.add(n[t])}function gr(n){return this.__data__.set(n,un),this}function yr(n){return this.__data__.has(n)}function dr(n){var t=this.__data__=new er(n);this.size=t.size}function br(){this.__data__=new er,this.size=0}function wr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function mr(n){return this.__data__.get(n)}function xr(n){return this.__data__.has(n)}function jr(n,t){var r=this.__data__;if(r instanceof er){var e=r.__data__;if(!Yl||e.length<tn-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new cr(e)}return r.set(n,t),this.size=r.size,this}function Ar(n,t){var r=_h(n),e=!r&&vh(n),u=!r&&!e&&yh(n),i=!r&&!e&&!u&&xh(n),o=r||e||u||i,f=o?R(n.length,al):[],a=f.length;for(var c in n)!t&&!_l.call(n,c)||o&&("length"==c||u&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ei(c,a))||f.push(c);return f}function kr(n){var t=n.length;return t?n[Xe(0,t-1)]:X}function Or(n,t){return Hi(Tu(n),$r(t,0,n.length))}function Ir(n){return Hi(Tu(n))}function Rr(n,t,r,e){return n===X||qf(n,hl[r])&&!_l.call(e,r)?t:n}function zr(n,t,r){(r===X||qf(n[t],r))&&(r!==X||t in n)||Br(n,t,r)}function Er(n,t,r){var e=n[t];_l.call(n,t)&&qf(e,r)&&(r!==X||t in n)||Br(n,t,r)}function Sr(n,t){for(var r=n.length;r--;)if(qf(n[r][0],t))return r;return-1}function Wr(n,t,r,e){return ps(n,function(n,u,i){t(e,n,r(n),i)}),e}function Ur(n,t){return n&&$u(t,Da(t),n)}function Br(n,t,r){"__proto__"==t&&Ll?Ll(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=tl(e),i=null==n;++r<e;)u[r]=i?X:Ba(n,t[r]);return u}function $r(n,t,r){return n===n&&(r!==X&&(n=n<=r?n:r),t!==X&&(n=n>=t?n:t)),n}function Pr(n,t,r,e,i,o,f){var a;if(e&&(a=o?e(n,i,o,f):e(n)),a!==X)return a;if(!ea(n))return n;var c=_h(n);if(c){if(a=ki(n),!t)return Tu(n,a)}else{var l=ks(n),s=l==Nn||l==Pn;if(yh(n))return ku(n,t);if(l==Vn||l==Un||s&&!o){if(a=Oi(s?{}:n),!t)return Du(n,Ur(a,n))}else{if(!Nr[l])return o?n:{};a=Ii(n,l,Pr,t)}}f||(f=new dr);var h=f.get(n);if(h)return h;f.set(n,a);var p=c?X:(r?pi:Da)(n);return u(p||n,function(u,i){p&&(i=u,u=n[i]),Er(a,i,Pr(u,t,r,e,i,n,f))}),a}function qr(n){var t=Da(n);return function(r){return Zr(r,n,t)}}function Zr(n,t,r){var e=r.length;if(null==n)return!e;for(n=ol(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===X&&!(u in n)||!i(o))return!1}return!0}function Kr(n,t,r){if("function"!=typeof n)throw new cl(en);return Rs(function(){n.apply(X,r)},t)}function Hr(n,t,r,e){var u=-1,i=a,o=!0,f=n.length,s=[],h=t.length;if(!f)return s;r&&(t=l(t,E(r))),e?(i=c,o=!1):t.length>=tn&&(i=W,o=!1,t=new _r(t));n:for(;++u<f;){var p=n[u],v=null==r?p:r(p);if(p=e||0!==p?p:0,o&&v===v){for(var _=h;_--;)if(t[_]===v)continue n;s.push(p)}else i(t,v,e)||s.push(p)}return s}function Jr(n,t){var r=!0;return ps(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Qr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===X?o===o&&!_a(o):r(o,f)))var f=o,a=i}return a}function Xr(n,t,r,e){var u=n.length;for(r=ma(r),r<0&&(r=-r>u?0:u+r),e=e===X||e>u?u:ma(e),e<0&&(e+=u),e=r>e?0:xa(e);r<e;)n[r++]=t;return n}function te(n,t){var r=[];return ps(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function re(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=zi),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?re(f,t-1,r,e,u):s(u,f):e||(u[u.length]=f)}return u}function ce(n,t){return n&&_s(n,t,Da)}function pe(n,t){return n&&gs(n,t,Da)}function _e(n,t){return f(t,function(t){return na(n[t])})}function ge(n,t){t=Wi(t,n)?[t]:ju(t);for(var r=0,e=t.length;null!=n&&r<e;)n=n[Ji(t[r++])];return r&&r==e?n:X}function ye(n,t,r){var e=t(n);return _h(n)?e:s(e,r(n))}function de(n){return null==n?n===X?nt:Kn:(n=ol(n),Wl&&Wl in n?mi(n):Pi(n))}function be(n,t){return n>t}function we(n,t){return null!=n&&_l.call(n,t)}function me(n,t){return null!=n&&t in ol(n)}function xe(n,t,r){return n>=Zl(t,r)&&n<ql(t,r)}function je(n,t,r){for(var e=r?c:a,u=n[0].length,i=n.length,o=i,f=tl(i),s=1/0,h=[];o--;){var p=n[o];o&&t&&(p=l(p,E(t))),s=Zl(p.length,s),f[o]=!r&&(t||u>=120&&p.length>=120)?new _r(o&&p):X}p=n[0];var v=-1,_=f[0];n:for(;++v<u&&h.length<s;){var g=p[v],y=t?t(g):g;if(g=r||0!==g?g:0,!(_?W(_,y):e(h,y,r))){for(o=i;--o;){var d=f[o];if(!(d?W(d,y):e(n[o],y,r)))continue n}_&&_.push(y),h.push(g)}}return h}function Ae(n,t,r,e){return ce(n,function(n,u,i){t(e,r(n),u,i)}),e}function ke(n,t,e){Wi(t,n)||(t=ju(t),n=Zi(n,t),t=bo(t));var u=null==n?n:n[Ji(t)];return null==u?X:r(u,n,e)}function Oe(n){return ua(n)&&de(n)==Un}function Ie(n){return ua(n)&&de(n)==et}function Re(n){return ua(n)&&de(n)==Dn}function ze(n,t,r,e,u){return n===t||(null==n||null==t||!ea(n)&&!ua(t)?n!==n&&t!==t:Ee(n,t,ze,r,e,u))}function Ee(n,t,r,e,u,i){var o=_h(n),f=_h(t),a=Bn,c=Bn;o||(a=ks(n),a=a==Un?Vn:a),f||(c=ks(t),c=c==Un?Vn:c);var l=a==Vn,s=c==Vn,h=a==c;if(h&&yh(n)){if(!yh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new dr),o||xh(n)?ci(n,t,r,e,u,i):li(n,t,a,r,e,u,i);if(!(u&bn)){var p=l&&_l.call(n,"__wrapped__"),v=s&&_l.call(t,"__wrapped__");if(p||v){var _=p?n.value():n,g=v?t.value():t;return i||(i=new dr),r(_,g,e,u,i)}}return!!h&&(i||(i=new dr),si(n,t,r,e,u,i))}function Se(n){return ua(n)&&ks(n)==qn}function We(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=ol(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var a=f[0],c=n[a],l=f[1];if(o&&f[2]){if(c===X&&!(a in n))return!1}else{var s=new dr;if(e)var h=e(c,l,a,n,t,s);if(!(h===X?ze(l,c,e,dn|bn,s):h))return!1}}return!0}function Le(n){if(!ea(n)||Ui(n))return!1;var t=na(n)?ml:Nt;return t.test(Yi(n))}function Ce(n){return ua(n)&&de(n)==Jn}function Ue(n){return ua(n)&&ks(n)==Yn}function Be(n){return ua(n)&&ra(n.length)&&!!Fr[de(n)]}function Te(n){return"function"==typeof n?n:null==n?zc:"object"==typeof n?_h(n)?Pe(n[0],n[1]):Ne(n):Tc(n)}function $e(n){if(!Bi(n))return Pl(n);var t=[];for(var r in ol(n))_l.call(n,r)&&"constructor"!=r&&t.push(r);return t}function De(n){if(!ea(n))return Ni(n);var t=Bi(n),r=[];for(var e in n)("constructor"!=e||!t&&_l.call(n,e))&&r.push(e);return r}function Me(n,t){return n<t}function Fe(n,t){var r=-1,e=Zf(n)?tl(n.length):[];return ps(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Ne(n){var t=bi(n);return 1==t.length&&t[0][2]?$i(t[0][0],t[0][1]):function(r){return r===n||We(r,n,t)}}function Pe(n,t){return Wi(n)&&Ti(t)?$i(Ji(n),t):function(r){var e=Ba(r,n);return e===X&&e===t?$a(r,n):ze(t,e,X,dn|bn)}}function qe(n,t,r,e,u){n!==t&&_s(t,function(i,o){if(ea(i))u||(u=new dr),Ze(n,t,o,r,qe,e,u);else{var f=e?e(n[o],i,o+"",n,t,u):X;f===X&&(f=i),zr(n,o,f)}},Ma)}function Ze(n,t,r,e,u,i,o){var f=n[r],a=t[r],c=o.get(a);if(c)return void zr(n,r,c);var l=i?i(f,a,r+"",n,t,o):X,s=l===X;if(s){var h=_h(a),p=!h&&yh(a),v=!h&&!p&&xh(a);l=a,h||p||v?_h(f)?l=f:Kf(f)?l=Tu(f):p?(s=!1,l=ku(a,!0)):v?(s=!1,l=Wu(a,!0)):l=[]:ha(a)||vh(a)?(l=f,vh(f)?l=Aa(f):(!ea(f)||e&&na(f))&&(l=Oi(a))):s=!1}s&&(o.set(a,l),u(l,a,e,i,o),o.delete(a)),zr(n,r,l)}function Ke(n,t){var r=n.length;if(r)return t+=t<0?r:0,Ei(t,r)?n[t]:X}function Ve(n,t,r){var e=-1;t=l(t.length?t:[zc],E(yi()));var u=Fe(n,function(n,r,u){var i=l(t,function(t){return t(n)});return{criteria:i,index:++e,value:n}});return O(u,function(n,t){return Cu(n,t,r)})}function Ge(n,t){return n=ol(n),He(n,t,function(t,r){return r in n})}function He(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=n[o];r(f,o)&&Br(i,o,f)}return i}function Je(n){return function(t){return ge(t,n)}}function Ye(n,t,r,e){var u=e?w:b,i=-1,o=t.length,f=n;for(n===t&&(t=Tu(t)),r&&(f=l(n,E(r)));++i<o;)for(var a=0,c=t[i],s=r?r(c):c;(a=u(f,s,a,e))>-1;)f!==n&&zl.call(f,a,1),zl.call(n,a,1);return n}function Qe(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;if(Ei(u))zl.call(n,u,1);else if(Wi(u,n))delete n[Ji(u)];else{var o=ju(u),f=Zi(n,o);null!=f&&delete f[Ji(bo(o))]}}}return n}function Xe(n,t){return n+$l(Gl()*(t-n+1))}function nu(n,t,r,e){for(var u=-1,i=ql(Tl((t-n)/(r||1)),0),o=tl(i);i--;)o[e?i:++u]=n,n+=r;return o}function tu(n,t){var r="";if(!n||t<1||t>Rn)return r;do t%2&&(r+=n),t=$l(t/2),t&&(n+=n);while(t);return r}function ru(n,t){return zs(qi(n,t,zc),n+"")}function eu(n){return kr(Qa(n))}function uu(n,t){var r=Qa(n);return Hi(r,$r(t,0,r.length))}function iu(n,t,r,e){if(!ea(n))return n;t=Wi(t,n)?[t]:ju(t);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var a=Ji(t[u]),c=r;if(u!=o){var l=f[a];c=e?e(l,a,f):X,c===X&&(c=ea(l)?l:Ei(t[u+1])?[]:{})}Er(f,a,c),f=f[a]}return n}function ou(n){return Hi(Qa(n))}function fu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=tl(u);++e<u;)i[e]=n[e+t];return i}function au(n,t){var r;return ps(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function cu(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t===t&&u<=Ln){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!_a(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return lu(n,t,zc,r)}function lu(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,a=_a(t),c=t===X;u<i;){var l=$l((u+i)/2),s=r(n[l]),h=s!==X,p=null===s,v=s===s,_=_a(s);if(o)var g=e||v;else g=c?v&&(e||h):f?v&&h&&(e||!p):a?v&&h&&!p&&(e||!_):!p&&!_&&(e?s<=t:s<t);g?u=l+1:i=l}return Zl(i,Wn)}function su(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!qf(f,a)){var a=f;i[u++]=0===o?0:o}}return i}function hu(n){return"number"==typeof n?n:_a(n)?En:+n}function pu(n){if("string"==typeof n)return n;if(_h(n))return l(n,pu)+"";if(_a(n))return ss?ss.call(n):"";var t=n+"";return"0"==t&&1/n==-In?"-0":t}function vu(n,t,r){var e=-1,u=a,i=n.length,o=!0,f=[],l=f;if(r)o=!1,u=c;else if(i>=tn){var s=t?null:ms(n);if(s)return q(s);o=!1,u=W,l=new _r}else l=t?[]:f;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,o&&p===p){for(var v=l.length;v--;)if(l[v]===p)continue n;t&&l.push(p),f.push(h)}else u(l,p,r)||(l!==f&&l.push(p),f.push(h))}return f}function _u(n,t){t=Wi(t,n)?[t]:ju(t),n=Zi(n,t);var r=Ji(bo(t));return!(null!=n&&_l.call(n,r))||delete n[r]}function gu(n,t,r,e){return iu(n,t,r(ge(n,t)),e)}function yu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?fu(n,e?0:i,e?i+1:u):fu(n,e?i+1:0,e?u:i)}function du(n,t){var r=n;return r instanceof Bt&&(r=r.value()),h(t,function(n,t){return t.func.apply(t.thisArg,s([n],t.args))},r)}function bu(n,t,r){var e=n.length;if(e<2)return e?vu(n[0]):[];for(var u=-1,i=tl(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Hr(i[u]||o,n[f],t,r));return vu(re(i,1),t,r)}function wu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){var f=e<i?t[e]:X;r(o,n[e],f)}return o}function mu(n){return Kf(n)?n:[]}function xu(n){return"function"==typeof n?n:zc}function ju(n){return _h(n)?n:Es(n)}function Au(n,t,r){var e=n.length;return r=r===X?e:r,!t&&r>=e?n:fu(n,t,r)}function ku(n,t){if(t)return n.slice();var r=n.length,e=kl?kl(r):new n.constructor(r);return n.copy(e),e}function Ou(n){var t=new n.constructor(n.byteLength);return new Al(t).set(new Al(n)),t}function Iu(n,t){var r=t?Ou(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function Ru(t,r,e){var u=r?e(F(t),!0):F(t);return h(u,n,new t.constructor)}function zu(n){var t=new n.constructor(n.source,Dt.exec(n));return t.lastIndex=n.lastIndex,t}function Eu(n,r,e){var u=r?e(q(n),!0):q(n);return h(u,t,new n.constructor)}function Su(n){return ls?ol(ls.call(n)):{}}function Wu(n,t){var r=t?Ou(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function Lu(n,t){if(n!==t){var r=n!==X,e=null===n,u=n===n,i=_a(n),o=t!==X,f=null===t,a=t===t,c=_a(t);if(!f&&!c&&!i&&n>t||i&&o&&a&&!f&&!c||e&&o&&a||!r&&a||!u)return 1;if(!e&&!i&&!c&&n<t||c&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!a)return-1}return 0}function Cu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var a=Lu(u[e],i[e]);if(a){if(e>=f)return a;var c=r[e];return a*("desc"==c?-1:1)}}return n.index-t.index}function Uu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,a=t.length,c=ql(i-o,0),l=tl(a+c),s=!e;++f<a;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;c--;)l[f++]=n[u++];return l}function Bu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,a=-1,c=t.length,l=ql(i-f,0),s=tl(l+c),h=!e;++u<l;)s[u]=n[u];for(var p=u;++a<c;)s[p+a]=t[a];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Tu(n,t){var r=-1,e=n.length;for(t||(t=tl(e));++r<e;)t[r]=n[r];return t}function $u(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],a=e?e(r[f],n[f],f,r,n):X;a===X&&(a=n[f]),u?Br(r,f,a):Er(r,f,a)}return r}function Du(n,t){return $u(n,js(n),t)}function Mu(n,t){return function(r,u){var i=_h(r)?e:Wr,o=t?t():{};return i(r,n,yi(u,2),o)}}function Fu(n){return ru(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:X,o=u>2?r[2]:X;for(i=n.length>3&&"function"==typeof i?(u--,i):X,o&&Si(r[0],r[1],o)&&(i=u<3?X:i,u=1),t=ol(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Nu(n,t){return function(r,e){if(null==r)return r;if(!Zf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=ol(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function Pu(n){return function(t,r,e){for(var u=-1,i=ol(t),o=e(t),f=o.length;f--;){var a=o[n?f:++u];if(r(i[a],a,i)===!1)break}return t}}function qu(n,t,r){function e(){var t=this&&this!==Yr&&this instanceof e?i:n;return t.apply(u?r:this,arguments)}var u=t&an,i=Vu(n);return e}function Zu(n){return function(t){t=Oa(t);var r=$(t)?H(t):X,e=r?r[0]:t.charAt(0),u=r?Au(r,1).join(""):t.slice(1);return e[n]()+u}}function Ku(n){return function(t){return h(Ac(uc(t).replace(Lr,"")),n,"")}}function Vu(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=hs(n.prototype),e=n.apply(r,t);return ea(e)?e:r}}function Gu(n,t,e){function u(){for(var o=arguments.length,f=tl(o),a=o,c=gi(u);a--;)f[a]=arguments[a];var l=o<3&&f[0]!==c&&f[o-1]!==c?[]:P(f,c);if(o-=l.length,o<e)return ii(n,t,Yu,u.placeholder,X,f,l,X,X,e-o);var s=this&&this!==Yr&&this instanceof u?i:n;return r(s,this,f)}var i=Vu(n);return u}function Hu(n){return function(t,r,e){var u=ol(t);if(!Zf(t)){var i=yi(r,3);t=Da(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:X}}function Ju(n){return hi(function(t){var r=t.length,e=r,u=Y.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new cl(en);if(u&&!o&&"wrapper"==_i(i))var o=new Y([],!0)}for(e=o?e:r;++e<r;){i=t[e];var f=_i(i),a="wrapper"==f?xs(i):X;o=a&&Ci(a[0])&&a[1]==(_n|sn|pn|gn)&&!a[4].length&&1==a[9]?o[_i(a[0])].apply(o,a[3]):1==i.length&&Ci(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&_h(e)&&e.length>=tn)return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Yu(n,t,r,e,u,i,o,f,a,c){function l(){for(var y=arguments.length,d=tl(y),b=y;b--;)d[b]=arguments[b];if(v)var w=gi(l),m=U(d,w);if(e&&(d=Uu(d,e,u,v)),i&&(d=Bu(d,i,o,v)),y-=m,v&&y<c){var x=P(d,w);return ii(n,t,Yu,l.placeholder,r,d,x,f,a,c-y)}var j=h?r:this,A=p?j[n]:n;return y=d.length,f?d=Ki(d,f):_&&y>1&&d.reverse(),s&&a<y&&(d.length=a),this&&this!==Yr&&this instanceof l&&(A=g||Vu(A)),A.apply(j,d)}var s=t&_n,h=t&an,p=t&cn,v=t&(sn|hn),_=t&yn,g=p?X:Vu(n);return l}function Qu(n,t){return function(r,e){return Ae(r,n,t(e),{})}}function Xu(n,t){return function(r,e){var u;if(r===X&&e===X)return t;if(r!==X&&(u=r),e!==X){if(u===X)return e;"string"==typeof r||"string"==typeof e?(r=pu(r),e=pu(e)):(r=hu(r),e=hu(e)),u=n(r,e)}return u}}function ni(n){return hi(function(t){return t=l(t,E(yi())),ru(function(e){var u=this;return n(t,function(n){return r(n,u,e)})})})}function ti(n,t){t=t===X?" ":pu(t);var r=t.length;if(r<2)return r?tu(t,n):t;var e=tu(t,Tl(n/G(t)));return $(t)?Au(H(e),0,n).join(""):e.slice(0,n)}function ri(n,t,e,u){function i(){for(var t=-1,a=arguments.length,c=-1,l=u.length,s=tl(l+a),h=this&&this!==Yr&&this instanceof i?f:n;++c<l;)s[c]=u[c];for(;a--;)s[c++]=arguments[++t];return r(h,o?e:this,s)}var o=t&an,f=Vu(n);return i}function ei(n){return function(t,r,e){return e&&"number"!=typeof e&&Si(t,r,e)&&(r=e=X),t=wa(t),r===X?(r=t,t=0):r=wa(r),e=e===X?t<r?1:-1:wa(e),nu(t,r,e,n)}}function ui(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ja(t),r=ja(r)),n(t,r)}}function ii(n,t,r,e,u,i,o,f,a,c){var l=t&sn,s=l?o:X,h=l?X:o,p=l?i:X,v=l?X:i;t|=l?pn:vn,t&=~(l?vn:pn),t&ln||(t&=~(an|cn));var _=[n,t,u,p,s,v,h,f,a,c],g=r.apply(X,_);return Ci(n)&&Is(g,_),g.placeholder=e,Vi(g,n,t)}function oi(n){var t=il[n];return function(n,r){if(n=ja(n),r=Zl(ma(r),292)){var e=(Oa(n)+"e").split("e"),u=t(e[0]+"e"+(+e[1]+r));return e=(Oa(u)+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return t(n)}}function fi(n){return function(t){var r=ks(t);return r==qn?F(t):r==Yn?Z(t):z(t,n(t))}}function ai(n,t,r,e,u,i,o,f){var a=t&cn;if(!a&&"function"!=typeof n)throw new cl(en);var c=e?e.length:0;if(c||(t&=~(pn|vn),e=u=X),o=o===X?o:ql(ma(o),0),f=f===X?f:ma(f),c-=u?u.length:0,t&vn){var l=e,s=u;e=u=X}var h=a?X:xs(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&Mi(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=null==p[9]?a?0:n.length:ql(p[9]-c,0),!f&&t&(sn|hn)&&(t&=~(sn|hn)),t&&t!=an)v=t==sn||t==hn?Gu(n,t,f):t!=pn&&t!=(an|pn)||u.length?Yu.apply(X,p):ri(n,t,r,e);else var v=qu(n,t,r);var _=h?ys:Is;return Vi(_(v,p),n,t)}function ci(n,t,r,e,u,i){var o=u&bn,f=n.length,a=t.length;if(f!=a&&!(o&&a>f))return!1;var c=i.get(n);if(c&&i.get(t))return c==t;var l=-1,s=!0,h=u&dn?new _r:X;for(i.set(n,t),i.set(t,n);++l<f;){var p=n[l],_=t[l];if(e)var g=o?e(_,p,l,t,n,i):e(p,_,l,n,t,i);if(g!==X){if(g)continue;s=!1;break}if(h){if(!v(t,function(n,t){if(!W(h,t)&&(p===n||r(p,n,e,u,i)))return h.push(t)})){s=!1;break}}else if(p!==_&&!r(p,_,e,u,i)){s=!1;break}}return i.delete(n),i.delete(t),s}function li(n,t,r,e,u,i,o){switch(r){case ut:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case et:return!(n.byteLength!=t.byteLength||!e(new Al(n),new Al(t)));case $n:case Dn:case Zn:return qf(+n,+t);case Fn:return n.name==t.name&&n.message==t.message;case Jn:case Qn:return n==t+"";case qn:var f=F;case Yn:var a=i&bn;if(f||(f=q),n.size!=t.size&&!a)return!1;var c=o.get(n);if(c)return c==t;i|=dn,o.set(n,t);var l=ci(f(n),f(t),e,u,i,o);return o.delete(n),l;case Xn:if(ls)return ls.call(n)==ls.call(t)}return!1}function si(n,t,r,e,u,i){var o=u&bn,f=Da(n),a=f.length,c=Da(t),l=c.length;if(a!=l&&!o)return!1;for(var s=a;s--;){var h=f[s];if(!(o?h in t:_l.call(t,h)))return!1}var p=i.get(n);if(p&&i.get(t))return p==t;var v=!0;i.set(n,t),i.set(t,n);for(var _=o;++s<a;){h=f[s];var g=n[h],y=t[h];if(e)var d=o?e(y,g,h,t,n,i):e(g,y,h,n,t,i);if(!(d===X?g===y||r(g,y,e,u,i):d)){v=!1;break}_||(_="constructor"==h)}if(v&&!_){var b=n.constructor,w=t.constructor;b!=w&&"constructor"in n&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(v=!1)}return i.delete(n),i.delete(t),v}function hi(n){return zs(qi(n,X,lo),n+"")}function pi(n){return ye(n,Da,js)}function vi(n){return ye(n,Ma,As)}function _i(n){for(var t=n.name+"",r=es[t],e=_l.call(es,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function gi(n){var t=_l.call(K,"placeholder")?K:n;return t.placeholder}function yi(){var n=K.iteratee||Ec;return n=n===Ec?Te:n,arguments.length?n(arguments[0],arguments[1]):n}function di(n,t){var r=n.__data__;return Li(t)?r["string"==typeof t?"string":"hash"]:r.map}function bi(n){for(var t=Da(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Ti(u)]}return t}function wi(n,t){var r=T(n,t);return Le(r)?r:X}function mi(n){var t=_l.call(n,Wl),r=n[Wl];try{n[Wl]=X;var e=!0}catch(n){}var u=dl.call(n);return e&&(t?n[Wl]=r:delete n[Wl]),u}function xi(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Zl(t,n+o);break;case"takeRight":n=ql(n,t-o)}}return{start:n,end:t}}function ji(n){var t=n.match(Ct);return t?t[1].split(Ut):[]}function Ai(n,t,r){t=Wi(t,n)?[t]:ju(t);for(var e=-1,u=t.length,i=!1;++e<u;){var o=Ji(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&ra(u)&&Ei(o,u)&&(_h(n)||vh(n)))}function ki(n){var t=n.length,r=n.constructor(t);return t&&"string"==typeof n[0]&&_l.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Oi(n){return"function"!=typeof n.constructor||Bi(n)?{}:hs(Ol(n))}function Ii(n,t,r,e){var u=n.constructor;switch(t){case et:return Ou(n);case $n:case Dn:return new u(+n);case ut:return Iu(n,e);case it:case ot:case ft:case at:case ct:case lt:case st:case ht:case pt:return Wu(n,e);case qn:return Ru(n,e,r);case Zn:case Qn:return new u(n);case Jn:return zu(n);case Yn:return Eu(n,e,r);case Xn:return Su(n)}}function Ri(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(Lt,"{\n/* [wrapped with "+t+"] */\n")}function zi(n){return _h(n)||vh(n)||!!(El&&n&&n[El])}function Ei(n,t){return t=null==t?Rn:t,!!t&&("number"==typeof n||qt.test(n))&&n>-1&&n%1==0&&n<t}function Si(n,t,r){if(!ea(r))return!1;var e=typeof t;return!!("number"==e?Zf(r)&&Ei(t,r.length):"string"==e&&t in r)&&qf(r[t],n)}function Wi(n,t){if(_h(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!_a(n))||(kt.test(n)||!At.test(n)||null!=t&&n in ol(t))}function Li(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}function Ci(n){var t=_i(n),r=K[t];if("function"!=typeof r||!(t in Bt.prototype))return!1;if(n===r)return!0;var e=xs(r);return!!e&&n===e[0]}function Ui(n){return!!yl&&yl in n}function Bi(n){var t=n&&n.constructor,r="function"==typeof t&&t.prototype||hl;return n===r}function Ti(n){return n===n&&!ea(n)}function $i(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==X||n in ol(r)))}}function Di(n){var t=Ef(n,function(n){return r.size===on&&r.clear(),n}),r=t.cache;return t}function Mi(n,t){var r=n[1],e=t[1],u=r|e,i=u<(an|cn|_n),o=e==_n&&r==sn||e==_n&&r==gn&&n[7].length<=t[8]||e==(_n|gn)&&t[7].length<=t[8]&&r==sn;if(!i&&!o)return n;e&an&&(n[2]=t[2],u|=r&an?0:ln);var f=t[3];if(f){var a=n[3];n[3]=a?Uu(a,f,t[4]):f,n[4]=a?P(n[3],fn):t[4]}return f=t[5],f&&(a=n[5],n[5]=a?Bu(a,f,t[6]):f,n[6]=a?P(n[5],fn):t[6]),f=t[7],f&&(n[7]=f),e&_n&&(n[8]=null==n[8]?t[8]:Zl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Fi(n,t,r,e,u,i){return ea(n)&&ea(t)&&(i.set(t,n),qe(n,t,X,Fi,i),i.delete(t)),n}function Ni(n){var t=[];if(null!=n)for(var r in ol(n))t.push(r);return t}function Pi(n){return dl.call(n)}function qi(n,t,e){return t=ql(t===X?n.length-1:t,0),function(){for(var u=arguments,i=-1,o=ql(u.length-t,0),f=tl(o);++i<o;)f[i]=u[t+i];i=-1;for(var a=tl(t+1);++i<t;)a[i]=u[i];return a[t]=e(f),r(n,this,a)}}function Zi(n,t){return 1==t.length?n:ge(n,fu(t,0,-1))}function Ki(n,t){for(var r=n.length,e=Zl(t.length,r),u=Tu(n);e--;){var i=t[e];n[e]=Ei(i,r)?u[i]:X}return n}function Vi(n,t,r){var e=t+"";return zs(n,Ri(e,Qi(ji(e),r)))}function Gi(n){var t=0,r=0;return function(){var e=Kl(),u=jn-(e-r);if(r=e,u>0){if(++t>=xn)return arguments[0]}else t=0;return n.apply(X,arguments)}}function Hi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===X?e:t;++r<t;){var i=Xe(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function Ji(n){if("string"==typeof n||_a(n))return n;var t=n+"";return"0"==t&&1/n==-In?"-0":t}function Yi(n){if(null!=n){try{return vl.call(n)}catch(n){}try{return n+""}catch(n){}}return""}function Qi(n,t){return u(Cn,function(r){var e="_."+r[0];t&r[1]&&!a(n,e)&&n.push(e)}),n.sort()}function Xi(n){if(n instanceof Bt)return n.clone();var t=new Y(n.__wrapped__,n.__chain__);return t.__actions__=Tu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function no(n,t,r){t=(r?Si(n,t,r):t===X)?1:ql(ma(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=tl(Tl(e/t));u<e;)o[i++]=fu(n,u,u+=t);return o}function to(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function ro(){var n=arguments.length;if(!n)return[];for(var t=tl(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return s(_h(r)?Tu(r):[r],re(t,1))}function eo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:ma(t),fu(n,t<0?0:t,e)):[]}function uo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:ma(t),t=e-t,fu(n,0,t<0?0:t)):[]}function io(n,t){return n&&n.length?yu(n,yi(t,3),!0,!0):[]}function oo(n,t){return n&&n.length?yu(n,yi(t,3),!0):[]}function fo(n,t,r,e){var u=null==n?0:n.length;return u?(r&&"number"!=typeof r&&Si(n,t,r)&&(r=0,e=u),Xr(n,t,r,e)):[]}function ao(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:ma(r);return u<0&&(u=ql(e+u,0)),d(n,yi(t,3),u)}function co(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==X&&(u=ma(r),u=r<0?ql(e+u,0):Zl(u,e-1)),d(n,yi(t,3),u,!0)}function lo(n){var t=null==n?0:n.length;return t?re(n,1):[]}function so(n){var t=null==n?0:n.length;return t?re(n,In):[]}function ho(n,t){var r=null==n?0:n.length;return r?(t=t===X?1:ma(t),re(n,t)):[]}function po(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function vo(n){return n&&n.length?n[0]:X}function _o(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:ma(r);return u<0&&(u=ql(e+u,0)),b(n,t,u)}function go(n){var t=null==n?0:n.length;return t?fu(n,0,-1):[]}function yo(n,t){return null==n?"":Nl.call(n,t)}function bo(n){var t=null==n?0:n.length;return t?n[t-1]:X}function wo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==X&&(u=ma(r),u=u<0?ql(e+u,0):Zl(u,e-1)),t===t?V(n,t,u):d(n,m,u,!0)}function mo(n,t){return n&&n.length?Ke(n,ma(t)):X}function xo(n,t){return n&&n.length&&t&&t.length?Ye(n,t):n}function jo(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,yi(r,2)):n}function Ao(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,X,r):n}function ko(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=yi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return Qe(n,u),r}function Oo(n){return null==n?n:Hl.call(n)}function Io(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&Si(n,t,r)?(t=0,r=e):(t=null==t?0:ma(t),r=r===X?e:ma(r)),fu(n,t,r)):[]}function Ro(n,t){return cu(n,t)}function zo(n,t,r){return lu(n,t,yi(r,2))}function Eo(n,t){var r=null==n?0:n.length;if(r){var e=cu(n,t);if(e<r&&qf(n[e],t))return e}return-1}function So(n,t){return cu(n,t,!0)}function Wo(n,t,r){return lu(n,t,yi(r,2),!0)}function Lo(n,t){var r=null==n?0:n.length;if(r){var e=cu(n,t,!0)-1;if(qf(n[e],t))return e}return-1}function Co(n){return n&&n.length?su(n):[]}function Uo(n,t){return n&&n.length?su(n,yi(t,2)):[]}function Bo(n){var t=null==n?0:n.length;return t?fu(n,1,t):[]}function To(n,t,r){return n&&n.length?(t=r||t===X?1:ma(t),fu(n,0,t<0?0:t)):[]}function $o(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:ma(t),t=e-t,fu(n,t<0?0:t,e)):[]}function Do(n,t){return n&&n.length?yu(n,yi(t,3),!1,!0):[]}function Mo(n,t){return n&&n.length?yu(n,yi(t,3)):[]}function Fo(n){return n&&n.length?vu(n):[]}function No(n,t){return n&&n.length?vu(n,yi(t,2)):[]}function Po(n,t){return t="function"==typeof t?t:X,n&&n.length?vu(n,X,t):[]}function qo(n){if(!n||!n.length)return[];var t=0;return n=f(n,function(n){if(Kf(n))return t=ql(n.length,t),!0}),R(t,function(t){return l(n,j(t))})}function Zo(n,t){if(!n||!n.length)return[];var e=qo(n);return null==t?e:l(e,function(n){return r(t,X,n)})}function Ko(n,t){return wu(n||[],t||[],Er)}function Vo(n,t){return wu(n||[],t||[],iu)}function Go(n){var t=K(n);return t.__chain__=!0,t}function Ho(n,t){return t(n),n}function Jo(n,t){return t(n)}function Yo(){return Go(this)}function Qo(){return new Y(this.value(),this.__chain__)}function Xo(){this.__values__===X&&(this.__values__=ba(this.value()));var n=this.__index__>=this.__values__.length,t=n?X:this.__values__[this.__index__++];return{done:n,value:t}}function nf(){return this}function tf(n){for(var t,r=this;r instanceof J;){var e=Xi(r);e.__index__=0,e.__values__=X,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function rf(){var n=this.__wrapped__;if(n instanceof Bt){var t=n;return this.__actions__.length&&(t=new Bt(this)),t=t.reverse(),t.__actions__.push({func:Jo,args:[Oo],thisArg:X}),new Y(t,this.__chain__)}return this.thru(Oo)}function ef(){return du(this.__wrapped__,this.__actions__)}function uf(n,t,r){var e=_h(n)?o:Jr;return r&&Si(n,t,r)&&(t=X),e(n,yi(t,3))}function of(n,t){var r=_h(n)?f:te;return r(n,yi(t,3))}function ff(n,t){return re(pf(n,t),1)}function af(n,t){return re(pf(n,t),In)}function cf(n,t,r){return r=r===X?1:ma(r),re(pf(n,t),r)}function lf(n,t){var r=_h(n)?u:ps;return r(n,yi(t,3))}function sf(n,t){var r=_h(n)?i:vs;return r(n,yi(t,3))}function hf(n,t,r,e){n=Zf(n)?n:Qa(n),r=r&&!e?ma(r):0;var u=n.length;return r<0&&(r=ql(u+r,0)),va(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&b(n,t,r)>-1}function pf(n,t){var r=_h(n)?l:Fe;return r(n,yi(t,3))}function vf(n,t,r,e){return null==n?[]:(_h(t)||(t=null==t?[]:[t]),r=e?X:r,_h(r)||(r=null==r?[]:[r]),Ve(n,t,r))}function _f(n,t,r){var e=_h(n)?h:k,u=arguments.length<3;return e(n,yi(t,4),r,u,ps)}function gf(n,t,r){var e=_h(n)?p:k,u=arguments.length<3;return e(n,yi(t,4),r,u,vs)}function yf(n,t){var r=_h(n)?f:te;return r(n,Sf(yi(t,3)))}function df(n){var t=_h(n)?kr:eu;return t(n)}function bf(n,t,r){t=(r?Si(n,t,r):t===X)?1:ma(t);var e=_h(n)?Or:uu;return e(n,t)}function wf(n){var t=_h(n)?Ir:ou;return t(n)}function mf(n){if(null==n)return 0;if(Zf(n))return va(n)?G(n):n.length;var t=ks(n);return t==qn||t==Yn?n.size:$e(n).length}function xf(n,t,r){var e=_h(n)?v:au;return r&&Si(n,t,r)&&(t=X),e(n,yi(t,3))}function jf(n,t){if("function"!=typeof t)throw new cl(en);return n=ma(n),function(){if(--n<1)return t.apply(this,arguments)}}function Af(n,t,r){return t=r?X:t,t=n&&null==t?n.length:t,ai(n,_n,X,X,X,X,t)}function kf(n,t){var r;if("function"!=typeof t)throw new cl(en);return n=ma(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=X),r}}function Of(n,t,r){t=r?X:t;var e=ai(n,sn,X,X,X,X,X,t);return e.placeholder=Of.placeholder,e}function If(n,t,r){t=r?X:t;var e=ai(n,hn,X,X,X,X,X,t);return e.placeholder=If.placeholder,e}function Rf(n,t,r){function e(t){var r=h,e=p;return h=p=X,d=t,_=n.apply(e,r)}function u(n){return d=n,g=Rs(f,t),b?e(n):_}function i(n){var r=n-y,e=n-d,u=t-r;return w?Zl(u,v-e):u}function o(n){var r=n-y,e=n-d;return y===X||r>=t||r<0||w&&e>=v}function f(){var n=eh();return o(n)?a(n):void(g=Rs(f,i(n)))}function a(n){return g=X,m&&h?e(n):(h=p=X,_)}function c(){g!==X&&ws(g),d=0,h=y=p=g=X}function l(){return g===X?_:a(eh())}function s(){var n=eh(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===X)return u(y);if(w)return g=Rs(f,t),e(y)}return g===X&&(g=Rs(f,t)),_}var h,p,v,_,g,y,d=0,b=!1,w=!1,m=!0;if("function"!=typeof n)throw new cl(en);return t=ja(t)||0,ea(r)&&(b=!!r.leading,w="maxWait"in r,v=w?ql(ja(r.maxWait)||0,t):v,m="trailing"in r?!!r.trailing:m),s.cancel=c,s.flush=l,s}function zf(n){return ai(n,yn)}function Ef(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new cl(en);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Ef.Cache||cr),r}function Sf(n){if("function"!=typeof n)throw new cl(en);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Wf(n){return kf(2,n)}function Lf(n,t){if("function"!=typeof n)throw new cl(en);return t=t===X?t:ma(t),ru(n,t)}function Cf(n,t){if("function"!=typeof n)throw new cl(en);return t=t===X?0:ql(ma(t),0),ru(function(e){var u=e[t],i=Au(e,0,t);return u&&s(i,u),r(n,this,i)})}function Uf(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new cl(en);return ea(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Rf(n,t,{leading:e,maxWait:t,trailing:u})}function Bf(n){return Af(n,1)}function Tf(n,t){return ch(xu(t),n)}function $f(){if(!arguments.length)return[];var n=arguments[0];return _h(n)?n:[n]}function Df(n){return Pr(n,!1,!0)}function Mf(n,t){return t="function"==typeof t?t:X,Pr(n,!1,!0,t)}function Ff(n){return Pr(n,!0,!0)}function Nf(n,t){return t="function"==typeof t?t:X,Pr(n,!0,!0,t)}function Pf(n,t){return null==t||Zr(n,t,Da(t))}function qf(n,t){return n===t||n!==n&&t!==t}function Zf(n){return null!=n&&ra(n.length)&&!na(n)}function Kf(n){return ua(n)&&Zf(n)}function Vf(n){return n===!0||n===!1||ua(n)&&de(n)==$n}function Gf(n){return ua(n)&&1===n.nodeType&&!ha(n)}function Hf(n){if(null==n)return!0;if(Zf(n)&&(_h(n)||"string"==typeof n||"function"==typeof n.splice||yh(n)||xh(n)||vh(n)))return!n.length;var t=ks(n);if(t==qn||t==Yn)return!n.size;if(Bi(n))return!$e(n).length;for(var r in n)if(_l.call(n,r))return!1;return!0}function Jf(n,t){return ze(n,t)}function Yf(n,t,r){r="function"==typeof r?r:X;var e=r?r(n,t):X;return e===X?ze(n,t,r):!!e}function Qf(n){if(!ua(n))return!1;var t=de(n);return t==Fn||t==Mn||"string"==typeof n.message&&"string"==typeof n.name&&!ha(n)}function Xf(n){return"number"==typeof n&&Fl(n)}function na(n){if(!ea(n))return!1;var t=de(n);return t==Nn||t==Pn||t==Tn||t==Hn}function ta(n){return"number"==typeof n&&n==ma(n)}function ra(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Rn}function ea(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function ua(n){return null!=n&&"object"==typeof n}function ia(n,t){return n===t||We(n,t,bi(t))}function oa(n,t,r){return r="function"==typeof r?r:X,We(n,t,bi(t),r)}function fa(n){return sa(n)&&n!=+n}function aa(n){if(Os(n))throw new el(rn);return Le(n)}function ca(n){return null===n}function la(n){return null==n}function sa(n){return"number"==typeof n||ua(n)&&de(n)==Zn}function ha(n){if(!ua(n)||de(n)!=Vn)return!1;var t=Ol(n);if(null===t)return!0;var r=_l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&vl.call(r)==bl}function pa(n){return ta(n)&&n>=-Rn&&n<=Rn}function va(n){return"string"==typeof n||!_h(n)&&ua(n)&&de(n)==Qn}function _a(n){return"symbol"==typeof n||ua(n)&&de(n)==Xn}function ga(n){return n===X}function ya(n){return ua(n)&&ks(n)==tt}function da(n){return ua(n)&&de(n)==rt}function ba(n){if(!n)return[];if(Zf(n))return va(n)?H(n):Tu(n);if(Sl&&n[Sl])return M(n[Sl]());var t=ks(n),r=t==qn?F:t==Yn?q:Qa;return r(n)}function wa(n){if(!n)return 0===n?n:0;if(n=ja(n),n===In||n===-In){var t=n<0?-1:1;return t*zn}return n===n?n:0}function ma(n){var t=wa(n),r=t%1;return t===t?r?t-r:t:0}function xa(n){return n?$r(ma(n),0,Sn):0}function ja(n){if("number"==typeof n)return n;if(_a(n))return En;if(ea(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=ea(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(Et,"");var r=Ft.test(n);return r||Pt.test(n)?Gr(n.slice(2),r?2:8):Mt.test(n)?En:+n}function Aa(n){return $u(n,Ma(n))}function ka(n){return $r(ma(n),-Rn,Rn)}function Oa(n){return null==n?"":pu(n)}function Ia(n,t){var r=hs(n);return null==t?r:Ur(r,t)}function Ra(n,t){return y(n,yi(t,3),ce)}function za(n,t){return y(n,yi(t,3),pe)}function Ea(n,t){return null==n?n:_s(n,yi(t,3),Ma)}function Sa(n,t){return null==n?n:gs(n,yi(t,3),Ma)}function Wa(n,t){return n&&ce(n,yi(t,3))}function La(n,t){return n&&pe(n,yi(t,3))}function Ca(n){return null==n?[]:_e(n,Da(n))}function Ua(n){return null==n?[]:_e(n,Ma(n))}function Ba(n,t,r){var e=null==n?X:ge(n,t);return e===X?r:e}function Ta(n,t){return null!=n&&Ai(n,t,we)}function $a(n,t){return null!=n&&Ai(n,t,me)}function Da(n){return Zf(n)?Ar(n):$e(n)}function Ma(n){return Zf(n)?Ar(n,!0):De(n)}function Fa(n,t){var r={};return t=yi(t,3),ce(n,function(n,e,u){Br(r,t(n,e,u),n)}),r}function Na(n,t){var r={};return t=yi(t,3),ce(n,function(n,e,u){Br(r,e,t(n,e,u))}),r}function Pa(n,t){return qa(n,Sf(yi(t)))}function qa(n,t){return null==n?{}:He(n,vi(n),yi(t))}function Za(n,t,r){t=Wi(t,n)?[t]:ju(t);var e=-1,u=t.length;for(u||(n=X,u=1);++e<u;){var i=null==n?X:n[Ji(t[e])];i===X&&(e=u,i=r),n=na(i)?i.call(n):i}return n}function Ka(n,t,r){return null==n?n:iu(n,t,r)}function Va(n,t,r,e){return e="function"==typeof e?e:X,null==n?n:iu(n,t,r,e)}function Ga(n,t,r){var e=_h(n),i=e||yh(n)||xh(n);if(t=yi(t,4),null==r){var o=n&&n.constructor;r=i?e?new o:[]:ea(n)&&na(o)?hs(Ol(n)):{}}return(i?u:ce)(n,function(n,e,u){return t(r,n,e,u)}),r}function Ha(n,t){return null==n||_u(n,t)}function Ja(n,t,r){return null==n?n:gu(n,t,xu(r))}function Ya(n,t,r,e){return e="function"==typeof e?e:X,null==n?n:gu(n,t,xu(r),e)}function Qa(n){return null==n?[]:S(n,Da(n))}function Xa(n){return null==n?[]:S(n,Ma(n))}function nc(n,t,r){return r===X&&(r=t,t=X),r!==X&&(r=ja(r),r=r===r?r:0),t!==X&&(t=ja(t),t=t===t?t:0),$r(ja(n),t,r)}function tc(n,t,r){return t=wa(t),r===X?(r=t,t=0):r=wa(r),n=ja(n),xe(n,t,r)}function rc(n,t,r){if(r&&"boolean"!=typeof r&&Si(n,t,r)&&(t=r=X),r===X&&("boolean"==typeof t?(r=t,t=X):"boolean"==typeof n&&(r=n,n=X)),n===X&&t===X?(n=0,t=1):(n=wa(n),t===X?(t=n,n=0):t=wa(t)),n>t){var e=n;n=t,t=e}if(r||n%1||t%1){var u=Gl();return Zl(n+u*(t-n+Vr("1e-"+((u+"").length-1))),t)}return Xe(n,t)}function ec(n){return Gh(Oa(n).toLowerCase())}function uc(n){return n=Oa(n),n&&n.replace(Zt,le).replace(Cr,"")}function ic(n,t,r){n=Oa(n),t=pu(t);var e=n.length;r=r===X?e:$r(ma(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function oc(n){return n=Oa(n),n&&wt.test(n)?n.replace(dt,se):n}function fc(n){return n=Oa(n),n&&zt.test(n)?n.replace(Rt,"\\$&"):n}function ac(n,t,r){n=Oa(n),t=ma(t);var e=t?G(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ti($l(u),r)+n+ti(Tl(u),r)}function cc(n,t,r){n=Oa(n),t=ma(t);var e=t?G(n):0;return t&&e<t?n+ti(t-e,r):n}function lc(n,t,r){n=Oa(n),t=ma(t);var e=t?G(n):0;return t&&e<t?ti(t-e,r)+n:n}function sc(n,t,r){return r||null==t?t=0:t&&(t=+t),Vl(Oa(n).replace(St,""),t||0)}function hc(n,t,r){return t=(r?Si(n,t,r):t===X)?1:ma(t),tu(Oa(n),t)}function pc(){var n=arguments,t=Oa(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function vc(n,t,r){return r&&"number"!=typeof r&&Si(n,t,r)&&(t=r=X),(r=r===X?Sn:r>>>0)?(n=Oa(n),n&&("string"==typeof t||null!=t&&!wh(t))&&(t=pu(t),!t&&$(n))?Au(H(n),0,r):n.split(t,r)):[]}function _c(n,t,r){return n=Oa(n),r=$r(ma(r),0,n.length),t=pu(t),n.slice(r,r+t.length)==t}function gc(n,t,r){var e=K.templateSettings;r&&Si(n,t,r)&&(t=X),n=Oa(n),t=Ih({},t,e,Rr);var u,i,o=Ih({},t.imports,e.imports,Rr),f=Da(o),a=S(o,f),c=0,l=t.interpolate||Kt,s="__p += '",h=fl((t.escape||Kt).source+"|"+l.source+"|"+(l===jt?$t:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Mr+"]")+"\n";n.replace(h,function(t,r,e,o,f,a){return e||(e=o),s+=n.slice(c,a).replace(Vt,B),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=a+t.length,t}),s+="';\n";var v=t.variable;v||(s="with (obj) {\n"+s+"\n}\n"),s=(i?s.replace(vt,""):s).replace(_t,"$1").replace(gt,"$1;"),s="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var _=Hh(function(){return ul(f,p+"return "+s).apply(X,a)});if(_.source=s,Qf(_))throw _;return _}function yc(n){return Oa(n).toLowerCase()}function dc(n){return Oa(n).toUpperCase()}function bc(n,t,r){if(n=Oa(n),n&&(r||t===X))return n.replace(Et,"");if(!n||!(t=pu(t)))return n;var e=H(n),u=H(t),i=L(e,u),o=C(e,u)+1;return Au(e,i,o).join("")}function wc(n,t,r){if(n=Oa(n),n&&(r||t===X))return n.replace(Wt,"");if(!n||!(t=pu(t)))return n;var e=H(n),u=C(e,H(t))+1;return Au(e,0,u).join("")}function mc(n,t,r){if(n=Oa(n),n&&(r||t===X))return n.replace(St,"");if(!n||!(t=pu(t)))return n;var e=H(n),u=L(e,H(t));return Au(e,u).join("")}function xc(n,t){var r=wn,e=mn;if(ea(t)){var u="separator"in t?t.separator:u;r="length"in t?ma(t.length):r,e="omission"in t?pu(t.omission):e}n=Oa(n);var i=n.length;if($(n)){var o=H(n);i=o.length}if(r>=i)return n;var f=r-G(e);if(f<1)return e;var a=o?Au(o,0,f).join(""):n.slice(0,f);if(u===X)return a+e;if(o&&(f+=a.length-f),wh(u)){if(n.slice(f).search(u)){var c,l=a;for(u.global||(u=fl(u.source,Oa(Dt.exec(u))+"g")),u.lastIndex=0;c=u.exec(l);)var s=c.index;a=a.slice(0,s===X?f:s)}}else if(n.indexOf(pu(u),f)!=f){var h=a.lastIndexOf(u);h>-1&&(a=a.slice(0,h))}return a+e}function jc(n){return n=Oa(n),n&&bt.test(n)?n.replace(yt,he):n}function Ac(n,t,r){return n=Oa(n),t=r?X:t,t===X?D(n)?Q(n):g(n):n.match(t)||[]}function kc(n){var t=null==n?0:n.length,e=yi();return n=t?l(n,function(n){if("function"!=typeof n[1])throw new cl(en);return[e(n[0]),n[1]]}):[],ru(function(e){for(var u=-1;++u<t;){var i=n[u];if(r(i[0],this,e))return r(i[1],this,e)}})}function Oc(n){return qr(Pr(n,!0))}function Ic(n){return function(){return n}}function Rc(n,t){return null==n||n!==n?t:n}function zc(n){return n}function Ec(n){return Te("function"==typeof n?n:Pr(n,!0))}function Sc(n){return Ne(Pr(n,!0))}function Wc(n,t){return Pe(n,Pr(t,!0))}function Lc(n,t,r){var e=Da(t),i=_e(t,e);null!=r||ea(t)&&(i.length||!e.length)||(r=t,t=n,n=this,i=_e(t,Da(t)));var o=!(ea(r)&&"chain"in r&&!r.chain),f=na(n);return u(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__),u=r.__actions__=Tu(this.__actions__);return u.push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,s([this.value()],arguments))})}),n}function Cc(){return Yr._===this&&(Yr._=wl),this}function Uc(){}function Bc(n){return n=ma(n),ru(function(t){return Ke(t,n)})}function Tc(n){return Wi(n)?j(Ji(n)):Je(n)}function $c(n){return function(t){return null==n?X:ge(n,t)}}function Dc(){return[]}function Mc(){return!1}function Fc(){return{}}function Nc(){return""}function Pc(){return!0}function qc(n,t){if(n=ma(n),n<1||n>Rn)return[];var r=Sn,e=Zl(n,Sn);t=yi(t),n-=Sn;for(var u=R(e,t);++r<n;)t(r);return u}function Zc(n){return _h(n)?l(n,Ji):_a(n)?[n]:Tu(Es(n))}function Kc(n){var t=++gl;return Oa(n)+t}function Vc(n){return n&&n.length?Qr(n,zc,be):X}function Gc(n,t){return n&&n.length?Qr(n,yi(t,2),be):X}function Hc(n){return x(n,zc)}function Jc(n,t){return x(n,yi(t,2))}function Yc(n){return n&&n.length?Qr(n,zc,Me):X}function Qc(n,t){return n&&n.length?Qr(n,yi(t,2),Me):X}function Xc(n){return n&&n.length?I(n,zc):0}function nl(n,t){return n&&n.length?I(n,yi(t,2)):0}A=null==A?Yr:ve.defaults(Yr.Object(),A,ve.pick(Yr,Dr));var tl=A.Array,rl=A.Date,el=A.Error,ul=A.Function,il=A.Math,ol=A.Object,fl=A.RegExp,al=A.String,cl=A.TypeError,ll=tl.prototype,sl=ul.prototype,hl=ol.prototype,pl=A["__core-js_shared__"],vl=sl.toString,_l=hl.hasOwnProperty,gl=0,yl=function(){var n=/[^.]+$/.exec(pl&&pl.keys&&pl.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),dl=hl.toString,bl=vl.call(ol),wl=Yr._,ml=fl("^"+vl.call(_l).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xl=ne?A.Buffer:X,jl=A.Symbol,Al=A.Uint8Array,kl=xl?xl.allocUnsafe:X,Ol=N(ol.getPrototypeOf,ol),Il=ol.create,Rl=hl.propertyIsEnumerable,zl=ll.splice,El=jl?jl.isConcatSpreadable:X,Sl=jl?jl.iterator:X,Wl=jl?jl.toStringTag:X,Ll=function(){try{var n=wi(ol,"defineProperty");return n({},"",{}),n}catch(n){}}(),Cl=A.clearTimeout!==Yr.clearTimeout&&A.clearTimeout,Ul=rl&&rl.now!==Yr.Date.now&&rl.now,Bl=A.setTimeout!==Yr.setTimeout&&A.setTimeout,Tl=il.ceil,$l=il.floor,Dl=ol.getOwnPropertySymbols,Ml=xl?xl.isBuffer:X,Fl=A.isFinite,Nl=ll.join,Pl=N(ol.keys,ol),ql=il.max,Zl=il.min,Kl=rl.now,Vl=A.parseInt,Gl=il.random,Hl=ll.reverse,Jl=wi(A,"DataView"),Yl=wi(A,"Map"),Ql=wi(A,"Promise"),Xl=wi(A,"Set"),ns=wi(A,"WeakMap"),ts=wi(ol,"create"),rs=ns&&new ns,es={},us=Yi(Jl),is=Yi(Yl),os=Yi(Ql),fs=Yi(Xl),as=Yi(ns),cs=jl?jl.prototype:X,ls=cs?cs.valueOf:X,ss=cs?cs.toString:X,hs=function(){function n(){}return function(t){if(!ea(t))return{};if(Il)return Il(t);n.prototype=t;var r=new n;return n.prototype=X,r}}();K.templateSettings={escape:mt,evaluate:xt,interpolate:jt,variable:"",imports:{_:K}},K.prototype=J.prototype,K.prototype.constructor=K,Y.prototype=hs(J.prototype),Y.prototype.constructor=Y,Bt.prototype=hs(J.prototype),Bt.prototype.constructor=Bt,Yt.prototype.clear=Qt,Yt.prototype.delete=Xt,Yt.prototype.get=nr,Yt.prototype.has=tr,Yt.prototype.set=rr,er.prototype.clear=ur,er.prototype.delete=ir,er.prototype.get=or,er.prototype.has=fr,er.prototype.set=ar,cr.prototype.clear=lr,cr.prototype.delete=sr,cr.prototype.get=hr,cr.prototype.has=pr,cr.prototype.set=vr,_r.prototype.add=_r.prototype.push=gr,_r.prototype.has=yr,dr.prototype.clear=br,dr.prototype.delete=wr,dr.prototype.get=mr,dr.prototype.has=xr,dr.prototype.set=jr;var ps=Nu(ce),vs=Nu(pe,!0),_s=Pu(),gs=Pu(!0),ys=rs?function(n,t){return rs.set(n,t),n}:zc,ds=Ll?function(n,t){return Ll(n,"toString",{configurable:!0,enumerable:!1,value:Ic(t),writable:!0})}:zc,bs=ru,ws=Cl||function(n){return Yr.clearTimeout(n)},ms=Xl&&1/q(new Xl([,-0]))[1]==In?function(n){return new Xl(n)}:Uc,xs=rs?function(n){return rs.get(n)}:Uc,js=Dl?N(Dl,ol):Dc,As=Dl?function(n){for(var t=[];n;)s(t,js(n)),n=Ol(n);return t}:Dc,ks=de;(Jl&&ks(new Jl(new ArrayBuffer(1)))!=ut||Yl&&ks(new Yl)!=qn||Ql&&ks(Ql.resolve())!=Gn||Xl&&ks(new Xl)!=Yn||ns&&ks(new ns)!=tt)&&(ks=function(n){var t=de(n),r=t==Vn?n.constructor:X,e=r?Yi(r):"";if(e)switch(e){case us:return ut;case is:return qn;case os:return Gn;case fs:return Yn;case as:return tt}return t});var Os=pl?na:Mc,Is=Gi(ys),Rs=Bl||function(n,t){return Yr.setTimeout(n,t)},zs=Gi(ds),Es=Di(function(n){n=Oa(n);var t=[];return Ot.test(n)&&t.push(""),n.replace(It,function(n,r,e,u){t.push(e?u.replace(Tt,"$1"):r||n)}),t}),Ss=ru(function(n,t){return Kf(n)?Hr(n,re(t,1,Kf,!0)):[]}),Ws=ru(function(n,t){var r=bo(t);return Kf(r)&&(r=X),Kf(n)?Hr(n,re(t,1,Kf,!0),yi(r,2)):[]}),Ls=ru(function(n,t){var r=bo(t);return Kf(r)&&(r=X),Kf(n)?Hr(n,re(t,1,Kf,!0),X,r):[]}),Cs=ru(function(n){var t=l(n,mu);return t.length&&t[0]===n[0]?je(t):[]}),Us=ru(function(n){var t=bo(n),r=l(n,mu);return t===bo(r)?t=X:r.pop(),r.length&&r[0]===n[0]?je(r,yi(t,2)):[]}),Bs=ru(function(n){var t=bo(n),r=l(n,mu);return t="function"==typeof t?t:X,t&&r.pop(),r.length&&r[0]===n[0]?je(r,X,t):[]}),Ts=ru(xo),$s=hi(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return Qe(n,l(t,function(n){return Ei(n,r)?+n:n}).sort(Lu)),e}),Ds=ru(function(n){return vu(re(n,1,Kf,!0))}),Ms=ru(function(n){var t=bo(n);return Kf(t)&&(t=X),vu(re(n,1,Kf,!0),yi(t,2))}),Fs=ru(function(n){var t=bo(n);return t="function"==typeof t?t:X,vu(re(n,1,Kf,!0),X,t)}),Ns=ru(function(n,t){return Kf(n)?Hr(n,t):[]}),Ps=ru(function(n){return bu(f(n,Kf))}),qs=ru(function(n){var t=bo(n);return Kf(t)&&(t=X),bu(f(n,Kf),yi(t,2))}),Zs=ru(function(n){var t=bo(n);return t="function"==typeof t?t:X,bu(f(n,Kf),X,t)}),Ks=ru(qo),Vs=ru(function(n){var t=n.length,r=t>1?n[t-1]:X;return r="function"==typeof r?(n.pop(),r):X,Zo(n,r)}),Gs=hi(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Bt&&Ei(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:Jo,args:[u],thisArg:X}),new Y(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(X),n})):this.thru(u)}),Hs=Mu(function(n,t,r){_l.call(n,r)?++n[r]:Br(n,r,1)}),Js=Hu(ao),Ys=Hu(co),Qs=Mu(function(n,t,r){_l.call(n,r)?n[r].push(t):Br(n,r,[t])}),Xs=ru(function(n,t,e){var u=-1,i="function"==typeof t,o=Wi(t),f=Zf(n)?tl(n.length):[];return ps(n,function(n){var a=i?t:o&&null!=n?n[t]:X;f[++u]=a?r(a,n,e):ke(n,t,e)}),f}),nh=Mu(function(n,t,r){Br(n,r,t)}),th=Mu(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),rh=ru(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Si(n,t[0],t[1])?t=[]:r>2&&Si(t[0],t[1],t[2])&&(t=[t[0]]),Ve(n,re(t,1),[])}),eh=Ul||function(){return Yr.Date.now()},uh=ru(function(n,t,r){var e=an;if(r.length){var u=P(r,gi(uh));e|=pn}return ai(n,e,t,r,u)}),ih=ru(function(n,t,r){var e=an|cn;if(r.length){var u=P(r,gi(ih));e|=pn}return ai(t,e,n,r,u)}),oh=ru(function(n,t){return Kr(n,1,t)}),fh=ru(function(n,t,r){return Kr(n,ja(t)||0,r)});Ef.Cache=cr;var ah=bs(function(n,t){t=1==t.length&&_h(t[0])?l(t[0],E(yi())):l(re(t,1),E(yi()));var e=t.length;return ru(function(u){for(var i=-1,o=Zl(u.length,e);++i<o;)u[i]=t[i].call(this,u[i]);return r(n,this,u)})}),ch=ru(function(n,t){var r=P(t,gi(ch));return ai(n,pn,X,t,r)}),lh=ru(function(n,t){var r=P(t,gi(lh));return ai(n,vn,X,t,r)}),sh=hi(function(n,t){return ai(n,gn,X,X,X,t)}),hh=ui(be),ph=ui(function(n,t){return n>=t}),vh=Oe(function(){return arguments}())?Oe:function(n){return ua(n)&&_l.call(n,"callee")&&!Rl.call(n,"callee")},_h=tl.isArray,gh=ee?E(ee):Ie,yh=Ml||Mc,dh=ue?E(ue):Re,bh=ie?E(ie):Se,wh=oe?E(oe):Ce,mh=fe?E(fe):Ue,xh=ae?E(ae):Be,jh=ui(Me),Ah=ui(function(n,t){return n<=t}),kh=Fu(function(n,t){if(Bi(t)||Zf(t))return void $u(t,Da(t),n);for(var r in t)_l.call(t,r)&&Er(n,r,t[r])}),Oh=Fu(function(n,t){$u(t,Ma(t),n)}),Ih=Fu(function(n,t,r,e){$u(t,Ma(t),n,e)}),Rh=Fu(function(n,t,r,e){$u(t,Da(t),n,e)}),zh=hi(Tr),Eh=ru(function(n){return n.push(X,Rr),r(Ih,X,n)}),Sh=ru(function(n){return n.push(X,Fi),r(Bh,X,n)}),Wh=Qu(function(n,t,r){n[t]=r},Ic(zc)),Lh=Qu(function(n,t,r){_l.call(n,t)?n[t].push(r):n[t]=[r]},yi),Ch=ru(ke),Uh=Fu(function(n,t,r){qe(n,t,r)}),Bh=Fu(function(n,t,r,e){qe(n,t,r,e)}),Th=hi(function(n,t){return null==n?{}:(t=l(t,Ji),Ge(n,Hr(vi(n),t)))}),$h=hi(function(n,t){return null==n?{}:Ge(n,l(t,Ji))}),Dh=fi(Da),Mh=fi(Ma),Fh=Ku(function(n,t,r){return t=t.toLowerCase(),n+(r?ec(t):t)}),Nh=Ku(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Ph=Ku(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),qh=Zu("toLowerCase"),Zh=Ku(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Kh=Ku(function(n,t,r){return n+(r?" ":"")+Gh(t)}),Vh=Ku(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Gh=Zu("toUpperCase"),Hh=ru(function(n,t){try{return r(n,X,t)}catch(n){return Qf(n)?n:new el(n)}}),Jh=hi(function(n,t){return u(t,function(t){t=Ji(t),Br(n,t,uh(n[t],n))}),n}),Yh=Ju(),Qh=Ju(!0),Xh=ru(function(n,t){return function(r){return ke(r,n,t)}}),np=ru(function(n,t){return function(r){return ke(n,r,t)}}),tp=ni(l),rp=ni(o),ep=ni(v),up=ei(),ip=ei(!0),op=Xu(function(n,t){return n+t},0),fp=oi("ceil"),ap=Xu(function(n,t){return n/t},1),cp=oi("floor"),lp=Xu(function(n,t){return n*t},1),sp=oi("round"),hp=Xu(function(n,t){return n-t},0);return K.after=jf,K.ary=Af,K.assign=kh,K.assignIn=Oh,K.assignInWith=Ih,K.assignWith=Rh,K.at=zh,K.before=kf,K.bind=uh,K.bindAll=Jh,K.bindKey=ih,K.castArray=$f,K.chain=Go,K.chunk=no,K.compact=to,K.concat=ro,K.cond=kc,K.conforms=Oc,K.constant=Ic,K.countBy=Hs,K.create=Ia,K.curry=Of,K.curryRight=If,K.debounce=Rf,K.defaults=Eh,K.defaultsDeep=Sh,K.defer=oh,K.delay=fh,K.difference=Ss,K.differenceBy=Ws,K.differenceWith=Ls,K.drop=eo,K.dropRight=uo,K.dropRightWhile=io,K.dropWhile=oo,K.fill=fo,K.filter=of,K.flatMap=ff,K.flatMapDeep=af,K.flatMapDepth=cf,K.flatten=lo,K.flattenDeep=so,K.flattenDepth=ho,K.flip=zf,K.flow=Yh,K.flowRight=Qh,K.fromPairs=po,K.functions=Ca,K.functionsIn=Ua,K.groupBy=Qs,K.initial=go,K.intersection=Cs,K.intersectionBy=Us,K.intersectionWith=Bs,K.invert=Wh,K.invertBy=Lh,K.invokeMap=Xs,K.iteratee=Ec,K.keyBy=nh,K.keys=Da,K.keysIn=Ma,K.map=pf,K.mapKeys=Fa,K.mapValues=Na,K.matches=Sc,K.matchesProperty=Wc,K.memoize=Ef,K.merge=Uh,K.mergeWith=Bh,K.method=Xh,K.methodOf=np,K.mixin=Lc,K.negate=Sf,K.nthArg=Bc,K.omit=Th,K.omitBy=Pa,K.once=Wf,K.orderBy=vf,K.over=tp,K.overArgs=ah,K.overEvery=rp,K.overSome=ep,K.partial=ch,K.partialRight=lh,K.partition=th,K.pick=$h,K.pickBy=qa,K.property=Tc,K.propertyOf=$c,K.pull=Ts,K.pullAll=xo,K.pullAllBy=jo,K.pullAllWith=Ao,K.pullAt=$s,K.range=up,K.rangeRight=ip,K.rearg=sh,K.reject=yf,K.remove=ko,K.rest=Lf,K.reverse=Oo,K.sampleSize=bf,K.set=Ka,K.setWith=Va,K.shuffle=wf,K.slice=Io,K.sortBy=rh,K.sortedUniq=Co,K.sortedUniqBy=Uo,K.split=vc,K.spread=Cf,K.tail=Bo,K.take=To,K.takeRight=$o,K.takeRightWhile=Do,K.takeWhile=Mo,K.tap=Ho,K.throttle=Uf,K.thru=Jo,K.toArray=ba,K.toPairs=Dh,K.toPairsIn=Mh,K.toPath=Zc,K.toPlainObject=Aa,K.transform=Ga,K.unary=Bf,K.union=Ds,K.unionBy=Ms,K.unionWith=Fs,K.uniq=Fo,K.uniqBy=No,K.uniqWith=Po,K.unset=Ha,K.unzip=qo,K.unzipWith=Zo,K.update=Ja,K.updateWith=Ya,K.values=Qa,K.valuesIn=Xa,K.without=Ns,K.words=Ac,K.wrap=Tf,K.xor=Ps,K.xorBy=qs,K.xorWith=Zs,K.zip=Ks,K.zipObject=Ko,K.zipObjectDeep=Vo,K.zipWith=Vs,K.entries=Dh,K.entriesIn=Mh,K.extend=Oh,K.extendWith=Ih,Lc(K,K),K.add=op,K.attempt=Hh,K.camelCase=Fh,K.capitalize=ec,K.ceil=fp,K.clamp=nc,K.clone=Df,K.cloneDeep=Ff,K.cloneDeepWith=Nf,K.cloneWith=Mf,K.conformsTo=Pf,K.deburr=uc,K.defaultTo=Rc,K.divide=ap,K.endsWith=ic,K.eq=qf,K.escape=oc,K.escapeRegExp=fc,K.every=uf,K.find=Js,K.findIndex=ao,K.findKey=Ra,K.findLast=Ys,K.findLastIndex=co,K.findLastKey=za,K.floor=cp,K.forEach=lf,K.forEachRight=sf,K.forIn=Ea,K.forInRight=Sa,K.forOwn=Wa,K.forOwnRight=La,K.get=Ba,K.gt=hh,K.gte=ph,K.has=Ta,K.hasIn=$a,K.head=vo,K.identity=zc,K.includes=hf,K.indexOf=_o,K.inRange=tc,K.invoke=Ch,K.isArguments=vh,K.isArray=_h,K.isArrayBuffer=gh,K.isArrayLike=Zf,K.isArrayLikeObject=Kf,K.isBoolean=Vf,K.isBuffer=yh,K.isDate=dh,K.isElement=Gf,K.isEmpty=Hf,K.isEqual=Jf,K.isEqualWith=Yf,K.isError=Qf,K.isFinite=Xf,K.isFunction=na,K.isInteger=ta,K.isLength=ra,K.isMap=bh,K.isMatch=ia,K.isMatchWith=oa,K.isNaN=fa,K.isNative=aa,K.isNil=la,K.isNull=ca,K.isNumber=sa,K.isObject=ea,K.isObjectLike=ua,K.isPlainObject=ha,K.isRegExp=wh,K.isSafeInteger=pa,K.isSet=mh,K.isString=va,K.isSymbol=_a,K.isTypedArray=xh,K.isUndefined=ga,K.isWeakMap=ya,K.isWeakSet=da,K.join=yo,K.kebabCase=Nh,K.last=bo,K.lastIndexOf=wo,K.lowerCase=Ph,K.lowerFirst=qh,K.lt=jh,K.lte=Ah,K.max=Vc,K.maxBy=Gc,K.mean=Hc,K.meanBy=Jc,K.min=Yc,K.minBy=Qc,K.stubArray=Dc,K.stubFalse=Mc,K.stubObject=Fc,K.stubString=Nc,K.stubTrue=Pc,K.multiply=lp,K.nth=mo,K.noConflict=Cc,K.noop=Uc,K.now=eh,K.pad=ac,K.padEnd=cc,K.padStart=lc,K.parseInt=sc,K.random=rc,K.reduce=_f,K.reduceRight=gf,K.repeat=hc,K.replace=pc,K.result=Za,K.round=sp,K.runInContext=_,K.sample=df,K.size=mf,K.snakeCase=Zh,K.some=xf,K.sortedIndex=Ro,K.sortedIndexBy=zo,K.sortedIndexOf=Eo,K.sortedLastIndex=So,K.sortedLastIndexBy=Wo,K.sortedLastIndexOf=Lo,K.startCase=Kh,K.startsWith=_c,K.subtract=hp,K.sum=Xc,K.sumBy=nl,K.template=gc,K.times=qc,K.toFinite=wa,K.toInteger=ma,K.toLength=xa,K.toLower=yc,K.toNumber=ja,K.toSafeInteger=ka,K.toString=Oa,K.toUpper=dc,K.trim=bc,K.trimEnd=wc,K.trimStart=mc,K.truncate=xc,K.unescape=jc,K.uniqueId=Kc,K.upperCase=Vh,K.upperFirst=Gh,K.each=lf,K.eachRight=sf,K.first=vo,Lc(K,function(){var n={};return ce(K,function(t,r){_l.call(K.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),K.VERSION=nn,u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){K[n].placeholder=K}),u(["drop","take"],function(n,t){Bt.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new Bt(this);r=r===X?1:ql(ma(r),0);var u=this.clone();return e?u.__takeCount__=Zl(r,u.__takeCount__):u.__views__.push({size:Zl(r,Sn),type:n+(u.__dir__<0?"Right":"")}),u},Bt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),u(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==An||r==On;Bt.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:yi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),u(["head","last"],function(n,t){var r="take"+(t?"Right":"");Bt.prototype[n]=function(){return this[r](1).value()[0]}}),u(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Bt.prototype[n]=function(){return this.__filtered__?new Bt(this):this[r](1)}}),Bt.prototype.compact=function(){return this.filter(zc)},Bt.prototype.find=function(n){return this.filter(n).head()},Bt.prototype.findLast=function(n){return this.reverse().find(n)},Bt.prototype.invokeMap=ru(function(n,t){return"function"==typeof n?new Bt(this):this.map(function(r){return ke(r,n,t)})}),Bt.prototype.reject=function(n){return this.filter(Sf(yi(n)))},Bt.prototype.slice=function(n,t){n=ma(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Bt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==X&&(t=ma(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Bt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Bt.prototype.toArray=function(){return this.take(Sn)},ce(Bt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=K[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(K.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Bt,a=o[0],c=f||_h(t),l=function(n){var t=u.apply(K,s([n],o));return e&&h?t[0]:t};c&&r&&"function"==typeof a&&1!=a.length&&(f=c=!1);var h=this.__chain__,p=!!this.__actions__.length,v=i&&!h,_=f&&!p;if(!i&&c){t=_?t:new Bt(this);var g=n.apply(t,o);return g.__actions__.push({func:Jo,args:[l],thisArg:X}),new Y(g,h)}return v&&_?n.apply(this,o):(g=this.thru(l),v?e?g.value()[0]:g.value():g)})}),u(["pop","push","shift","sort","splice","unshift"],function(n){var t=ll[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);K.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(_h(u)?u:[],n)}return this[r](function(r){return t.apply(_h(r)?r:[],n)})}}),ce(Bt.prototype,function(n,t){var r=K[t];if(r){var e=r.name+"",u=es[e]||(es[e]=[]);u.push({name:t,func:r})}}),es[Yu(X,cn).name]=[{name:"wrapper",func:X}],Bt.prototype.clone=Gt,Bt.prototype.reverse=Ht,Bt.prototype.value=Jt,K.prototype.at=Gs,K.prototype.chain=Yo,K.prototype.commit=Qo,K.prototype.next=Xo,K.prototype.plant=tf,K.prototype.reverse=rf,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=ef,K.prototype.first=K.prototype.head,Sl&&(K.prototype[Sl]=nf),K},ve=pe();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Yr._=ve,define(function(){return ve})):Xr?((Xr.exports=ve)._=ve,Qr._=ve):Yr._=ve}).call(this);;;(function($){$(document).ready(function(){var _isMobile=isMobile();var swiper=new Swiper('.menus-container',{pagination:'.swiper-pagination',slidesPerView:'auto',paginationClickable:true,spaceBetween:0});var swiperBannerBottom=new Swiper('.m-banner-bottom-container',{pagination:'.m-banner-bottom-pagination',slidesPerView:'auto',paginationClickable:true,spaceBetween:0});$(document).on('click','.tab-menus-campaign a',(function(e){$('.tab-menus-campaign .swiper-slide').removeClass('swiper-slide-active');$(this).parent().addClass('swiper-slide-active');var el=$(this).data().id;$('html, body').animate({scrollTop:$("#"+el).offset().top},0);}));$('.tab-menus.an-uong a').click(function(){$('.tab-menus .swiper-slide').removeClass('swiper-slide-active');var parent=$(this).parent();parent.addClass('swiper-slide-active');});$('.tab-menus.phu-kien a').click(function(){$('.tab-menus .swiper-slide').removeClass('swiper-slide-active');var parent=$(this).parent();parent.addClass('swiper-slide-active');$('.tab-menus .swiper-wrapper > div').removeClass('swiper-slide-active');var parent=parent.parent();parent.addClass('swiper-slide-active');});$('.cycle-slideshow-1').cycle();$('.cycle-slideshow-2').cycle();$('.cycle-slideshow-1').on('cycle-before',function(event,optionHash,outgoingSlideEl,incomingSlideEl,forwardFlag){var color=$(incomingSlideEl).data('color');var parent=$(this).parents('.set-an-cuc-ngon');parent.css('background-color',color);});$('.cycle-slideshow-2').on('cycle-before',function(event,optionHash,outgoingSlideEl,incomingSlideEl,forwardFlag){var color=$(incomingSlideEl).data('color');var parent=$(this).parents('.set-an-cuc-ngon');parent.css('background-color',color);});if($('.product-hot-page').length&&$('.m-branding').length){new Swiper('.m-branding',{direction:'horizontal',wrapperClass:'branding__menu',slideClass:'branding__item',slidesPerView:'auto',spaceBetween:5});}
var elTabMenu=$('.tab-menus-campaign');var hHeader=$('#header').height();var hBanner=$('.banner-slider').height();$(window).scroll(function(){var hDevice=$(window).width();if(elTabMenu.length&&hDevice>768&&$(this).scrollTop()>(hHeader+hBanner-40)){elTabMenu.addClass('fixed-position');}else{elTabMenu.removeClass('fixed-position');}});if($('.campaign-main').length){$('#btn--buy-now-2').addClass('hidden');$('#btn--buy-now-2').parent().remove();var widthDevice=$(window).width();var widthBoxPrroduct=0;var heightBoxPrroduct=0;$('.product-wrapper-disabled').each(function(){var elThis=$(this);var textDisable=elThis.data().text;if(widthBoxPrroduct<=0){widthBoxPrroduct=elThis.width();}
if(heightBoxPrroduct<=0){heightBoxPrroduct=elThis.height()-20;}
var left=widthDevice<768?7:10;if(textDisable==''){elThis.append('<div class="divDisabledProduct" style="width:'+widthBoxPrroduct+'px;height:'+heightBoxPrroduct+'px;display:table;position:absolute;top:0px;left:'+left+';background-color:#fff;z-index:100;opacity:0.6;"></div>');}else{elThis.append('<div class="divDisabledProduct" style="width:'+widthBoxPrroduct+'px;height:'+heightBoxPrroduct+'px;display:table;position:absolute;top:0px;left:'+left+';background-color:#fff;z-index:100;opacity:0.6;">'+
textDisable+'</div>');}});}
$('.campaign-main .countdown').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.countdown';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDown(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});$('.campaign-main .countdown-detail').each(function(){var elCountdownDetail=$(this);var status=elCountdownDetail.data().countdown;var start=elCountdownDetail.data().start;var end=elCountdownDetail.data().end;var current=elCountdownDetail.data().current;var classText=elCountdownDetail.data().class;if(status==1){setInterval(function(){current=current+1;if(current<start){elCountdownDetail.find('.text-countdown').text('Sẽ mở bán trong ');setCountDown(current,start,'.countdown-detail-'+classText);}else if(current>=start&&current<=end){setCountDown(current,end,'.countdown-detail-'+classText);if(current==end){window.location.reload();}}else{elCountdownDetail.addClass('hidden');}},1000);}});$('.campaign-main .countdown-single').each(function(){var elCountdownSingle=$(this);var status=elCountdownSingle.data().status;var start=elCountdownSingle.data().start;var end=elCountdownSingle.data().end;var current=elCountdownSingle.data().current;if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,'.countdown-single');}else if(current>=start&&current<=end){setCountDown(current,end,'.countdown-single');if(current==end){window.location.reload();}}else{elCountdownSingle.addClass('hidden');}},1000);}});$(document).on('click','.campaign-main .nav-single-subpage a',function(){var elA=$(this);var campaing=elA.parents('.campaign-main');var parent=elA.parent();parent.find('.active').removeClass("active");elA.addClass("active");$(".campaign-main .group-content-tab .box-deal-1").slideUp();var contentId=elA.attr("title");$("#"+contentId).slideDown();});$('.flexslider').each(function(){var elFlexSlider=$(this);var autoHtml=elFlexSlider.data().html5;if(autoHtml=='on'){$(elFlexSlider).flexslider({slideshow:elFlexSlider.data().slideshow,animation:elFlexSlider.data().animation,animationLoop:elFlexSlider.data().animationLoop,itemWidth:elFlexSlider.data().width,itemMargin:elFlexSlider.data().margin,minItems:elFlexSlider.data().items,start:function(slider){$('body').removeClass('loading');}});}});$(".campaign-cho-tet .menu-mid .item-menu a").click(function(){var elA=$(this);var contentId=$(this).attr("title");$('html, body').animate({scrollTop:($("#"+contentId).offset().top)},1000);var parent=elA.parents('.item-menu');parent.find('.active').removeClass("active");elA.addClass("active");});if($('.campaign-crazy-sale').length){$('.flexslider').flexslider({animation:"slide",animationLoop:false,itemWidth:155,itemMargin:10});}
if($('.campaign-single-day-combo').length){var _status=$('.campaign-single-day-combo .statusCountdown').val();var widthDevice=$(window).width();var width=0;var height=0;if(_status!='running'){$('.campaign-single-day-combo .product-wrapper').each(function(){var elPro=$(this);if(width<=0){width=elPro.width();}
if(height<=0){height=elPro.height()-20;}
var left=10;if(widthDevice<768){left=7;}
elPro.append('<div style="width:'+width+'px;height:'+height+'px;display:table;position:absolute;top:0px;left:'+left+'px;background-color:#fff;z-index:100;opacity:0.4;"></div>')});}}
$('.countdown-flash-sale').each(function(){var _status=$('.campaign-main .countdown-flash-sale').data().status;var widthDevice=$(window).width();var width=0;var height=0;if(_status!='running'){$('.campaign-main .list-product-flash-sale .product-wrapper').each(function(){var elPro=$(this);if(width<=0){width=elPro.width();}
if(height<=0){height=elPro.height()-20;}
var left=10;if(widthDevice<768){left=7;}
elPro.append('<div style="width:'+width+'px;height:'+height+'px;display:table;position:absolute;top:0px;left:'+left+'px;background-color:#fff;z-index:100;opacity:0.4;"></div>')});}});if($('.campaign-single-day-flash-sale').length){var status=$('.campaign-single-day-flash-sale .statusCountdown').val();if(status!='running'){$('.campaign-single-day-flash-sale .product-wrapper').each(function(){var elPro=$(this);var width=elPro.width();var height=elPro.height()-20;elPro.append('<div style="width:'+width+'px;height:'+height+'px;display:table;position:absolute;top:0px;left:10px;background-color:#fff;z-index:100;opacity:0.6;"></div>')});}}
if($('.campaign-cyber-monday').length){var status=$('.campaign-cyber-monday .countdown-flash-sale').data().status;if(status!='running'){$('.campaign-cyber-monday .flash-deal .product-wrapper').each(function(){var elPro=$(this);var width=elPro.width();var height=elPro.height()-20;elPro.append('<div style="width:'+width+'px;height:'+height+'px;display:table;position:absolute;top:0px;left:10px;background-color:#fff;z-index:100;opacity:0.6;"></div>')});}}
$(".campaign-crazy-sale a.tab").click(function(){var id=$(this).attr("title");$(".active").removeClass("active");$(this).addClass("active");$('.product-hot').addClass('hidden').removeClass('active');$('#'+id).removeClass('hidden').addClass('active');if($(window).scrollTop()>($('.banner-slider').height()+$('#header').height()+$('#flexslider').height()+$('.box-nav-landing').height())&&$('.box-nav-landing').length&&$(window).width()>768){$('html, body').animate({scrollTop:($("#"+id).offset().top-$('.box-nav-landing').height()-10)},0);}});if($('.campaign-bao-lixi').length){var checkScrollLixi=false;if($('.tab-menus').length&&$(window).width()>768){var height=$('.tab-menus').offset().top-44;$(window).scroll(function(){if($(this).scrollTop()>height&&checkScrollLixi===false){checkScrollLixi=true;$('.tab-menus').parent().addClass("fixed-position");}else if($(this).scrollTop()<height){checkScrollLixi=false;$('.tab-menus').parent().removeClass('fixed-position');}
$('.tab-menus a.tab').each(function(){var jelm=$(this);var target_el=$('#'+jelm.attr('title'));if(target_el.offset().top-155<$(window).scrollTop()){jelm.parents('ul').find('a.active').removeClass('active');jelm.addClass('active');}});});}
$(".campaign-bao-lixi a.tab").click(function(e){e.preventDefault();var elA=$(this);var contentId=elA.attr("title");var offset=154;$('html, body').animate({scrollTop:($("#"+contentId).offset().top-offset)},1000);});}
var checkScroll=false;if($('.campaign-crazy-sale').length&&$('.box-nav-landing').length&&$(window).width()>768){$(window).scroll(function(){var height=$('.banner-slider').height()+$('#header').height()+$('#flexslider').height()+$('.box-nav-landing').height()-40;if($(this).scrollTop()>height&&checkScroll===false){checkScroll=true;$('.box-nav-landing').addClass('fix');$('.box-nav-landing').css('width',$('.campaign-main').width());}else if($(this).scrollTop()<height){$('.box-nav-landing').removeClass('fix');checkScroll=false;}
var idContent=$('.box-nav-landing a.active').attr("title");if($(this).scrollTop()>(height+$('#'+idContent).height()-600)){var countItem=0;$('#'+idContent+' .product-hidden.hidden').each(function(){countItem+=1;if(countItem>12){return false;}
$(this).removeClass('hidden');});if(countItem<=12&&countItem>0){$('#'+idContent+' .line-view-more').removeClass('hidden');}}});}
$(".campaign-online-friday-2016 .campaign-menu-multi-category a.tab").click(function(){var id=$(this).attr("title");$(this).parents('ul').find('a.active').removeClass("active");$(this).addClass("active");$(this).parents('.campaign-contents').find('.product-hot').addClass('hidden').removeClass('active');$('#'+id).removeClass('hidden').addClass('active');if($(window).scrollTop()>($('.banner-slider').height()+$('#header').height()+$('#flexslider').height()+$('.box-nav-landing').height())&&$('.box-nav-landing').length&&$(window).width()>768){$('html, body').animate({scrollTop:($("#"+id).offset().top-$('.box-nav-landing').height()-30)},0);}});var checkScrollOnlineFriday=false;var checkAjax=true;var offset=40;var idContentOld='';if($('.campaign-online-friday-2016').length&&$('.box-nav-landing').length&&$(window).width()>768){$(window).scroll(function(){var height=$('.banner-slider').height()+$('#header').height()+$('.countdown').height()+$('.box-nav-landing').height()-40;if($(this).scrollTop()>height&&checkScrollOnlineFriday===false){checkScrollOnlineFriday=true;$('.box-nav-landing').addClass('fix');$('.box-nav-landing').css('width',$('.campaign-main').width());}else if($(this).scrollTop()<height){$('.box-nav-landing').removeClass('fix');checkScrollOnlineFriday=false;}
var idContent=$('.box-nav-landing a.active').attr("title");var id=$('.box-nav-landing a.active').data().id;if(idContent!=idContentOld){idContentOld=idContent;checkAjax=true;}
if($(this).scrollTop()>(height+$('#'+idContent).height()-600-300)&&checkAjax==true){checkAjax=false;$.ajax({url:window.location.href+'?key='+id+'&offset='+offset,type:'GET',success:function(res){res=JSON.parse(res);$('#'+idContent+' .block-main-hot').append(res.html);if(res==''){$('#'+idContent+' .line-view-more').removeClass('hidden');}else{var item=parseInt(res.item);if(offset<=res.total){offset=offset+40;$('#'+idContent+' .offset').val(offset);checkAjax=true;}}
$('.online-friday-2016-page .product__info').each(function(){var statusCountDown=$('#statusCountdown').val();if(statusCountDown=='waiting'){$(this).html('<div class="text-center" style="padding: 16px 0px;">Khuyến mãi chưa diễn ra</div>');}else if(statusCountDown=='stop'){$(this).html('<div class="text-center" style="padding: 16px 0px;">Khuyến mãi đã kết thúc</div>');}});},});}});}
if($('.online-friday-2016-page').length>0){var elOnlineFriday=$('.online-friday-2016-page');var elBlockMain=$('.online-friday-2016-page .block-main-hot');if(elOnlineFriday.find('#statusCountdown').val()!='running'){elBlockMain.each(function(){$(this).append('<div class="disable-deal">&nbsp;</div>');});$('.online-friday-2016-page .product__info').each(function(){$(this).html('<div class="text-center" style="padding: 16px 0px;">Khuyến mãi chưa diễn ra</div>');});}}
if($('.campaign-gui-loi-yeu-thuong').length>0){var clickEventType=isMobile()?'touchstart':'click';var support={animations:Modernizr.cssanimations},animEndEventNames={'WebkitAnimation':'webkitAnimationEnd','OAnimation':'oAnimationEnd','msAnimation':'MSAnimationEnd','animation':'animationend'},animEndEventName=animEndEventNames[Modernizr.prefixed('animation')],onEndAnimation=function(el,callback){var onEndCallbackFn=function(ev){if(support.animations){if(ev.target!=this)return;this.removeEventListener(animEndEventName,onEndCallbackFn);}
if(callback&&typeof callback==='function'){callback.call();}};if(support.animations){el.addEventListener(animEndEventName,onEndCallbackFn);}else{onEndCallbackFn();}};var krisna=new Stack(document.getElementById('stack_krisna'));var buttonClickCallback=function(bttn){var bttn=bttn||this;bttn.setAttribute('data-state','unlocked');};document.querySelector('.button--accept[data-stack = stack_krisna]').addEventListener(clickEventType,function(){krisna.accept(buttonClickCallback.bind(this));});document.querySelector('.button--reject[data-stack = stack_krisna]').addEventListener(clickEventType,function(){krisna.reject(buttonClickCallback.bind(this));});[].slice.call(document.querySelectorAll('.button--sonar')).forEach(function(bttn){bttn.addEventListener(clickEventType,function(){bttn.setAttribute('data-state','locked');});});[].slice.call(document.querySelectorAll('.button--material')).forEach(function(bttn){var radialAction=nextSibling(bttn.parentNode);bttn.addEventListener(clickEventType,function(ev){var boxOffset=radialAction.parentNode.getBoundingClientRect(),offset=bttn.getBoundingClientRect();radialAction.style.left=Number(offset.left-boxOffset.left)+'px';radialAction.style.top=Number(offset.top-boxOffset.top)+'px';classie.add(radialAction,classie.has(bttn,'button--reject')?'material-circle--reject':'material-circle--accept');classie.add(radialAction,'material-circle--active');onEndAnimation(radialAction,function(){classie.remove(radialAction,classie.has(bttn,'button--reject')?'material-circle--reject':'material-circle--accept');classie.remove(radialAction,'material-circle--active');});});});$('#btn-gui').on('click',function(e){e.preventDefault();var type=$('ul#stack_krisna > li.stack__item--current > img');$('input[name="type_card"]').val(type.data('type'));var fv=$('#form-send-gif').closest('form').data('formValidation');fv.validateContainer($('#form-send-gif'));if(fv.isValidContainer($('#form-send-gif'))){$.post(window.location.href,$('#form-send-gif').serialize(),function(result){if(result.error==-1){alert(result.title);$('#captcha').attr('src','/campaign/capchacode/index?width=100&height=30&characters=6&msite=womanday&t='+Date.now());$('#token').attr('value',result.token);}
else if(result.error==-2){alert(result.title);window.location.reload();}
else if(result.error==-7){$('#captcha').attr('src','/campaign/capchacode/index?width=100&height=30&characters=6&msite=womanday&t='+Date.now());$('#token').attr('value',result.token);$('.captcha-wrapper').addClass('false-cap');}
else if(result.error==0){$('#captcha').attr('src','/campaign/capchacode/index?width=100&height=30&characters=6&msite=womanday&t='+Date.now());$('#token').attr('value',result.token);$('#goiThiep').modal('show');$('.title-2').html(result.title);}},'json');}});$('.tb-goithemthiep').on('click',function(e){window.location.reload();});$(document).on('click','#stack_krisna .stack__item--current',function(){var type=$(this).data().img;showAlert('','<div class="image-popup"><img src="'+type+'" style="max-width: 100%;" /></div>','test');});}
if($('.campaign-halloween').length){$('.comingsoon').addClass('hidden');$(window).scroll(function(){var sticky=$('.nav-landing-more'),scroll=$(window).scrollTop();if(scroll>=866){sticky.addClass('fixed');$('.comingsoon').removeClass('hidden');}
else{sticky.removeClass('fixed');$('.comingsoon').addClass('hidden');}});}
function shareOnFBCampaign($url){FB.ui({method:'share',href:$url,},function(response){if(response&&!response.error_message){$.ajax({url:"/ajax?api=promotion.createCouponCode",dataType:'json',type:'POST',success:function(res){if(res.error==0){$('#nhan-code').modal('hide');var code=res.data.coupon_code;var html=$('#result-code').html();html=html.replace(/\%CODE\%/gi,code);$('#result-code').html(html);$('#result-code').modal('show');}
else{$('#nhan-code').modal('hide');$('#result-code-false .tt-email').html(res.message);$('#result-code-false').modal('show');}}});}});}
if($('.campaign-countdown-party').length){$(window).scroll(function(){var sticky=$('.nav-right-ld'),scroll=$(window).scrollTop();if(scroll>=35)sticky.addClass('fixed-ld');else sticky.removeClass('fixed-ld');});$("a").on('click',function(event){if(this.hash!==""){event.preventDefault();var hash=this.hash;$('html, body').animate({scrollTop:$(hash).offset().top},800,function(){window.location.hash=hash;});}});$(".nav-right-ld ul li a").click(function(){$(".nav-right-ld ul li a").removeClass("active");$(this).addClass("active");});}
$('.get-code').on('click',function(){var acitve=$(this).parents('.iteam-code').hasClass('active');if(acitve==false)
return;var isLogin=$('.campaign-countdown-party').data().login;if(!isLogin){$('#login-dialog').modal('show');return;}
$('#nhan-code').modal('show');});$('#share-code-countdown').on('click',function(e){shareOnFBCampaign(window.location.href);});if($('.campaign-birthday-hd').length){var d=new Date().getDate();if(d==24||d==25){$('#p_24').addClass('active');}
if(d==26||d==27){$('#p_26').addClass('active');}
if(d==28){$('#p_28').addClass('active');$('#p_26').removeAttr('data-url');}
if(d==29){$('#p_29').addClass('active');}
if(d==30){$('#p_30').addClass('active');}
if(d==2){$('#p_02').addClass('active');}
$(document).on('click','ul.birthday p',function(){var url=$(this).data().url;if(url!=null){window.location=url;}});}
if($('.flash-sale-thoi-trang').length){var currentTime=new Date().getTime();$('#tabflashsale #tab0').each(function(){var startTime=new Date('2016-12-07 00:00:00').getTime();var endTime=new Date('2016-12-07 23:59:59').getTime();if(currentTime<=startTime){var elProduct=$(this).find('.product-wrapper');elProduct.each(function(){var elPro=$(this);var width=elPro.width();var height=elPro.height()-20;elPro.append('<div style="width:'+width+'px;height:'+height+'px;display:table;position:absolute;top:0px;left:10px;background-color:#fff;z-index:100;opacity:0.6;"></div>')});}});}
if($('.campaign-women-day').length){$(window).scroll(function(){var sticky=$('.campaign-women-day .nav-ld-r'),scroll=$(window).scrollTop();if(scroll>=100)sticky.addClass('fixed-r');else sticky.removeClass('fixed-r');});}
$(document).on('click','.campaign-lamdep-eva .nav-ld-r a',function(){$(this).parent().find('a').removeClass('active');$(this).addClass('active');$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-50},500);});$(document).on('click','.campaign-lamdep-eva .menu-item a',function(){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-50},500);});$(document).on('click','.campaign-tour-trangan .box-item-banner a',function(){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-50},500);});$(document).on('click','.campaign-flashsale-amthuc .menu-flashsale a',function(){$('.campaign-flashsale-amthuc .menu-flashsale a').removeClass('active');$(this).addClass('active');$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-50},500);});$('.btn-show-more').click(function(){$.blazy.revalidate();});$('.click_change_cp').click(function(){setTimeout(function(){$.blazy.revalidate();},300);});$(document).on('click','.campaign-main .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?0:50)},500);}});if($('.campaign-luong-ve .branding__menu').length>0){var tag=$('.campaign-luong-ve .branding__menu').data().tag;$('.campaign-luong-ve .branding__menu li').each(function(){if($(this).data().tag==tag){$(this).addClass('active');}});}
$(window).scroll(function(){var scrollTopHeight=$(window).scrollTop();if($('.campaign-lamdep-eva').length){var elSticky=$('.campaign-lamdep-eva .nav-ld-r');if(scrollTopHeight>=100){elSticky.addClass('fixed-r');}else{elSticky.removeClass('fixed-r');}
$('.campaign-lamdep-eva .item-list-deal').each(function(){if($(this).offset().top<=scrollTopHeight+100){elSticky.find('a').removeClass('active');elSticky.find('a.'+$(this).data().id).addClass('active');}});}
if($('.campaign-luong-ve').length){var _elLuongVe=$('.campaign-luong-ve .product-hot-page');if(scrollTopHeight>=550&&_isMobile==false){_elLuongVe.addClass('menu-fix').css('width',$('.campaign-luong-ve').width());}else{_elLuongVe.removeClass('menu-fix');}}});if($('.campaign-market-april-live-stream').length){var orderId=$('.campaign-market-april-live-stream').data().order+'';var number=0;var maxRandom=300;var checkMaxRandom=0;var charIndex=0;var classIndex=8;var value=parseInt(orderId.substr(charIndex,1));var elCountdown=$('.campaign-market-april-live-stream .count-downs');var __status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass='.campaign-market-april-live-stream .count-downs';if(__status!='stop'){var _countdown=setInterval(function(){current=current+1;if(current<=start){var stringTime=(start-current);var h=Math.floor(stringTime/(60*60));$(txtClass+' .hour .number').text((h<10?'0'+h:h));stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));$(txtClass+' .minute .number').text((m<10?'0'+m:m));stringTime=stringTime-(60*m);var s=Math.floor(stringTime);$(txtClass+' .seconds .number').text((s<10?'0'+s:s));}else if(__status=='waiting'){clearInterval(_countdown);elCountdown.find('.countdown-text').html('Chương trình đang diễn ra');var _randon=setInterval(function(){if(charIndex>=8){__status='stop';clearInterval(_randon);elCountdown.find('.countdown-text').html('Chương trình đã kết thúc');$('.campaign-market-april-live-stream .box-quay-so .text-notice').removeClass('hidden');$.post("/ajax?api=campaigns.resultCampaignIphone",{orderId:orderId},function(data,status){});}
$('.number'+classIndex).html(number);if(checkMaxRandom>=maxRandom&&number==value){charIndex=charIndex+1;value=parseInt(orderId.substr(charIndex,1));number=0;checkMaxRandom=0;classIndex=classIndex-1;}else{checkMaxRandom+=1;number+=1;if(number>9){number=0;}}},50);}},1000);}}
$(document).on('click','.campaign-main .flip',function(){if($(this).find('i').hasClass('fa-angle-down')){$(this).find('i').removeClass('fa-angle-down').addClass('fa-angle-up');}else{$(this).find('i').removeClass('fa-angle-up').addClass('fa-angle-down');}
$(".campaign-main .box-text").slideToggle("slow");});$(document).on('click','.campaign-main ._btnRegisteerHsbc',function(){var isLogin=$('.campaign-main').data().login;console.log(isLogin);if(isLogin!='1'){$('#login-dialog').modal();return false;}});$(".campaign-main #promo-banners").click(function(){$('html, body').animate({scrollTop:$(".register-form").offset().top},1000);$("#name").focus();});$(document).ready(function(){$("#hsbcModal").modal();});if($('.campaign-flashsale1705').length){$('.campaign-flashsale1705 .flash-sale-item').each(function(){if($(this).data.status!='stop'){var elFlashSale=$(this);var start=$(this).data().start;var end=$(this).data().end;var current=$(this).data().current;setInterval(function(){current=current+1;var textCountdown='';if(current<start){var stringTime=(start-current);var h=Math.floor(stringTime/(60*60));textCountdown+=(h<10?'0'+h:h);stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));textCountdown+=':'+(m<10?'0'+m:m);stringTime=stringTime-(60*m);var s=Math.floor(stringTime);textCountdown+=':'+(s<10?'0'+s:s);elFlashSale.find('li.showCountDown').html('CÒN '+textCountdown);}else if(current>=start&&current<=end){var stringTime=(end-current);var h=Math.floor(stringTime/(60*60));textCountdown+=(h<10?'0'+h:h);stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));textCountdown+=':'+(m<10?'0'+m:m);stringTime=stringTime-(60*m);var s=Math.floor(stringTime);textCountdown+=':'+(s<10?'0'+s:s);elFlashSale.find('li.showCountDown').html('CÒN '+textCountdown);}else{elFlashSale.find('li.showCountDown').html('KẾT THÚC');}},1000);}});}
if($('.campaign-flashsale2405').length){$('.campaign-flashsale2405 .flash-sale-item').each(function(){if($(this).data.status!='stop'){var elFlashSale=$(this);var start=$(this).data().start;var end=$(this).data().end;var current=$(this).data().current;setInterval(function(){current=current+1;var textCountdown='';if(current<start){var stringTime=(start-current);var h=Math.floor(stringTime/(60*60));textCountdown+=(h<10?'0'+h:h);stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));textCountdown+=':'+(m<10?'0'+m:m);stringTime=stringTime-(60*m);var s=Math.floor(stringTime);textCountdown+=':'+(s<10?'0'+s:s);elFlashSale.find('li.showCountDown').html('CÒN '+textCountdown);}else if(current>=start&&current<=end){var stringTime=(end-current);var h=Math.floor(stringTime/(60*60));textCountdown+=(h<10?'0'+h:h);stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));textCountdown+=':'+(m<10?'0'+m:m);stringTime=stringTime-(60*m);var s=Math.floor(stringTime);textCountdown+=':'+(s<10?'0'+s:s);elFlashSale.find('li.showCountDown').html('CÒN '+textCountdown);}else{elFlashSale.find('li.showCountDown').html('KẾT THÚC');}},1000);}});}
if($('.campaign-so7-het-say').length){var timeCurrent=$('.campaign-so7-het-say').data().time;var hoursCurrent=$('.campaign-so7-het-say').data().hours;var widthDevice=$(window).width();var widthBoxPrroduct=0;var heightBoxPrroduct=0;$('.campaign-so7-het-say .group-product-flash-sale .product-wrapper').each(function(){var elProduct=$(this);if(widthBoxPrroduct<=0){widthBoxPrroduct=elProduct.width();}
if(heightBoxPrroduct<=0){heightBoxPrroduct=elProduct.height()-20;}
var left=widthDevice<768?7:10;var productTime=elProduct.data().campaignTime;console.log(elProduct.data().hours);if(timeCurrent==productTime){if(hoursCurrent<9){productTime=productTime+'';var textTime=productTime.substr(6,2)+'/'+productTime.substr(4,2)+'/'+productTime.substr(0,4);elProduct.append('<div class="divDisabledProduct" style="width:'+widthBoxPrroduct+'px;height:'+heightBoxPrroduct+'px;display:table;position:absolute;top:0px;left:'+left+';background-color:#fff;z-index:100;opacity:0.6;">'+'<div>MỞ BÁN NGÀY</div><div>'+textTime+' 09:00</div>'+'</div>');}}else if(timeCurrent>productTime){}else{var textHours=' 09:00';productTime=productTime+'';var textTime=productTime.substr(6,2)+'/'+productTime.substr(4,2)+'/'+productTime.substr(0,4);elProduct.append('<div class="divDisabledProduct" style="width:'+widthBoxPrroduct+'px;height:'+heightBoxPrroduct+'px;display:table;position:absolute;top:0px;left:'+left+';background-color:#fff;z-index:100;opacity:0.6;">'+'<div>MỞ BÁN NGÀY</div><div>'+textTime+textHours+'</div>'+'</div>');}});}
if($('.campaign-sanh-dieu #imageUploadFormStylish').length){setInterval(function(){$.get("/ajax?api=image.getUrlApiUpload",function(data,status){if(status=='success'&&data.error==0){$("#imageUploadFormStylish").attr("action",data.data);}});},60000);}});})(jQuery);function showMore(el){$(".btn-hide-more").click();$(el).parents('.product-hot').find('.product-hidden').removeClass('hidden');$(el).parent().parent().find('.btn-show-more').addClass('hidden');$(el).parent().parent().find('.btn-hide-more').removeClass('hidden');}
function showProductMore(el){$(el).parents('.product-hot').find('.product-hidden').removeClass('hidden');if(parseInt($(el).data().hide)==1){$(el).addClass('hidden');$(el).next().removeClass('hidden');}else{$(el).parent().parent().addClass('hidden');}}
function hideProductMore(el){$(el).parents('.product-hot').find('.product-hidden').addClass('hidden');$(el).addClass('hidden');$(el).prev().removeClass('hidden');}
function showProductMoreOne(el){$(el).parents('.list-product-detail').find('.deal-item.product-hidden').removeClass('hidden');if(parseInt($(el).data().hide)==1){$(el).addClass('hidden');$(el).next().removeClass('hidden');}else{$(el).parent().parent().addClass('hidden');}}
function hideProductMoreOne(el){$(el).parents('.list-product-detail').find('.deal-item.product-hidden').addClass('hidden');$(el).addClass('hidden');$(el).prev().removeClass('hidden');}
function setCountDown(timeCurrent,timeEnd,el){if(el==undefined){el='.countdown';}
var stringTime=(timeEnd-timeCurrent);var h=Math.floor(stringTime/(60*60));$(el+' .hour .number').text(h<10?'0'+h:h);stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));$(el+' .minute .number').text(m<10?'0'+m:m);stringTime=stringTime-(60*m);var s=Math.floor(stringTime);$(el+' .seconds .number').text(s<10?'0'+s:s);}
function setCountDownDayHourMinute(timeCurrent,timeEnd,el){if(el==undefined){el='.countdown';}
var stringTime=(timeEnd-timeCurrent);var d=Math.floor(stringTime/(60*60)/24);$(el+' .day .number').text(d<10?'0'+d:d);var h=Math.floor((stringTime/(60*60))%24);$(el+' .hour .number').text(h<10?'0'+h:h);var m=Math.floor((stringTime/(60))%60);$(el+' .minute .number').text(m<10?'0'+m:m);var s=Math.floor(stringTime%60);$(el+' .seconds .number').text(s<10?'0'+s:s);}
function isMobile(){var check=false;(function(a){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}
function nextSibling(el){var nextSibling=el.nextSibling;while(nextSibling&&nextSibling.nodeType!=1){nextSibling=nextSibling.nextSibling}
return nextSibling;}
$(document).ready(function(){$(".vinpearl-system-five-star").click(function(){$('html, body').animate({scrollTop:$("#vinpearl-system-five-star").offset().top},1000);});$(".hotel-and-resort").click(function(){$('html, body').animate({scrollTop:$("#hotel-and-resort").offset().top},1000);});$(".dosmetic-tour").click(function(){$('html, body').animate({scrollTop:$("#dosmetic-tour").offset().top},1000);});$(".international-tour").click(function(){$('html, body').animate({scrollTop:$("#international-tour").offset().top},1000);});$(".show-popup-login").click(function(){$('#login-dialog').modal('show');});if(jQuery('div').hasClass('chuc-du-dieu-kien-quay-so')){jQuery('.chuc-du-dieu-kien-quay-so').modal('show');}
if($('.campaign-market-july-live-stream').length){var orderId=$('.campaign-market-july-live-stream').data().order+'';var number=0;var maxRandom=300;var checkMaxRandom=0;var charIndex=0;var classIndex=8;var value=parseInt(orderId.substr(charIndex,1));var elCountdown=$('.campaign-market-july-live-stream .count-downs');var __status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass='.campaign-market-july-live-stream .count-downs';if(__status!='stop'){var _countdown=setInterval(function(){current=current+1;if(current<=start){var stringTime=(start-current);var h=Math.floor(stringTime/(60*60));$(txtClass+' .hour .number').text((h<10?'0'+h:h));stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));$(txtClass+' .minute .number').text((m<10?'0'+m:m));stringTime=stringTime-(60*m);var s=Math.floor(stringTime);$(txtClass+' .seconds .number').text((s<10?'0'+s:s));}else if(__status=='waiting'){clearInterval(_countdown);elCountdown.find('.countdown-text').html('Chương trình đang diễn ra');var _randon=setInterval(function(){if(charIndex>=8){__status='stop';clearInterval(_randon);elCountdown.find('.countdown-text').html('Chương trình đã kết thúc');$('.campaign-market-july-live-stream .text-notice').removeClass('hidden');$.post("/ajax?api=campaigns.resultCampaignVinpearLand",{orderId:orderId},function(data,status){});}
$('.number'+classIndex).html(number);if(checkMaxRandom>=maxRandom&&number==value){charIndex=charIndex+1;value=parseInt(orderId.substr(charIndex,1));number=0;checkMaxRandom=0;classIndex=classIndex-1;}else{checkMaxRandom+=1;number+=1;if(number>9){number=0;}}},50);}},1000);}}
if($('.get-end-products').length){$.post(window.location.href,{productID:listProductIdNumberSeven},function(data){var the_result=JSON.parse(data);var widthDevice=$(window).width();var the_left=widthDevice<768?7:10;$.each(the_result,function(key,value){var the_width=$('#product-'+value+'-wrapper').width();var the_height=$('#product-'+value+'-wrapper').height();$('.group-flash-sale #product-'+value+'-wrapper').append('<div class="divDisabledProduct" style="width:'+the_width+'px;height:'+the_height+'px;display:table;position:absolute;top:0px;left:'+the_left+'px;background-color:#fff;z-index:100;opacity:0.6;"><div>Kết thúc</div></div>');var parentClass=$('.group-flash-sale #product-'+value+'-wrapper').closest('.item-list-product').attr('the-key');$('.group-flash-sale .'+parentClass+' #product-'+value+'-wrapper').appendTo('.'+parentClass+' #block-main-hot');});});}
$('#imageUploadFormStylish').on('submit',(function(e){e.preventDefault();var formData=new FormData(this);$.ajax({type:'POST',url:$(this).attr('action'),data:formData,dataType:'json',cache:false,contentType:false,processData:false,success:function(data){if(data.error!=0){console.log(data);alert('upload pictures failed, please try again later');}else{var type=$("#hiddenInputName").val();if(type!=''){addImageStylish(type,data);}}},error:function(data){}});$(this).trigger('reset');return false;}));$("#upload_img_stylish").on("click",function(){document.getElementById("hiddenInputName").value='image_thumb';$('#file').trigger('click');});$('.sanh-dieu-vote,.sanh-dieu-share').click(function(){alert('chương chình đã kết thúc');return false;})
if($('.sanh-dieu-orderId').length){$('.sanh-dieu-orderId').keydown(debounceTime(function(){if(user_login_sanh_dieu<=0){$('#login-dialog').modal('show');return false;}
var theAction='checkOrderId';var thOrderId=$('.sanh-dieu-orderId').val();if(thOrderId.length<=7){return false;}
$.post(window.location.href,{action:theAction,orderId:thOrderId},function(data){if(data==1){$('.box-sanh-dieu-hidden').removeClass('sanh-dieu-hidden')}
else{alert(data);$('#sanhDieucheckOrderId').addClass('has- has-error fv-has-tooltip');$('#sanhDieucheckOrderId i.form-control-feedback').trigger('click');$('.box-sanh-dieu-hidden').addClass('sanh-dieu-hidden');return false;}})},250));}
if($('.sanh-dieu-popup-success').length){$('.sanh-dieu-popup-success').modal('show');}
if($('.sanh-dieu-popup-error').length){$('.sanh-dieu-popup-error').modal('show');}
if($('.campaign-san-hang-soc-count-down').length){var number=0;var charIndex=0;var classIndex=8;var elCountdown=$('.campaign-san-hang-soc-count-down .count-downs');var __status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass='.campaign-san-hang-soc-count-down .count-downs';if(__status!='stop'){var _countdown=setInterval(function(){current=current+1;if(current<=start){var stringTime=(start-current);var h=Math.floor(stringTime/(60*60));$(txtClass+' .hour .number').text((h<10?'0'+h:h));stringTime=stringTime-(60*60*h);var m=Math.floor(stringTime/(60));$(txtClass+' .minute .number').text((m<10?'0'+m:m));stringTime=stringTime-(60*m);var s=Math.floor(stringTime);$(txtClass+' .seconds .number').text((s<10?'0'+s:s));elCountdown.find('.countdown-text').html('Chương trình sẽ bắt đầu');}else if(__status=='waiting'){clearInterval(_countdown);elCountdown.find('.countdown-text').html('Chương trình đang diễn ra');var _randon=setInterval(function(){if(charIndex>=8){__status='stop';clearInterval(_randon);elCountdown.find('.countdown-text').html('Chương trình đã kết thúc');}
$('.number'+classIndex).html(number);},50);}
else if(__status=='run'){elCountdown.find('.countdown-text').html('Chương trình đang diễn ra');}},1000);}}
if($('.campaign-ilove-evoucher-check').length){$('.i_love_evoucer_login').click(function(){if(campaign_ilove_evoucher_check_login<=0){$('#login-dialog').modal('show');return false;}})}
$('.click-to-check-in').click(function(){var orderId=$('.click-to-check-in-value').val();var increaseNumber=$('.calculation-checkin').val();$.post(window.location.href,{orderId:orderId}).done(function(data){var result=JSON.parse(data);if(result.error==1){alert(result.msg)}
else{$('.calculation-checkin').val(+increaseNumber+1);$('.table-checkin-informaction').append('<tr><td align="center">'+increaseNumber+'</td><td>'+result.data.deal+'</td><td align="center">'+result.data.place+'</td><td align="center">'+result.data.total+'</td></tr>');var getProvinceValue=$(".province-"+result.data.id).text();var provinceAfterCalculate=+getProvinceValue+ +result.data.total;$(".province-"+result.data.id).html(provinceAfterCalculate);$(".map-province-"+result.data.id).html(provinceAfterCalculate);}})})
if($('.campaign-ilove-travel').length){$('.onesliderTooltip').hover(function(){var titleText=$(this).attr('title');$(this).data('tiptext',titleText).removeAttr('title');$('<div class="tooltipilovetravel"></div>').text(titleText).appendTo('body').css('top',(e.pageY-10)+'px').css('left',(e.pageX+20)+'px').fadeIn('slow');},function(){$(this).attr('title',$(this).data('tiptext'));$('.tooltipilovetravel').remove();}).mousemove(function(e){$('.tooltipilovetravel').css('top',(e.pageY-10)+'px').css('left',(e.pageX+20)+'px');});}
if($('.ilove-travel-wrap-login').length){$('.ilove-travel-box-login').click(function(){$('#login-dialog').modal('show');return false;})}
if($('.campaign-phu-nu-viet-nam .datediff').length){$('.campaign-phu-nu-viet-nam .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.banner-header-back-to-school .datediff').length){var linkBackToSchool='ho-chi-minh/';if(window.location.href.indexOf("ho-chi-minh")>-1||window.location.href.indexOf("ha-noi")>-1||window.location.href.indexOf("tinh-thanh-khac")>-1){linkBackToSchool='';}
$.post(linkBackToSchool+"campaign/dong-hanh-vi-tuong-lai-nu-sinh-viet-nam",{getTotal:'getTotal'},function(data){$('.back-to-school-money').html(data);});$('.banner-header-back-to-school .datediff .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.banner-header-back-to-school .less-than-two-day').length){var linkBackToSchool='ho-chi-minh/';if(window.location.href.indexOf("ho-chi-minh")>-1||window.location.href.indexOf("ha-noi")>-1||window.location.href.indexOf("tinh-thanh-khac")>-1){linkBackToSchool='';}
$.post(linkBackToSchool+"campaign/dong-hanh-vi-tuong-lai-nu-sinh-viet-nam",{getTotal:'getTotal'},function(data){$('.back-to-school-money').html(data);});$('.banner-header-back-to-school .less-than-two-day .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-dut-co-hon').length){if(typeof list_of_dut_co_hon!='undefined'){$.each(list_of_dut_co_hon,function(key,value){$('#product-'+value+'-wrapper .product__image .item__meta').remove();$('#product-'+value+'-wrapper .product__stats').remove();$('#product-'+value+'-wrapper #product-'+value).removeAttr('data-url');$('#product-'+value+'-wrapper .product__image a').attr('href','#');$('#product-'+value+'-wrapper .product__info').append('<div class="box-dut"><a href="#" class="view product-dzut-co-hon" rel="'+value+'">Dzựt</a></div>');});}
if(typeof listRefesh!='undefined'){$.each(listRefesh,function(key,value){$('#product-'+value+'-wrapper').append('<div class="divDisabledProduct" style="width:280px;height:446px;display:table;position:absolute;top:0px;left:10px;background-color:#fff;z-index:100;opacity:0.6;"></div>');$('#product-'+value+'-wrapper .product__info .box-dut a.view').html('Đã dzựt');})}
$('.product__info').on('click','.product-dzut-co-hon',function(){if(dut_co_hon_login<=0){$('#login-dialog').modal('show');return false;}
var productDzutCoHon=($(this).attr('rel'));$(this).text('Đã dzựt');$(this).removeClass('product-dzut-co-hon');$('#product-'+productDzutCoHon).unbind("click");$('#product-'+productDzutCoHon+'-wrapper').append('<div class="divDisabledProduct" style="width:280px;height:446px;display:table;position:absolute;top:0px;left:10px;background-color:#fff;z-index:100;opacity:0.6;"></div>');$('.campaign-main.campaign-dut-co-hon #product-'+productDzutCoHon+'-wrapper').append('<div class="show-tooltip">Hệ thống đang xử lý! kết quả dzựt được cập nhật tại trang kết quả chậm nhất vào lúc 18:30, 19/09/2017.</div>');$.post(window.location.href,{productId:productDzutCoHon,checkKey:secrectKey}).done(function(data){})
return false;});$('.dzut-co-hon-login').on('click',function(){$('#login-dialog').modal('show');})}
if($('.campaign-dut-co-hon-2018').length){if(js_debug==1){$(document).keydown(function(event){$(document).on("contextmenu",function(e){e.preventDefault();});if(event.keyCode==123){return false;}else if(event.ctrlKey&&event.shiftKey&&event.keyCode==73){return false;}});}
if(typeof list_of_dut_co_hon!='undefined'){$.each(list_of_dut_co_hon,function(key,value){$('#product-'+value+'-wrapper .product__image .item__meta').remove();$('#product-'+value+'-wrapper .product__stats').remove();$('#product-'+value+'-wrapper #product-'+value).removeAttr('data-url');$('#product-'+value+'-wrapper #product-'+value).removeAttr('data-target');$('#product-'+value+'-wrapper .product__image a').removeAttr('href');$('#product-'+value+'-wrapper .product__image a').removeAttr('target');$('#product-'+value+'-wrapper .product__info').append('<div class="box-dut zdut-'+value+' "><a href="javascript: void(0)" class="view product-dzut-co-hon" rel="'+value+'">Dzựt</a></div>');$('#product-'+value).unbind("click");});}
if(typeof list_of_dut_co_hon!='undefined'){$.each(list_of_dut_co_hon,function(key,value){var elm=$('.zdut-'+value);elm.addClass('box-da-dut');elm.find('.view').text('Đã dzựt');elm.find('.view').removeClass('product-dzut-co-hon');$('#product-'+value+'-wrapper .product').css({"z-index":"100","opacity":"0.8"});});setTimeout(function(){$.ajax({type:'POST',url:'/ajax?api=campaigns.getQtyGhostDay',dataType:'json',data:{phase:is_ghost_day_phase},success:function(rs){if(rs.error!=1){var list_of_qty=rs.data.data;$.each(list_of_qty,function(key,value){var elm=$('.zdut-'+key+'.box-da-dut a');elm.text(value);elm.prop('Counter',0).animate({Counter:elm.text()},{duration:1500,easing:'swing',step:function(now){elm.text(Math.ceil(now)+' đã dzựt');}});});}}});},1000);}
$('.product__info').on('click','.product-dzut-co-hon',function(){var list=$('.box-da-dut').length;var question=list+1;if(is_login_gd<=0){$('#login-dialog p').removeClass('box-hide-pas');$('#login-dialog .txtPass').removeClass('box-hide-pas');$('#login-dialog .btn-success').text('ĐĂNG NHẬP');$('#login-dialog .box-radio-cop').hide();$('#login-dialog #is_guest_1').val('0');$('#login-dialog #is_guest_0').val('1');$('#login-dialog .modal-footer').removeClass('box-hide-pas');$('#login-dialog').modal('show');return false;}else if(list>=4){if(typeof list_of_dut_co_hon!='undefined'){$.each(list_of_dut_co_hon,function(key,value){var elm=$('.zdut-'+value);elm.addClass('box-da-dut');elm.find('.view').text('Đã dzựt');elm.find('.view').removeClass('product-dzut-co-hon');$('#product-'+value+'-wrapper .product').css({"z-index":"100","opacity":"0.8"});});}
$(".modal-tra-loi-end").modal('show');return false;}
$('#myModal-cauhoi').modal('show');$('#myModal-cauhoi .question-'+list).addClass('hidden');$('#myModal-cauhoi .question-'+question).removeClass('hidden');var el=$(this);var productDzutCoHon=(el.attr('rel'));$('#question').attr('rel',productDzutCoHon);});$('#is_question').click(function(){var list=$('.box-da-dut').length;var question=list+1;var available=4-question;if(list>=4){if(typeof list_of_dut_co_hon!='undefined'){$.each(list_of_dut_co_hon,function(key,value){var elm=$('.zdut-'+value);elm.addClass('box-da-dut');elm.find('.view').text('Đã dzựt');elm.find('.view').removeClass('product-dzut-co-hon');$('#product-'+value+'-wrapper .product').css({"z-index":"100","opacity":"0.8"});});}
$('#myModal-cauhoi').modal('hide');return false;}else{var serverAnswer=$('#myModal-cauhoi .question-'+question).attr('rel');var clientAnswer=$('#question').val();var productCohon=$('#question').attr('rel');if(clientAnswer==serverAnswer){$(".available_d").text(available);$(".modal-tra-loi-d").modal('show');var elm=$('.zdut-'+productCohon);$('#myModal-cauhoi').modal('hide');$('#product-'+productCohon+'-wrapper').addClass("has_ghost_day");elm.addClass('box-da-dut');elm.find('.view').text('Đã dzựt');elm.find('.view').removeClass('product-dzut-co-hon');$('#product-'+productCohon+'-wrapper .product').css({"z-index":"100","opacity":"0.8"});$('.campaign-main.campaign-dut-co-hon-2018 #product-'+value+'-wrapper').append('<div class="show-tooltip"> Kết quả của đợt này sẽ được công bố sau 1 giờ nữa!</div>');$.post(window.location.href,{productId:productCohon,checkKey:secret_key}).done(function(rs){})}else{$(".available_s").text(available);$(".answer_s").text(serverAnswer);$(".modal-tra-loi-s").modal('show');var elm=$('.zdut-'+productCohon);$('#myModal-cauhoi').modal('hide');$('#product-'+productCohon+'-wrapper').addClass("has_ghost_day");elm.addClass('box-da-dut');elm.find('.view').text('Dzựt hụt');elm.find('.view').removeClass('product-dzut-co-hon');$('#product-'+productCohon+'-wrapper .product').css({"z-index":"100","opacity":"0.8"});$('.campaign-main.campaign-dut-co-hon-2018 #product-'+value+'-wrapper').append('<div class="show-tooltip"> Kết quả của đợt này sẽ được công bố sau 1 giờ nữa!</div>');$.post(window.location.href,{fail:1,productId:productCohon,checkKey:secret_key}).done(function(rs){})}
$('#question').val('');return false;}});$('.campaign-dut-co-hon-2018 .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){var delay=1000+Math.random()*(5-1)*1000;setTimeout(function(){window.location.reload()},Math.round(delay));}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){var delay=1000+Math.random()*(5-1)*1000;setTimeout(function(){window.location.reload()},Math.round(delay));}}},1000);}});$('.__btn-login').on('click','._btn-login',function(){if(is_login_gd<=0){$('#login-dialog p').removeClass('box-hide-pas');$('#login-dialog .txtPass').removeClass('box-hide-pas');$('#login-dialog .btn-success').text('ĐĂNG NHẬP');$('#login-dialog .box-radio-cop').hide();$('#login-dialog #is_guest_1').val('0');$('#login-dialog #is_guest_0').val('1');$('#login-dialog .modal-footer').removeClass('box-hide-pas');$('#login-dialog').modal('show');return false;}});}
$('.cartCombo').click(function(){var submitClass=$(this).attr('rel');var submitValue=$('.'+submitClass).serialize();var listProductId=submitValue['listProductId'];$.ajax({type:'POST',url:'/ajax?api=cart.add',data:submitValue,success:function(data){if(data.error==0){loadCart(listProductId);}
$('.header-cart .nav-cart > a[data-toggle="dropdown"]').dropdown('toggle');}});})
if($('.gio-vang-countdown.only-one-list-deal').length){$('.campaign-gio-vang-san-deal .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.countdown';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-20-11-2017 .datediff').length){$('.campaign-20-11-2017 .datediff .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-world-cup-2108').length){setInterval(function(){$('.match-').removeClass('in_match');},60000);setInterval(function(){var idOrder=[];var table=$(".tb-scroll");table.find('.match-').each(function(i,el){var tds=$(this).data('match');idOrder.push(tds);});$.ajax({type:'POST',url:'/ajax?api=campaigns.getListUserBetRealTime',dataType:'json',data:{idOrder:idOrder},success:function(data){if(data.error!=1){var dataMatch=data.data.data;if(dataMatch!=undefined){$.each(dataMatch,function(index,value){$('.tb-scroll').append('<tr class="match- in_match live-'+value.id+'" data-match="'+value.id+'"><td class="wc-email">'+value.email+'</td><td class="wc-team">'+value.flag.home_name+' - '+value.flag.away_name+'</td><td class="wc-result">'+'<span><img src="'+value.flag.home+'">'+value.goals_home_team+' - '+value.goals_away_team+'</span><span><img src="'+value.flag.away+'"></span></td><td class="wc-time">'+value.modified_time+'</td></tr>');});}}}});$('.scroll-tab').animate({scrollTop:($('.match-').last().offset().top)},500);},10000);$('.campaign-world-cup-2108 .countdown').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.matchCD-'+txtClass:'.countdown';if(status!='stop'){setInterval(function(){current=current+1;setCountDown(current,end,txtClass);if(current==start-1){window.location.reload();}},1000);}});if(is_in_match!=0){setInterval(function(){$.ajax({type:'POST',url:'/ajax?api=campaigns.resultRealTimeWC',data:{matchId:is_in_match},success:function(data){if(data.error==0){var result=data.data.data;var homegoal=result.home_team.goals;var awaygoal=result.away_team.goals;var timein=result.time;$('.match-'+is_in_match).text(homegoal+'-'+awaygoal+' ( '+timein+' )');}else{window.location.reload();}}});},60000);}
$('.__listProductBet').on('click','.bt-play-now',function(){if(is_login_wc<=0){$('#login-dialog').modal('show');return false;}});$('.wc-step-login').on('click',function(){if(is_login_wc<=0){$('#login-popup-header').toggle("show");return false;}})}
if($('.campaign-vu-lan .datediff').length){$('.campaign-vu-lan .datediff .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-flash-sale-9-2018').length){$('.campaign-flash-sale-9-2018 .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDown(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-bao-sale-xa-kho').length){$('.btn-show-more').click(function(){$.blazy.revalidate();});$('.campaign-bao-sale-xa-kho .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDown(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-flash-sale-du-lich').length){$('.bt-read-more').click(function(){if($('.hide-more').length){$('.flag-hidden').addClass('hidden');$(this).text('Xem thêm');$(this).removeClass('hide-more');}else{$('.flag-hidden').removeClass('hidden');$(this).text('Ẩn đi');$(this).addClass('hide-more');}});function moveToSelected(element){if(element=="next"){var selected=$(".selected").next();}else if(element=="prev"){var selected=$(".selected").prev();}else{var selected=element;}
var next=$(selected).next();var prev=$(selected).prev();var prevSecond=$(prev).prev();var nextSecond=$(next).next();$(selected).removeClass().addClass("selected");$(prev).removeClass().addClass("prev");$(next).removeClass().addClass("next");$(nextSecond).removeClass().addClass("nextRightSecond");$(prevSecond).removeClass().addClass("prevLeftSecond");$(nextSecond).nextAll().removeClass().addClass('hideRight');$(prevSecond).prevAll().removeClass().addClass('hideLeft');}
$(document).keydown(function(e){switch(e.which){case 37:moveToSelected('prev');break;case 39:moveToSelected('next');break;default:return;}
e.preventDefault();});$('#carousel div').click(function(){moveToSelected($(this));});$('#prev').click(function(){moveToSelected('prev');});$('#next').click(function(){moveToSelected('next');});}
if($('.campaign-sale-spa').length){$('.campaign-sale-spa .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-20-10-18').length){$(document).on('click','.menu-scroll-tab-1 a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?25:50)},500);}});$(document).ready(function(){if(getCookie('showPopup')==''){$('.modal-auto').modal('show');setCookie('showPopup',1,1);}});}
if($('.campaign-single-day-2018').length){$(document).on('click','.menu-scroll-tab-1 a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?25:50)},500);}});$('.campaign-single-day-2018 .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-sn-hotdeal-page').length){$(document).ready(function(){if(getCookie('showPopup')==''){$('.modal-auto').modal('show');setCookie('showPopup',1,1);}});$(document).on('click','.menu-scroll-tab-1 a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?25:50)},500);}});}
if($('.campaign-black-friday-18').length){$(document).on('click','.menu-scroll-tab-1 a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?25:50)},500);}});$('.campaign-black-friday-18 .timer').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass='.block-countdown';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-spa-massage').length){$(document).on('click','.tab-scroll-to a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?25:50)},500);}});}
if($('.campaign-an-gi-sapa').length){$(document).on('click','.campaign-an-gi-sapa .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?205:150)},500);}});$('.content-location .bt-location').click(function(){$('.bt-location').removeClass('active');$('.tt-location').addClass('hidden');$(this).addClass('active');$(this).parent('.col-ct').find('.tt-location').removeClass('hidden');});$(window).scroll(function(){var sticky=$('.content-location'),scroll=$(window).scrollTop();if(scroll>=sticky.outerHeight()+(isMobile()==true?300:1100)){sticky.addClass('fixed-t');$('.bt-location').css('font-size','16px');$('.tt-location').addClass('mini-bar');}else{sticky.removeClass('fixed-t');$('.bt-location').css('font-size','30px');$('.tt-location').removeClass('mini-bar');}});}
if($('.campaign-online-friday-2018').length){$(document).on('click','.campaign-online-friday-2018 .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?205:150)},500);}});}
if($('.campaign-flash-sale-countdown').length){$(document).on('click','.campaign-flash-sale-countdown .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});}
if($('.campaign-spa-massage-19').length){$(document).on('click','.campaign-spa-massage-19 .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});}
if($('.campaign-valentine-trang').length){$(document).on('click','.campaign-valentine-trang .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});}
if($('.campaign-flash-sale-xuan-hn').length){$(document).on('click','.campaign-flash-sale-xuan-hn .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});}
if($('.campaign-halloween').length){$(document).on('click','.campaign-halloween .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});}
if($('.campaign-birthday-hotdeal .datediff').length){$('.campaign-birthday-hotdeal .datediff .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDown(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-sn-hotdeal').length){$('.count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-toc-trand-my-trieu').length){$(document).on('click','.selection .col-md-4',function(){var select_merchant=$(this).data('id');$('.col-md-4').removeClass('active-item');$(this).addClass('active-item');$('#selection').val(select_merchant);});$('#sumbit_txt').click(function(){var select=$('#selection').val();var email=$('#email_txt').val();$.ajax({url:"/ajax?api=promotion.submitEmailCatToc",dataType:'json',type:'POST',data:{email:email,select:select},success:function(res){if(res.error==0){alert(res.message);}else{alert(res.message);}}});});}
if($('.campaign-quoc-te-phu-nu-19').length){if(js_debug!=='1'){$(document).keydown(function(event){$(document).on("contextmenu",function(e){e.preventDefault();});if(event.keyCode==123){return false;}else if(event.ctrlKey&&event.shiftKey&&event.keyCode==73){return false;}});}
var clickDisabled=false;var imghasflower="https://s3-hd.hotdeal.vn/original/2019/3/0/5c7cd0c1a1f16-gio-hoa.png";var imgnoflower="https://s3-hd.hotdeal.vn/original/2019/3/0/5c7cd0c1a1e1f-gio.png";var basket=document.getElementById("basket");var enabled=false;var h=window.innerHeight,w=window.innerWidth,container=document.getElementById("container"),container1=document.getElementById("container1"),objects=70,counter=document.getElementById("counter");var max=w;var respons=0;if(w>1700)respons=210;if(w>1400&&w<=1700)respons=150;function moveBasket(e){var x=e.clientX;if(x>max){x=max;}
TweenMax.set(basket,{xPercent:-respons});TweenMax.to(basket,0.5,{x:x-100,ease:Power1.easenone});};function enableMovement(){if(enabled)return;enabled=true;container1.addEventListener("mousemove",moveBasket);};container1.addEventListener("mouseenter",enableMovement);$('.gio-hoa').click(function(){console.log(h);if(is_login<=0){$('#login-dialog').modal('show');return false;}else{if(isMobile()){alert('Game này hiện không hỗ trợ cho phiên bản Mobile! Quý khách vui lòng chơi trên trình duyệt Web máy tính');return;}
if(w<1000){alert('Game này hiện không hỗ trợ cho phiên bản Màn hình nhỏ ! Quý khách vui lòng mở to màn hình lên để chơi.');return;}
if(clickDisabled)
return;clickDisabled=true;getCount(0);}});function startGamePhuNu(shareFB){$('html, body').animate({scrollTop:$("#container").offset().top+(isMobile()==true?25:50)},500);$('html, body').css('overflowY','hidden');$('#main-nav-clone').addClass('hidden');$('#gio-hoa').addClass('hidden');$('#gio-hoa-1').addClass('hidden');$('.rose-flow').addClass('hidden');$('#basket').removeClass('hidden');$('#basket').css('background-image','url('+imgnoflower+')');$('#counter').text(0);cursorCountDown();setTimeout(function(){$('.block-game').css('cursor','crosshair');clickDisabled=false;gammeWomensDay(shareFB);},5000);}
function cursorCountDown(){setTimeout(function(){$('.block-game').removeClass('block-game-cursor-0');$('.block-game').addClass('block-game-cursor-3');},1000);setTimeout(function(){$('.block-game').removeClass('block-game-cursor-3');$('.block-game').addClass('block-game-cursor-2');},2000);setTimeout(function(){$('.block-game').removeClass('block-game-cursor-2');$('.block-game').addClass('block-game-cursor-1');},3000);setTimeout(function(){$('.block-game').removeClass('block-game-cursor-1');$('.block-game').addClass('block-game-cursor-0');},4000);}
var interval=null;function countdownWomens(){var time=20;interval=setInterval(function(){time--;if(time>=10&&time<20){$('#miss').text("00:"+time);}
else if(time>=0&&time<10){$('#miss').text("00:0"+time);}else{$('#miss').text("00:00");clearInterval(interval);}},1000);}
function gammeWomensDay(shareFB){countdownWomens();var point_txt=0;for(var i=0;i<objects;i++){var objectDiv=document.createElement('div');TweenMax.set(objectDiv,{attr:{class:'object'},x:R(0,w-w/3),y:R(-150,-100)});container.appendChild(objectDiv);}
function startObjectAnim(){for(var i=0;i<objects;i++){var objectDiv=document.getElementsByClassName("object")[i];fallingObject(objectDiv,i);}}
startObjectAnim();function fallingObject(element,delay){var objectTL=new TimelineMax();objectTL.set(element,{autoAlpha:1}).to(element,R(0.5,3),{y:h+50,ease:Linear.easeNone,onUpdate:checkHit,onUpdateParams:[element],repeat:0,delay:R(0.5,20)});}
function R(min,max){return min+Math.random()*(max-min)};function checkHit(element){var selectObject=element;if(Draggable.hitTest(selectObject,basket,"60%")){TweenMax.set(selectObject,{autoAlpha:0});TweenMax.killTweensOf(selectObject);point_txt++;if(parseInt(counter.textContent)<objects){counter.textContent=parseInt(counter.textContent)+1;checkHowManyCaught();}}}
function checkHowManyCaught(){var getCounter=parseInt(counter.textContent);if(getCounter===25){$('#basket').css('background-image','url('+imghasflower+')');}}
function killAllObjects(){for(var i=0;i<objects;i++){var killedObjects=document.getElementsByClassName("object")[i];TweenMax.set(killedObjects,{autoAlpha:0});TweenMax.set(killedObjects,{x:R(50,w),y:R(-150,-100)});TweenMax.killTweensOf(killedObjects);}}
setTimeout(function(){killAllObjects();$('#main-nav-clone').removeClass('hidden');$('html, body').css('overflowY','auto');$('#gio-hoa-1').removeClass('hidden');$('.rose-flow').removeClass('hidden');$('#basket').addClass('hidden');$('.block-game').css('cursor','default');var token=md5(token_game+point_txt);submitGetCodePhuNu(shareFB,point_txt,token);},21000);}
function getCount(is_shared){$.ajax({url:"/ajax?api=promotion.createCouponCodePhuNu2019",dataType:'json',data:{fb_shared:is_shared,},type:'POST',success:function(res){if(res.error==3){if(is_shared==1){$('.modal-het-luot-1').modal('show');$('.modal-het-luot').modal('hide');setTimeout(function(){clickDisabled=false;},20000);}else{$('.modal-het-luot').modal('show');setTimeout(function(){clickDisabled=false;},5000);}}else{if(is_shared==1){$('.modal-het-luot').modal('hide');startGamePhuNu(1);}else{startGamePhuNu(0);}}}});}
function submitGetCodePhuNu(is_shared,point_txt,token){var location_id=getCookie('city');$.ajax({url:"/ajax?api=promotion.createCouponCodePhuNu2019",dataType:'json',data:{fb_shared:is_shared,point:point_txt,location_id:location_id,token:token},type:'POST',success:function(res){var count=0;if(res.error==0){var money=res.data.data;setTimeout(function(){$('#money_txt').text(money);$('.modal-chuc-mung').modal('show');$('.count-txt').text('Bạn còn '+count+' lượt hái');},1000);}else if(res.error==3){$('.modal-het-luot').modal('show');}else{setTimeout(function(){$('.modal-tiec').modal('show');$('.count-txt').text('Bạn còn '+count+' lượt hái');},1000);}}});}
setInterval(function(){$.ajax({url:"/ajax?api=promotion.getUserPhuNu",dataType:'json',type:'POST',success:function(res){if(res.error==0){$('.text-nguoi-tham-gia span').remove();var name=res.data;var html='<span id="name-1" data-uid="'+name.uid[0]+'">'+name.name[0]+'</span><span id="name-2" data-uid="'+name.uid[1]+'" >'+name.name[1]+'</span><span id="name-3" data-uid="'+name.uid[2]+'">'+name.name[2]+'</span>';$('.text-nguoi-tham-gia').append(html);}}});},7000);$(".bt-share-fb").click(function(){if(is_login<=0){$('#login-dialog').modal('show');return false;}else{shareOnFBCampaignPhuNu(window.location.href);}});function shareOnFBCampaignPhuNu($url){FB.ui({method:'share',href:$url,},function(response){if(response&&!response.error_message){getCount(1);}});}
$('.campaign-quoc-te-phu-nu-19 .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDown(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDown(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});}
if($('.campaign-hai-loc-xuan').length){$(document).on('click','.text-note-game',function(){$('html, body').animate({scrollTop:$(".block-game").offset().top-(isMobile()==true?25:50)},500);});$('.block-game').on('click','span',function(){if(is_login<=0){$('#login-dialog').modal('show');return false;}else{$(this).addClass('block-game-ani');submitGetCode(0);}});setInterval(function(){$.ajax({url:"/ajax?api=promotion.getUserTet2019",dataType:'json',type:'POST',success:function(res){if(res.error==0){$('.text-nguoi-tham-gia span').remove();var name=res.data;var html='<span id="name-1" data-uid="'+name.uid[0]+'">'+name.name[0]+'</span><span id="name-2" data-uid="'+name.uid[1]+'" >'+name.name[1]+'</span><span id="name-3" data-uid="'+name.uid[2]+'">'+name.name[2]+'</span>';$('.text-nguoi-tham-gia').append(html);}}});},7000);$(".bt-share-fb").click(function(){if(is_login<=0){$('#login-dialog').modal('show');return false;}else{shareOnFBCampaignTet(window.location.href);}});$(".hai-tiep").click(function(){if(is_login<=0){$('#login-dialog').modal('show');return false;}else{$('.modal-chuc-mung').modal('hide');$('.modal-tiec').modal('hide');$('.lx-1').addClass('block-game-ani');submitGetCode(0);}});$('.campaign-hai-loc-xuan .count-downs').each(function(){var elCountdown=$(this);var status=elCountdown.data().status;var current=elCountdown.data().current;var start=elCountdown.data().start;var end=elCountdown.data().end;var txtClass=elCountdown.data().class;txtClass=txtClass!=''?'.'+txtClass:'.count-downs';if(status!='stop'){setInterval(function(){current=current+1;if(current<start){setCountDownDayHourMinute(current,start,txtClass);if(current==start-1){window.location.reload();}}else if(current>=start&&current<end){setCountDownDayHourMinute(current,end,txtClass);if(current==end-1){window.location.reload();}}},1000);}});function shareOnFBCampaignTet($url){FB.ui({method:'share',href:$url,},function(response){if(response&&!response.error_message){$('.modal-het-luot').modal('hide');console.log(response);submitGetCode(1);}});}
function submitGetCode(is_shared){$.ajax({url:"/ajax?api=promotion.createCouponCodeTet2019",dataType:'json',data:{fb_shared:is_shared,},type:'POST',success:function(res){var count=res.data.count;if(res.error==0){var money=res.data.data;setTimeout(function(){$('.block-game span').removeClass('block-game-ani');$('#money_txt').text(money);$('.modal-chuc-mung').modal('show');$('.count-txt').text('Bạn còn '+count+' lượt hái');},2000);}else if(res.error==3){$('.modal-het-luot').modal('show');$('.block-game span').removeClass('block-game-ani');}else{setTimeout(function(){$('.block-game span').removeClass('block-game-ani');$('.modal-tiec').modal('show');$('.count-txt').text('Bạn còn '+count+' lượt hái');},2000);}}});}}
if($('.campaign-sale-christmas').length){$(document).on('click','.campaign-sale-christmas .menu-scroll-tab a',function(){if($("#"+$(this).data().id).length>0){$('html, body').animate({scrollTop:$("#"+$(this).data().id).offset().top-(isMobile()==true?100:50)},500);}});if(isMobile()){labelsCounDown=['Giờ','Phút','Giây'];}
var labels=labelsCounDown,nextYear=dataDayNoel,template=_.template('<div class="time <%= label %>"><span class="count curr top"><%= curr %></span><span class="count next top"><%= next %></span><span class="count next bottom"><%= next %></span><span class="count curr bottom"><%= curr %></span><span class="label"><%= label.length < 6 ? label : label.substr(0, 3)  %></span></div>'),currDate='00:00:00:00:00',nextDate='00:00:00:00:00',parser=/([0-9]{2})/gi,$example=$('#main-example');function strfobj(str){var parsed=str.match(parser),obj={};labels.forEach(function(label,i){obj[label]=parsed[i]});return obj;}
function diff(obj1,obj2){var diff=[];labels.forEach(function(key){if(obj1[key]!==obj2[key]){diff.push(key);}});return diff;}
var initData=strfobj(currDate);labels.forEach(function(label,i){$example.append(template({curr:initData[label],next:initData[label],label:label}));});$example.countdown(nextYear,function(event){var newDate=event.strftime('%D:%H:%M:%S'),data;if(isMobile()){var newDate=event.strftime('%H:%M:%S'),data;}
if(newDate!==nextDate){currDate=nextDate;nextDate=newDate;data={'curr':strfobj(currDate),'next':strfobj(nextDate)};diff(data.curr,data.next).forEach(function(label){var selector='.%s'.replace(/%s/,label),$node=$example.find(selector);$node.removeClass('flip');$node.find('.curr').text(data.curr[label]);$node.find('.next').text(data.next[label]);_.delay(function($node){$node.addClass('flip');},50,$node);});}});}
if($('.campaign-evoucher-t4').length){$('.check-hoantien').click(function(){if(evoucherIsLogin==0){$('#login-dialog').modal('show');}
else{$('.ht').modal('show');}})}
return;if($('.campaign-tang-iphone-x').length){$('.registerIphonex').click(function(){if(userLoginIphonex>0){alert("Bạn đã đăng ký chương trình");return false;}})}
if($('.iphonex-popup').length){$('#iphonex-popup').modal({show:true});}
if($('#u23-vietnam').length){$('#u23-vietnam').modal({show:true});}})
function debounceTime(fn,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){fn.apply(context,args);},delay);};}
function onChangeOptionHotDeal(id){$('.hotdeal-box-gift').removeClass('in');$('.hotdeal-box-gift').removeClass('active');$('.hotdeal-box-gift').addClass('hidden');$('.hotdeal-box-gift-'+id).addClass('active');$('.hotdeal-box-gift-'+id).addClass('in');$('.hotdeal-box-gift-'+id).removeClass('hidden');}
function onChangeToggleTable(e){}
function scrollToDiv(element){$('html, body').animate({scrollTop:$("div#"+element).offset().top-(isMobile()==true?25:50)},1000);};
!function(t){function e(){this.initialize.apply(this,arguments)}function o(o,i,a){function s(t,e,o,i,n){const s=Math.round(i/1.7320508);e.inactive()["setBorder"+o.camel.pos.f](i)["setBorder"+o.camel.pos.c1](s)["setBorder"+o.camel.pos.c2](s)["set"+o.camel.pos.p1](o.isTopLeft?-i:t.inner[o.size.p])["set"+o.camel.pos.c1](t.inner[o.size.c]/a.tipPosition-s).active().$.css("border-"+o.pos.f+"-color",n)}i.stop(!0,!0);var l,r;const p={position:"absolute",height:"0",width:"0",border:"solid 0 transparent"},c=new e(o),d=new e(i);if(d.setTop(-a.offsetY+(a.position&&a.position.indexOf("top")>=0?c.top-d.height:a.position&&a.position.indexOf("bottom")>=0?c.bottom:c.center.top-d.height/2)),d.setLeft(a.offsetX+(a.position&&a.position.indexOf("left")>=0?c.left-d.width:a.position&&a.position.indexOf("right")>=0?c.right:c.center.left-d.width/2)),a.tipSize>0){i.data("outerTip")&&(i.data("outerTip").remove(),i.removeData("outerTip")),i.data("innerTip")&&(i.data("innerTip").remove(),i.removeData("innerTip")),l=new e(t("<div>").css(p).appendTo(i)),r=new e(t("<div>").css(p).appendTo(i));for(var u,h=0;h<n.pos.length;h++){if(u=n.getRelativeNames(h),d.center[u.pos.c1]>=c[u.pos.c1]&&d.center[u.pos.c1]<=c[u.pos.c2])if(h%2===0){if(d[u.pos.o]>=c[u.pos.o]&&d[u.pos.f]>=c[u.pos.f])break}else if(d[u.pos.o]<=c[u.pos.o]&&d[u.pos.f]<=c[u.pos.f])break;u=null}u?(d["set"+u.camel.pos.p1](d[u.pos.p1]+(u.isTopLeft?1:-1)*(a.tipSize-d["border"+u.camel.pos.o])),s(d,l,u,a.tipSize,i.css("border-"+u.pos.o+"-color"),a.tipPosition),s(d,r,u,a.tipSize-2*d["border"+u.camel.pos.o],i.css("background-color"),a.tipPosition),i.data("outerTip",l.$).data("innerTip",r.$)):t.each([l.$,r.$],function(){this.remove()})}}function i(e,o){const i=e.data("balloon")&&e.data("balloon").get(0);return!(i&&(i===o.relatedTarget||t.contains(i,o.relatedTarget)))}const n={pos:t.extend(["top","bottom","left","right"],{camel:["Top","Bottom","Left","Right"]}),size:t.extend(["height","width"],{camel:["Height","Width"]}),getRelativeNames:function(t){const e={pos:{o:t,f:t%2===0?t+1:t-1,p1:t%2===0?t:t-1,p2:t%2===0?t+1:t,c1:2>t?2:0,c2:2>t?3:1},size:{p:2>t?0:1,c:2>t?1:0}},o={};for(var i in e){o[i]||(o[i]={});for(var a in e[i])o[i][a]=n[i][e[i][a]],o.camel||(o.camel={}),o.camel[i]||(o.camel[i]={}),o.camel[i][a]=n[i].camel[e[i][a]]}return o.isTopLeft=o.pos.o===o.pos.p1,o}};!function(){function o(t,e){if(null==e)return o(t,!0),o(t,!1);const i=n.getRelativeNames(e?0:2);return t[i.size.p]=t.$["outer"+i.camel.size.p](),t[i.pos.f]=t[i.pos.o]+t[i.size.p],t.center[i.pos.o]=t[i.pos.o]+t[i.size.p]/2,t.inner[i.pos.o]=t[i.pos.o]+t["border"+i.camel.pos.o],t.inner[i.size.p]=t.$["inner"+i.camel.size.p](),t.inner[i.pos.f]=t.inner[i.pos.o]+t.inner[i.size.p],t.inner.center[i.pos.o]=t.inner[i.pos.f]+t.inner[i.size.p]/2,t}const i={setBorder:function(t,e){return function(i){return this.$.css("border-"+t.toLowerCase()+"-width",i+"px"),this["border"+t]=i,this.isActive?o(this,e):this}},setPosition:function(t,e){return function(i){return this.$.css(t.toLowerCase(),i+"px"),this[t.toLowerCase()]=i,this.isActive?o(this,e):this}}};e.prototype={initialize:function(e){this.$=e,t.extend(!0,this,this.$.offset(),{center:{},inner:{center:{}}});for(var o=0;o<n.pos.length;o++)this["border"+n.pos.camel[o]]=parseInt(this.$.css("border-"+n.pos[o]+"-width"))||0;this.active()},active:function(){return this.isActive=!0,o(this),this},inactive:function(){return this.isActive=!1,this}};for(var a=0;a<n.pos.length;a++)e.prototype["setBorder"+n.pos.camel[a]]=i.setBorder(n.pos.camel[a],2>a),a%2===0&&(e.prototype["set"+n.pos.camel[a]]=i.setPosition(n.pos.camel[a],2>a))}(),t.fn.balloon=function(e){return this.one("mouseenter",function o(n){const a=t(this),s=this,l=a.on("mouseenter",function(t){i(a,t)&&a.showBalloon()}).off("mouseenter",o).showBalloon(e).data("balloon");l&&l.on("mouseleave",function(e){s===e.relatedTarget||t.contains(s,e.relatedTarget)||a.hideBalloon()}).on("mouseenter",function(e){s===e.relatedTarget||t.contains(s,e.relatedTarget)||(l.stop(!0,!0),a.showBalloon())})}).on("mouseleave",function(e){const o=t(this);i(o,e)&&o.hideBalloon()})},t.fn.showBalloon=function(e){var i,n;return(e||!this.data("options"))&&(null===t.balloon.defaults.css&&(t.balloon.defaults.css={}),this.data("options",t.extend(!0,{},t.balloon.defaults,e||{}))),e=this.data("options"),this.each(function(){var a;if(i=t(this),a=!i.data("balloon"),n=i.data("balloon")||t("<div>"),a||!n.data("active")){n.data("active",!0),clearTimeout(n.data("minLifetime"));const s=t.isFunction(e.contents)?e.contents.apply(this):e.contents||i.attr("title")||i.attr("alt");i.removeAttr("title"),!e.url&&""===s||null==s||(t.isFunction(e.contents)||(e.contents=s),e.url?n.data("ajaxDisabled")||(""!==s&&null!=s&&(e.html?n.empty().append(s):n.text(s)),clearTimeout(n.data("ajaxDelay")),n.data("ajaxDelay",setTimeout(function(){n.load(t.isFunction(e.url)?e.url.apply(i.get(0)):e.url,function(t,a,s){("success"===a||"notmodified"===a)&&(n.data("ajaxDisabled",!0),e.ajaxContentsMaxAge>=0&&setTimeout(function(){n.data("ajaxDisabled",!1)},e.ajaxContentsMaxAge),e.ajaxComplete&&e.ajaxComplete(t,a,s),o(i,n,e))})},e.ajaxDelay))):e.html?n.empty().append(s):n.text(s),a?(n.addClass(e.classname).css(e.css||{}).css({visibility:"hidden",position:"absolute"}).appendTo("body"),i.data("balloon",n),o(i,n,e),n.hide().css("visibility","visible")):o(i,n,e),n.data("delay",setTimeout(function(){e.showAnimation?e.showAnimation.apply(n.stop(!0,!0),[e.showDuration,function(){e.showComplete&&e.showComplete.apply(n)}]):n.show(e.showDuration,function(){this.style.removeAttribute&&this.style.removeAttribute("filter"),e.showComplete&&e.showComplete.apply(n)}),e.maxLifetime&&(clearTimeout(n.data("maxLifetime")),n.data("maxLifetime",setTimeout(function(){i.hideBalloon()},e.maxLifetime)))},e.delay)))}})},t.fn.hideBalloon=function(){const e=this.data("options");return this.data("balloon")?this.each(function(){const o=t(this),i=o.data("balloon");clearTimeout(i.data("delay")),clearTimeout(i.data("minLifetime")),clearTimeout(i.data("ajaxDelay")),i.data("minLifetime",setTimeout(function(){e.hideAnimation?e.hideAnimation.apply(i.stop(!0,!0),[e.hideDuration,function(o){t(this).data("active",!1),e.hideComplete&&e.hideComplete(o)}]):i.stop(!0,!0).hide(e.hideDuration,function(o){t(this).data("active",!1),e.hideComplete&&e.hideComplete(o)})},e.minLifetime))}):this},t.balloon={defaults:{contents:null,html:!1,classname:null,url:null,ajaxComplete:null,ajaxDelay:500,ajaxContentsMaxAge:-1,delay:0,minLifetime:200,maxLifetime:0,position:"top",offsetX:0,offsetY:0,tipSize:8,tipPosition:2,showDuration:100,showAnimation:null,hideDuration:80,hideAnimation:function(t,e){this.fadeOut(t,e)},showComplete:null,hideComplete:null,css:{fontSize:".7rem",minWidth:".7rem",padding:".2rem .5rem",border:"1px solid rgba(212, 212, 212, .4)",borderRadius:"3px",boxShadow:"2px 2px 4px #555",color:"#eee",backgroundColor:"#111",opacity:.85,zIndex:"32767",textAlign:"left"}}}}(jQuery);;
(function(){var $window=$(window),flexslider={vars:{}};function getGridSize(){return(window.innerWidth<600)?2:(window.innerWidth<900)?4:6;}
function calculationAutoSlide()
{return window.innerWidth;}
$window.load(function(){var itemCnt=$('.flexslider-logo li').size();if(itemCnt<6){var isSlider=false;}
else{var isSlider=true;}
if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var isSlider=true;}
if(isSlider){$('.flexslider-logo').flexslider({animation:"slide",animationLoop:true,itemWidth:145,slideshow:true,itemMargin:0,move:1,directionNav:true,pauseOnAction:false,minItems:getGridSize(),maxItems:getGridSize(),});}});$window.resize(function(){var gridSize=getGridSize();flexslider.vars.minItems=gridSize;flexslider.vars.maxItems=gridSize;});}());;